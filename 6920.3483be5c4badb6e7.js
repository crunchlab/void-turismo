var Sa=Math.pow;(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6920],{3132:function(Fs,ta,Pn){var Ri;Fs=Pn.nmd(Fs),function(){var he,Jt="Expected a function",hr="__lodash_hash_undefined__",xi="__lodash_placeholder__",fr=1/0,bi=9007199254740991,Ki=4294967295,Ji=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ir="[object Arguments]",nn="[object Array]",ho="[object Boolean]",Qi="[object Date]",fo="[object Error]",pi="[object Function]",Mr="[object GeneratorFunction]",Ar="[object Map]",er="[object Number]",ni="[object Object]",ra="[object Promise]",Ui="[object RegExp]",Hn="[object Set]",mo="[object String]",dr="[object Symbol]",Ca="[object WeakMap]",Po="[object ArrayBuffer]",Qr="[object DataView]",ja="[object Float32Array]",oa="[object Float64Array]",Wa="[object Int8Array]",zo="[object Int16Array]",Ea="[object Int32Array]",Ta="[object Uint8Array]",Ha="[object Uint8ClampedArray]",Xa="[object Uint16Array]",ko="[object Uint32Array]",Ya=/\b__p \+= '';/g,Ia=/\b(__p \+=) '' \+/g,Ka=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ja=/&(?:amp|lt|gt|quot|#39);/g,Bn=/[&<>"']/g,F=RegExp(Ja.source),G=RegExp(Bn.source),j=/<%-([\s\S]+?)%>/g,ee=/<%([\s\S]+?)%>/g,ie=/<%=([\s\S]+?)%>/g,ge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,be=/^\w*$/,me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ce=RegExp(te.source),$e=/^\s+/,Ye=/\s/,Ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qe=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,st=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gt=/[()=,{}\[\]\/\s]/,Ne=/\\(\\)?/g,Qe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ve=/\w*$/,At=/^[-+]0x[0-9a-f]+$/i,Pt=/^0b[01]+$/i,lt=/^\[object .+?Constructor\]$/,mn=/^0o[0-7]+$/i,Vt=/^(?:0|[1-9]\d*)$/,wn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hn=/($^)/,Yt=/['\n\r\u2028\u2029\\]/g,rn="\\ud800-\\udfff",eo="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",$t="\\u2700-\\u27bf",aa="a-z\\xdf-\\xf6\\xf8-\\xff",Do="A-Z\\xc0-\\xd6\\xd8-\\xde",Zn="\\ufe0e\\ufe0f",to="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gn="["+rn+"]",Vi="["+to+"]",ii="["+eo+"]",Pi="\\d+",Lo="["+$t+"]",uu="["+aa+"]",Pr="[^"+rn+to+Pi+$t+aa+Do+"]",Us="\\ud83c[\\udffb-\\udfff]",ri="[^"+rn+"]",Gn="(?:\\ud83c[\\udde6-\\uddff]){2}",sa="[\\ud800-\\udbff][\\udc00-\\udfff]",Ro="["+Do+"]",pu="(?:"+uu+"|"+Pr+")",Pl="(?:"+Ro+"|"+Pr+")",hu="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",zl="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",fu="(?:"+ii+"|"+Us+")?",Vs="["+Zn+"]?",kl=Vs+fu+"(?:\\u200d(?:"+[ri,Gn,sa].join("|")+")"+Vs+fu+")*",Zs="(?:"+[Lo,Gn,sa].join("|")+")"+kl,Dl="(?:"+[ri+ii+"?",ii,Gn,sa,gn].join("|")+")",$i=RegExp("['\u2019]","g"),Pa=RegExp(ii,"g"),go=RegExp(Us+"(?="+Us+")|"+Dl+kl,"g"),Gs=RegExp([Ro+"?"+uu+"+"+hu+"(?="+[Vi,Ro,"$"].join("|")+")",Pl+"+"+zl+"(?="+[Vi,Ro+pu,"$"].join("|")+")",Ro+"?"+pu+"+"+hu,Ro+"+"+zl,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pi,Zs].join("|"),"g"),la=RegExp("[\\u200d"+rn+eo+Zn+"]"),ua=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],no=-1,Ot={};Ot[ja]=Ot[oa]=Ot[Wa]=Ot[zo]=Ot[Ea]=Ot[Ta]=Ot[Ha]=Ot[Xa]=Ot[ko]=!0,Ot[Ir]=Ot[nn]=Ot[Po]=Ot[ho]=Ot[Qr]=Ot[Qi]=Ot[fo]=Ot[pi]=Ot[Ar]=Ot[er]=Ot[ni]=Ot[Ui]=Ot[Hn]=Ot[mo]=Ot[Ca]=!1;var vn={};vn[Ir]=vn[nn]=vn[Po]=vn[Qr]=vn[ho]=vn[Qi]=vn[ja]=vn[oa]=vn[Wa]=vn[zo]=vn[Ea]=vn[Ar]=vn[er]=vn[ni]=vn[Ui]=vn[Hn]=vn[mo]=vn[dr]=vn[Ta]=vn[Ha]=vn[Xa]=vn[ko]=!0,vn[fo]=vn[pi]=vn[Ca]=!1;var Ll={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ol=parseFloat,Rl=parseInt,js="object"==typeof global&&global&&global.Object===Object&&global,mu="object"==typeof self&&self&&self.Object===Object&&self,wi=js||mu||Function("return this")(),gu=ta&&!ta.nodeType&&ta,Fo=gu&&Fs&&!Fs.nodeType&&Fs,Qa=Fo&&Fo.exports===gu,Ws=Qa&&js.process,dn=function(){try{return Fo&&Fo.require&&Fo.require("util").types||Ws&&Ws.binding&&Ws.binding("util")}catch(Ue){}}(),Hs=dn&&dn.isArrayBuffer,No=dn&&dn.isDate,vo=dn&&dn.isMap,ca=dn&&dn.isRegExp,Uo=dn&&dn.isSet,Vo=dn&&dn.isTypedArray;function fi(ye,Ue,Le){switch(Le.length){case 0:return ye.call(Ue);case 1:return ye.call(Ue,Le[0]);case 2:return ye.call(Ue,Le[0],Le[1]);case 3:return ye.call(Ue,Le[0],Le[1],Le[2])}return ye.apply(Ue,Le)}function za(ye,Ue,Le,ht){for(var pt=-1,vt=null==ye?0:ye.length;++pt<vt;){var Nn=ye[pt];Ue(ht,Nn,Le(Nn),ye)}return ht}function oi(ye,Ue){for(var Le=-1,ht=null==ye?0:ye.length;++Le<ht&&!1!==Ue(ye[Le],Le,ye););return ye}function vu(ye,Ue){for(var Le=null==ye?0:ye.length;Le--&&!1!==Ue(ye[Le],Le,ye););return ye}function Sn(ye,Ue){for(var Le=-1,ht=null==ye?0:ye.length;++Le<ht;)if(!Ue(ye[Le],Le,ye))return!1;return!0}function zr(ye,Ue){for(var Le=-1,ht=null==ye?0:ye.length,pt=0,vt=[];++Le<ht;){var Nn=ye[Le];Ue(Nn,Le,ye)&&(vt[pt++]=Nn)}return vt}function ka(ye,Ue){return!(null==ye||!ye.length)&&mr(ye,Ue,0)>-1}function Xs(ye,Ue,Le){for(var ht=-1,pt=null==ye?0:ye.length;++ht<pt;)if(Le(Ue,ye[ht]))return!0;return!1}function Fn(ye,Ue){for(var Le=-1,ht=null==ye?0:ye.length,pt=Array(ht);++Le<ht;)pt[Le]=Ue(ye[Le],Le,ye);return pt}function $o(ye,Ue){for(var Le=-1,ht=Ue.length,pt=ye.length;++Le<ht;)ye[pt+Le]=Ue[Le];return ye}function Ys(ye,Ue,Le,ht){var pt=-1,vt=null==ye?0:ye.length;for(ht&&vt&&(Le=ye[++pt]);++pt<vt;)Le=Ue(Le,ye[pt],pt,ye);return Le}function Yu(ye,Ue,Le,ht){var pt=null==ye?0:ye.length;for(ht&&pt&&(Le=ye[--pt]);pt--;)Le=Ue(Le,ye[pt],pt,ye);return Le}function yo(ye,Ue){for(var Le=-1,ht=null==ye?0:ye.length;++Le<ht;)if(Ue(ye[Le],Le,ye))return!0;return!1}var pa=gs("length");function Fl(ye,Ue,Le){var ht;return Le(ye,function(pt,vt,Nn){if(Ue(pt,vt,Nn))return ht=vt,!1}),ht}function ha(ye,Ue,Le,ht){for(var pt=ye.length,vt=Le+(ht?1:-1);ht?vt--:++vt<pt;)if(Ue(ye[vt],vt,ye))return vt;return-1}function mr(ye,Ue,Le){return Ue==Ue?function(ye,Ue,Le){for(var ht=Le-1,pt=ye.length;++ht<pt;)if(ye[ht]===Ue)return ht;return-1}(ye,Ue,Le):ha(ye,qr,Le)}function gr(ye,Ue,Le,ht){for(var pt=Le-1,vt=ye.length;++pt<vt;)if(ht(ye[pt],Ue))return pt;return-1}function qr(ye){return ye!=ye}function Da(ye,Ue){var Le=null==ye?0:ye.length;return Le?Ul(ye,Ue)/Le:NaN}function gs(ye){return function(Ue){return null==Ue?he:Ue[ye]}}function Ks(ye){return function(Ue){return null==ye?he:ye[Ue]}}function yn(ye,Ue,Le,ht,pt){return pt(ye,function(vt,Nn,Qt){Le=ht?(ht=!1,vt):Ue(Le,vt,Nn,Qt)}),Le}function Ul(ye,Ue){for(var Le,ht=-1,pt=ye.length;++ht<pt;){var vt=Ue(ye[ht]);vt!==he&&(Le=Le===he?vt:Le+vt)}return Le}function La(ye,Ue){for(var Le=-1,ht=Array(ye);++Le<ye;)ht[Le]=Ue(Le);return ht}function Ku(ye){return ye&&ye.slice(0,rl(ye)+1).replace($e,"")}function qi(ye){return function(Ue){return ye(Ue)}}function Vl(ye,Ue){return Fn(Ue,function(Le){return ye[Le]})}function qo(ye,Ue){return ye.has(Ue)}function Js(ye,Ue){for(var Le=-1,ht=ye.length;++Le<ht&&mr(Ue,ye[Le],0)>-1;);return Le}function Qs(ye,Ue){for(var Le=ye.length;Le--&&mr(Ue,ye[Le],0)>-1;);return Le}function el(ye,Ue){for(var Le=ye.length,ht=0;Le--;)ye[Le]===Ue&&++ht;return ht}var vs=Ks({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),yu=Ks({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tl(ye){return"\\"+Ll[ye]}function ts(ye){return la.test(ye)}function fa(ye){var Ue=-1,Le=Array(ye.size);return ye.forEach(function(ht,pt){Le[++Ue]=[pt,ht]}),Le}function V(ye,Ue){return function(Le){return ye(Ue(Le))}}function Zr(ye,Ue){for(var Le=-1,ht=ye.length,pt=0,vt=[];++Le<ht;){var Nn=ye[Le];(Nn===Ue||Nn===xi)&&(ye[Le]=xi,vt[pt++]=Le)}return vt}function nl(ye){var Ue=-1,Le=Array(ye.size);return ye.forEach(function(ht){Le[++Ue]=ht}),Le}function io(ye){return ts(ye)?function(ye){for(var Ue=go.lastIndex=0;go.test(ye);)++Ue;return Ue}(ye):pa(ye)}function kr(ye){return ts(ye)?function(ye){return ye.match(go)||[]}(ye):function(ye){return ye.split("")}(ye)}function rl(ye){for(var Ue=ye.length;Ue--&&Ye.test(ye.charAt(Ue)););return Ue}var ol=Ks({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),xs=function ye(Ue){var s,Le=(Ue=null==Ue?wi:xs.defaults(wi.Object(),Ue,xs.pick(wi,Bo))).Array,ht=Ue.Date,pt=Ue.Error,vt=Ue.Function,Nn=Ue.Math,Qt=Ue.Object,sl=Ue.RegExp,is=Ue.String,nr=Ue.TypeError,$l=Le.prototype,Zo=Qt.prototype,Go=Ue["__core-js_shared__"],ai=vt.prototype.toString,Zt=Zo.hasOwnProperty,bu=0,di=(s=/[^.]+$/.exec(Go&&Go.keys&&Go.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"",Zi=Zo.toString,rt=ai.call(Qt),ll=wi._,ws=sl("^"+ai.call(Zt).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xo=Qa?Ue.Buffer:he,si=Ue.Symbol,Oa=Ue.Uint8Array,ir=xo?xo.allocUnsafe:he,ot=V(Qt.getPrototypeOf,Qt),rs=Qt.create,Ss=Zo.propertyIsEnumerable,vr=$l.splice,rr=si?si.isConcatSpreadable:he,Ra=si?si.iterator:he,ma=si?si.toStringTag:he,os=function(){try{var s=_l(Qt,"defineProperty");return s({},"",{}),s}catch(h){}}(),yr=Ue.clearTimeout!==wi.clearTimeout&&Ue.clearTimeout,Ba=ht&&ht.now!==wi.Date.now&&ht.now,ql=Ue.setTimeout!==wi.setTimeout&&Ue.setTimeout,Cs=Nn.ceil,Es=Nn.floor,Gr=Qt.getOwnPropertySymbols,Qu=xo?xo.isBuffer:he,zn=Ue.isFinite,an=$l.join,ro=V(Qt.keys,Qt),ln=Nn.max,In=Nn.min,Fa=ht.now,jr=Ue.parseInt,jo=Nn.random,Dr=$l.reverse,Wo=_l(Ue,"DataView"),et=_l(Ue,"Map"),Ct=_l(Ue,"Promise"),mi=_l(Ue,"Set"),Gi=_l(Ue,"WeakMap"),Lr=_l(Qt,"create"),zi=Gi&&new Gi,ki={},ec=xl(Wo),Ho=xl(et),_n=xl(Ct),gi=xl(mi),ul=xl(Gi),ga=si?si.prototype:he,Or=ga?ga.valueOf:he,or=ga?ga.toString:he;function J(s){if(Wn(s)&&!St(s)&&!(s instanceof Ht)){if(s instanceof Di)return s;if(Zt.call(s,"__wrapped__"))return Mp(s)}return new Di(s)}var Wr=function(){function s(){}return function(h){if(!Ln(h))return{};if(rs)return rs(h);s.prototype=h;var x=new s;return s.prototype=he,x}}();function Hr(){}function Di(s,h){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=he}function Ht(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ki,this.__views__=[]}function bo(s){var h=-1,x=null==s?0:s.length;for(this.clear();++h<x;){var I=s[h];this.set(I[0],I[1])}}function Co(s){var h=-1,x=null==s?0:s.length;for(this.clear();++h<x;){var I=s[h];this.set(I[0],I[1])}}function r(s){var h=-1,x=null==s?0:s.length;for(this.clear();++h<x;){var I=s[h];this.set(I[0],I[1])}}function k(s){var h=-1,x=null==s?0:s.length;for(this.__data__=new r;++h<x;)this.add(s[h])}function Q(s){var h=this.__data__=new Co(s);this.size=h.size}function d(s,h){var x=St(s),I=!x&&Jr(s),U=!x&&!I&&Jo(s),ne=!x&&!I&&!U&&ps(s),fe=x||I||U||ne,we=fe?La(s.length,is):[],Ie=we.length;for(var Ze in s)(h||Zt.call(s,Ze))&&(!fe||!("length"==Ze||U&&("offset"==Ze||"parent"==Ze)||ne&&("buffer"==Ze||"byteLength"==Ze||"byteOffset"==Ze)||zs(Ze,Ie)))&&we.push(Ze);return we}function b(s){var h=s.length;return h?s[tc(0,h-1)]:he}function C(s,h){return dc(oo(s),ae(h,0,s.length))}function M(s){return dc(oo(s))}function O(s,h,x){(x!==he&&!Ft(s[h],x)||x===he&&!(h in s))&&W(s,h,x)}function z(s,h,x){var I=s[h];(!Zt.call(s,h)||!Ft(I,x)||x===he&&!(h in s))&&W(s,h,x)}function R(s,h){for(var x=s.length;x--;)if(Ft(s[x][0],h))return x;return-1}function D(s,h,x,I){return Me(s,function(U,ne,fe){h(I,U,x(U),fe)}),I}function P(s,h){return s&&ao(h,_i(h),s)}function W(s,h,x){"__proto__"==h&&os?os(s,h,{configurable:!0,enumerable:!0,value:x,writable:!0}):s[h]=x}function K(s,h){for(var x=-1,I=h.length,U=Le(I),ne=null==s;++x<I;)U[x]=ne?he:Gu(s,h[x]);return U}function ae(s,h,x){return s==s&&(x!==he&&(s=s<=x?s:x),h!==he&&(s=s>=h?s:h)),s}function re(s,h,x,I,U,ne){var fe,we=1&h,Ie=2&h,Ze=4&h;if(x&&(fe=U?x(s,I,U,ne):x(s)),fe!==he)return fe;if(!Ln(s))return s;var je=St(s);if(je){if(fe=function(s){var h=s.length,x=new s.constructor(h);return h&&"string"==typeof s[0]&&Zt.call(s,"index")&&(x.index=s.index,x.input=s.input),x}(s),!we)return oo(s,fe)}else{var Xe=Kr(s),yt=Xe==pi||Xe==Mr;if(Jo(s))return Hp(s,we);if(Xe==ni||Xe==Ir||yt&&!U){if(fe=Ie||yt?{}:ch(s),!we)return Ie?function(s,h){return ao(s,lh(s),h)}(s,function(s,h){return s&&ao(h,cr(h),s)}(fe,s)):function(s,h){return ao(s,Cp(s),h)}(s,P(fe,s))}else{if(!vn[Xe])return U?s:{};fe=function(s,h,x){var I=s.constructor;switch(h){case Po:return ac(s);case ho:case Qi:return new I(+s);case Qr:return function(s,h){var x=h?ac(s.buffer):s.buffer;return new s.constructor(x,s.byteOffset,s.byteLength)}(s,x);case ja:case oa:case Wa:case zo:case Ea:case Ta:case Ha:case Xa:case ko:return ya(s,x);case Ar:case Hn:return new I;case er:case mo:return new I(s);case Ui:return function(s){var h=new s.constructor(s.source,Ve.exec(s));return h.lastIndex=s.lastIndex,h}(s);case dr:return function(s){return Or?Qt(Or.call(s)):{}}(s)}}(s,Xe,we)}}ne||(ne=new Q);var Mt=ne.get(s);if(Mt)return Mt;ne.set(s,fe),ou(s)?s.forEach(function(Ut){fe.add(re(Ut,h,x,Ut,s,ne))}):yc(s)&&s.forEach(function(Ut,pn){fe.set(pn,re(Ut,h,x,pn,s,ne))});var on=je?he:(Ze?Ie?Lc:Kl:Ie?cr:_i)(s);return oi(on||s,function(Ut,pn){on&&(Ut=s[pn=Ut]),z(fe,pn,re(Ut,h,x,pn,s,ne))}),fe}function _e(s,h,x){var I=x.length;if(null==s)return!I;for(s=Qt(s);I--;){var U=x[I],fe=s[U];if(fe===he&&!(U in s)||!(0,h[U])(fe))return!1}return!0}function ve(s,h,x){if("function"!=typeof s)throw new nr(Jt);return fc(function(){s.apply(he,x)},h)}function Ee(s,h,x,I){var U=-1,ne=ka,fe=!0,we=s.length,Ie=[],Ze=h.length;if(!we)return Ie;x&&(h=Fn(h,qi(x))),I?(ne=Xs,fe=!1):h.length>=200&&(ne=qo,fe=!1,h=new k(h));e:for(;++U<we;){var je=s[U],Xe=null==x?je:x(je);if(je=I||0!==je?je:0,fe&&Xe==Xe){for(var yt=Ze;yt--;)if(h[yt]===Xe)continue e;Ie.push(je)}else ne(h,Xe,I)||Ie.push(je)}return Ie}J.templateSettings={escape:j,evaluate:ee,interpolate:ie,variable:"",imports:{_:J}},(J.prototype=Hr.prototype).constructor=J,(Di.prototype=Wr(Hr.prototype)).constructor=Di,(Ht.prototype=Wr(Hr.prototype)).constructor=Ht,bo.prototype.clear=function(){this.__data__=Lr?Lr(null):{},this.size=0},bo.prototype.delete=function(s){var h=this.has(s)&&delete this.__data__[s];return this.size-=h?1:0,h},bo.prototype.get=function(s){var h=this.__data__;if(Lr){var x=h[s];return x===hr?he:x}return Zt.call(h,s)?h[s]:he},bo.prototype.has=function(s){var h=this.__data__;return Lr?h[s]!==he:Zt.call(h,s)},bo.prototype.set=function(s,h){var x=this.__data__;return this.size+=this.has(s)?0:1,x[s]=Lr&&h===he?hr:h,this},Co.prototype.clear=function(){this.__data__=[],this.size=0},Co.prototype.delete=function(s){var h=this.__data__,x=R(h,s);return!(x<0||(x==h.length-1?h.pop():vr.call(h,x,1),--this.size,0))},Co.prototype.get=function(s){var h=this.__data__,x=R(h,s);return x<0?he:h[x][1]},Co.prototype.has=function(s){return R(this.__data__,s)>-1},Co.prototype.set=function(s,h){var x=this.__data__,I=R(x,s);return I<0?(++this.size,x.push([s,h])):x[I][1]=h,this},r.prototype.clear=function(){this.size=0,this.__data__={hash:new bo,map:new(et||Co),string:new bo}},r.prototype.delete=function(s){var h=_a(this,s).delete(s);return this.size-=h?1:0,h},r.prototype.get=function(s){return _a(this,s).get(s)},r.prototype.has=function(s){return _a(this,s).has(s)},r.prototype.set=function(s,h){var x=_a(this,s),I=x.size;return x.set(s,h),this.size+=x.size==I?0:1,this},k.prototype.add=k.prototype.push=function(s){return this.__data__.set(s,hr),this},k.prototype.has=function(s){return this.__data__.has(s)},Q.prototype.clear=function(){this.__data__=new Co,this.size=0},Q.prototype.delete=function(s){var h=this.__data__,x=h.delete(s);return this.size=h.size,x},Q.prototype.get=function(s){return this.__data__.get(s)},Q.prototype.has=function(s){return this.__data__.has(s)},Q.prototype.set=function(s,h){var x=this.__data__;if(x instanceof Co){var I=x.__data__;if(!et||I.length<199)return I.push([s,h]),this.size=++x.size,this;x=this.__data__=new r(I)}return x.set(s,h),this.size=x.size,this};var Me=Jp(mt),De=Jp(_t,!0);function Oe(s,h){var x=!0;return Me(s,function(I,U,ne){return x=!!h(I,U,ne)}),x}function xe(s,h,x){for(var I=-1,U=s.length;++I<U;){var ne=s[I],fe=h(ne);if(null!=fe&&(we===he?fe==fe&&!ur(fe):x(fe,we)))var we=fe,Ie=ne}return Ie}function Re(s,h){var x=[];return Me(s,function(I,U,ne){h(I,U,ne)&&x.push(I)}),x}function ke(s,h,x,I,U){var ne=-1,fe=s.length;for(x||(x=ph),U||(U=[]);++ne<fe;){var we=s[ne];h>0&&x(we)?h>1?ke(we,h-1,x,I,U):$o(U,we):I||(U[U.length]=we)}return U}var We=Qp(),Ke=Qp(!0);function mt(s,h){return s&&We(s,h,_i)}function _t(s,h){return s&&Ke(s,h,_i)}function Be(s,h){return zr(h,function(x){return Ur(s[x])})}function it(s,h){for(var x=0,I=(h=ss(h,s)).length;null!=s&&x<I;)s=s[ls(h[x++])];return x&&x==I?s:he}function ft(s,h,x){var I=h(s);return St(s)?I:$o(I,x(s))}function wt(s){return null==s?s===he?"[object Undefined]":"[object Null]":ma&&ma in Qt(s)?function(s){var h=Zt.call(s,ma),x=s[ma];try{s[ma]=he;var I=!0}catch(ne){}var U=Zi.call(s);return I&&(h?s[ma]=x:delete s[ma]),U}(s):function(s){return Zi.call(s)}(s)}function qt(s,h){return s>h}function Xo(s,h){return null!=s&&Zt.call(s,h)}function xr(s,h){return null!=s&&h in Qt(s)}function Xr(s,h,x){for(var I=x?Xs:ka,U=s[0].length,ne=s.length,fe=ne,we=Le(ne),Ie=1/0,Ze=[];fe--;){var je=s[fe];fe&&h&&(je=Fn(je,qi(h))),Ie=In(je.length,Ie),we[fe]=!x&&(h||U>=120&&je.length>=120)?new k(fe&&je):he}je=s[0];var Xe=-1,yt=we[0];e:for(;++Xe<U&&Ze.length<Ie;){var Mt=je[Xe],Nt=h?h(Mt):Mt;if(Mt=x||0!==Mt?Mt:0,!(yt?qo(yt,Nt):I(Ze,Nt,x))){for(fe=ne;--fe;){var on=we[fe];if(!(on?qo(on,Nt):I(s[fe],Nt,x)))continue e}yt&&yt.push(Nt),Ze.push(Mt)}}return Ze}function Wi(s,h,x){var I=null==(s=dh(s,h=ss(h,s)))?s:s[ls(To(h))];return null==I?he:fi(I,s,x)}function Yr(s){return Wn(s)&&wt(s)==Ir}function br(s,h,x,I,U){return s===h||(null==s||null==h||!Wn(s)&&!Wn(h)?s!=s&&h!=h:function(s,h,x,I,U,ne){var fe=St(s),we=St(h),Ie=fe?nn:Kr(s),Ze=we?nn:Kr(h),je=(Ie=Ie==Ir?ni:Ie)==ni,Xe=(Ze=Ze==Ir?ni:Ze)==ni,yt=Ie==Ze;if(yt&&Jo(s)){if(!Jo(h))return!1;fe=!0,je=!1}if(yt&&!je)return ne||(ne=new Q),fe||ps(s)?ah(s,h,x,I,U,ne):function(s,h,x,I,U,ne,fe){switch(x){case Qr:if(s.byteLength!=h.byteLength||s.byteOffset!=h.byteOffset)return!1;s=s.buffer,h=h.buffer;case Po:return!(s.byteLength!=h.byteLength||!ne(new Oa(s),new Oa(h)));case ho:case Qi:case er:return Ft(+s,+h);case fo:return s.name==h.name&&s.message==h.message;case Ui:case mo:return s==h+"";case Ar:var we=fa;case Hn:if(we||(we=nl),s.size!=h.size&&!(1&I))return!1;var Ze=fe.get(s);if(Ze)return Ze==h;I|=2,fe.set(s,h);var je=ah(we(s),we(h),I,U,ne,fe);return fe.delete(s),je;case dr:if(Or)return Or.call(s)==Or.call(h)}return!1}(s,h,Ie,x,I,U,ne);if(!(1&x)){var Mt=je&&Zt.call(s,"__wrapped__"),Nt=Xe&&Zt.call(h,"__wrapped__");if(Mt||Nt){var on=Mt?s.value():s,Ut=Nt?h.value():h;return ne||(ne=new Q),U(on,Ut,x,I,ne)}}return!!yt&&(ne||(ne=new Q),function(s,h,x,I,U,ne){var fe=1&x,we=Kl(s),Ie=we.length;if(Ie!=Kl(h).length&&!fe)return!1;for(var Xe=Ie;Xe--;){var yt=we[Xe];if(!(fe?yt in h:Zt.call(h,yt)))return!1}var Mt=ne.get(s),Nt=ne.get(h);if(Mt&&Nt)return Mt==h&&Nt==s;var on=!0;ne.set(s,h),ne.set(h,s);for(var Ut=fe;++Xe<Ie;){var pn=s[yt=we[Xe]],bn=h[yt];if(I)var $a=fe?I(bn,pn,yt,h,s,ne):I(pn,bn,yt,s,h,ne);if(!($a===he?pn===bn||U(pn,bn,x,I,ne):$a)){on=!1;break}Ut||(Ut="constructor"==yt)}if(on&&!Ut){var ea=s.constructor,qa=h.constructor;ea!=qa&&"constructor"in s&&"constructor"in h&&!("function"==typeof ea&&ea instanceof ea&&"function"==typeof qa&&qa instanceof qa)&&(on=!1)}return ne.delete(s),ne.delete(h),on}(s,h,x,I,U,ne))}(s,h,x,I,br,U))}function Mn(s,h,x,I){var U=x.length,ne=U,fe=!I;if(null==s)return!ne;for(s=Qt(s);U--;){var we=x[U];if(fe&&we[2]?we[1]!==s[we[0]]:!(we[0]in s))return!1}for(;++U<ne;){var Ie=(we=x[U])[0],Ze=s[Ie],je=we[1];if(fe&&we[2]){if(Ze===he&&!(Ie in s))return!1}else{var Xe=new Q;if(I)var yt=I(Ze,je,Ie,s,h,Xe);if(!(yt===he?br(je,Ze,3,I,Xe):yt))return!1}}return!0}function An(s){return!(!Ln(s)||function(s){return!!di&&di in s}(s))&&(Ur(s)?ws:lt).test(xl(s))}function Ac(s){return"function"==typeof s?s:null==s?wa:"object"==typeof s?St(s)?fp(s[0],s[1]):dl(s):rd(s)}function hl(s){if(!Cr(s))return ro(s);var h=[];for(var x in Qt(s))Zt.call(s,x)&&"constructor"!=x&&h.push(x);return h}function Cu(s,h){return s<h}function fl(s,h){var x=-1,I=ti(s)?Le(s.length):[];return Me(s,function(U,ne,fe){I[++x]=h(U,ne,fe)}),I}function dl(s){var h=yl(s);return 1==h.length&&h[0][2]?ar(h[0][0],h[0][1]):function(x){return x===s||Mn(x,s,h)}}function fp(s,h){return Ep(s)&&Ql(h)?ar(ls(s),h):function(x){var I=Gu(x,s);return I===he&&I===h?ba(x,s):br(h,I,3)}}function Eu(s,h,x,I,U){s!==h&&We(h,function(ne,fe){if(U||(U=new Q),Ln(ne))!function(s,h,x,I,U,ne,fe){var we=hc(s,x),Ie=hc(h,x),Ze=fe.get(Ie);if(Ze)O(s,x,Ze);else{var je=ne?ne(we,Ie,x+"",s,h,fe):he,Xe=je===he;if(Xe){var yt=St(Ie),Mt=!yt&&Jo(Ie),Nt=!yt&&!Mt&&ps(Ie);je=Ie,yt||Mt||Nt?St(we)?je=we:Kn(we)?je=oo(we):Mt?(Xe=!1,je=Hp(Ie,!0)):Nt?(Xe=!1,je=ya(Ie,!0)):je=[]:wl(Ie)||Jr(Ie)?(je=we,Jr(we)?je=$h(we):(!Ln(we)||Ur(we))&&(je=ch(Ie))):Xe=!1}Xe&&(fe.set(Ie,je),U(je,Ie,I,ne,fe),fe.delete(Ie)),O(s,x,je)}}(s,h,fe,x,Eu,I,U);else{var we=I?I(hc(s,fe),ne,fe+"",s,h,U):he;we===he&&(we=ne),O(s,fe,we)}},cr)}function Fr(s,h){var x=s.length;if(x)return zs(h+=h<0?x:0,x)?s[h]:he}function $p(s,h,x){h=h.length?Fn(h,function(ne){return St(ne)?function(fe){return it(fe,1===ne.length?ne[0]:ne)}:ne}):[wa];var I=-1;return h=Fn(h,qi(kt())),function(ye,Ue){var Le=ye.length;for(ye.sort(function(ne,fe){return function(s,h,x){for(var I=-1,U=s.criteria,ne=h.criteria,fe=U.length,we=x.length;++I<fe;){var Ie=Xp(U[I],ne[I]);if(Ie)return I>=we?Ie:Ie*("desc"==x[I]?-1:1)}return s.index-h.index}(ne,fe,x)});Le--;)ye[Le]=ye[Le].value;return ye}(fl(s,function(ne,fe,we){return{criteria:Fn(h,function(Ze){return Ze(ne)}),index:++I,value:ne}}))}function Zp(s,h,x){for(var I=-1,U=h.length,ne={};++I<U;){var fe=h[I],we=it(s,fe);x(we,fe)&&ic(ne,ss(fe,s),we)}return ne}function dp(s,h,x,I){var U=I?gr:mr,ne=-1,fe=h.length,we=s;for(s===h&&(h=oo(h)),x&&(we=Fn(s,qi(x)));++ne<fe;)for(var Ie=0,Ze=h[ne],je=x?x(Ze):Ze;(Ie=U(we,je,Ie,I))>-1;)we!==s&&vr.call(we,Ie,1),vr.call(s,Ie,1);return s}function Gp(s,h){for(var x=s?h.length:0,I=x-1;x--;){var U=h[x];if(x==I||U!==ne){var ne=U;zs(U)?vr.call(s,U,1):Iu(s,U)}}return s}function tc(s,h){return s+Es(jo()*(h-s+1))}function Tu(s,h){var x="";if(!s||h<1||h>bi)return x;do{h%2&&(x+=s),(h=Es(h/2))&&(s+=s)}while(h);return x}function en(s,h){return Uc(Tp(s,h,wa),s+"")}function ml(s){return b(su(s))}function nc(s,h){var x=su(s);return dc(x,ae(h,0,x.length))}function ic(s,h,x,I){if(!Ln(s))return s;for(var U=-1,ne=(h=ss(h,s)).length,fe=ne-1,we=s;null!=we&&++U<ne;){var Ie=ls(h[U]),Ze=x;if("__proto__"===Ie||"constructor"===Ie||"prototype"===Ie)return s;if(U!=fe){var je=we[Ie];(Ze=I?I(je,Ie,we):he)===he&&(Ze=Ln(je)?je:zs(h[U+1])?[]:{})}z(we,Ie,Ze),we=we[Ie]}return s}var jp=zi?function(s,h){return zi.set(s,h),s}:wa,ff=os?function(s,h){return os(s,"toString",{configurable:!0,enumerable:!1,value:Yf(h),writable:!0})}:wa;function df(s){return dc(su(s))}function va(s,h,x){var I=-1,U=s.length;h<0&&(h=-h>U?0:U+h),(x=x>U?U:x)<0&&(x+=U),U=h>x?0:x-h>>>0,h>>>=0;for(var ne=Le(U);++I<U;)ne[I]=s[I+h];return ne}function mf(s,h){var x;return Me(s,function(I,U,ne){return!(x=h(I,U,ne))}),!!x}function Pc(s,h,x){var I=0,U=null==s?I:s.length;if("number"==typeof h&&h==h&&U<=2147483647){for(;I<U;){var ne=I+U>>>1,fe=s[ne];null!==fe&&!ur(fe)&&(x?fe<=h:fe<h)?I=ne+1:U=ne}return U}return rc(s,h,wa,x)}function rc(s,h,x,I){var U=0,ne=null==s?0:s.length;if(0===ne)return 0;for(var fe=(h=x(h))!=h,we=null===h,Ie=ur(h),Ze=h===he;U<ne;){var je=Es((U+ne)/2),Xe=x(s[je]),yt=Xe!==he,Mt=null===Xe,Nt=Xe==Xe,on=ur(Xe);if(fe)var Ut=I||Nt;else Ut=Ze?Nt&&(I||yt):we?Nt&&yt&&(I||!Mt):Ie?Nt&&yt&&!Mt&&(I||!on):!Mt&&!on&&(I?Xe<=h:Xe<h);Ut?U=je+1:ne=je}return In(ne,4294967294)}function Wp(s,h){for(var x=-1,I=s.length,U=0,ne=[];++x<I;){var fe=s[x],we=h?h(fe):fe;if(!x||!Ft(we,Ie)){var Ie=we;ne[U++]=0===fe?0:fe}}return ne}function jl(s){return"number"==typeof s?s:ur(s)?NaN:+s}function Ko(s){if("string"==typeof s)return s;if(St(s))return Fn(s,Ko)+"";if(ur(s))return or?or.call(s):"";var h=s+"";return"0"==h&&1/s==-fr?"-0":h}function kn(s,h,x){var I=-1,U=ka,ne=s.length,fe=!0,we=[],Ie=we;if(x)fe=!1,U=Xs;else if(ne>=200){var Ze=h?null:rh(s);if(Ze)return nl(Ze);fe=!1,U=qo,Ie=new k}else Ie=h?[]:we;e:for(;++I<ne;){var je=s[I],Xe=h?h(je):je;if(je=x||0!==je?je:0,fe&&Xe==Xe){for(var yt=Ie.length;yt--;)if(Ie[yt]===Xe)continue e;h&&Ie.push(Xe),we.push(je)}else U(Ie,Xe,x)||(Ie!==we&&Ie.push(Xe),we.push(je))}return we}function Iu(s,h){return null==(s=dh(s,h=ss(h,s)))||delete s[ls(To(h))]}function mp(s,h,x,I){return ic(s,h,x(it(s,h)),I)}function Wl(s,h,x,I){for(var U=s.length,ne=I?U:-1;(I?ne--:++ne<U)&&h(s[ne],ne,s););return x?va(s,I?0:ne,I?ne+1:U):va(s,I?ne+1:0,I?U:ne)}function oc(s,h){var x=s;return x instanceof Ht&&(x=x.value()),Ys(h,function(I,U){return U.func.apply(U.thisArg,$o([I],U.args))},x)}function Hl(s,h,x){var I=s.length;if(I<2)return I?kn(s[0]):[];for(var U=-1,ne=Le(I);++U<I;)for(var fe=s[U],we=-1;++we<I;)we!=U&&(ne[U]=Ee(ne[U]||fe,s[we],h,x));return kn(ke(ne,1),h,x)}function gp(s,h,x){for(var I=-1,U=s.length,ne=h.length,fe={};++I<U;)x(fe,s[I],I<ne?h[I]:he);return fe}function zc(s){return Kn(s)?s:[]}function Xl(s){return"function"==typeof s?s:wa}function ss(s,h){return St(s)?s:Ep(s,h)?[s]:Ip(En(s))}var vp=en;function gl(s,h,x){var I=s.length;return x=x===he?I:x,!h&&x>=I?s:va(s,h,x)}var Mu=yr||function(s){return wi.clearTimeout(s)};function Hp(s,h){if(h)return s.slice();var x=s.length,I=ir?ir(x):new s.constructor(x);return s.copy(I),I}function ac(s){var h=new s.constructor(s.byteLength);return new Oa(h).set(new Oa(s)),h}function ya(s,h){var x=h?ac(s.buffer):s.buffer;return new s.constructor(x,s.byteOffset,s.length)}function Xp(s,h){if(s!==h){var x=s!==he,I=null===s,U=s==s,ne=ur(s),fe=h!==he,we=null===h,Ie=h==h,Ze=ur(h);if(!we&&!Ze&&!ne&&s>h||ne&&fe&&Ie&&!we&&!Ze||I&&fe&&Ie||!x&&Ie||!U)return 1;if(!I&&!ne&&!Ze&&s<h||Ze&&x&&U&&!I&&!ne||we&&x&&U||!fe&&U||!Ie)return-1}return 0}function Yp(s,h,x,I){for(var U=-1,ne=s.length,fe=x.length,we=-1,Ie=h.length,Ze=ln(ne-fe,0),je=Le(Ie+Ze),Xe=!I;++we<Ie;)je[we]=h[we];for(;++U<fe;)(Xe||U<ne)&&(je[x[U]]=s[U]);for(;Ze--;)je[we++]=s[U++];return je}function Kp(s,h,x,I){for(var U=-1,ne=s.length,fe=-1,we=x.length,Ie=-1,Ze=h.length,je=ln(ne-we,0),Xe=Le(je+Ze),yt=!I;++U<je;)Xe[U]=s[U];for(var Mt=U;++Ie<Ze;)Xe[Mt+Ie]=h[Ie];for(;++fe<we;)(yt||U<ne)&&(Xe[Mt+x[fe]]=s[U++]);return Xe}function oo(s,h){var x=-1,I=s.length;for(h||(h=Le(I));++x<I;)h[x]=s[x];return h}function ao(s,h,x,I){var U=!x;x||(x={});for(var ne=-1,fe=h.length;++ne<fe;){var we=h[ne],Ie=I?I(x[we],s[we],we,x,s):he;Ie===he&&(Ie=s[we]),U?W(x,we,Ie):z(x,we,Ie)}return x}function sc(s,h){return function(x,I){var U=St(x)?za:D,ne=h?h():{};return U(x,s,kt(I,2),ne)}}function Yl(s){return en(function(h,x){var I=-1,U=x.length,ne=U>1?x[U-1]:he,fe=U>2?x[2]:he;for(ne=s.length>3&&"function"==typeof ne?(U--,ne):he,fe&&so(x[0],x[1],fe)&&(ne=U<3?he:ne,U=1),h=Qt(h);++I<U;){var we=x[I];we&&s(h,we,I,ne)}return h})}function Jp(s,h){return function(x,I){if(null==x)return x;if(!ti(x))return s(x,I);for(var U=x.length,ne=h?U:-1,fe=Qt(x);(h?ne--:++ne<U)&&!1!==I(fe[ne],ne,fe););return x}}function Qp(s){return function(h,x,I){for(var U=-1,ne=Qt(h),fe=I(h),we=fe.length;we--;){var Ie=fe[s?we:++U];if(!1===x(ne[Ie],Ie,ne))break}return h}}function eh(s){return function(h){var x=ts(h=En(h))?kr(h):he,I=x?x[0]:h.charAt(0),U=x?gl(x,1).join(""):h.slice(1);return I[s]()+U}}function vl(s){return function(h){return Ys(nd(lf(h).replace($i,"")),s,"")}}function Ms(s){return function(){var h=arguments;switch(h.length){case 0:return new s;case 1:return new s(h[0]);case 2:return new s(h[0],h[1]);case 3:return new s(h[0],h[1],h[2]);case 4:return new s(h[0],h[1],h[2],h[3]);case 5:return new s(h[0],h[1],h[2],h[3],h[4]);case 6:return new s(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new s(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var x=Wr(s.prototype),I=s.apply(x,h);return Ln(I)?I:x}}function th(s){return function(h,x,I){var U=Qt(h);if(!ti(h)){var ne=kt(x,3);h=_i(h),x=function(we){return ne(U[we],we,U)}}var fe=s(h,x,I);return fe>-1?U[ne?h[fe]:fe]:he}}function nh(s){return Ps(function(h){var x=h.length,I=x,U=Di.prototype.thru;for(s&&h.reverse();I--;){var ne=h[I];if("function"!=typeof ne)throw new nr(Jt);if(U&&!fe&&"wrapper"==Jl(ne))var fe=new Di([],!0)}for(I=fe?I:x;++I<x;){var we=Jl(ne=h[I]),Ie="wrapper"==we?Oc(ne):he;fe=Ie&&ku(Ie[0])&&424==Ie[1]&&!Ie[4].length&&1==Ie[9]?fe[Jl(Ie[0])].apply(fe,Ie[3]):1==ne.length&&ku(ne)?fe[we]():fe.thru(ne)}return function(){var Ze=arguments,je=Ze[0];if(fe&&1==Ze.length&&St(je))return fe.plant(je).value();for(var Xe=0,yt=x?h[Xe].apply(this,Ze):je;++Xe<x;)yt=h[Xe].call(this,yt);return yt}})}function kc(s,h,x,I,U,ne,fe,we,Ie,Ze){var je=128&h,Xe=1&h,yt=2&h,Mt=24&h,Nt=512&h,on=yt?he:Ms(s);return function Ut(){for(var pn=arguments.length,bn=Le(pn),$a=pn;$a--;)bn[$a]=arguments[$a];if(Mt)var ea=sn(Ut),qa=el(bn,ea);if(I&&(bn=Yp(bn,I,U,Mt)),ne&&(bn=Kp(bn,ne,fe,Mt)),pn-=qa,Mt&&pn<Ze){var pr=Zr(bn,ea);return Sr(s,h,kc,Ut.placeholder,x,bn,pr,we,Ie,Ze-pn)}var Bs=Xe?x:this,lu=yt?Bs[s]:s;return pn=bn.length,we?bn=mh(bn,we):Nt&&pn>1&&bn.reverse(),je&&Ie<pn&&(bn.length=Ie),this&&this!==wi&&this instanceof Ut&&(lu=on||Ms(lu)),lu.apply(Bs,bn)}}function Pu(s,h){return function(x,I){return function(s,h,x,I){return mt(s,function(U,ne,fe){h(I,x(U),ne,fe)}),I}(x,s,h(I),{})}}function lc(s,h){return function(x,I){var U;if(x===he&&I===he)return h;if(x!==he&&(U=x),I!==he){if(U===he)return I;"string"==typeof x||"string"==typeof I?(x=Ko(x),I=Ko(I)):(x=jl(x),I=jl(I)),U=s(x,I)}return U}}function xp(s){return Ps(function(h){return h=Fn(h,qi(kt())),en(function(x){var I=this;return s(h,function(U){return fi(U,I,x)})})})}function Dc(s,h){var x=(h=h===he?" ":Ko(h)).length;if(x<2)return x?Tu(h,s):h;var I=Tu(h,Cs(s/io(h)));return ts(h)?gl(kr(I),0,s).join(""):I.slice(0,s)}function ih(s){return function(h,x,I){return I&&"number"!=typeof I&&so(h,x,I)&&(x=I=he),h=Os(h),x===he?(x=h,h=0):x=Os(x),function(s,h,x,I){for(var U=-1,ne=ln(Cs((h-s)/(x||1)),0),fe=Le(ne);ne--;)fe[I?ne:++U]=s,s+=x;return fe}(h,x,I=I===he?h<x?1:-1:Os(I),s)}}function uc(s){return function(h,x){return"string"==typeof h&&"string"==typeof x||(h=Ii(h),x=Ii(x)),s(h,x)}}function Sr(s,h,x,I,U,ne,fe,we,Ie,Ze){var je=8&h;h|=je?32:64,4&(h&=~(je?64:32))||(h&=-4);var on=[s,h,U,je?ne:he,je?fe:he,je?he:ne,je?he:fe,we,Ie,Ze],Ut=x.apply(he,on);return ku(s)&&Nc(Ut,on),Ut.placeholder=I,eu(Ut,s,h)}function bp(s){var h=Nn[s];return function(x,I){if(x=Ii(x),(I=null==I?0:In(jt(I),292))&&zn(x)){var U=(En(x)+"e").split("e");return+((U=(En(h(U[0]+"e"+(+U[1]+I)))+"e").split("e"))[0]+"e"+(+U[1]-I))}return h(x)}}var rh=mi&&1/nl(new mi([,-0]))[1]==fr?function(s){return new mi(s)}:Qf;function wp(s){return function(h){var x=Kr(h);return x==Ar?fa(h):x==Hn?function(ye){var Ue=-1,Le=Array(ye.size);return ye.forEach(function(ht){Le[++Ue]=[ht,ht]}),Le}(h):function(ye,Ue){return Fn(Ue,function(Le){return[Le,ye[Le]]})}(h,s(h))}}function As(s,h,x,I,U,ne,fe,we){var Ie=2&h;if(!Ie&&"function"!=typeof s)throw new nr(Jt);var Ze=I?I.length:0;if(Ze||(h&=-97,I=U=he),fe=fe===he?fe:ln(jt(fe),0),we=we===he?we:jt(we),Ze-=U?U.length:0,64&h){var je=I,Xe=U;I=U=he}var yt=Ie?he:Oc(s),Mt=[s,h,x,I,U,je,Xe,ne,fe,we];if(yt&&function(s,h){var x=s[1],I=h[1],U=x|I;if(!(U<131||(128==I&&8==x||128==I&&256==x&&s[7].length<=h[8]||384==I&&h[7].length<=h[8]&&8==x)))return s;1&I&&(s[2]=h[2],U|=1&x?0:4);var we=h[3];if(we){var Ie=s[3];s[3]=Ie?Yp(Ie,we,h[4]):we,s[4]=Ie?Zr(s[3],xi):h[4]}(we=h[5])&&(s[5]=(Ie=s[5])?Kp(Ie,we,h[6]):we,s[6]=Ie?Zr(s[5],xi):h[6]),(we=h[7])&&(s[7]=we),128&I&&(s[8]=null==s[8]?h[8]:In(s[8],h[8])),null==s[9]&&(s[9]=h[9]),s[0]=h[0],s[1]=U}(Mt,yt),s=Mt[0],h=Mt[1],x=Mt[2],I=Mt[3],U=Mt[4],!(we=Mt[9]=Mt[9]===he?Ie?0:s.length:ln(Mt[9]-Ze,0))&&24&h&&(h&=-25),h&&1!=h)Nt=8==h||16==h?function(s,h,x){var I=Ms(s);return function U(){for(var ne=arguments.length,fe=Le(ne),we=ne,Ie=sn(U);we--;)fe[we]=arguments[we];var Ze=ne<3&&fe[0]!==Ie&&fe[ne-1]!==Ie?[]:Zr(fe,Ie);return(ne-=Ze.length)<x?Sr(s,h,kc,U.placeholder,he,fe,Ze,he,he,x-ne):fi(this&&this!==wi&&this instanceof U?I:s,this,fe)}}(s,h,we):32!=h&&33!=h||U.length?kc.apply(he,Mt):function(s,h,x,I){var U=1&h,ne=Ms(s);return function fe(){for(var we=-1,Ie=arguments.length,Ze=-1,je=I.length,Xe=Le(je+Ie),yt=this&&this!==wi&&this instanceof fe?ne:s;++Ze<je;)Xe[Ze]=I[Ze];for(;Ie--;)Xe[Ze++]=arguments[++we];return fi(yt,U?x:this,Xe)}}(s,h,x,I);else var Nt=function(s,h,x){var I=1&h,U=Ms(s);return function ne(){return(this&&this!==wi&&this instanceof ne?U:s).apply(I?x:this,arguments)}}(s,h,x);return eu((yt?jp:Nc)(Nt,Mt),s,h)}function Sp(s,h,x,I){return s===he||Ft(s,Zo[x])&&!Zt.call(I,x)?h:s}function oh(s,h,x,I,U,ne){return Ln(s)&&Ln(h)&&(ne.set(h,s),Eu(s,h,he,oh,ne),ne.delete(h)),s}function bf(s){return wl(s)?he:s}function ah(s,h,x,I,U,ne){var fe=1&x,we=s.length,Ie=h.length;if(we!=Ie&&!(fe&&Ie>we))return!1;var Ze=ne.get(s),je=ne.get(h);if(Ze&&je)return Ze==h&&je==s;var Xe=-1,yt=!0,Mt=2&x?new k:he;for(ne.set(s,h),ne.set(h,s);++Xe<we;){var Nt=s[Xe],on=h[Xe];if(I)var Ut=fe?I(on,Nt,Xe,h,s,ne):I(Nt,on,Xe,s,h,ne);if(Ut!==he){if(Ut)continue;yt=!1;break}if(Mt){if(!yo(h,function(pn,bn){if(!qo(Mt,bn)&&(Nt===pn||U(Nt,pn,x,I,ne)))return Mt.push(bn)})){yt=!1;break}}else if(Nt!==on&&!U(Nt,on,x,I,ne)){yt=!1;break}}return ne.delete(s),ne.delete(h),yt}function Ps(s){return Uc(Tp(s,he,Sh),s+"")}function Kl(s){return ft(s,_i,Cp)}function Lc(s){return ft(s,cr,lh)}var Oc=zi?function(s){return zi.get(s)}:Qf;function Jl(s){for(var h=s.name+"",x=ki[h],I=Zt.call(ki,h)?x.length:0;I--;){var U=x[I],ne=U.func;if(null==ne||ne==s)return U.name}return h}function sn(s){return(Zt.call(J,"placeholder")?J:s).placeholder}function kt(){var s=J.iteratee||Kf;return s=s===Kf?Ac:s,arguments.length?s(arguments[0],arguments[1]):s}function _a(s,h){var x=s.__data__;return function(s){var h=typeof s;return"string"==h||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==s:null===s}(h)?x["string"==typeof h?"string":"hash"]:x.map}function yl(s){for(var h=_i(s),x=h.length;x--;){var I=h[x],U=s[I];h[x]=[I,U,Ql(U)]}return h}function _l(s,h){var x=function(ye,Ue){return null==ye?he:ye[Ue]}(s,h);return An(x)?x:he}var Cp=Gr?function(s){return null==s?[]:(s=Qt(s),zr(Gr(s),function(h){return Ss.call(s,h)}))}:ed,lh=Gr?function(s){for(var h=[];s;)$o(h,Cp(s)),s=ot(s);return h}:ed,Kr=wt;function uh(s,h,x){for(var I=-1,U=(h=ss(h,s)).length,ne=!1;++I<U;){var fe=ls(h[I]);if(!(ne=null!=s&&x(s,fe)))break;s=s[fe]}return ne||++I!=U?ne:!!(U=null==s?0:s.length)&&Ls(U)&&zs(fe,U)&&(St(s)||Jr(s))}function ch(s){return"function"!=typeof s.constructor||Cr(s)?{}:Wr(ot(s))}function ph(s){return St(s)||Jr(s)||!!(rr&&s&&s[rr])}function zs(s,h){var x=typeof s;return!!(h=null==h?bi:h)&&("number"==x||"symbol"!=x&&Vt.test(s))&&s>-1&&s%1==0&&s<h}function so(s,h,x){if(!Ln(x))return!1;var I=typeof h;return!!("number"==I?ti(x)&&zs(h,x.length):"string"==I&&h in x)&&Ft(x[h],s)}function Ep(s,h){if(St(s))return!1;var x=typeof s;return!("number"!=x&&"symbol"!=x&&"boolean"!=x&&null!=s&&!ur(s))||be.test(s)||!ge.test(s)||null!=h&&s in Qt(h)}function ku(s){var h=Jl(s),x=J[h];if("function"!=typeof x||!(h in Ht.prototype))return!1;if(s===x)return!0;var I=Oc(x);return!!I&&s===I[0]}(Wo&&Kr(new Wo(new ArrayBuffer(1)))!=Qr||et&&Kr(new et)!=Ar||Ct&&Kr(Ct.resolve())!=ra||mi&&Kr(new mi)!=Hn||Gi&&Kr(new Gi)!=Ca)&&(Kr=function(s){var h=wt(s),x=h==ni?s.constructor:he,I=x?xl(x):"";if(I)switch(I){case ec:return Qr;case Ho:return Ar;case _n:return ra;case gi:return Hn;case ul:return Ca}return h});var pc=Go?Ur:td;function Cr(s){var h=s&&s.constructor;return s===("function"==typeof h&&h.prototype||Zo)}function Ql(s){return s==s&&!Ln(s)}function ar(s,h){return function(x){return null!=x&&x[s]===h&&(h!==he||s in Qt(x))}}function Tp(s,h,x){return h=ln(h===he?s.length-1:h,0),function(){for(var I=arguments,U=-1,ne=ln(I.length-h,0),fe=Le(ne);++U<ne;)fe[U]=I[h+U];U=-1;for(var we=Le(h+1);++U<h;)we[U]=I[U];return we[h]=x(fe),fi(s,this,we)}}function dh(s,h){return h.length<2?s:it(s,va(h,0,-1))}function mh(s,h){for(var x=s.length,I=In(h.length,x),U=oo(s);I--;){var ne=h[I];s[I]=zs(ne,x)?U[ne]:he}return s}function hc(s,h){if(("constructor"!==h||"function"!=typeof s[h])&&"__proto__"!=h)return s[h]}var Nc=Vc(jp),fc=ql||function(s,h){return wi.setTimeout(s,h)},Uc=Vc(ff);function eu(s,h,x){var I=h+"";return Uc(s,function(s,h){var x=h.length;if(!x)return s;var I=x-1;return h[I]=(x>1?"& ":"")+h[I],h=h.join(x>2?", ":" "),s.replace(Ae,"{\n/* [wrapped with "+h+"] */\n")}(I,function(s,h){return oi(Ji,function(x){var I="_."+x[0];h&x[1]&&!ka(s,I)&&s.push(I)}),s.sort()}(function(s){var h=s.match(qe);return h?h[1].split(at):[]}(I),x)))}function Vc(s){var h=0,x=0;return function(){var I=Fa(),U=16-(I-x);if(x=I,U>0){if(++h>=800)return arguments[0]}else h=0;return s.apply(he,arguments)}}function dc(s,h){var x=-1,I=s.length,U=I-1;for(h=h===he?I:h;++x<h;){var ne=tc(x,U),fe=s[ne];s[ne]=s[x],s[x]=fe}return s.length=h,s}var h,x,Ip=(h=Cn(function(s){var h=[];return 46===s.charCodeAt(0)&&h.push(""),s.replace(me,function(x,I,U,ne){h.push(U?ne.replace(Ne,"$1"):I||x)}),h},function(I){return 500===x.size&&x.clear(),I}),x=h.cache,h);function ls(s){if("string"==typeof s||ur(s))return s;var h=s+"";return"0"==h&&1/s==-fr?"-0":h}function xl(s){if(null!=s){try{return ai.call(s)}catch(h){}try{return s+""}catch(h){}}return""}function Mp(s){if(s instanceof Ht)return s.clone();var h=new Di(s.__wrapped__,s.__chain__);return h.__actions__=oo(s.__actions__),h.__index__=s.__index__,h.__values__=s.__values__,h}var yh=en(function(s,h){return Kn(s)?Ee(s,ke(h,1,Kn,!0)):[]}),_h=en(function(s,h){var x=To(h);return Kn(x)&&(x=he),Kn(s)?Ee(s,ke(h,1,Kn,!0),kt(x,2)):[]}),$c=en(function(s,h){var x=To(h);return Kn(x)&&(x=he),Kn(s)?Ee(s,ke(h,1,Kn,!0),he,x):[]});function bh(s,h,x){var I=null==s?0:s.length;if(!I)return-1;var U=null==x?0:jt(x);return U<0&&(U=ln(I+U,0)),ha(s,kt(h,3),U)}function wh(s,h,x){var I=null==s?0:s.length;if(!I)return-1;var U=I-1;return x!==he&&(U=jt(x),U=x<0?ln(I+U,0):In(U,I-1)),ha(s,kt(h,3),U,!0)}function Sh(s){return null!=s&&s.length?ke(s,1):[]}function jc(s){return s&&s.length?s[0]:he}var Af=en(function(s){var h=Fn(s,zc);return h.length&&h[0]===s[0]?Xr(h):[]}),Pf=en(function(s){var h=To(s),x=Fn(s,zc);return h===To(x)?h=he:x.pop(),x.length&&x[0]===s[0]?Xr(x,kt(h,2)):[]}),zf=en(function(s){var h=To(s),x=Fn(s,zc);return(h="function"==typeof h?h:he)&&x.pop(),x.length&&x[0]===s[0]?Xr(x,he,h):[]});function To(s){var h=null==s?0:s.length;return h?s[h-1]:he}var mc=en(un);function un(s,h){return s&&s.length&&h&&h.length?dp(s,h):s}var Ru=Ps(function(s,h){var x=null==s?0:s.length,I=K(s,h);return Gp(s,Fn(h,function(U){return zs(U,x)?+U:U}).sort(Xp)),I});function zp(s){return null==s?s:Dr.call(s)}var vi=en(function(s){return kn(ke(s,1,Kn,!0))}),Un=en(function(s){var h=To(s);return Kn(h)&&(h=he),kn(ke(s,1,Kn,!0),kt(h,2))}),kh=en(function(s){var h=To(s);return h="function"==typeof h?h:he,kn(ke(s,1,Kn,!0),he,h)});function Xc(s){if(!s||!s.length)return[];var h=0;return s=zr(s,function(x){if(Kn(x))return h=ln(x.length,h),!0}),La(h,function(x){return Fn(s,gs(x))})}function Yc(s,h){if(!s||!s.length)return[];var x=Xc(s);return null==h?x:Fn(x,function(I){return fi(h,he,I)})}var nu=en(function(s,h){return Kn(s)?Ee(s,h):[]}),iu=en(function(s){return Hl(zr(s,Kn))}),Rh=en(function(s){var h=To(s);return Kn(h)&&(h=he),Hl(zr(s,Kn),kt(h,2))}),yi=en(function(s){var h=To(s);return h="function"==typeof h?h:he,Hl(zr(s,Kn),he,h)}),gc=en(Xc),Jc=en(function(s){var h=s.length,x=h>1?s[h-1]:he;return x="function"==typeof x?(s.pop(),x):he,Yc(s,x)});function Qc(s){var h=J(s);return h.__chain__=!0,h}function xa(s,h){return h(s)}var Bh=Ps(function(s){var h=s.length,x=h?s[0]:0,I=this.__wrapped__,U=function(ne){return K(ne,s)};return!(h>1||this.__actions__.length)&&I instanceof Ht&&zs(x)?((I=I.slice(x,+x+(h?1:0))).__actions__.push({func:xa,args:[U],thisArg:he}),new Di(I,this.__chain__).thru(function(ne){return h&&!ne.length&&ne.push(he),ne})):this.thru(U)}),n=sc(function(s,h,x){Zt.call(s,x)?++s[x]:W(s,x,1)}),m=th(bh),y=th(wh);function L(s,h){return(St(s)?oi:Me)(s,kt(h,3))}function B(s,h){return(St(s)?vu:De)(s,kt(h,3))}var Z=sc(function(s,h,x){Zt.call(s,x)?s[x].push(h):W(s,x,[h])}),oe=en(function(s,h,x){var I=-1,U="function"==typeof h,ne=ti(s)?Le(s.length):[];return Me(s,function(fe){ne[++I]=U?fi(h,fe,x):Wi(fe,h,x)}),ne}),se=sc(function(s,h,x){W(s,x,h)});function de(s,h){return(St(s)?Fn:fl)(s,kt(h,3))}var Se=sc(function(s,h,x){s[x?0:1].push(h)},function(){return[[],[]]}),xt=en(function(s,h){if(null==s)return[];var x=h.length;return x>1&&so(s,h[0],h[1])?h=[]:x>2&&so(h[0],h[1],h[2])&&(h=[h[0]]),$p(s,ke(h,1),[])}),nt=Ba||function(){return wi.Date.now()};function Et(s,h,x){return h=x?he:h,As(s,128,he,he,he,he,h=s&&null==h?s.length:h)}function ct(s,h){var x;if("function"!=typeof h)throw new nr(Jt);return s=jt(s),function(){return--s>0&&(x=h.apply(this,arguments)),s<=1&&(h=he),x}}var Bt=en(function(s,h,x){var I=1;if(x.length){var U=Zr(x,sn(Bt));I|=32}return As(s,I,h,x,U)}),zt=en(function(s,h,x){var I=3;if(x.length){var U=Zr(x,sn(zt));I|=32}return As(h,I,s,x,U)});function tn(s,h,x){var I,U,ne,fe,we,Ie,Ze=0,je=!1,Xe=!1,yt=!0;if("function"!=typeof s)throw new nr(Jt);function Mt(pr){var Bs=I,lu=U;return I=U=he,Ze=pr,fe=s.apply(lu,Bs)}function Nt(pr){return Ze=pr,we=fc(pn,h),je?Mt(pr):fe}function Ut(pr){var Bs=pr-Ie;return Ie===he||Bs>=h||Bs<0||Xe&&pr-Ze>=ne}function pn(){var pr=nt();if(Ut(pr))return bn(pr);we=fc(pn,function(pr){var od=h-(pr-Ie);return Xe?In(od,ne-(pr-Ze)):od}(pr))}function bn(pr){return we=he,yt&&I?Mt(pr):(I=U=he,fe)}function qa(){var pr=nt(),Bs=Ut(pr);if(I=arguments,U=this,Ie=pr,Bs){if(we===he)return Nt(Ie);if(Xe)return Mu(we),we=fc(pn,h),Mt(Ie)}return we===he&&(we=fc(pn,h)),fe}return h=Ii(h)||0,Ln(x)&&(je=!!x.leading,ne=(Xe="maxWait"in x)?ln(Ii(x.maxWait)||0,h):ne,yt="trailing"in x?!!x.trailing:yt),qa.cancel=function(){we!==he&&Mu(we),Ze=0,I=Ie=U=we=he},qa.flush=function(){return we===he?fe:bn(nt())},qa}var Vn=en(function(s,h){return ve(s,1,h)}),Yn=en(function(s,h,x){return ve(s,Ii(h)||0,x)});function Cn(s,h){if("function"!=typeof s||null!=h&&"function"!=typeof h)throw new nr(Jt);var x=function(){var I=arguments,U=h?h.apply(this,I):I[0],ne=x.cache;if(ne.has(U))return ne.get(U);var fe=s.apply(this,I);return x.cache=ne.set(U,fe)||ne,fe};return x.cache=new(Cn.Cache||r),x}function $n(s){if("function"!=typeof s)throw new nr(Jt);return function(){var h=arguments;switch(h.length){case 0:return!s.call(this);case 1:return!s.call(this,h[0]);case 2:return!s.call(this,h[0],h[1]);case 3:return!s.call(this,h[0],h[1],h[2])}return!s.apply(this,h)}}Cn.Cache=r;var Ei=vp(function(s,h){var x=(h=1==h.length&&St(h[0])?Fn(h[0],qi(kt())):Fn(ke(h,1),qi(kt()))).length;return en(function(I){for(var U=-1,ne=In(I.length,x);++U<ne;)I[U]=h[U].call(this,I[U]);return fi(s,this,I)})}),Hi=en(function(s,h){var x=Zr(h,sn(Hi));return As(s,32,he,h,x)}),Ti=en(function(s,h){var x=Zr(h,sn(Ti));return As(s,64,he,h,x)}),Er=Ps(function(s,h){return As(s,256,he,he,he,h)});function Ft(s,h){return s===h||s!=s&&h!=h}var us=uc(qt),Io=uc(function(s,h){return s>=h}),Jr=Yr(function(){return arguments}())?Yr:function(s){return Wn(s)&&Zt.call(s,"callee")&&!Ss.call(s,"callee")},St=Le.isArray,cs=Hs?qi(Hs):function(s){return Wn(s)&&wt(s)==Po};function ti(s){return null!=s&&Ls(s.length)&&!Ur(s)}function Kn(s){return Wn(s)&&ti(s)}var Jo=Qu||td,Ds=No?qi(No):function(s){return Wn(s)&&wt(s)==Qi};function Vu(s){if(!Wn(s))return!1;var h=wt(s);return h==fo||"[object DOMException]"==h||"string"==typeof s.message&&"string"==typeof s.name&&!wl(s)}function Ur(s){if(!Ln(s))return!1;var h=wt(s);return h==pi||h==Mr||"[object AsyncFunction]"==h||"[object Proxy]"==h}function $u(s){return"number"==typeof s&&s==jt(s)}function Ls(s){return"number"==typeof s&&s>-1&&s%1==0&&s<=bi}function Ln(s){var h=typeof s;return null!=s&&("object"==h||"function"==h)}function Wn(s){return null!=s&&"object"==typeof s}var yc=vo?qi(vo):function(s){return Wn(s)&&Kr(s)==Ar};function qu(s){return"number"==typeof s||Wn(s)&&wt(s)==er}function wl(s){if(!Wn(s)||wt(s)!=ni)return!1;var h=ot(s);if(null===h)return!0;var x=Zt.call(h,"constructor")&&h.constructor;return"function"==typeof x&&x instanceof x&&ai.call(x)==rt}var Sl=ca?qi(ca):function(s){return Wn(s)&&wt(s)==Ui},ou=Uo?qi(Uo):function(s){return Wn(s)&&Kr(s)==Hn};function Cl(s){return"string"==typeof s||!St(s)&&Wn(s)&&wt(s)==mo}function ur(s){return"symbol"==typeof s||Wn(s)&&wt(s)==dr}var ps=Vo?qi(Vo):function(s){return Wn(s)&&Ls(s.length)&&!!Ot[wt(s)]},Lp=uc(Cu),Vh=uc(function(s,h){return s<=h});function op(s){if(!s)return[];if(ti(s))return Cl(s)?kr(s):oo(s);if(Ra&&s[Ra])return function(ye){for(var Ue,Le=[];!(Ue=ye.next()).done;)Le.push(Ue.value);return Le}(s[Ra]());var h=Kr(s);return(h==Ar?fa:h==Hn?nl:su)(s)}function Os(s){return s?(s=Ii(s))===fr||s===-fr?17976931348623157e292*(s<0?-1:1):s==s?s:0:0===s?s:0}function jt(s){var h=Os(s),x=h%1;return h==h?x?h-x:h:0}function Jn(s){return s?ae(jt(s),0,Ki):0}function Ii(s){if("number"==typeof s)return s;if(ur(s))return NaN;if(Ln(s)){var h="function"==typeof s.valueOf?s.valueOf():s;s=Ln(h)?h+"":h}if("string"!=typeof s)return 0===s?s:+s;s=Ku(s);var x=Pt.test(s);return x||mn.test(s)?Rl(s.slice(2),x?2:8):At.test(s)?NaN:+s}function $h(s){return ao(s,cr(s))}function En(s){return null==s?"":Ko(s)}var qh=Yl(function(s,h){if(Cr(h)||ti(h))ao(h,_i(h),s);else for(var x in h)Zt.call(h,x)&&z(s,x,h[x])}),Sc=Yl(function(s,h){ao(h,cr(h),s)}),Qo=Yl(function(s,h,x,I){ao(h,cr(h),s,I)}),ap=Yl(function(s,h,x,I){ao(h,_i(h),s,I)}),Cc=Ps(K),lp=en(function(s,h){s=Qt(s);var x=-1,I=h.length,U=I>2?h[2]:he;for(U&&so(h[0],h[1],U)&&(I=1);++x<I;)for(var ne=h[x],fe=cr(ne),we=-1,Ie=fe.length;++we<Ie;){var Ze=fe[we],je=s[Ze];(je===he||Ft(je,Zo[Ze])&&!Zt.call(s,Ze))&&(s[Ze]=ne[Ze])}return s}),Op=en(function(s){return s.push(he,oh),fi(Rp,he,s)});function Gu(s,h,x){var I=null==s?he:it(s,h);return I===he?x:I}function ba(s,h){return null!=s&&uh(s,h,xr)}var Vf=Pu(function(s,h,x){null!=h&&"function"!=typeof h.toString&&(h=Zi.call(h)),s[h]=x},Yf(wa)),Kh=Pu(function(s,h,x){null!=h&&"function"!=typeof h.toString&&(h=Zi.call(h)),Zt.call(s,h)?s[h].push(x):s[h]=[x]},kt),au=en(Wi);function _i(s){return ti(s)?d(s):hl(s)}function cr(s){return ti(s)?d(s,!0):function(s){if(!Ln(s))return function(s){var h=[];if(null!=s)for(var x in Qt(s))h.push(x);return h}(s);var h=Cr(s),x=[];for(var I in s)"constructor"==I&&(h||!Zt.call(s,I))||x.push(I);return x}(s)}var Jh=Yl(function(s,h,x){Eu(s,h,x)}),Rp=Yl(function(s,h,x,I){Eu(s,h,x,I)}),Qh=Ps(function(s,h){var x={};if(null==s)return x;var I=!1;h=Fn(h,function(ne){return ne=ss(ne,s),I||(I=ne.length>1),ne}),ao(s,Lc(s),x),I&&(x=re(x,7,bf));for(var U=h.length;U--;)Iu(x,h[U]);return x}),Bp=Ps(function(s,h){return null==s?{}:function(s,h){return Zp(s,h,function(x,I){return ba(s,I)})}(s,h)});function up(s,h){if(null==s)return{};var x=Fn(Lc(s),function(I){return[I]});return h=kt(h),Zp(s,x,function(I,U){return h(I,U[0])})}var cp=wp(_i),Np=wp(cr);function su(s){return null==s?[]:Vl(s,_i(s))}var af=vl(function(s,h,x){return h=h.toLowerCase(),s+(x?sf(h):h)});function sf(s){return Xf(En(s).toLowerCase())}function lf(s){return(s=En(s))&&s.replace(wn,vs).replace(Pa,"")}var jf=vl(function(s,h,x){return s+(x?"-":"")+h.toLowerCase()}),Wf=vl(function(s,h,x){return s+(x?" ":"")+h.toLowerCase()}),Hf=eh("toLowerCase"),sd=vl(function(s,h,x){return s+(x?"_":"")+h.toLowerCase()}),ud=vl(function(s,h,x){return s+(x?" ":"")+Xf(h)}),_d=vl(function(s,h,x){return s+(x?" ":"")+h.toUpperCase()}),Xf=eh("toUpperCase");function nd(s,h,x){return s=En(s),(h=x?he:h)===he?function(ye){return ua.test(ye)}(s)?function(ye){return ye.match(Gs)||[]}(s):function(ye){return ye.match(st)||[]}(s):s.match(h)||[]}var id=en(function(s,h){try{return fi(s,he,h)}catch(x){return Vu(x)?x:new pt(x)}}),xd=Ps(function(s,h){return oi(h,function(x){x=ls(x),W(s,x,Bt(s[x],s))}),s});function Yf(s){return function(){return s}}var Cd=nh(),Ed=nh(!0);function wa(s){return s}function Kf(s){return Ac("function"==typeof s?s:re(s,1))}var Md=en(function(s,h){return function(x){return Wi(x,s,h)}}),Ad=en(function(s,h){return function(x){return Wi(s,x,h)}});function Jf(s,h,x){var I=_i(h),U=Be(h,I);null==x&&(!Ln(h)||!U.length&&I.length)&&(x=h,h=s,s=this,U=Be(h,_i(h)));var ne=!(Ln(x)&&"chain"in x&&!x.chain),fe=Ur(s);return oi(U,function(we){var Ie=h[we];s[we]=Ie,fe&&(s.prototype[we]=function(){var Ze=this.__chain__;if(ne||Ze){var je=s(this.__wrapped__),Xe=je.__actions__=oo(this.__actions__);return Xe.push({func:Ie,args:arguments,thisArg:s}),je.__chain__=Ze,je}return Ie.apply(s,$o([this.value()],arguments))})}),s}function Qf(){}var kd=xp(Fn),Dd=xp(Sn),Ld=xp(yo);function rd(s){return Ep(s)?gs(ls(s)):function(s){return function(h){return it(h,s)}}(s)}var Rd=ih(),Bd=ih(!0);function ed(){return[]}function td(){return!1}var Zd=lc(function(s,h){return s+h},0),Gd=bp("ceil"),jd=lc(function(s,h){return s/h},1),Wd=bp("floor"),em=lc(function(s,h){return s*h},1),tm=bp("round"),nm=lc(function(s,h){return s-h},0);return J.after=function(s,h){if("function"!=typeof h)throw new nr(Jt);return s=jt(s),function(){if(--s<1)return h.apply(this,arguments)}},J.ary=Et,J.assign=qh,J.assignIn=Sc,J.assignInWith=Qo,J.assignWith=ap,J.at=Cc,J.before=ct,J.bind=Bt,J.bindAll=xd,J.bindKey=zt,J.castArray=function(){if(!arguments.length)return[];var s=arguments[0];return St(s)?s:[s]},J.chain=Qc,J.chunk=function(s,h,x){h=(x?so(s,h,x):h===he)?1:ln(jt(h),0);var I=null==s?0:s.length;if(!I||h<1)return[];for(var U=0,ne=0,fe=Le(Cs(I/h));U<I;)fe[ne++]=va(s,U,U+=h);return fe},J.compact=function(s){for(var h=-1,x=null==s?0:s.length,I=0,U=[];++h<x;){var ne=s[h];ne&&(U[I++]=ne)}return U},J.concat=function(){var s=arguments.length;if(!s)return[];for(var h=Le(s-1),x=arguments[0],I=s;I--;)h[I-1]=arguments[I];return $o(St(x)?oo(x):[x],ke(h,1))},J.cond=function(s){var h=null==s?0:s.length,x=kt();return s=h?Fn(s,function(I){if("function"!=typeof I[1])throw new nr(Jt);return[x(I[0]),I[1]]}):[],en(function(I){for(var U=-1;++U<h;){var ne=s[U];if(fi(ne[0],this,I))return fi(ne[1],this,I)}})},J.conforms=function(s){return function(s){var h=_i(s);return function(x){return _e(x,s,h)}}(re(s,1))},J.constant=Yf,J.countBy=n,J.create=function(s,h){var x=Wr(s);return null==h?x:P(x,h)},J.curry=function Xt(s,h,x){var I=As(s,8,he,he,he,he,he,h=x?he:h);return I.placeholder=Xt.placeholder,I},J.curryRight=function bt(s,h,x){var I=As(s,16,he,he,he,he,he,h=x?he:h);return I.placeholder=bt.placeholder,I},J.debounce=tn,J.defaults=lp,J.defaultsDeep=Op,J.defer=Vn,J.delay=Yn,J.difference=yh,J.differenceBy=_h,J.differenceWith=$c,J.drop=function(s,h,x){var I=null==s?0:s.length;return I?va(s,(h=x||h===he?1:jt(h))<0?0:h,I):[]},J.dropRight=function(s,h,x){var I=null==s?0:s.length;return I?va(s,0,(h=I-(h=x||h===he?1:jt(h)))<0?0:h):[]},J.dropRightWhile=function(s,h){return s&&s.length?Wl(s,kt(h,3),!0,!0):[]},J.dropWhile=function(s,h){return s&&s.length?Wl(s,kt(h,3),!0):[]},J.fill=function(s,h,x,I){var U=null==s?0:s.length;return U?(x&&"number"!=typeof x&&so(s,h,x)&&(x=0,I=U),function(s,h,x,I){var U=s.length;for((x=jt(x))<0&&(x=-x>U?0:U+x),(I=I===he||I>U?U:jt(I))<0&&(I+=U),I=x>I?0:Jn(I);x<I;)s[x++]=h;return s}(s,h,x,I)):[]},J.filter=function(s,h){return(St(s)?zr:Re)(s,kt(h,3))},J.flatMap=function(s,h){return ke(de(s,h),1)},J.flatMapDeep=function(s,h){return ke(de(s,h),fr)},J.flatMapDepth=function(s,h,x){return x=x===he?1:jt(x),ke(de(s,h),x)},J.flatten=Sh,J.flattenDeep=function(s){return null!=s&&s.length?ke(s,fr):[]},J.flattenDepth=function(s,h){return null!=s&&s.length?ke(s,h=h===he?1:jt(h)):[]},J.flip=function(s){return As(s,512)},J.flow=Cd,J.flowRight=Ed,J.fromPairs=function(s){for(var h=-1,x=null==s?0:s.length,I={};++h<x;){var U=s[h];I[U[0]]=U[1]}return I},J.functions=function(s){return null==s?[]:Be(s,_i(s))},J.functionsIn=function(s){return null==s?[]:Be(s,cr(s))},J.groupBy=Z,J.initial=function(s){return null!=s&&s.length?va(s,0,-1):[]},J.intersection=Af,J.intersectionBy=Pf,J.intersectionWith=zf,J.invert=Vf,J.invertBy=Kh,J.invokeMap=oe,J.iteratee=Kf,J.keyBy=se,J.keys=_i,J.keysIn=cr,J.map=de,J.mapKeys=function(s,h){var x={};return h=kt(h,3),mt(s,function(I,U,ne){W(x,h(I,U,ne),I)}),x},J.mapValues=function(s,h){var x={};return h=kt(h,3),mt(s,function(I,U,ne){W(x,U,h(I,U,ne))}),x},J.matches=function(s){return dl(re(s,1))},J.matchesProperty=function(s,h){return fp(s,re(h,1))},J.memoize=Cn,J.merge=Jh,J.mergeWith=Rp,J.method=Md,J.methodOf=Ad,J.mixin=Jf,J.negate=$n,J.nthArg=function(s){return s=jt(s),en(function(h){return Fr(h,s)})},J.omit=Qh,J.omitBy=function(s,h){return up(s,$n(kt(h)))},J.once=function(s){return ct(2,s)},J.orderBy=function(s,h,x,I){return null==s?[]:(St(h)||(h=null==h?[]:[h]),St(x=I?he:x)||(x=null==x?[]:[x]),$p(s,h,x))},J.over=kd,J.overArgs=Ei,J.overEvery=Dd,J.overSome=Ld,J.partial=Hi,J.partialRight=Ti,J.partition=Se,J.pick=Bp,J.pickBy=up,J.property=rd,J.propertyOf=function(s){return function(h){return null==s?he:it(s,h)}},J.pull=mc,J.pullAll=un,J.pullAllBy=function(s,h,x){return s&&s.length&&h&&h.length?dp(s,h,kt(x,2)):s},J.pullAllWith=function(s,h,x){return s&&s.length&&h&&h.length?dp(s,h,he,x):s},J.pullAt=Ru,J.range=Rd,J.rangeRight=Bd,J.rearg=Er,J.reject=function(s,h){return(St(s)?zr:Re)(s,$n(kt(h,3)))},J.remove=function(s,h){var x=[];if(!s||!s.length)return x;var I=-1,U=[],ne=s.length;for(h=kt(h,3);++I<ne;){var fe=s[I];h(fe,I,s)&&(x.push(fe),U.push(I))}return Gp(s,U),x},J.rest=function(s,h){if("function"!=typeof s)throw new nr(Jt);return en(s,h=h===he?h:jt(h))},J.reverse=zp,J.sampleSize=function(s,h,x){return h=(x?so(s,h,x):h===he)?1:jt(h),(St(s)?C:nc)(s,h)},J.set=function(s,h,x){return null==s?s:ic(s,h,x)},J.setWith=function(s,h,x,I){return I="function"==typeof I?I:he,null==s?s:ic(s,h,x,I)},J.shuffle=function(s){return(St(s)?M:df)(s)},J.slice=function(s,h,x){var I=null==s?0:s.length;return I?(x&&"number"!=typeof x&&so(s,h,x)?(h=0,x=I):(h=null==h?0:jt(h),x=x===he?I:jt(x)),va(s,h,x)):[]},J.sortBy=xt,J.sortedUniq=function(s){return s&&s.length?Wp(s):[]},J.sortedUniqBy=function(s,h){return s&&s.length?Wp(s,kt(h,2)):[]},J.split=function(s,h,x){return x&&"number"!=typeof x&&so(s,h,x)&&(h=x=he),(x=x===he?Ki:x>>>0)?(s=En(s))&&("string"==typeof h||null!=h&&!Sl(h))&&!(h=Ko(h))&&ts(s)?gl(kr(s),0,x):s.split(h,x):[]},J.spread=function(s,h){if("function"!=typeof s)throw new nr(Jt);return h=null==h?0:ln(jt(h),0),en(function(x){var I=x[h],U=gl(x,0,h);return I&&$o(U,I),fi(s,this,U)})},J.tail=function(s){var h=null==s?0:s.length;return h?va(s,1,h):[]},J.take=function(s,h,x){return s&&s.length?va(s,0,(h=x||h===he?1:jt(h))<0?0:h):[]},J.takeRight=function(s,h,x){var I=null==s?0:s.length;return I?va(s,(h=I-(h=x||h===he?1:jt(h)))<0?0:h,I):[]},J.takeRightWhile=function(s,h){return s&&s.length?Wl(s,kt(h,3),!1,!0):[]},J.takeWhile=function(s,h){return s&&s.length?Wl(s,kt(h,3)):[]},J.tap=function(s,h){return h(s),s},J.throttle=function(s,h,x){var I=!0,U=!0;if("function"!=typeof s)throw new nr(Jt);return Ln(x)&&(I="leading"in x?!!x.leading:I,U="trailing"in x?!!x.trailing:U),tn(s,h,{leading:I,maxWait:h,trailing:U})},J.thru=xa,J.toArray=op,J.toPairs=cp,J.toPairsIn=Np,J.toPath=function(s){return St(s)?Fn(s,ls):ur(s)?[s]:oo(Ip(En(s)))},J.toPlainObject=$h,J.transform=function(s,h,x){var I=St(s),U=I||Jo(s)||ps(s);if(h=kt(h,4),null==x){var ne=s&&s.constructor;x=U?I?new ne:[]:Ln(s)&&Ur(ne)?Wr(ot(s)):{}}return(U?oi:mt)(s,function(fe,we,Ie){return h(x,fe,we,Ie)}),x},J.unary=function(s){return Et(s,1)},J.union=vi,J.unionBy=Un,J.unionWith=kh,J.uniq=function(s){return s&&s.length?kn(s):[]},J.uniqBy=function(s,h){return s&&s.length?kn(s,kt(h,2)):[]},J.uniqWith=function(s,h){return h="function"==typeof h?h:he,s&&s.length?kn(s,he,h):[]},J.unset=function(s,h){return null==s||Iu(s,h)},J.unzip=Xc,J.unzipWith=Yc,J.update=function(s,h,x){return null==s?s:mp(s,h,Xl(x))},J.updateWith=function(s,h,x,I){return I="function"==typeof I?I:he,null==s?s:mp(s,h,Xl(x),I)},J.values=su,J.valuesIn=function(s){return null==s?[]:Vl(s,cr(s))},J.without=nu,J.words=nd,J.wrap=function(s,h){return Hi(Xl(h),s)},J.xor=iu,J.xorBy=Rh,J.xorWith=yi,J.zip=gc,J.zipObject=function(s,h){return gp(s||[],h||[],z)},J.zipObjectDeep=function(s,h){return gp(s||[],h||[],ic)},J.zipWith=Jc,J.entries=cp,J.entriesIn=Np,J.extend=Sc,J.extendWith=Qo,Jf(J,J),J.add=Zd,J.attempt=id,J.camelCase=af,J.capitalize=sf,J.ceil=Gd,J.clamp=function(s,h,x){return x===he&&(x=h,h=he),x!==he&&(x=(x=Ii(x))==x?x:0),h!==he&&(h=(h=Ii(h))==h?h:0),ae(Ii(s),h,x)},J.clone=function(s){return re(s,4)},J.cloneDeep=function(s){return re(s,5)},J.cloneDeepWith=function(s,h){return re(s,5,h="function"==typeof h?h:he)},J.cloneWith=function(s,h){return re(s,4,h="function"==typeof h?h:he)},J.conformsTo=function(s,h){return null==h||_e(s,h,_i(h))},J.deburr=lf,J.defaultTo=function(s,h){return null==s||s!=s?h:s},J.divide=jd,J.endsWith=function(s,h,x){s=En(s),h=Ko(h);var I=s.length,U=x=x===he?I:ae(jt(x),0,I);return(x-=h.length)>=0&&s.slice(x,U)==h},J.eq=Ft,J.escape=function(s){return(s=En(s))&&G.test(s)?s.replace(Bn,yu):s},J.escapeRegExp=function(s){return(s=En(s))&&ce.test(s)?s.replace(te,"\\$&"):s},J.every=function(s,h,x){var I=St(s)?Sn:Oe;return x&&so(s,h,x)&&(h=he),I(s,kt(h,3))},J.find=m,J.findIndex=bh,J.findKey=function(s,h){return Fl(s,kt(h,3),mt)},J.findLast=y,J.findLastIndex=wh,J.findLastKey=function(s,h){return Fl(s,kt(h,3),_t)},J.floor=Wd,J.forEach=L,J.forEachRight=B,J.forIn=function(s,h){return null==s?s:We(s,kt(h,3),cr)},J.forInRight=function(s,h){return null==s?s:Ke(s,kt(h,3),cr)},J.forOwn=function(s,h){return s&&mt(s,kt(h,3))},J.forOwnRight=function(s,h){return s&&_t(s,kt(h,3))},J.get=Gu,J.gt=us,J.gte=Io,J.has=function(s,h){return null!=s&&uh(s,h,Xo)},J.hasIn=ba,J.head=jc,J.identity=wa,J.includes=function(s,h,x,I){s=ti(s)?s:su(s),x=x&&!I?jt(x):0;var U=s.length;return x<0&&(x=ln(U+x,0)),Cl(s)?x<=U&&s.indexOf(h,x)>-1:!!U&&mr(s,h,x)>-1},J.indexOf=function(s,h,x){var I=null==s?0:s.length;if(!I)return-1;var U=null==x?0:jt(x);return U<0&&(U=ln(I+U,0)),mr(s,h,U)},J.inRange=function(s,h,x){return h=Os(h),x===he?(x=h,h=0):x=Os(x),function(s,h,x){return s>=In(h,x)&&s<ln(h,x)}(s=Ii(s),h,x)},J.invoke=au,J.isArguments=Jr,J.isArray=St,J.isArrayBuffer=cs,J.isArrayLike=ti,J.isArrayLikeObject=Kn,J.isBoolean=function(s){return!0===s||!1===s||Wn(s)&&wt(s)==ho},J.isBuffer=Jo,J.isDate=Ds,J.isElement=function(s){return Wn(s)&&1===s.nodeType&&!wl(s)},J.isEmpty=function(s){if(null==s)return!0;if(ti(s)&&(St(s)||"string"==typeof s||"function"==typeof s.splice||Jo(s)||ps(s)||Jr(s)))return!s.length;var h=Kr(s);if(h==Ar||h==Hn)return!s.size;if(Cr(s))return!hl(s).length;for(var x in s)if(Zt.call(s,x))return!1;return!0},J.isEqual=function(s,h){return br(s,h)},J.isEqualWith=function(s,h,x){var I=(x="function"==typeof x?x:he)?x(s,h):he;return I===he?br(s,h,he,x):!!I},J.isError=Vu,J.isFinite=function(s){return"number"==typeof s&&zn(s)},J.isFunction=Ur,J.isInteger=$u,J.isLength=Ls,J.isMap=yc,J.isMatch=function(s,h){return s===h||Mn(s,h,yl(h))},J.isMatchWith=function(s,h,x){return x="function"==typeof x?x:he,Mn(s,h,yl(h),x)},J.isNaN=function(s){return qu(s)&&s!=+s},J.isNative=function(s){if(pc(s))throw new pt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return An(s)},J.isNil=function(s){return null==s},J.isNull=function(s){return null===s},J.isNumber=qu,J.isObject=Ln,J.isObjectLike=Wn,J.isPlainObject=wl,J.isRegExp=Sl,J.isSafeInteger=function(s){return $u(s)&&s>=-bi&&s<=bi},J.isSet=ou,J.isString=Cl,J.isSymbol=ur,J.isTypedArray=ps,J.isUndefined=function(s){return s===he},J.isWeakMap=function(s){return Wn(s)&&Kr(s)==Ca},J.isWeakSet=function(s){return Wn(s)&&"[object WeakSet]"==wt(s)},J.join=function(s,h){return null==s?"":an.call(s,h)},J.kebabCase=jf,J.last=To,J.lastIndexOf=function(s,h,x){var I=null==s?0:s.length;if(!I)return-1;var U=I;return x!==he&&(U=(U=jt(x))<0?ln(I+U,0):In(U,I-1)),h==h?function(ye,Ue,Le){for(var ht=Le+1;ht--;)if(ye[ht]===Ue)return ht;return ht}(s,h,U):ha(s,qr,U,!0)},J.lowerCase=Wf,J.lowerFirst=Hf,J.lt=Lp,J.lte=Vh,J.max=function(s){return s&&s.length?xe(s,wa,qt):he},J.maxBy=function(s,h){return s&&s.length?xe(s,kt(h,2),qt):he},J.mean=function(s){return Da(s,wa)},J.meanBy=function(s,h){return Da(s,kt(h,2))},J.min=function(s){return s&&s.length?xe(s,wa,Cu):he},J.minBy=function(s,h){return s&&s.length?xe(s,kt(h,2),Cu):he},J.stubArray=ed,J.stubFalse=td,J.stubObject=function(){return{}},J.stubString=function(){return""},J.stubTrue=function(){return!0},J.multiply=em,J.nth=function(s,h){return s&&s.length?Fr(s,jt(h)):he},J.noConflict=function(){return wi._===this&&(wi._=ll),this},J.noop=Qf,J.now=nt,J.pad=function(s,h,x){s=En(s);var I=(h=jt(h))?io(s):0;if(!h||I>=h)return s;var U=(h-I)/2;return Dc(Es(U),x)+s+Dc(Cs(U),x)},J.padEnd=function(s,h,x){s=En(s);var I=(h=jt(h))?io(s):0;return h&&I<h?s+Dc(h-I,x):s},J.padStart=function(s,h,x){s=En(s);var I=(h=jt(h))?io(s):0;return h&&I<h?Dc(h-I,x)+s:s},J.parseInt=function(s,h,x){return x||null==h?h=0:h&&(h=+h),jr(En(s).replace($e,""),h||0)},J.random=function(s,h,x){if(x&&"boolean"!=typeof x&&so(s,h,x)&&(h=x=he),x===he&&("boolean"==typeof h?(x=h,h=he):"boolean"==typeof s&&(x=s,s=he)),s===he&&h===he?(s=0,h=1):(s=Os(s),h===he?(h=s,s=0):h=Os(h)),s>h){var I=s;s=h,h=I}if(x||s%1||h%1){var U=jo();return In(s+U*(h-s+Ol("1e-"+((U+"").length-1))),h)}return tc(s,h)},J.reduce=function(s,h,x){var I=St(s)?Ys:yn,U=arguments.length<3;return I(s,kt(h,4),x,U,Me)},J.reduceRight=function(s,h,x){var I=St(s)?Yu:yn,U=arguments.length<3;return I(s,kt(h,4),x,U,De)},J.repeat=function(s,h,x){return h=(x?so(s,h,x):h===he)?1:jt(h),Tu(En(s),h)},J.replace=function(){var s=arguments,h=En(s[0]);return s.length<3?h:h.replace(s[1],s[2])},J.result=function(s,h,x){var I=-1,U=(h=ss(h,s)).length;for(U||(U=1,s=he);++I<U;){var ne=null==s?he:s[ls(h[I])];ne===he&&(I=U,ne=x),s=Ur(ne)?ne.call(s):ne}return s},J.round=tm,J.runInContext=ye,J.sample=function(s){return(St(s)?b:ml)(s)},J.size=function(s){if(null==s)return 0;if(ti(s))return Cl(s)?io(s):s.length;var h=Kr(s);return h==Ar||h==Hn?s.size:hl(s).length},J.snakeCase=sd,J.some=function(s,h,x){var I=St(s)?yo:mf;return x&&so(s,h,x)&&(h=he),I(s,kt(h,3))},J.sortedIndex=function(s,h){return Pc(s,h)},J.sortedIndexBy=function(s,h,x){return rc(s,h,kt(x,2))},J.sortedIndexOf=function(s,h){var x=null==s?0:s.length;if(x){var I=Pc(s,h);if(I<x&&Ft(s[I],h))return I}return-1},J.sortedLastIndex=function(s,h){return Pc(s,h,!0)},J.sortedLastIndexBy=function(s,h,x){return rc(s,h,kt(x,2),!0)},J.sortedLastIndexOf=function(s,h){if(null!=s&&s.length){var I=Pc(s,h,!0)-1;if(Ft(s[I],h))return I}return-1},J.startCase=ud,J.startsWith=function(s,h,x){return s=En(s),x=null==x?0:ae(jt(x),0,s.length),h=Ko(h),s.slice(x,x+h.length)==h},J.subtract=nm,J.sum=function(s){return s&&s.length?Ul(s,wa):0},J.sumBy=function(s,h){return s&&s.length?Ul(s,kt(h,2)):0},J.template=function(s,h,x){var I=J.templateSettings;x&&so(s,h,x)&&(h=he),s=En(s),h=Qo({},h,I,Sp);var we,Ie,U=Qo({},h.imports,I.imports,Sp),ne=_i(U),fe=Vl(U,ne),Ze=0,je=h.interpolate||hn,Xe="__p += '",yt=sl((h.escape||hn).source+"|"+je.source+"|"+(je===ie?Qe:hn).source+"|"+(h.evaluate||hn).source+"|$","g"),Mt="//# sourceURL="+(Zt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++no+"]")+"\n";s.replace(yt,function(Ut,pn,bn,$a,ea,qa){return bn||(bn=$a),Xe+=s.slice(Ze,qa).replace(Yt,tl),pn&&(we=!0,Xe+="' +\n__e("+pn+") +\n'"),ea&&(Ie=!0,Xe+="';\n"+ea+";\n__p += '"),bn&&(Xe+="' +\n((__t = ("+bn+")) == null ? '' : __t) +\n'"),Ze=qa+Ut.length,Ut}),Xe+="';\n";var Nt=Zt.call(h,"variable")&&h.variable;if(Nt){if(gt.test(Nt))throw new pt("Invalid `variable` option passed into `_.template`")}else Xe="with (obj) {\n"+Xe+"\n}\n";Xe=(Ie?Xe.replace(Ya,""):Xe).replace(Ia,"$1").replace(Ka,"$1;"),Xe="function("+(Nt||"obj")+") {\n"+(Nt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(we?", __e = _.escape":"")+(Ie?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Xe+"return __p\n}";var on=id(function(){return vt(ne,Mt+"return "+Xe).apply(he,fe)});if(on.source=Xe,Vu(on))throw on;return on},J.times=function(s,h){if((s=jt(s))<1||s>bi)return[];var x=Ki,I=In(s,Ki);h=kt(h),s-=Ki;for(var U=La(I,h);++x<s;)h(x);return U},J.toFinite=Os,J.toInteger=jt,J.toLength=Jn,J.toLower=function(s){return En(s).toLowerCase()},J.toNumber=Ii,J.toSafeInteger=function(s){return s?ae(jt(s),-bi,bi):0===s?s:0},J.toString=En,J.toUpper=function(s){return En(s).toUpperCase()},J.trim=function(s,h,x){if((s=En(s))&&(x||h===he))return Ku(s);if(!s||!(h=Ko(h)))return s;var I=kr(s),U=kr(h);return gl(I,Js(I,U),Qs(I,U)+1).join("")},J.trimEnd=function(s,h,x){if((s=En(s))&&(x||h===he))return s.slice(0,rl(s)+1);if(!s||!(h=Ko(h)))return s;var I=kr(s);return gl(I,0,Qs(I,kr(h))+1).join("")},J.trimStart=function(s,h,x){if((s=En(s))&&(x||h===he))return s.replace($e,"");if(!s||!(h=Ko(h)))return s;var I=kr(s);return gl(I,Js(I,kr(h))).join("")},J.truncate=function(s,h){var x=30,I="...";if(Ln(h)){var U="separator"in h?h.separator:U;x="length"in h?jt(h.length):x,I="omission"in h?Ko(h.omission):I}var ne=(s=En(s)).length;if(ts(s)){var fe=kr(s);ne=fe.length}if(x>=ne)return s;var we=x-io(I);if(we<1)return I;var Ie=fe?gl(fe,0,we).join(""):s.slice(0,we);if(U===he)return Ie+I;if(fe&&(we+=Ie.length-we),Sl(U)){if(s.slice(we).search(U)){var Ze,je=Ie;for(U.global||(U=sl(U.source,En(Ve.exec(U))+"g")),U.lastIndex=0;Ze=U.exec(je);)var Xe=Ze.index;Ie=Ie.slice(0,Xe===he?we:Xe)}}else if(s.indexOf(Ko(U),we)!=we){var yt=Ie.lastIndexOf(U);yt>-1&&(Ie=Ie.slice(0,yt))}return Ie+I},J.unescape=function(s){return(s=En(s))&&F.test(s)?s.replace(Ja,ol):s},J.uniqueId=function(s){var h=++bu;return En(s)+h},J.upperCase=_d,J.upperFirst=Xf,J.each=L,J.eachRight=B,J.first=jc,Jf(J,function(){var s={};return mt(J,function(h,x){Zt.call(J.prototype,x)||(s[x]=h)}),s}(),{chain:!1}),J.VERSION="4.17.21",oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){J[s].placeholder=J}),oi(["drop","take"],function(s,h){Ht.prototype[s]=function(x){x=x===he?1:ln(jt(x),0);var I=this.__filtered__&&!h?new Ht(this):this.clone();return I.__filtered__?I.__takeCount__=In(x,I.__takeCount__):I.__views__.push({size:In(x,Ki),type:s+(I.__dir__<0?"Right":"")}),I},Ht.prototype[s+"Right"]=function(x){return this.reverse()[s](x).reverse()}}),oi(["filter","map","takeWhile"],function(s,h){var x=h+1,I=1==x||3==x;Ht.prototype[s]=function(U){var ne=this.clone();return ne.__iteratees__.push({iteratee:kt(U,3),type:x}),ne.__filtered__=ne.__filtered__||I,ne}}),oi(["head","last"],function(s,h){var x="take"+(h?"Right":"");Ht.prototype[s]=function(){return this[x](1).value()[0]}}),oi(["initial","tail"],function(s,h){var x="drop"+(h?"":"Right");Ht.prototype[s]=function(){return this.__filtered__?new Ht(this):this[x](1)}}),Ht.prototype.compact=function(){return this.filter(wa)},Ht.prototype.find=function(s){return this.filter(s).head()},Ht.prototype.findLast=function(s){return this.reverse().find(s)},Ht.prototype.invokeMap=en(function(s,h){return"function"==typeof s?new Ht(this):this.map(function(x){return Wi(x,s,h)})}),Ht.prototype.reject=function(s){return this.filter($n(kt(s)))},Ht.prototype.slice=function(s,h){s=jt(s);var x=this;return x.__filtered__&&(s>0||h<0)?new Ht(x):(s<0?x=x.takeRight(-s):s&&(x=x.drop(s)),h!==he&&(x=(h=jt(h))<0?x.dropRight(-h):x.take(h-s)),x)},Ht.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ht.prototype.toArray=function(){return this.take(Ki)},mt(Ht.prototype,function(s,h){var x=/^(?:filter|find|map|reject)|While$/.test(h),I=/^(?:head|last)$/.test(h),U=J[I?"take"+("last"==h?"Right":""):h],ne=I||/^find/.test(h);!U||(J.prototype[h]=function(){var fe=this.__wrapped__,we=I?[1]:arguments,Ie=fe instanceof Ht,Ze=we[0],je=Ie||St(fe),Xe=function(pn){var bn=U.apply(J,$o([pn],we));return I&&yt?bn[0]:bn};je&&x&&"function"==typeof Ze&&1!=Ze.length&&(Ie=je=!1);var yt=this.__chain__,Mt=!!this.__actions__.length,Nt=ne&&!yt,on=Ie&&!Mt;if(!ne&&je){fe=on?fe:new Ht(this);var Ut=s.apply(fe,we);return Ut.__actions__.push({func:xa,args:[Xe],thisArg:he}),new Di(Ut,yt)}return Nt&&on?s.apply(this,we):(Ut=this.thru(Xe),Nt?I?Ut.value()[0]:Ut.value():Ut)})}),oi(["pop","push","shift","sort","splice","unshift"],function(s){var h=$l[s],x=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",I=/^(?:pop|shift)$/.test(s);J.prototype[s]=function(){var U=arguments;if(I&&!this.__chain__){var ne=this.value();return h.apply(St(ne)?ne:[],U)}return this[x](function(fe){return h.apply(St(fe)?fe:[],U)})}}),mt(Ht.prototype,function(s,h){var x=J[h];if(x){var I=x.name+"";Zt.call(ki,I)||(ki[I]=[]),ki[I].push({name:h,func:x})}}),ki[kc(he,2).name]=[{name:"wrapper",func:he}],Ht.prototype.clone=function(){var s=new Ht(this.__wrapped__);return s.__actions__=oo(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=oo(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=oo(this.__views__),s},Ht.prototype.reverse=function(){if(this.__filtered__){var s=new Ht(this);s.__dir__=-1,s.__filtered__=!0}else(s=this.clone()).__dir__*=-1;return s},Ht.prototype.value=function(){var s=this.__wrapped__.value(),h=this.__dir__,x=St(s),I=h<0,U=x?s.length:0,ne=function(s,h,x){for(var I=-1,U=x.length;++I<U;){var ne=x[I],fe=ne.size;switch(ne.type){case"drop":s+=fe;break;case"dropRight":h-=fe;break;case"take":h=In(h,s+fe);break;case"takeRight":s=ln(s,h-fe)}}return{start:s,end:h}}(0,U,this.__views__),fe=ne.start,we=ne.end,Ie=we-fe,Ze=I?we:fe-1,je=this.__iteratees__,Xe=je.length,yt=0,Mt=In(Ie,this.__takeCount__);if(!x||!I&&U==Ie&&Mt==Ie)return oc(s,this.__actions__);var Nt=[];e:for(;Ie--&&yt<Mt;){for(var on=-1,Ut=s[Ze+=h];++on<Xe;){var pn=je[on],$a=pn.type,ea=(0,pn.iteratee)(Ut);if(2==$a)Ut=ea;else if(!ea){if(1==$a)continue e;break e}}Nt[yt++]=Ut}return Nt},J.prototype.at=Bh,J.prototype.chain=function(){return Qc(this)},J.prototype.commit=function(){return new Di(this.value(),this.__chain__)},J.prototype.next=function(){this.__values__===he&&(this.__values__=op(this.value()));var s=this.__index__>=this.__values__.length;return{done:s,value:s?he:this.__values__[this.__index__++]}},J.prototype.plant=function(s){for(var h,x=this;x instanceof Hr;){var I=Mp(x);I.__index__=0,I.__values__=he,h?U.__wrapped__=I:h=I;var U=I;x=x.__wrapped__}return U.__wrapped__=s,h},J.prototype.reverse=function(){var s=this.__wrapped__;if(s instanceof Ht){var h=s;return this.__actions__.length&&(h=new Ht(this)),(h=h.reverse()).__actions__.push({func:xa,args:[zp],thisArg:he}),new Di(h,this.__chain__)}return this.thru(zp)},J.prototype.toJSON=J.prototype.valueOf=J.prototype.value=function(){return oc(this.__wrapped__,this.__actions__)},J.prototype.first=J.prototype.head,Ra&&(J.prototype[Ra]=function(){return this}),J}();wi._=xs,(Ri=function(){return xs}.call(ta,Pn,ta,Fs))!==he&&(Fs.exports=Ri)}.call(this)},5320:function(Fs){Fs.exports=function(){"use strict";var ta,Pn,Ri;function he(f,Bi){if(ta)if(Pn){var Ge="var sharedChunk = {}; ("+ta+")(sharedChunk); ("+Pn+")(sharedChunk);",Jt={};ta(Jt),Ri=Bi(Jt),"undefined"!=typeof window&&(Ri.workerUrl=window.URL.createObjectURL(new Blob([Ge],{type:"text/javascript"})))}else Pn=Bi;else ta=Bi}return he(0,function(f){function Bi(e,t){return e(t={exports:{}},t.exports),t.exports}var Ge=Jt;function Jt(e,t,n,u){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=u,this.p2x=n,this.p2y=u}Jt.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},Jt.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},Jt.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},Jt.prototype.solveCurveX=function(e,t){var n,u,p,m,y;for(void 0===t&&(t=1e-6),p=e,y=0;y<8;y++){if(m=this.sampleCurveX(p)-e,Math.abs(m)<t)return p;var S=this.sampleCurveDerivativeX(p);if(Math.abs(S)<1e-6)break;p-=m/S}if((p=e)<(n=0))return n;if(p>(u=1))return u;for(;n<u;){if(m=this.sampleCurveX(p),Math.abs(m-e)<t)return p;e>m?n=p:u=p,p=.5*(u-n)+n}return p},Jt.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var Tt=hr;function hr(e,t){this.x=e,this.y=t}hr.prototype={clone:function(){return new hr(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),u=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=u,this},_rotateAround:function(e,t){var n=Math.cos(e),u=Math.sin(e),p=t.y+u*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-u*(this.y-t.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},hr.convert=function(e){return e instanceof hr?e:Array.isArray(e)?new hr(e[0],e[1]):e};var ut="undefined"!=typeof self?self:{},xi=Math.pow(2,53)-1;function ui(e,t,n,u){var p=new Ge(e,t,n,u);return function(m){return p.solve(m)}}var On=ui(.25,.1,.25,1);function ci(e,t,n){return Math.min(n,Math.max(t,e))}function Mi(e,t,n){var u=n-t,p=((e-t)%u+u)%u+t;return p===t?n:p}function Rn(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var u=0,p=t;u<p.length;u+=1){var m=p[u];for(var y in m)e[y]=m[y]}return e}var Fi=1;function Vr(){return Fi++}function uo(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Xi(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function It(e,t){e.forEach(function(n){t[n]&&(t[n]=t[n].bind(t))})}function Ni(e,t){return-1!==e.indexOf(t,e.length-t.length)}function Qn(e,t,n){var u={};for(var p in e)u[p]=t.call(n||this,e[p],p,e);return u}function Ai(e,t,n){var u={};for(var p in e)t.call(n||this,e[p],p,e)&&(u[p]=e[p]);return u}function Yi(e){return Array.isArray(e)?e.map(Yi):"object"==typeof e&&e?Qn(e,Yi):e}var na={};function qn(e){na[e]||("undefined"!=typeof console&&console.warn(e),na[e]=!0)}function Tr(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function Tl(e){for(var t=0,n=0,u=e.length,p=u-1,m=void 0,y=void 0;n<u;p=n++)t+=((y=e[p]).x-(m=e[n]).x)*(m.y+y.y);return t}function $r(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function Za(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(u,p,m,y){var S=m||y;return t[p]=!S||S.toLowerCase(),""}),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var fs=null;function Il(e){if(null==fs){var t=e.navigator?e.navigator.userAgent:null;fs=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return fs}function fr(e){try{var t=ut[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(n){return!1}}var bi,co,po,Ki,ia=ut.performance&&ut.performance.now?ut.performance.now.bind(ut.performance):Date.now.bind(Date),Ml=ut.requestAnimationFrame||ut.mozRequestAnimationFrame||ut.webkitRequestAnimationFrame||ut.msRequestAnimationFrame,Ji=ut.cancelAnimationFrame||ut.mozCancelAnimationFrame||ut.webkitCancelAnimationFrame||ut.msCancelAnimationFrame,Ir={now:ia,frame:function(e){var t=Ml(e);return{cancel:function(){return Ji(t)}}},getImageData:function(e,t){void 0===t&&(t=0);var n=ut.document.createElement("canvas"),u=n.getContext("2d");if(!u)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,u.drawImage(e,0,0,e.width,e.height),u.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return bi||(bi=ut.document.createElement("a")),bi.href=e,bi.href},hardwareConcurrency:ut.navigator&&ut.navigator.hardwareConcurrency||4,get devicePixelRatio(){return ut.devicePixelRatio},get prefersReducedMotion(){return!!ut.matchMedia&&(null==co&&(co=ut.matchMedia("(prefers-reduced-motion: reduce)")),co.matches)}},nn={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Ao={supported:!1,testSupport:function(e){!ho&&Ki&&(Qi?Wt(e):po=e)}},ho=!1,Qi=!1;function Wt(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Ki),e.isContextLost())return;Ao.supported=!0}catch(n){}e.deleteTexture(t),ho=!0}ut.document&&((Ki=ut.document.createElement("img")).onload=function(){po&&Wt(po),po=null,Qi=!0},Ki.onerror=function(){ho=!0,po=null},Ki.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var fo="01",pi=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function Mr(e){return 0===e.indexOf("mapbox:")}pi.prototype._createSkuToken=function(){var e=function(){for(var t="",n=0;n<10;n++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",fo,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},pi.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},pi.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},pi.prototype.normalizeStyleURL=function(e,t){if(!Mr(e))return e;var n=ni(e);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},pi.prototype.normalizeGlyphsURL=function(e,t){if(!Mr(e))return e;var n=ni(e);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)},pi.prototype.normalizeSourceURL=function(e,t){if(!Mr(e))return e;var n=ni(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)},pi.prototype.normalizeSpriteURL=function(e,t,n,u){var p=ni(e);return Mr(e)?(p.path="/styles/v1"+p.path+"/sprite"+t+n,this._makeAPIURL(p,this._customAccessToken||u)):(p.path+=""+t+n,ra(p))},pi.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Mr(e))return e;var n=ni(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Ir.devicePixelRatio>=2||512===t?"@2x":"")+(Ao.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var u=this._customAccessToken||function(p){for(var m=0,y=p;m<y.length;m+=1){var S=y[m].match(/^access_token=(.*)$/);if(S)return S[1]}return null}(n.params)||nn.ACCESS_TOKEN;return nn.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,u)},pi.prototype.canonicalizeTileURL=function(e,t){var n=ni(e);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return e;var u="mapbox://tiles/";u+=n.path.replace("/v4/","");var p=n.params;return t&&(p=p.filter(function(m){return!m.match(/^access_token=/)})),p.length&&(u+="?"+p.join("&")),u},pi.prototype.canonicalizeTileset=function(e,t){for(var n=!!t&&Mr(t),u=[],p=0,m=e.tiles||[];p<m.length;p+=1){var y=m[p];er(y)?u.push(this.canonicalizeTileURL(y,n)):u.push(y)}return u},pi.prototype._makeAPIURL=function(e,t){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",u=ni(nn.API_URL);if(e.protocol=u.protocol,e.authority=u.authority,"http"===e.protocol){var p=e.params.indexOf("secure");p>=0&&e.params.splice(p,1)}if("/"!==u.path&&(e.path=""+u.path+e.path),!nn.REQUIRE_ACCESS_TOKEN)return ra(e);if(!(t=t||nn.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return e.params=e.params.filter(function(m){return-1===m.indexOf("access_token")}),e.params.push("access_token="+t),ra(e)},pi.prototype.setTransformRequest=function(e){this._transformRequestFn=e};var Ar=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function er(e){return Ar.test(e)}var ds=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ni(e){var t=e.match(ds);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function ra(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Ga(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(ut.atob(t[1]).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(n){return null}}var Ui=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ui.prototype.getStorageKey=function(e){var t,n=Ga(nn.ACCESS_TOKEN);return t=n&&n.u?ut.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,function(u,p){return String.fromCharCode(Number("0x"+p))})):nn.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},Ui.prototype.fetchEventData=function(){var e=fr("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var u=ut.localStorage.getItem(t);u&&(this.eventData=JSON.parse(u));var p=ut.localStorage.getItem(n);p&&(this.anonId=p)}catch(m){qn("Unable to read from LocalStorage")}},Ui.prototype.saveEventData=function(){var e=fr("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{ut.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&ut.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(u){qn("Unable to write to LocalStorage")}},Ui.prototype.processRequests=function(e){},Ui.prototype.postEvent=function(e,t,n,u){var p=this;if(nn.EVENTS_URL){var m=ni(nn.EVENTS_URL);m.params.push("access_token="+(u||nn.ACCESS_TOKEN||""));var y={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.15.2",skuId:fo,userId:this.anonId},S=t?Rn(y,t):y,T={url:ra(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=F(T,function(A){p.pendingRequest=null,n(A),p.saveEventData(),p.processRequests(u)})}},Ui.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var Hn,mo,dr=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(n,u,p,m){this.skuToken=p,(nn.EVENTS_URL&&m||nn.ACCESS_TOKEN&&Array.isArray(n)&&n.some(function(y){return Mr(y)||er(y)}))&&this.queueRequest({id:u,timestamp:Date.now()},m)},t.prototype.processRequests=function(n){var u=this;if(!this.pendingRequest&&0!==this.queue.length){var p=this.queue.shift(),m=p.id,y=p.timestamp;m&&this.success[m]||(this.anonId||this.fetchEventData(),Xi(this.anonId)||(this.anonId=uo()),this.postEvent(y,{skuToken:this.skuToken},function(S){S||m&&(u.success[m]=!0)},n))}},t}(Ui),Al=new(function(e){function t(n){e.call(this,"appUserTurnstile"),this._customAccessToken=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(n,u){nn.EVENTS_URL&&nn.ACCESS_TOKEN&&Array.isArray(n)&&n.some(function(p){return Mr(p)||er(p)})&&this.queueRequest(Date.now(),u)},t.prototype.processRequests=function(n){var u=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var p=Ga(nn.ACCESS_TOKEN),m=p?p.u:nn.ACCESS_TOKEN,y=m!==this.eventData.tokenU;Xi(this.anonId)||(this.anonId=uo(),y=!0);var S=this.queue.shift();if(this.eventData.lastSuccess){var T=new Date(this.eventData.lastSuccess),A=new Date(S),L=(S-this.eventData.lastSuccess)/864e5;y=y||L>=1||L<-1||T.getDate()!==A.getDate()}else y=!0;if(!y)return this.processRequests();this.postEvent(S,{"enabled.telemetry":!1},function(B){B||(u.eventData.lastSuccess=S,u.eventData.tokenU=m)},n)}},t}(Ui)),Ca=Al.postTurnstileEvent.bind(Al),Ns=new dr,Po=Ns.postMapLoadEvent.bind(Ns),Qr=500,ja=50;function oa(){ut.caches&&!Hn&&(Hn=ut.caches.open("mapbox-tiles"))}function Wa(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var zo,Ea=1/0;function Ta(){return null==zo&&(zo=ut.OffscreenCanvas&&new ut.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof ut.createImageBitmap),zo}var Ha={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Ha);var Xa=function(e){function t(n,u,p){401===u&&er(p)&&(n+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,n),this.status=u,this.url=p,this.name=this.constructor.name,this.message=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),ko=$r()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===ut.location.protocol?ut.parent:ut).location.href};function Ya(e,t){var n,u=new ut.AbortController,p=new ut.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:ko(),signal:u.signal}),m=!1,y=!1,S=(n=p.url).indexOf("sku=")>0&&er(n);"json"===e.type&&p.headers.set("Accept","application/json");var T=function(L,B,Z){if(!y){if(L&&"SecurityError"!==L.message&&qn(L),B&&Z)return A(B);var H=Date.now();ut.fetch(p).then(function(oe){if(oe.ok){var se=S?oe.clone():null;return A(oe,se,H)}return t(new Xa(oe.statusText,oe.status,e.url))}).catch(function(oe){20!==oe.code&&t(new Error(oe.message))})}},A=function(L,B,Z){("arrayBuffer"===e.type?L.arrayBuffer():"json"===e.type?L.json():L.text()).then(function(H){y||(B&&Z&&function(oe,se,de){if(oa(),Hn){var pe={status:se.status,statusText:se.statusText,headers:new ut.Headers};se.headers.forEach(function(Ce,Pe){return pe.headers.set(Pe,Ce)});var Se=Za(se.headers.get("Cache-Control")||"");Se["no-store"]||(Se["max-age"]&&pe.headers.set("Expires",new Date(de+1e3*Se["max-age"]).toUTCString()),new Date(pe.headers.get("Expires")).getTime()-de<42e4||function(Ce,Pe){if(void 0===mo)try{new Response(new ReadableStream),mo=!0}catch(ze){mo=!1}mo?Pe(Ce.body):Ce.blob().then(Pe)}(se,function(Ce){var Pe=new ut.Response(Ce,pe);oa(),Hn&&Hn.then(function(ze){return ze.put(Wa(oe.url),Pe)}).catch(function(ze){return qn(ze.message)})}))}}(p,B,Z),m=!0,t(null,H,L.headers.get("Cache-Control"),L.headers.get("Expires")))}).catch(function(H){y||t(new Error(H.message))})};return S?function(L,B){if(oa(),!Hn)return B(null);var Z=Wa(L.url);Hn.then(function(H){H.match(Z).then(function(oe){var se=function(de){if(!de)return!1;var pe=new Date(de.headers.get("Expires")||0),Se=Za(de.headers.get("Cache-Control")||"");return pe>Date.now()&&!Se["no-cache"]}(oe);H.delete(Z),se&&H.put(Z,oe.clone()),B(null,oe,se)}).catch(B)}).catch(B)}(p,T):T(null,null),{cancel:function(){y=!0,m||u.abort()}}}var Ia,Ka,Ja=function(e,t){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){if($r()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t);if(!$r()){var n=e.url.substring(0,e.url.indexOf("://"));return(nn.REGISTERED_PROTOCOLS[n]||Ya)(e,t)}}if(!(/^file:/.test(u=e.url)||/^file:/.test(ko())&&!/^\w+:/.test(u))){if(ut.fetch&&ut.Request&&ut.AbortController&&ut.Request.prototype.hasOwnProperty("signal"))return Ya(e,t);if($r()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var u;return function(p,m){var y=new ut.XMLHttpRequest;for(var S in y.open(p.method||"GET",p.url,!0),"arrayBuffer"===p.type&&(y.responseType="arraybuffer"),p.headers)y.setRequestHeader(S,p.headers[S]);return"json"===p.type&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials="include"===p.credentials,y.onerror=function(){m(new Error(y.statusText))},y.onload=function(){if((y.status>=200&&y.status<300||0===y.status)&&null!==y.response){var T=y.response;if("json"===p.type)try{T=JSON.parse(y.response)}catch(A){return m(A)}m(null,T,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else m(new Xa(y.statusText,y.status,p.url))},y.send(p.body),{cancel:function(){return y.abort()}}}(e,t)},Bn=function(e,t){return Ja(Rn(e,{type:"arrayBuffer"}),t)},F=function(e,t){return Ja(Rn(e,{method:"POST"}),t)},G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ia=[],Ka=0;var j=function(e,t){if(Ao.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Ka>=nn.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ia.push(n),n}Ka++;var u=!1,p=function(){if(!u)for(u=!0,Ka--;Ia.length&&Ka<nn.MAX_PARALLEL_IMAGE_REQUESTS;){var y=Ia.shift();y.cancelled||(y.cancel=j(y.requestParameters,y.callback).cancel)}},m=Bn(e,function(y,S,T,A){var B,Z;p(),y?t(y):S&&(Ta()?(B=t,Z=new ut.Blob([new Uint8Array(S)],{type:"image/png"}),ut.createImageBitmap(Z).then(function(H){B(null,H)}).catch(function(H){B(new Error("Could not load image because of "+H.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(L,B,Z,H){var oe=new ut.Image,se=ut.URL;oe.onload=function(){B(null,oe),se.revokeObjectURL(oe.src),oe.onload=null,ut.requestAnimationFrame(function(){oe.src=G})},oe.onerror=function(){return B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var de=new ut.Blob([new Uint8Array(L)],{type:"image/png"});oe.cacheControl=Z,oe.expires=H,oe.src=L.byteLength?se.createObjectURL(de):G}(S,t,T,A))});return{cancel:function(){m.cancel(),p()}}};function ee(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function ie(e,t,n){if(n&&n[e]){var u=n[e].indexOf(t);-1!==u&&n[e].splice(u,1)}}var ge=function(e,t){void 0===t&&(t={}),Rn(this,t),this.type=e},be=function(e){function t(n,u){void 0===u&&(u={}),e.call(this,"error",Rn({error:n},u))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ge),me=function(){};me.prototype.on=function(e,t){return this._listeners=this._listeners||{},ee(e,t,this._listeners),this},me.prototype.off=function(e,t){return ie(e,t,this._listeners),ie(e,t,this._oneTimeListeners),this},me.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},ee(e,t,this._oneTimeListeners),this},me.prototype.fire=function(e,t){"string"==typeof e&&(e=new ge(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;for(var u=0,p=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];u<p.length;u+=1)p[u].call(this,e);for(var m=0,y=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];m<y.length;m+=1){var S=y[m];ie(n,S,this._oneTimeListeners),S.call(this,e)}var T=this._eventedParent;T&&(Rn(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),T.fire(e))}else e instanceof be&&console.error(e.error);return this},me.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},me.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var te={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ce=function(e,t,n,u){this.message=(e?e+": ":"")+n,u&&(this.identifier=u),null!=t&&t.__line__&&(this.line=t.__line__)};function $e(e){var t=e.value;return t?[new ce(e.key,t,"constants have been deprecated as of v8")]:[]}function Ye(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var u=0,p=t;u<p.length;u+=1){var m=p[u];for(var y in m)e[y]=m[y]}return e}function Ae(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function qe(e){if(Array.isArray(e))return e.map(qe);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=qe(e[n]);return t}return Ae(e)}var at=function(e){function t(n,u){e.call(this,u),this.message=u,this.key=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),st=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var n=0,u=t;n<u.length;n+=1){var p=u[n];this.bindings[p[0]]=p[1]}};st.prototype.concat=function(e){return new st(this,e)},st.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},st.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var gt={kind:"null"},Ne={kind:"number"},Qe={kind:"string"},Ve={kind:"boolean"},At={kind:"color"},Pt={kind:"object"},lt={kind:"value"},mn={kind:"collator"},Vt={kind:"formatted"},wn={kind:"resolvedImage"};function hn(e,t){return{kind:"array",itemType:e,N:t}}function Yt(e){if("array"===e.kind){var t=Yt(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var rn=[gt,Ne,Qe,Ve,At,Vt,Pt,hn(lt),wn];function Dt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Dt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,u=rn;n<u.length;n+=1)if(!Dt(u[n],t))return null}return"Expected "+Yt(e)+" but found "+Yt(t)+" instead."}function fn(e,t){return t.some(function(n){return n.kind===e.kind})}function Lt(e,t){return t.some(function(n){return"null"===n?null===e:"array"===n?Array.isArray(e):"object"===n?e&&!Array.isArray(e)&&"object"==typeof e:n===typeof e})}var eo=Bi(function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(S){return(S=Math.round(S))<0?0:S>255?255:S}function p(S){return u("%"===S[S.length-1]?parseFloat(S)/100*255:parseInt(S))}function m(S){return(T="%"===S[S.length-1]?parseFloat(S)/100:parseFloat(S))<0?0:T>1?1:T;var T}function y(S,T,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?S+(T-S)*A*6:2*A<1?T:3*A<2?S+(T-S)*(2/3-A)*6:S}try{t.parseCSSColor=function(S){var T,A=S.replace(/ /g,"").toLowerCase();if(A in n)return n[A].slice();if("#"===A[0])return 4===A.length?(T=parseInt(A.substr(1),16))>=0&&T<=4095?[(3840&T)>>4|(3840&T)>>8,240&T|(240&T)>>4,15&T|(15&T)<<4,1]:null:7===A.length&&(T=parseInt(A.substr(1),16))>=0&&T<=16777215?[(16711680&T)>>16,(65280&T)>>8,255&T,1]:null;var L=A.indexOf("("),B=A.indexOf(")");if(-1!==L&&B+1===A.length){var Z=A.substr(0,L),H=A.substr(L+1,B-(L+1)).split(","),oe=1;switch(Z){case"rgba":if(4!==H.length)return null;oe=m(H.pop());case"rgb":return 3!==H.length?null:[p(H[0]),p(H[1]),p(H[2]),oe];case"hsla":if(4!==H.length)return null;oe=m(H.pop());case"hsl":if(3!==H.length)return null;var se=(parseFloat(H[0])%360+360)%360/360,de=m(H[1]),pe=m(H[2]),Se=pe<=.5?pe*(de+1):pe+de-pe*de,Ce=2*pe-Se;return[u(255*y(Ce,Se,se+1/3)),u(255*y(Ce,Se,se)),u(255*y(Ce,Se,se-1/3)),oe];default:return null}}return null}}catch(S){}}).parseCSSColor,$t=function(e,t,n,u){void 0===u&&(u=1),this.r=e,this.g=t,this.b=n,this.a=u};$t.parse=function(e){if(e){if(e instanceof $t)return e;if("string"==typeof e){var t=eo(e);if(t)return new $t(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},$t.prototype.toString=function(){var e=this.toArray(),t=e[1],n=e[2],u=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(n)+","+u+")"},$t.prototype.toArray=function(){var e=this.a;return 0===e?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},$t.black=new $t(0,0,0,1),$t.white=new $t(1,1,1,1),$t.transparent=new $t(0,0,0,0),$t.red=new $t(1,0,0,1);var aa=function(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};aa.prototype.compare=function(e,t){return this.collator.compare(e,t)},aa.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ma=function(e,t,n,u,p){this.text=e,this.image=t,this.scale=n,this.fontStack=u,this.textColor=p},hi=function(e){this.sections=e};hi.fromString=function(e){return new hi([new Ma(e,null,null,null,null)])},hi.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length})},hi.factory=function(e){return e instanceof hi?e:hi.fromString(e)},hi.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(e){return e.text}).join("")},hi.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var u=n[t];if(u.image)e.push(["image",u.image.name]);else{e.push(u.text);var p={};u.fontStack&&(p["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(p["font-scale"]=u.scale),u.textColor&&(p["text-color"]=["rgba"].concat(u.textColor.toArray())),e.push(p)}}return e};var Tn=function(e){this.name=e.name,this.available=e.available};function Aa(e,t,n,u){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===u||"number"==typeof u&&u>=0&&u<=1?null:"Invalid rgba value ["+[e,t,n,u].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof u?[e,t,n,u]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Do(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof $t||e instanceof aa||e instanceof hi||e instanceof Tn)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!Do(n[t]))return!1;return!0}if("object"==typeof e){for(var u in e)if(!Do(e[u]))return!1;return!0}return!1}function Zn(e){if(null===e)return gt;if("string"==typeof e)return Qe;if("boolean"==typeof e)return Ve;if("number"==typeof e)return Ne;if(e instanceof $t)return At;if(e instanceof aa)return mn;if(e instanceof hi)return Vt;if(e instanceof Tn)return wn;if(Array.isArray(e)){for(var t,n=e.length,u=0,p=e;u<p.length;u+=1){var m=Zn(p[u]);if(t){if(t===m)continue;t=lt;break}t=m}return hn(t||lt,n)}return Pt}function to(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof $t||e instanceof hi||e instanceof Tn?e.toString():JSON.stringify(e)}Tn.prototype.toString=function(){return this.name},Tn.fromString=function(e){return e?new Tn({name:e,available:!1}):null},Tn.prototype.serialize=function(){return["image",this.name]};var tr=function(e,t){this.type=e,this.value=t};tr.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!Do(e[1]))return t.error("invalid value");var n=e[1],u=Zn(n),p=t.expectedType;return"array"!==u.kind||0!==u.N||!p||"array"!==p.kind||"number"==typeof p.N&&0!==p.N||(u=p),new tr(u,n)},tr.prototype.evaluate=function(){return this.value},tr.prototype.eachChild=function(){},tr.prototype.outputDefined=function(){return!0},tr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof $t?["rgba"].concat(this.value.toArray()):this.value instanceof hi?this.value.serialize():this.value};var gn=function(e){this.name="ExpressionEvaluationError",this.message=e};gn.prototype.toJSON=function(){return this.message};var Vi={string:Qe,number:Ne,boolean:Ve,object:Pt},ii=function(e,t){this.type=e,this.args=t};ii.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n,u=1,p=e[0];if("array"===p){var m,y;if(e.length>2){var S=e[1];if("string"!=typeof S||!(S in Vi)||"object"===S)return t.error('The item type argument of "array" must be one of string, number, boolean',1);m=Vi[S],u++}else m=lt;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);y=e[2],u++}n=hn(m,y)}else n=Vi[p];for(var T=[];u<e.length;u++){var A=t.parse(e[u],u,lt);if(!A)return null;T.push(A)}return new ii(n,T)},ii.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!Dt(this.type,Zn(n)))return n;if(t===this.args.length-1)throw new gn("Expected value to be of type "+Yt(this.type)+", but found "+Yt(Zn(n))+" instead.")}return null},ii.prototype.eachChild=function(e){this.args.forEach(e)},ii.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},ii.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var u=e.N;("number"==typeof u||this.args.length>1)&&t.push(u)}}return t.concat(this.args.map(function(p){return p.serialize()}))};var Pi=function(e){this.type=Vt,this.sections=e};Pi.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");for(var u=[],p=!1,m=1;m<=e.length-1;++m){var y=e[m];if(p&&"object"==typeof y&&!Array.isArray(y)){p=!1;var S=null;if(y["font-scale"]&&!(S=t.parse(y["font-scale"],1,Ne)))return null;var T=null;if(y["text-font"]&&!(T=t.parse(y["text-font"],1,hn(Qe))))return null;var A=null;if(y["text-color"]&&!(A=t.parse(y["text-color"],1,At)))return null;var L=u[u.length-1];L.scale=S,L.font=T,L.textColor=A}else{var B=t.parse(e[m],1,lt);if(!B)return null;var Z=B.type.kind;if("string"!==Z&&"value"!==Z&&"null"!==Z&&"resolvedImage"!==Z)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,u.push({content:B,scale:null,font:null,textColor:null})}}return new Pi(u)},Pi.prototype.evaluate=function(e){return new hi(this.sections.map(function(t){var n=t.content.evaluate(e);return Zn(n)===wn?new Ma("",n,null,null,null):new Ma(to(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))},Pi.prototype.eachChild=function(e){for(var t=0,n=this.sections;t<n.length;t+=1){var u=n[t];e(u.content),u.scale&&e(u.scale),u.font&&e(u.font),u.textColor&&e(u.textColor)}},Pi.prototype.outputDefined=function(){return!1},Pi.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var u=n[t];e.push(u.content.serialize());var p={};u.scale&&(p["font-scale"]=u.scale.serialize()),u.font&&(p["text-font"]=u.font.serialize()),u.textColor&&(p["text-color"]=u.textColor.serialize()),e.push(p)}return e};var Lo=function(e){this.type=wn,this.input=e};Lo.parse=function(e,t){if(2!==e.length)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Qe);return n?new Lo(n):t.error("No image name provided.")},Lo.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=Tn.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n},Lo.prototype.eachChild=function(e){e(this.input)},Lo.prototype.outputDefined=function(){return!1},Lo.prototype.serialize=function(){return["image",this.input.serialize()]};var uu={"to-boolean":Ve,"to-color":At,"to-number":Ne,"to-string":Qe},Pr=function(e,t){this.type=e,this.args=t};Pr.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");for(var u=uu[n],p=[],m=1;m<e.length;m++){var y=t.parse(e[m],m,lt);if(!y)return null;p.push(y)}return new Pr(u,p)},Pr.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,n,u=0,p=this.args;u<p.length;u+=1){if(n=null,(t=p[u].evaluate(e))instanceof $t)return t;if("string"==typeof t){var m=e.parseColor(t);if(m)return m}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":Aa(t[0],t[1],t[2],t[3])))return new $t(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new gn(n||"Could not parse color from value '"+("string"==typeof t?t:String(JSON.stringify(t)))+"'")}if("number"===this.type.kind){for(var y=null,S=0,T=this.args;S<T.length;S+=1){if(null===(y=T[S].evaluate(e)))return 0;var A=Number(y);if(!isNaN(A))return A}throw new gn("Could not convert "+JSON.stringify(y)+" to number.")}return"formatted"===this.type.kind?hi.fromString(to(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Tn.fromString(to(this.args[0].evaluate(e))):to(this.args[0].evaluate(e))},Pr.prototype.eachChild=function(e){this.args.forEach(e)},Pr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Pr.prototype.serialize=function(){if("formatted"===this.type.kind)return new Pi([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Lo(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};var Us=["Unknown","Point","LineString","Polygon"],Oo=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Oo.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Oo.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Us[this.feature.type]:this.feature.type:null},Oo.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Oo.prototype.canonicalID=function(){return this.canonical},Oo.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Oo.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=$t.parse(e)),t};var ri=function(e,t,n,u){this.name=e,this.type=t,this._evaluate=n,this.args=u};ri.prototype.evaluate=function(e){return this._evaluate(e,this.args)},ri.prototype.eachChild=function(e){this.args.forEach(e)},ri.prototype.outputDefined=function(){return!1},ri.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},ri.parse=function(e,t){var n,u=e[0],p=ri.definitions[u];if(!p)return t.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0);for(var m=Array.isArray(p)?p[0]:p.type,y=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,S=y.filter(function(xt){var nt=xt[0];return!Array.isArray(nt)||nt.length===e.length-1}),T=null,A=0,L=S;A<L.length;A+=1){var B=L[A],Z=B[0],H=B[1];T=new ua(t.registry,t.path,null,t.scope);for(var oe=[],se=!1,de=1;de<e.length;de++){var pe=e[de],Se=Array.isArray(Z)?Z[de-1]:Z.type,Ce=T.parse(pe,1+oe.length,Se);if(!Ce){se=!0;break}oe.push(Ce)}if(!se)if(Array.isArray(Z)&&Z.length!==oe.length)T.error("Expected "+Z.length+" arguments, but found "+oe.length+" instead.");else{for(var Pe=0;Pe<oe.length;Pe++){var ze=Array.isArray(Z)?Z[Pe]:Z.type,Fe=oe[Pe];T.concat(Pe+1).checkSubtype(ze,Fe.type)}if(0===T.errors.length)return new ri(u,m,H,oe)}}if(1===S.length)(n=t.errors).push.apply(n,T.errors);else{for(var He=(S.length?S:y).map(function(xt){var nt;return nt=xt[0],Array.isArray(nt)?"("+nt.map(Yt).join(", ")+")":"("+Yt(nt.type)+"...)"}).join(" | "),Je=[],dt=1;dt<e.length;dt++){var tt=t.parse(e[dt],1+Je.length);if(!tt)return null;Je.push(Yt(tt.type))}t.error("Expected arguments of type "+He+", but found ("+Je.join(", ")+") instead.")}return null},ri.register=function(e,t){for(var n in ri.definitions=t,t)e[n]=ri};var Gn=function(e,t,n){this.type=mn,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t};function sa(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Ro(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function cu(e,t){var n=(180+e[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(n*p*8192),Math.round(u*p*8192)]}function pu(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function Pl(e,t){for(var n,u,p,m,y,S,T,A=!1,L=0,B=t.length;L<B;L++)for(var Z=t[L],H=0,oe=Z.length;H<oe-1;H++){if((m=(n=e)[0]-(u=Z[H])[0])*(T=n[1]-(p=Z[H+1])[1])-(S=n[0]-p[0])*(y=n[1]-u[1])==0&&m*S<=0&&y*T<=0)return!1;pu(e,Z[H],Z[H+1])&&(A=!A)}return A}function hu(e,t){for(var n=0;n<t.length;n++)if(Pl(e,t[n]))return!0;return!1}function zl(e,t,n,u){var p=u[0]-n[0],m=u[1]-n[1],y=(e[0]-n[0])*m-p*(e[1]-n[1]),S=(t[0]-n[0])*m-p*(t[1]-n[1]);return y>0&&S<0||y<0&&S>0}function fu(e,t,n){for(var u=0,p=n;u<p.length;u+=1)for(var m=p[u],y=0;y<m.length-1;++y)if((B=[(L=m[y+1])[0]-(A=m[y])[0],L[1]-A[1]])[0]*(Z=[(T=t)[0]-(S=e)[0],T[1]-S[1]])[1]-B[1]*Z[0]!=0&&zl(S,T,A,L)&&zl(A,L,S,T))return!0;var S,T,A,L,B,Z;return!1}function Vs(e,t){for(var n=0;n<e.length;++n)if(!Pl(e[n],t))return!1;for(var u=0;u<e.length-1;++u)if(fu(e[u],e[u+1],t))return!1;return!0}function $s(e,t){for(var n=0;n<t.length;n++)if(Vs(e,t[n]))return!0;return!1}function qs(e,t,n){for(var u=[],p=0;p<e.length;p++){for(var m=[],y=0;y<e[p].length;y++){var S=cu(e[p][y],n);sa(t,S),m.push(S)}u.push(m)}return u}function ms(e,t,n){for(var u=[],p=0;p<e.length;p++){var m=qs(e[p],t,n);u.push(m)}return u}function kl(e,t,n,u){if(e[0]<n[0]||e[0]>n[2]){var p=.5*u,m=e[0]-n[0]>p?-u:n[0]-e[0]>p?u:0;0===m&&(m=e[0]-n[2]>p?-u:n[2]-e[0]>p?u:0),e[0]+=m}sa(t,e)}function Zs(e,t,n,u){for(var p=8192*Math.pow(2,u.z),m=[8192*u.x,8192*u.y],y=[],S=0,T=e;S<T.length;S+=1)for(var A=0,L=T[S];A<L.length;A+=1){var B=L[A],Z=[B.x+m[0],B.y+m[1]];kl(Z,t,n,p),y.push(Z)}return y}function Dl(e,t,n,u){for(var p,m=8192*Math.pow(2,u.z),y=[8192*u.x,8192*u.y],S=[],T=0,A=e;T<A.length;T+=1){for(var L=[],B=0,Z=A[T];B<Z.length;B+=1){var H=Z[B],oe=[H.x+y[0],H.y+y[1]];sa(t,oe),L.push(oe)}S.push(L)}if(t[2]-t[0]<=m/2){(p=t)[0]=p[1]=1/0,p[2]=p[3]=-1/0;for(var se=0,de=S;se<de.length;se+=1)for(var pe=0,Se=de[se];pe<Se.length;pe+=1)kl(Se[pe],t,n,m)}return S}Gn.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");var u=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Ve);if(!u)return null;var p=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Ve);if(!p)return null;var m=null;return n.locale&&!(m=t.parse(n.locale,1,Qe))?null:new Gn(u,p,m)},Gn.prototype.evaluate=function(e){return new aa(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},Gn.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},Gn.prototype.outputDefined=function(){return!1},Gn.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var $i=function(e,t){this.type=Ve,this.geojson=e,this.geometries=t};function Pa(e){if(e instanceof ri&&("get"===e.name&&1===e.args.length||"feature-state"===e.name||"has"===e.name&&1===e.args.length||"properties"===e.name||"geometry-type"===e.name||"id"===e.name||/^filter-/.test(e.name))||e instanceof $i)return!1;var t=!0;return e.eachChild(function(n){t&&!Pa(n)&&(t=!1)}),t}function go(e){if(e instanceof ri&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild(function(n){t&&!go(n)&&(t=!1)}),t}function Gs(e,t){if(e instanceof ri&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(u){n&&!Gs(u,t)&&(n=!1)}),n}$i.parse=function(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(Do(e[1])){var n=e[1];if("FeatureCollection"===n.type)for(var u=0;u<n.features.length;++u){var p=n.features[u].geometry.type;if("Polygon"===p||"MultiPolygon"===p)return new $i(n,n.features[u].geometry)}else if("Feature"===n.type){var m=n.geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new $i(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new $i(n,n)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},$i.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(t,n){var u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],m=t.canonicalID();if("Polygon"===n.type){var y=qs(n.coordinates,p,m),S=Zs(t.geometry(),u,p,m);if(!Ro(u,p))return!1;for(var T=0,A=S;T<A.length;T+=1)if(!Pl(A[T],y))return!1}if("MultiPolygon"===n.type){var L=ms(n.coordinates,p,m),B=Zs(t.geometry(),u,p,m);if(!Ro(u,p))return!1;for(var Z=0,H=B;Z<H.length;Z+=1)if(!hu(H[Z],L))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(t,n){var u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],m=t.canonicalID();if("Polygon"===n.type){var y=qs(n.coordinates,p,m),S=Dl(t.geometry(),u,p,m);if(!Ro(u,p))return!1;for(var T=0,A=S;T<A.length;T+=1)if(!Vs(A[T],y))return!1}if("MultiPolygon"===n.type){var L=ms(n.coordinates,p,m),B=Dl(t.geometry(),u,p,m);if(!Ro(u,p))return!1;for(var Z=0,H=B;Z<H.length;Z+=1)if(!$s(H[Z],L))return!1}return!0}(e,this.geometries)}return!1},$i.prototype.eachChild=function(){},$i.prototype.outputDefined=function(){return!0},$i.prototype.serialize=function(){return["within",this.geojson]};var la=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};la.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new la(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},la.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},la.prototype.eachChild=function(){},la.prototype.outputDefined=function(){return!1},la.prototype.serialize=function(){return["var",this.name]};var ua=function(e,t,n,u,p){void 0===t&&(t=[]),void 0===u&&(u=new st),void 0===p&&(p=[]),this.registry=e,this.path=t,this.key=t.map(function(m){return"["+m+"]"}).join(""),this.scope=u,this.errors=p,this.expectedType=n};function Bo(e,t){for(var n,u=e.length-1,p=0,m=u,y=0;p<=m;)if((n=e[y=Math.floor((p+m)/2)])<=t){if(y===u||t<e[y+1])return y;p=y+1}else{if(!(n>t))throw new gn("Input is not a number.");m=y-1}return 0}ua.prototype.parse=function(e,t,n,u,p){return void 0===p&&(p={}),t?this.concat(t,n,u)._parse(e,p):this._parse(e,p)},ua.prototype._parse=function(e,t){function n(A,L,B){return"assert"===B?new ii(L,[A]):"coerce"===B?new Pr(L,[A]):A}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var u=e[0];if("string"!=typeof u)return this.error("Expression name must be a string, but found "+typeof u+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var p=this.registry[u];if(p){var m=p.parse(e,this);if(!m)return null;if(this.expectedType){var y=this.expectedType,S=m.type;if("string"!==y.kind&&"number"!==y.kind&&"boolean"!==y.kind&&"object"!==y.kind&&"array"!==y.kind||"value"!==S.kind)if("color"!==y.kind&&"formatted"!==y.kind&&"resolvedImage"!==y.kind||"value"!==S.kind&&"string"!==S.kind){if(this.checkSubtype(y,S))return null}else m=n(m,y,t.typeAnnotation||"coerce");else m=n(m,y,t.typeAnnotation||"assert")}if(!(m instanceof tr)&&"resolvedImage"!==m.type.kind&&function A(L){if(L instanceof la)return A(L.boundExpression);if(L instanceof ri&&"error"===L.name||L instanceof Gn||L instanceof $i)return!1;var B=L instanceof Pr||L instanceof ii,Z=!0;return L.eachChild(function(H){Z=B?Z&&A(H):Z&&H instanceof tr}),!!Z&&Pa(L)&&Gs(L,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(m)){var T=new Oo;try{m=new tr(m.type,m.evaluate(T))}catch(A){return this.error(A.message),null}}return m}return this.error('Unknown expression "'+u+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},ua.prototype.concat=function(e,t,n){var u="number"==typeof e?this.path.concat(e):this.path,p=n?this.scope.concat(n):this.scope;return new ua(this.registry,u,t||null,p,this.errors)},ua.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var u=""+this.key+t.map(function(p){return"["+p+"]"}).join("");this.errors.push(new at(u,e))},ua.prototype.checkSubtype=function(e,t){var n=Dt(e,t);return n&&this.error(n),n};var no=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var u=0,p=n;u<p.length;u+=1){var m=p[u],y=m[1];this.labels.push(m[0]),this.outputs.push(y)}};function Ot(e,t,n){return e*(1-n)+t*n}no.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var n=t.parse(e[1],1,Ne);if(!n)return null;var u=[],p=null;t.expectedType&&"value"!==t.expectedType.kind&&(p=t.expectedType);for(var m=1;m<e.length;m+=2){var y=1===m?-1/0:e[m],S=e[m+1],T=m,A=m+1;if("number"!=typeof y)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(u.length&&u[u.length-1][0]>=y)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);var L=t.parse(S,A,p);if(!L)return null;p=p||L.type,u.push([y,L])}return new no(p,n,u)},no.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var u=this.input.evaluate(e);if(u<=t[0])return n[0].evaluate(e);var p=t.length;return u>=t[p-1]?n[p-1].evaluate(e):n[Bo(t,u)].evaluate(e)},no.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},no.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},no.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var vn=Object.freeze({__proto__:null,number:Ot,color:function(e,t,n){return new $t(Ot(e.r,t.r,n),Ot(e.g,t.g,n),Ot(e.b,t.b,n),Ot(e.a,t.a,n))},array:function(e,t,n){return e.map(function(u,p){return Ot(u,t[p],n)})}}),du=6/29*3*(6/29),Hu=Math.PI/180,Xu=180/Math.PI;function Ll(e){return e>.008856451679035631?Math.pow(e,1/3):e/du+4/29}function Ol(e){return e>6/29?e*e*e:du*(e-4/29)}function Rl(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function js(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function mu(e){var t=js(e.r),n=js(e.g),u=js(e.b),p=Ll((.4124564*t+.3575761*n+.1804375*u)/.95047),m=Ll((.2126729*t+.7151522*n+.072175*u)/1);return{l:116*m-16,a:500*(p-m),b:200*(m-Ll((.0193339*t+.119192*n+.9503041*u)/1.08883)),alpha:e.a}}function wi(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,u=isNaN(e.b)?t:t-e.b/200;return t=1*Ol(t),n=.95047*Ol(n),u=1.08883*Ol(u),new $t(Rl(3.2404542*n-1.5371385*t-.4985314*u),Rl(-.969266*n+1.8760108*t+.041556*u),Rl(.0556434*n-.2040259*t+1.0572252*u),e.alpha)}function gu(e,t,n){var u=t-e;return e+n*(u>180||u<-180?u-360*Math.round(u/360):u)}var Fo={forward:mu,reverse:wi,interpolate:function(e,t,n){return{l:Ot(e.l,t.l,n),a:Ot(e.a,t.a,n),b:Ot(e.b,t.b,n),alpha:Ot(e.alpha,t.alpha,n)}}},Qa={forward:function(e){var t=mu(e),n=t.l,u=t.a,p=t.b,m=Math.atan2(p,u)*Xu;return{h:m<0?m+360:m,c:Math.sqrt(u*u+p*p),l:n,alpha:e.a}},reverse:function(e){var t=e.h*Hu,n=e.c;return wi({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:gu(e.h,t.h,n),c:Ot(e.c,t.c,n),l:Ot(e.l,t.l,n),alpha:Ot(e.alpha,t.alpha,n)}}},Ws=Object.freeze({__proto__:null,lab:Fo,hcl:Qa}),dn=function(e,t,n,u,p){this.type=e,this.operator=t,this.interpolation=n,this.input=u,this.labels=[],this.outputs=[];for(var m=0,y=p;m<y.length;m+=1){var S=y[m],T=S[1];this.labels.push(S[0]),this.outputs.push(T)}};function Hs(e,t,n,u){var p=u-n,m=e-n;return 0===p?0:1===t?m/p:(Math.pow(t,m)-1)/(Math.pow(t,p)-1)}dn.interpolationFactor=function(e,t,n,u){var p=0;if("exponential"===e.name)p=Hs(t,e.base,n,u);else if("linear"===e.name)p=Hs(t,1,n,u);else if("cubic-bezier"===e.name){var m=e.controlPoints;p=new Ge(m[0],m[1],m[2],m[3]).solve(Hs(t,1,n,u))}return p},dn.parse=function(e,t){var n=e[0],u=e[1],p=e[2],m=e.slice(3);if(!Array.isArray(u)||0===u.length)return t.error("Expected an interpolation type expression.",1);if("linear"===u[0])u={name:"linear"};else if("exponential"===u[0]){var y=u[1];if("number"!=typeof y)return t.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:y}}else{if("cubic-bezier"!==u[0])return t.error("Unknown interpolation type "+String(u[0]),1,0);var S=u.slice(1);if(4!==S.length||S.some(function(de){return"number"!=typeof de||de<0||de>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:S}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(p=t.parse(p,2,Ne)))return null;var T=[],A=null;"interpolate-hcl"===n||"interpolate-lab"===n?A=At:t.expectedType&&"value"!==t.expectedType.kind&&(A=t.expectedType);for(var L=0;L<m.length;L+=2){var B=m[L],Z=m[L+1],H=L+3,oe=L+4;if("number"!=typeof B)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(T.length&&T[T.length-1][0]>=B)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);var se=t.parse(Z,oe,A);if(!se)return null;A=A||se.type,T.push([B,se])}return"number"===A.kind||"color"===A.kind||"array"===A.kind&&"number"===A.itemType.kind&&"number"==typeof A.N?new dn(A,n,u,p,T):t.error("Type "+Yt(A)+" is not interpolatable.")},dn.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var u=this.input.evaluate(e);if(u<=t[0])return n[0].evaluate(e);var p=t.length;if(u>=t[p-1])return n[p-1].evaluate(e);var m=Bo(t,u),y=dn.interpolationFactor(this.interpolation,u,t[m],t[m+1]),S=n[m].evaluate(e),T=n[m+1].evaluate(e);return"interpolate"===this.operator?vn[this.type.kind.toLowerCase()](S,T,y):"interpolate-hcl"===this.operator?Qa.reverse(Qa.interpolate(Qa.forward(S),Qa.forward(T),y)):Fo.reverse(Fo.interpolate(Fo.forward(S),Fo.forward(T),y))},dn.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},dn.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},dn.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t};var No=function(e,t){this.type=e,this.args=t};No.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,u=t.expectedType;u&&"value"!==u.kind&&(n=u);for(var p=[],m=0,y=e.slice(1);m<y.length;m+=1){var S=t.parse(y[m],1+p.length,n,void 0,{typeAnnotation:"omit"});if(!S)return null;n=n||S.type,p.push(S)}var T=u&&p.some(function(A){return Dt(u,A.type)});return new No(T?lt:n,p)},No.prototype.evaluate=function(e){for(var t,n=null,u=0,p=0,m=this.args;p<m.length&&(u++,(n=m[p].evaluate(e))&&n instanceof Tn&&!n.available&&(t||(t=n.name),n=null,u===this.args.length&&(n=t)),null===n);p+=1);return n},No.prototype.eachChild=function(e){this.args.forEach(e)},No.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},No.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var vo=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};vo.prototype.evaluate=function(e){return this.result.evaluate(e)},vo.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},vo.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],u=1;u<e.length-1;u+=2){var p=e[u];if("string"!=typeof p)return t.error("Expected string, but found "+typeof p+" instead.",u);if(/[^a-zA-Z0-9_]/.test(p))return t.error("Variable names must contain only alphanumeric characters or '_'.",u);var m=t.parse(e[u+1],u+1);if(!m)return null;n.push([p,m])}var y=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return y?new vo(n,y):null},vo.prototype.outputDefined=function(){return this.result.outputDefined()},vo.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var u=n[t];e.push(u[0],u[1].serialize())}return e.push(this.result.serialize()),e};var ca=function(e,t,n){this.type=e,this.index=t,this.input=n};ca.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Ne),u=t.parse(e[2],2,hn(t.expectedType||lt));return n&&u?new ca(u.type.itemType,n,u):null},ca.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new gn("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new gn("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new gn("Array index must be an integer, but found "+t+" instead.");return n[t]},ca.prototype.eachChild=function(e){e(this.index),e(this.input)},ca.prototype.outputDefined=function(){return!1},ca.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Uo=function(e,t){this.type=Ve,this.needle=e,this.haystack=t};Uo.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,lt),u=t.parse(e[2],2,lt);return n&&u?fn(n.type,[Ve,Qe,Ne,gt,lt])?new Uo(n,u):t.error("Expected first argument to be of type boolean, string, number or null, but found "+Yt(n.type)+" instead"):null},Uo.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!Lt(t,["boolean","string","number","null"]))throw new gn("Expected first argument to be of type boolean, string, number or null, but found "+Yt(Zn(t))+" instead.");if(!Lt(n,["string","array"]))throw new gn("Expected second argument to be of type array or string, but found "+Yt(Zn(n))+" instead.");return n.indexOf(t)>=0},Uo.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},Uo.prototype.outputDefined=function(){return!0},Uo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Vo=function(e,t,n){this.type=Ne,this.needle=e,this.haystack=t,this.fromIndex=n};Vo.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,lt),u=t.parse(e[2],2,lt);if(!n||!u)return null;if(!fn(n.type,[Ve,Qe,Ne,gt,lt]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+Yt(n.type)+" instead");if(4===e.length){var p=t.parse(e[3],3,Ne);return p?new Vo(n,u,p):null}return new Vo(n,u)},Vo.prototype.evaluate=function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Lt(t,["boolean","string","number","null"]))throw new gn("Expected first argument to be of type boolean, string, number or null, but found "+Yt(Zn(t))+" instead.");if(!Lt(n,["string","array"]))throw new gn("Expected second argument to be of type array or string, but found "+Yt(Zn(n))+" instead.");if(this.fromIndex){var u=this.fromIndex.evaluate(e);return n.indexOf(t,u)}return n.indexOf(t)},Vo.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},Vo.prototype.outputDefined=function(){return!1},Vo.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var fi=function(e,t,n,u,p,m){this.inputType=e,this.type=t,this.input=n,this.cases=u,this.outputs=p,this.otherwise=m};fi.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,u;t.expectedType&&"value"!==t.expectedType.kind&&(u=t.expectedType);for(var p={},m=[],y=2;y<e.length-1;y+=2){var S=e[y],T=e[y+1];Array.isArray(S)||(S=[S]);var A=t.concat(y);if(0===S.length)return A.error("Expected at least one branch label.");for(var L=0,B=S;L<B.length;L+=1){var Z=B[L];if("number"!=typeof Z&&"string"!=typeof Z)return A.error("Branch labels must be numbers or strings.");if("number"==typeof Z&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return A.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof Z&&Math.floor(Z)!==Z)return A.error("Numeric branch labels must be integer values.");if(n){if(A.checkSubtype(n,Zn(Z)))return null}else n=Zn(Z);if(void 0!==p[String(Z)])return A.error("Branch labels must be unique.");p[String(Z)]=m.length}var H=t.parse(T,y,u);if(!H)return null;u=u||H.type,m.push(H)}var oe=t.parse(e[1],1,lt);if(!oe)return null;var se=t.parse(e[e.length-1],e.length-1,u);return se?"value"!==oe.type.kind&&t.concat(1).checkSubtype(n,oe.type)?null:new fi(n,u,oe,p,m,se):null},fi.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(Zn(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},fi.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},fi.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},fi.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],u={},p=0,m=Object.keys(this.cases).sort();p<m.length;p+=1){var y=m[p];void 0===(B=u[this.cases[y]])?(u[this.cases[y]]=n.length,n.push([this.cases[y],[y]])):n[B][1].push(y)}for(var S=function(H){return"number"===e.inputType.kind?Number(H):H},T=0,A=n;T<A.length;T+=1){var L=A[T],B=L[0],Z=L[1];t.push(1===Z.length?S(Z[0]):Z.map(S)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var za=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};za.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var u=[],p=1;p<e.length-1;p+=2){var m=t.parse(e[p],p,Ve);if(!m)return null;var y=t.parse(e[p+1],p+1,n);if(!y)return null;u.push([m,y]),n=n||y.type}var S=t.parse(e[e.length-1],e.length-1,n);return S?new za(n,u,S):null},za.prototype.evaluate=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var u=n[t],p=u[1];if(u[0].evaluate(e))return p.evaluate(e)}return this.otherwise.evaluate(e)},za.prototype.eachChild=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var u=n[t],p=u[1];e(u[0]),e(p)}e(this.otherwise)},za.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},za.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};var oi=function(e,t,n,u){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=u};function vu(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Sn(e,t,n,u){return 0===u.compare(t,n)}function zr(e,t,n){var u="=="!==e&&"!="!==e;return function(){function p(m,y,S){this.type=Ve,this.lhs=m,this.rhs=y,this.collator=S,this.hasUntypedArgument="value"===m.type.kind||"value"===y.type.kind}return p.parse=function(m,y){if(3!==m.length&&4!==m.length)return y.error("Expected two or three arguments.");var S=m[0],T=y.parse(m[1],1,lt);if(!T)return null;if(!vu(S,T.type))return y.concat(1).error('"'+S+"\" comparisons are not supported for type '"+Yt(T.type)+"'.");var A=y.parse(m[2],2,lt);if(!A)return null;if(!vu(S,A.type))return y.concat(2).error('"'+S+"\" comparisons are not supported for type '"+Yt(A.type)+"'.");if(T.type.kind!==A.type.kind&&"value"!==T.type.kind&&"value"!==A.type.kind)return y.error("Cannot compare types '"+Yt(T.type)+"' and '"+Yt(A.type)+"'.");u&&("value"===T.type.kind&&"value"!==A.type.kind?T=new ii(A.type,[T]):"value"!==T.type.kind&&"value"===A.type.kind&&(A=new ii(T.type,[A])));var L=null;if(4===m.length){if("string"!==T.type.kind&&"string"!==A.type.kind&&"value"!==T.type.kind&&"value"!==A.type.kind)return y.error("Cannot use collator to compare non-string types.");if(!(L=y.parse(m[3],3,mn)))return null}return new p(T,A,L)},p.prototype.evaluate=function(m){var y=this.lhs.evaluate(m),S=this.rhs.evaluate(m);if(u&&this.hasUntypedArgument){var T=Zn(y),A=Zn(S);if(T.kind!==A.kind||"string"!==T.kind&&"number"!==T.kind)throw new gn('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+T.kind+", "+A.kind+") instead.")}if(this.collator&&!u&&this.hasUntypedArgument){var L=Zn(y),B=Zn(S);if("string"!==L.kind||"string"!==B.kind)return t(m,y,S)}return this.collator?n(m,y,S,this.collator.evaluate(m)):t(m,y,S)},p.prototype.eachChild=function(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)},p.prototype.outputDefined=function(){return!0},p.prototype.serialize=function(){var m=[e];return this.eachChild(function(y){m.push(y.serialize())}),m},p}()}oi.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,lt),u=t.parse(e[2],2,Ne);if(!n||!u)return null;if(!fn(n.type,[hn(lt),Qe,lt]))return t.error("Expected first argument to be of type array or string, but found "+Yt(n.type)+" instead");if(4===e.length){var p=t.parse(e[3],3,Ne);return p?new oi(n.type,n,u,p):null}return new oi(n.type,n,u)},oi.prototype.evaluate=function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Lt(t,["string","array"]))throw new gn("Expected first argument to be of type array or string, but found "+Yt(Zn(t))+" instead.");if(this.endIndex){var u=this.endIndex.evaluate(e);return t.slice(n,u)}return t.slice(n)},oi.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},oi.prototype.outputDefined=function(){return!1},oi.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ka=zr("==",function(e,t,n){return t===n},Sn),Xs=zr("!=",function(e,t,n){return t!==n},function(e,t,n,u){return!Sn(0,t,n,u)}),Fn=zr("<",function(e,t,n){return t<n},function(e,t,n,u){return u.compare(t,n)<0}),$o=zr(">",function(e,t,n){return t>n},function(e,t,n,u){return u.compare(t,n)>0}),Ys=zr("<=",function(e,t,n){return t<=n},function(e,t,n,u){return u.compare(t,n)<=0}),Yu=zr(">=",function(e,t,n){return t>=n},function(e,t,n,u){return u.compare(t,n)>=0}),yo=function(e,t,n,u,p){this.type=Qe,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=u,this.maxFractionDigits=p};yo.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Ne);if(!n)return null;var u=e[2];if("object"!=typeof u||Array.isArray(u))return t.error("NumberFormat options argument must be an object.");var p=null;if(u.locale&&!(p=t.parse(u.locale,1,Qe)))return null;var m=null;if(u.currency&&!(m=t.parse(u.currency,1,Qe)))return null;var y=null;if(u["min-fraction-digits"]&&!(y=t.parse(u["min-fraction-digits"],1,Ne)))return null;var S=null;return u["max-fraction-digits"]&&!(S=t.parse(u["max-fraction-digits"],1,Ne))?null:new yo(n,p,m,y,S)},yo.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},yo.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},yo.prototype.outputDefined=function(){return!1},yo.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var pa=function(e){this.type=Ne,this.input=e};pa.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found "+Yt(n.type)+" instead."):new pa(n):null},pa.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t||Array.isArray(t))return t.length;throw new gn("Expected value to be of type string or array, but found "+Yt(Zn(t))+" instead.")},pa.prototype.eachChild=function(e){e(this.input)},pa.prototype.outputDefined=function(){return!1},pa.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var es={"==":ka,"!=":Xs,">":$o,"<":Fn,">=":Yu,"<=":Ys,array:ii,at:ca,boolean:ii,case:za,coalesce:No,collator:Gn,format:Pi,image:Lo,in:Uo,"index-of":Vo,interpolate:dn,"interpolate-hcl":dn,"interpolate-lab":dn,length:pa,let:vo,literal:tr,match:fi,number:ii,"number-format":yo,object:ii,slice:oi,step:no,string:ii,"to-boolean":Pr,"to-color":Pr,"to-number":Pr,"to-string":Pr,var:la,within:$i};function Bl(e,t){var n=t[0],u=t[1],p=t[2],m=t[3];n=n.evaluate(e),u=u.evaluate(e),p=p.evaluate(e);var y=m?m.evaluate(e):1,S=Aa(n,u,p,y);if(S)throw new gn(S);return new $t(n/255*y,u/255*y,p/255*y,y)}function Fl(e,t){return e in t}function ha(e,t){var n=t[e];return void 0===n?null:n}function mr(e){return{type:e}}function gr(e){return{result:"success",value:e}}function qr(e){return{result:"error",value:e}}function Da(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function gs(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Ks(e){return!!e.expression&&e.expression.interpolated}function yn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Nl(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Ul(e){return e}function La(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Mc(e,t,n,u,p){return La(typeof n===p?u[n]:void 0,e.default,t.default)}function Ku(e,t,n){if("number"!==yn(n))return La(e.default,t.default);var u=e.stops.length;if(1===u||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[u-1][0])return e.stops[u-1][1];var p=Bo(e.stops.map(function(m){return m[0]}),n);return e.stops[p][1]}function qi(e,t,n){var u=void 0!==e.base?e.base:1;if("number"!==yn(n))return La(e.default,t.default);var p=e.stops.length;if(1===p||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[p-1][0])return e.stops[p-1][1];var Z,H,se,de,m=Bo(e.stops.map(function(B){return B[0]}),n),y=(Z=u,de=n-(H=e.stops[m][0]),0==(se=e.stops[m+1][0]-H)?0:1===Z?de/se:(Math.pow(Z,de)-1)/(Math.pow(Z,se)-1)),S=e.stops[m][1],T=e.stops[m+1][1],A=vn[t.type]||Ul;if(e.colorSpace&&"rgb"!==e.colorSpace){var L=Ws[e.colorSpace];A=function(B,Z){return L.reverse(L.interpolate(L.forward(B),L.forward(Z),y))}}return"function"==typeof S.evaluate?{evaluate:function(){for(var B=[],Z=arguments.length;Z--;)B[Z]=arguments[Z];var H=S.evaluate.apply(void 0,B),oe=T.evaluate.apply(void 0,B);if(void 0!==H&&void 0!==oe)return A(H,oe,y)}}:A(S,T,y)}function Vl(e,t,n){return"color"===t.type?n=$t.parse(n):"formatted"===t.type?n=hi.fromString(n.toString()):"resolvedImage"===t.type?n=Tn.fromString(n.toString()):yn(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),La(n,e.default,t.default)}ri.register(es,{error:[{kind:"error"},[Qe],function(e,t){throw new gn(t[0].evaluate(e))}],typeof:[Qe,[lt],function(e,t){return Yt(Zn(t[0].evaluate(e)))}],"to-rgba":[hn(Ne,4),[At],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[At,[Ne,Ne,Ne],Bl],rgba:[At,[Ne,Ne,Ne,Ne],Bl],has:{type:Ve,overloads:[[[Qe],function(e,t){return Fl(t[0].evaluate(e),e.properties())}],[[Qe,Pt],function(e,t){var n=t[1];return Fl(t[0].evaluate(e),n.evaluate(e))}]]},get:{type:lt,overloads:[[[Qe],function(e,t){return ha(t[0].evaluate(e),e.properties())}],[[Qe,Pt],function(e,t){var n=t[1];return ha(t[0].evaluate(e),n.evaluate(e))}]]},"feature-state":[lt,[Qe],function(e,t){return ha(t[0].evaluate(e),e.featureState||{})}],properties:[Pt,[],function(e){return e.properties()}],"geometry-type":[Qe,[],function(e){return e.geometryType()}],id:[lt,[],function(e){return e.id()}],zoom:[Ne,[],function(e){return e.globals.zoom}],"heatmap-density":[Ne,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Ne,[],function(e){return e.globals.lineProgress||0}],accumulated:[lt,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Ne,mr(Ne),function(e,t){for(var n=0,u=0,p=t;u<p.length;u+=1)n+=p[u].evaluate(e);return n}],"*":[Ne,mr(Ne),function(e,t){for(var n=1,u=0,p=t;u<p.length;u+=1)n*=p[u].evaluate(e);return n}],"-":{type:Ne,overloads:[[[Ne,Ne],function(e,t){var n=t[1];return t[0].evaluate(e)-n.evaluate(e)}],[[Ne],function(e,t){return-t[0].evaluate(e)}]]},"/":[Ne,[Ne,Ne],function(e,t){var n=t[1];return t[0].evaluate(e)/n.evaluate(e)}],"%":[Ne,[Ne,Ne],function(e,t){var n=t[1];return t[0].evaluate(e)%n.evaluate(e)}],ln2:[Ne,[],function(){return Math.LN2}],pi:[Ne,[],function(){return Math.PI}],e:[Ne,[],function(){return Math.E}],"^":[Ne,[Ne,Ne],function(e,t){var n=t[1];return Math.pow(t[0].evaluate(e),n.evaluate(e))}],sqrt:[Ne,[Ne],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Ne,[Ne],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Ne,[Ne],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Ne,[Ne],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Ne,[Ne],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Ne,[Ne],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Ne,[Ne],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Ne,[Ne],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Ne,[Ne],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Ne,[Ne],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Ne,mr(Ne),function(e,t){return Math.min.apply(Math,t.map(function(n){return n.evaluate(e)}))}],max:[Ne,mr(Ne),function(e,t){return Math.max.apply(Math,t.map(function(n){return n.evaluate(e)}))}],abs:[Ne,[Ne],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Ne,[Ne],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Ne,[Ne],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Ne,[Ne],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Ve,[Qe,lt],function(e,t){var n=t[0],u=t[1];return e.properties()[n.value]===u.value}],"filter-id-==":[Ve,[lt],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[Ve,[Qe],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[Ve,[Qe,lt],function(e,t){var n=t[0],u=t[1],p=e.properties()[n.value],m=u.value;return typeof p==typeof m&&p<m}],"filter-id-<":[Ve,[lt],function(e,t){var n=t[0],u=e.id(),p=n.value;return typeof u==typeof p&&u<p}],"filter->":[Ve,[Qe,lt],function(e,t){var n=t[0],u=t[1],p=e.properties()[n.value],m=u.value;return typeof p==typeof m&&p>m}],"filter-id->":[Ve,[lt],function(e,t){var n=t[0],u=e.id(),p=n.value;return typeof u==typeof p&&u>p}],"filter-<=":[Ve,[Qe,lt],function(e,t){var n=t[0],u=t[1],p=e.properties()[n.value],m=u.value;return typeof p==typeof m&&p<=m}],"filter-id-<=":[Ve,[lt],function(e,t){var n=t[0],u=e.id(),p=n.value;return typeof u==typeof p&&u<=p}],"filter->=":[Ve,[Qe,lt],function(e,t){var n=t[0],u=t[1],p=e.properties()[n.value],m=u.value;return typeof p==typeof m&&p>=m}],"filter-id->=":[Ve,[lt],function(e,t){var n=t[0],u=e.id(),p=n.value;return typeof u==typeof p&&u>=p}],"filter-has":[Ve,[lt],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Ve,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[Ve,[hn(Qe)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Ve,[hn(lt)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Ve,[Qe,hn(lt)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[Ve,[Qe,hn(lt)],function(e,t){var n=t[0],u=t[1];return function(p,m,y,S){for(;y<=S;){var T=y+S>>1;if(m[T]===p)return!0;m[T]>p?S=T-1:y=T+1}return!1}(e.properties()[n.value],u.value,0,u.value.length-1)}],all:{type:Ve,overloads:[[[Ve,Ve],function(e,t){var n=t[1];return t[0].evaluate(e)&&n.evaluate(e)}],[mr(Ve),function(e,t){for(var n=0,u=t;n<u.length;n+=1)if(!u[n].evaluate(e))return!1;return!0}]]},any:{type:Ve,overloads:[[[Ve,Ve],function(e,t){var n=t[1];return t[0].evaluate(e)||n.evaluate(e)}],[mr(Ve),function(e,t){for(var n=0,u=t;n<u.length;n+=1)if(u[n].evaluate(e))return!0;return!1}]]},"!":[Ve,[Ve],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Ve,[Qe],function(e,t){var n=e.globals&&e.globals.isSupportedScript;return!n||n(t[0].evaluate(e))}],upcase:[Qe,[Qe],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Qe,[Qe],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Qe,mr(lt),function(e,t){return t.map(function(n){return to(n.evaluate(e))}).join("")}],"resolved-locale":[Qe,[mn],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var qo=function(e,t){var n;this.expression=e,this._warningHistory={},this._evaluator=new Oo,this._defaultValue=t?"color"===(n=t).type&&Nl(n.default)?new $t(0,0,0,0):"color"===n.type?$t.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=t&&"enum"===t.type?t.values:null};function Js(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in es}function Qs(e,t){var p,m,n=new ua(es,[],t?(m={color:At,string:Qe,number:Ne,enum:Qe,boolean:Ve,formatted:Vt,resolvedImage:wn},"array"===(p=t).type?hn(m[p.value]||lt,p.length):m[p.type]):void 0),u=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return u?gr(new qo(u,t)):qr(n.errors)}qo.prototype.evaluateWithoutErrorHandling=function(e,t,n,u,p,m){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=u,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=m,this.expression.evaluate(this._evaluator)},qo.prototype.evaluate=function(e,t,n,u,p,m){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=u,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=m||null;try{var y=this.expression.evaluate(this._evaluator);if(null==y||"number"==typeof y&&y!=y)return this._defaultValue;if(this._enumValues&&!(y in this._enumValues))throw new gn("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(y)+" instead.");return y}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,"undefined"!=typeof console&&console.warn(S.message)),this._defaultValue}};var el=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!go(t.expression)};el.prototype.evaluateWithoutErrorHandling=function(e,t,n,u,p,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,u,p,m)},el.prototype.evaluate=function(e,t,n,u,p,m){return this._styleExpression.evaluate(e,t,n,u,p,m)};var vs=function(e,t,n,u){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!go(t.expression),this.interpolationType=u};function yu(e,t){if("error"===(e=Qs(e,t)).result)return e;var n=e.value.expression,u=Pa(n);if(!u&&!Da(t))return qr([new at("","data expressions not supported")]);var p=Gs(n,["zoom"]);if(!p&&!gs(t))return qr([new at("","zoom expressions not supported")]);var m=function y(S){var T=null;if(S instanceof vo)T=y(S.result);else if(S instanceof No)for(var A=0,L=S.args;A<L.length&&!(T=y(L[A]));A+=1);else(S instanceof no||S instanceof dn)&&S.input instanceof ri&&"zoom"===S.input.name&&(T=S);return T instanceof at||S.eachChild(function(B){var Z=y(B);Z instanceof at?T=Z:!T&&Z?T=new at("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):T&&Z&&T!==Z&&(T=new at("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),T}(n);return m||p?m instanceof at?qr([m]):m instanceof dn&&!Ks(t)?qr([new at("",'"interpolate" expressions cannot be used with this property')]):gr(m?new vs(u?"camera":"composite",e.value,m.labels,m instanceof dn?m.interpolation:void 0):new el(u?"constant":"source",e.value)):qr([new at("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}vs.prototype.evaluateWithoutErrorHandling=function(e,t,n,u,p,m){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,u,p,m)},vs.prototype.evaluate=function(e,t,n,u,p,m){return this._styleExpression.evaluate(e,t,n,u,p,m)},vs.prototype.interpolationFactor=function(e,t,n){return this.interpolationType?dn.interpolationFactor(this.interpolationType,e,t,n):0};var tl=function(e,t){this._parameters=e,this._specification=t,Ye(this,function n(u,p){var m,y,S,T="color"===p.type,A=u.stops&&"object"==typeof u.stops[0][0],L=A||!(A||void 0!==u.property),B=u.type||(Ks(p)?"exponential":"interval");if(T&&((u=Ye({},u)).stops&&(u.stops=u.stops.map(function(tt){return[tt[0],$t.parse(tt[1])]})),u.default=$t.parse(u.default?u.default:p.default)),u.colorSpace&&"rgb"!==u.colorSpace&&!Ws[u.colorSpace])throw new Error("Unknown color space: "+u.colorSpace);if("exponential"===B)m=qi;else if("interval"===B)m=Ku;else if("categorical"===B){m=Mc,y=Object.create(null);for(var Z=0,H=u.stops;Z<H.length;Z+=1){var oe=H[Z];y[oe[0]]=oe[1]}S=typeof u.stops[0][0]}else{if("identity"!==B)throw new Error('Unknown function type "'+B+'"');m=Vl}if(A){for(var se={},de=[],pe=0;pe<u.stops.length;pe++){var Se=u.stops[pe],Ce=Se[0].zoom;void 0===se[Ce]&&(se[Ce]={zoom:Ce,type:u.type,property:u.property,default:u.default,stops:[]},de.push(Ce)),se[Ce].stops.push([Se[0].value,Se[1]])}for(var Pe=[],ze=0,Fe=de;ze<Fe.length;ze+=1){var He=Fe[ze];Pe.push([se[He].zoom,n(se[He],p)])}var Je={name:"linear"};return{kind:"composite",interpolationType:Je,interpolationFactor:dn.interpolationFactor.bind(void 0,Je),zoomStops:Pe.map(function(tt){return tt[0]}),evaluate:function(tt,xt){var nt=tt.zoom;return qi({stops:Pe,base:u.base},p,nt).evaluate(nt,xt)}}}if(L){var dt="exponential"===B?{name:"exponential",base:void 0!==u.base?u.base:1}:null;return{kind:"camera",interpolationType:dt,interpolationFactor:dn.interpolationFactor.bind(void 0,dt),zoomStops:u.stops.map(function(tt){return tt[0]}),evaluate:function(tt){return m(u,p,tt.zoom,y,S)}}}return{kind:"source",evaluate:function(tt,xt){var nt=xt&&xt.properties?xt.properties[u.property]:void 0;return void 0===nt?La(u.default,p.default):m(u,p,nt,y,S)}}}(this._parameters,this._specification))};function _o(e){var t=e.key,n=e.value,u=e.valueSpec||{},p=e.objectElementValidators||{},m=e.style,y=e.styleSpec,S=[],T=yn(n);if("object"!==T)return[new ce(t,n,"object expected, "+T+" found")];for(var A in n){var L=A.split(".")[0],B=u[L]||u["*"],Z=void 0;if(p[L])Z=p[L];else if(u[L])Z=vt;else if(p["*"])Z=p["*"];else{if(!u["*"]){S.push(new ce(t,n[A],'unknown property "'+A+'"'));continue}Z=vt}S=S.concat(Z({key:(t&&t+".")+A,value:n[A],valueSpec:B,style:m,styleSpec:y,object:n,objectKey:A},n))}for(var H in u)p[H]||u[H].required&&void 0===u[H].default&&void 0===n[H]&&S.push(new ce(t,n,'missing required property "'+H+'"'));return S}function ts(e){var t=e.value,n=e.valueSpec,u=e.style,p=e.styleSpec,m=e.key,y=e.arrayElementValidator||vt;if("array"!==yn(t))return[new ce(m,t,"array expected, "+yn(t)+" found")];if(n.length&&t.length!==n.length)return[new ce(m,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new ce(m,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var S={type:n.value,values:n.values};p.$version<7&&(S.function=n.function),"object"===yn(n.value)&&(S=n.value);for(var T=[],A=0;A<t.length;A++)T=T.concat(y({array:t,arrayIndex:A,value:t[A],valueSpec:S,style:u,styleSpec:p,key:m+"["+A+"]"}));return T}function Ju(e){var t=e.key,n=e.value,u=e.valueSpec,p=yn(n);return"number"===p&&n!=n&&(p="NaN"),"number"!==p?[new ce(t,n,"number expected, "+p+" found")]:"minimum"in u&&n<u.minimum?[new ce(t,n,n+" is less than the minimum value "+u.minimum)]:"maximum"in u&&n>u.maximum?[new ce(t,n,n+" is greater than the maximum value "+u.maximum)]:[]}function _u(e){var t,n,u,p=e.valueSpec,m=Ae(e.value.type),y={},S="categorical"!==m&&void 0===e.value.property,T=!S,A="array"===yn(e.value.stops)&&"array"===yn(e.value.stops[0])&&"object"===yn(e.value.stops[0][0]),L=_o({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(H){if("identity"===m)return[new ce(H.key,H.value,'identity function may not have a "stops" property')];var oe=[],se=H.value;return oe=oe.concat(ts({key:H.key,value:se,valueSpec:H.valueSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:B})),"array"===yn(se)&&0===se.length&&oe.push(new ce(H.key,se,"array must have at least one stop")),oe},default:function(H){return vt({key:H.key,value:H.value,valueSpec:p,style:H.style,styleSpec:H.styleSpec})}}});return"identity"===m&&S&&L.push(new ce(e.key,e.value,'missing required property "property"')),"identity"===m||e.value.stops||L.push(new ce(e.key,e.value,'missing required property "stops"')),"exponential"===m&&e.valueSpec.expression&&!Ks(e.valueSpec)&&L.push(new ce(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(T&&!Da(e.valueSpec)?L.push(new ce(e.key,e.value,"property functions not supported")):S&&!gs(e.valueSpec)&&L.push(new ce(e.key,e.value,"zoom functions not supported"))),"categorical"!==m&&!A||void 0!==e.value.property||L.push(new ce(e.key,e.value,'"property" property is required')),L;function B(H){var oe=[],se=H.value,de=H.key;if("array"!==yn(se))return[new ce(de,se,"array expected, "+yn(se)+" found")];if(2!==se.length)return[new ce(de,se,"array length 2 expected, length "+se.length+" found")];if(A){if("object"!==yn(se[0]))return[new ce(de,se,"object expected, "+yn(se[0])+" found")];if(void 0===se[0].zoom)return[new ce(de,se,"object stop key must have zoom")];if(void 0===se[0].value)return[new ce(de,se,"object stop key must have value")];if(u&&u>Ae(se[0].zoom))return[new ce(de,se[0].zoom,"stop zoom values must appear in ascending order")];Ae(se[0].zoom)!==u&&(u=Ae(se[0].zoom),n=void 0,y={}),oe=oe.concat(_o({key:de+"[0]",value:se[0],valueSpec:{zoom:{}},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:Ju,value:Z}}))}else oe=oe.concat(Z({key:de+"[0]",value:se[0],valueSpec:{},style:H.style,styleSpec:H.styleSpec},se));return Js(qe(se[1]))?oe.concat([new ce(de+"[1]",se[1],"expressions are not allowed in function stops.")]):oe.concat(vt({key:de+"[1]",value:se[1],valueSpec:p,style:H.style,styleSpec:H.styleSpec}))}function Z(H,oe){var se=yn(H.value),de=Ae(H.value),pe=null!==H.value?H.value:oe;if(t){if(se!==t)return[new ce(H.key,pe,se+" stop domain type must match previous stop domain type "+t)]}else t=se;if("number"!==se&&"string"!==se&&"boolean"!==se)return[new ce(H.key,pe,"stop domain value must be a number, string, or boolean")];if("number"!==se&&"categorical"!==m){var Se="number expected, "+se+" found";return Da(p)&&void 0===m&&(Se+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ce(H.key,pe,Se)]}return"categorical"!==m||"number"!==se||isFinite(de)&&Math.floor(de)===de?"categorical"!==m&&"number"===se&&void 0!==n&&de<n?[new ce(H.key,pe,"stop domain values must appear in ascending order")]:(n=de,"categorical"===m&&de in y?[new ce(H.key,pe,"stop domain values must be unique")]:(y[de]=!0,[])):[new ce(H.key,pe,"integer expected, found "+de)]}}function fa(e){var t=("property"===e.expressionContext?yu:Qs)(qe(e.value),e.valueSpec);if("error"===t.result)return t.value.map(function(u){return new ce(""+e.key+u.key,e.value,u.message)});var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new ce(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!go(n))return[new ce(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!go(n))return[new ce(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Gs(n,["zoom","feature-state"]))return[new ce(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Pa(n))return[new ce(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function V(e){var t=e.key,n=e.value,u=e.valueSpec,p=[];return Array.isArray(u.values)?-1===u.values.indexOf(Ae(n))&&p.push(new ce(t,n,"expected one of ["+u.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(u.values).indexOf(Ae(n))&&p.push(new ce(t,n,"expected one of ["+Object.keys(u.values).join(", ")+"], "+JSON.stringify(n)+" found")),p}function Zr(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var u=n[t];if(!Zr(u)&&"boolean"!=typeof u)return!1}return!0;default:return!0}}tl.deserialize=function(e){return new tl(e._parameters,e._specification)},tl.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var nl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function il(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};Zr(e)||(e=ns(e));var t=Qs(e,nl);if("error"===t.result)throw new Error(t.value.map(function(n){return n.key+": "+n.message}).join(", "));return{filter:function(n,u,p){return t.value.evaluate(n,u,{},p)},needGeometry:function n(u){if(!Array.isArray(u))return!1;if("within"===u[0])return!0;for(var p=1;p<u.length;p++)if(n(u[p]))return!0;return!1}(e)}}function da(e,t){return e<t?-1:e>t?1:0}function ns(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?io(e[1],e[2],"=="):"!="===n?ol(io(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?io(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(ns))):"all"===n?["all"].concat(e.slice(1).map(ns)):"none"===n?["all"].concat(e.slice(1).map(ns).map(ol)):"in"===n?kr(e[1],e.slice(2)):"!in"===n?ol(kr(e[1],e.slice(2))):"has"===n?rl(e[1]):"!has"===n?ol(rl(e[1])):"within"!==n||e}function io(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function kr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(n){return typeof n!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(da)]]:["filter-in-small",e,["literal",t]]}}function rl(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function ol(e){return["!",e]}function ys(e){return Zr(qe(e.value))?fa(Ye({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(n){var u=n.value,p=n.key;if("array"!==yn(u))return[new ce(p,u,"array expected, "+yn(u)+" found")];var m,y=n.styleSpec,S=[];if(u.length<1)return[new ce(p,u,"filter array must have at least 1 element")];switch(S=S.concat(V({key:p+"[0]",value:u[0],valueSpec:y.filter_operator,style:n.style,styleSpec:n.styleSpec})),Ae(u[0])){case"<":case"<=":case">":case">=":u.length>=2&&"$type"===Ae(u[1])&&S.push(new ce(p,u,'"$type" cannot be use with operator "'+u[0]+'"'));case"==":case"!=":3!==u.length&&S.push(new ce(p,u,'filter array for operator "'+u[0]+'" must have 3 elements'));case"in":case"!in":u.length>=2&&"string"!==(m=yn(u[1]))&&S.push(new ce(p+"[1]",u[1],"string expected, "+m+" found"));for(var T=2;T<u.length;T++)m=yn(u[T]),"$type"===Ae(u[1])?S=S.concat(V({key:p+"["+T+"]",value:u[T],valueSpec:y.geometry_type,style:n.style,styleSpec:n.styleSpec})):"string"!==m&&"number"!==m&&"boolean"!==m&&S.push(new ce(p+"["+T+"]",u[T],"string, number, or boolean expected, "+m+" found"));break;case"any":case"all":case"none":for(var A=1;A<u.length;A++)S=S.concat(t({key:p+"["+A+"]",value:u[A],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":m=yn(u[1]),2!==u.length?S.push(new ce(p,u,'filter array for "'+u[0]+'" operator must have 2 elements')):"string"!==m&&S.push(new ce(p+"[1]",u[1],"string expected, "+m+" found"));break;case"within":m=yn(u[1]),2!==u.length?S.push(new ce(p,u,'filter array for "'+u[0]+'" operator must have 2 elements')):"object"!==m&&S.push(new ce(p+"[1]",u[1],"object expected, "+m+" found"))}return S}(e)}function al(e,t){var n=e.key,u=e.style,p=e.styleSpec,m=e.value,y=e.objectKey,S=p[t+"_"+e.layerType];if(!S)return[];var T=y.match(/^(.*)-transition$/);if("paint"===t&&T&&S[T[1]]&&S[T[1]].transition)return vt({key:n,value:m,valueSpec:p.transition,style:u,styleSpec:p});var A,L=e.valueSpec||S[y];if(!L)return[new ce(n,m,'unknown property "'+y+'"')];if("string"===yn(m)&&Da(L)&&!L.tokens&&(A=/^{([^}]+)}$/.exec(m)))return[new ce(n,m,'"'+y+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(A[1])+" }`.")];var B=[];return"symbol"===e.layerType&&("text-field"===y&&u&&!u.glyphs&&B.push(new ce(n,m,'use of "text-field" requires a style "glyphs" property')),"text-font"===y&&Nl(qe(m))&&"identity"===Ae(m.type)&&B.push(new ce(n,m,'"text-font" does not support identity functions'))),B.concat(vt({key:e.key,value:m,valueSpec:L,style:u,styleSpec:p,expressionContext:"property",propertyType:t,propertyKey:y}))}function _s(e){return al(e,"paint")}function xu(e){return al(e,"layout")}function xs(e){var t=[],n=e.value,u=e.key,p=e.style,m=e.styleSpec;n.type||n.ref||t.push(new ce(u,n,'either "type" or "ref" is required'));var y,S=Ae(n.type),T=Ae(n.ref);if(n.id)for(var A=Ae(n.id),L=0;L<e.arrayIndex;L++){var B=p.layers[L];Ae(B.id)===A&&t.push(new ce(u,n.id,'duplicate layer id "'+n.id+'", previously used at line '+B.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(oe){oe in n&&t.push(new ce(u,n[oe],'"'+oe+'" is prohibited for ref layers'))}),p.layers.forEach(function(oe){Ae(oe.id)===T&&(y=oe)}),y?y.ref?t.push(new ce(u,n.ref,"ref cannot reference another ref layer")):S=Ae(y.type):t.push(new ce(u,n.ref,'ref layer "'+T+'" not found'));else if("background"!==S)if(n.source){var Z=p.sources&&p.sources[n.source],H=Z&&Ae(Z.type);Z?"vector"===H&&"raster"===S?t.push(new ce(u,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===H&&"raster"!==S?t.push(new ce(u,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==H||n["source-layer"]?"raster-dem"===H&&"hillshade"!==S?t.push(new ce(u,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==S||!n.paint||!n.paint["line-gradient"]||"geojson"===H&&Z.lineMetrics||t.push(new ce(u,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new ce(u,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new ce(u,n.source,'source "'+n.source+'" not found'))}else t.push(new ce(u,n,'missing required property "source"'));return t=t.concat(_o({key:u,value:n,valueSpec:m.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return vt({key:u+".type",value:n.type,valueSpec:m.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:ys,layout:function(oe){return _o({layer:n,key:oe.key,value:oe.value,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{"*":function(se){return xu(Ye({layerType:S},se))}}})},paint:function(oe){return _o({layer:n,key:oe.key,value:oe.value,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{"*":function(se){return _s(Ye({layerType:S},se))}}})}}}))}function ye(e){var t=e.value,n=e.key,u=yn(t);return"string"!==u?[new ce(n,t,"string expected, "+u+" found")]:[]}var Ue={promoteId:function(e){var t=e.key,n=e.value;if("string"===yn(n))return ye({key:t,value:n});var u=[];for(var p in n)u.push.apply(u,ye({key:t+"."+p,value:n[p]}));return u}};function Le(e){var t=e.value,n=e.key,u=e.styleSpec,p=e.style;if(!t.type)return[new ce(n,t,'"type" is required')];var m,y=Ae(t.type);switch(y){case"vector":case"raster":case"raster-dem":return _o({key:n,value:t,valueSpec:u["source_"+y.replace("-","_")],style:e.style,styleSpec:u,objectElementValidators:Ue});case"geojson":if(m=_o({key:n,value:t,valueSpec:u.source_geojson,style:p,styleSpec:u,objectElementValidators:Ue}),t.cluster)for(var S in t.clusterProperties){var T=t.clusterProperties[S],A=T[0],L="string"==typeof A?[A,["accumulated"],["get",S]]:A;m.push.apply(m,fa({key:n+"."+S+".map",value:T[1],expressionContext:"cluster-map"})),m.push.apply(m,fa({key:n+"."+S+".reduce",value:L,expressionContext:"cluster-reduce"}))}return m;case"video":return _o({key:n,value:t,valueSpec:u.source_video,style:p,styleSpec:u});case"image":return _o({key:n,value:t,valueSpec:u.source_image,style:p,styleSpec:u});case"canvas":return[new ce(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return V({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:u})}}function ht(e){var t=e.value,n=e.styleSpec,u=n.light,p=e.style,m=[],y=yn(t);if(void 0===t)return m;if("object"!==y)return m.concat([new ce("light",t,"object expected, "+y+" found")]);for(var S in t){var T=S.match(/^(.*)-transition$/);m=m.concat(T&&u[T[1]]&&u[T[1]].transition?vt({key:S,value:t[S],valueSpec:n.transition,style:p,styleSpec:n}):u[S]?vt({key:S,value:t[S],valueSpec:u[S],style:p,styleSpec:n}):[new ce(S,t[S],'unknown property "'+S+'"')])}return m}var pt={"*":function(){return[]},array:ts,boolean:function(e){var t=e.value,n=e.key,u=yn(t);return"boolean"!==u?[new ce(n,t,"boolean expected, "+u+" found")]:[]},number:Ju,color:function(e){var t=e.key,n=e.value,u=yn(n);return"string"!==u?[new ce(t,n,"color expected, "+u+" found")]:null===eo(n)?[new ce(t,n,'color expected, "'+n+'" found')]:[]},constants:$e,enum:V,filter:ys,function:_u,layer:xs,object:_o,source:Le,light:ht,string:ye,formatted:function(e){return 0===ye(e).length?[]:fa(e)},resolvedImage:function(e){return 0===ye(e).length?[]:fa(e)}};function vt(e){var t=e.value,n=e.valueSpec,u=e.styleSpec;return n.expression&&Nl(Ae(t))?_u(e):n.expression&&Js(qe(t))?fa(e):n.type&&pt[n.type]?pt[n.type](e):_o(Ye({},e,{valueSpec:n.type?u[n.type]:n}))}function Nn(e){var t=e.value,n=e.key,u=ye(e);return u.length||(-1===t.indexOf("{fontstack}")&&u.push(new ce(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&u.push(new ce(n,t,'"glyphs" url must include a "{range}" token'))),u}function Qt(e,t){void 0===t&&(t=te);var n=[];return n=n.concat(vt({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Nn,"*":function(){return[]}}})),e.constants&&(n=n.concat($e({key:"constants",value:e.constants,style:e,styleSpec:t}))),sl(n)}function sl(e){return[].concat(e).sort(function(t,n){return t.line-n.line})}function is(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return sl(e.apply(this,t))}}Qt.source=is(Le),Qt.light=is(ht),Qt.layer=is(xs),Qt.filter=is(ys),Qt.paintProperty=is(_s),Qt.layoutProperty=is(xu);var nr=Qt,$l=nr.light,bs=nr.paintProperty,Zo=nr.layoutProperty;function Go(e,t){var n=!1;if(t&&t.length)for(var u=0,p=t;u<p.length;u+=1)e.fire(new be(new Error(p[u].message))),n=!0;return n}var ai=Zt;function Zt(e,t,n){var u=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var p=new Int32Array(this.arrayBuffer);e=p[0],this.d=(t=p[1])+2*(n=p[2]);for(var m=0;m<this.d*this.d;m++){var y=p[3+m],S=p[3+m+1];u.push(y===S?null:p.subarray(y,S))}var T=p[3+u.length+1];this.keys=p.subarray(p[3+u.length],T),this.bboxes=p.subarray(T),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var A=0;A<this.d*this.d;A++)u.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var L=n/t*e;this.min=-L,this.max=e+L}Zt.prototype.insert=function(e,t,n,u,p){this._forEachCell(t,n,u,p,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(u),this.bboxes.push(p)},Zt.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Zt.prototype._insertCell=function(e,t,n,u,p,m){this.cells[p].push(m)},Zt.prototype.query=function(e,t,n,u,p){var m=this.min,y=this.max;if(e<=m&&t<=m&&y<=n&&y<=u&&!p)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(e,t,n,u,this._queryCell,S,{},p),S},Zt.prototype._queryCell=function(e,t,n,u,p,m,y,S){var T=this.cells[p];if(null!==T)for(var A=this.keys,L=this.bboxes,B=0;B<T.length;B++){var Z=T[B];if(void 0===y[Z]){var H=4*Z;(S?S(L[H+0],L[H+1],L[H+2],L[H+3]):e<=L[H+2]&&t<=L[H+3]&&n>=L[H+0]&&u>=L[H+1])?(y[Z]=!0,m.push(A[Z])):y[Z]=!1}}},Zt.prototype._forEachCell=function(e,t,n,u,p,m,y,S){for(var T=this._convertToCellCoord(e),A=this._convertToCellCoord(t),L=this._convertToCellCoord(n),B=this._convertToCellCoord(u),Z=T;Z<=L;Z++)for(var H=A;H<=B;H++){var oe=this.d*H+Z;if((!S||S(this._convertFromCellCoord(Z),this._convertFromCellCoord(H),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(H+1)))&&p.call(this,e,t,n,u,oe,m,y,S))return}},Zt.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Zt.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Zt.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,u=0;u<this.cells.length;u++)n+=this.cells[u].length;var p=new Int32Array(t+n+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var m=t,y=0;y<e.length;y++){var S=e[y];p[3+y]=m,p.set(S,m),m+=S.length}return p[3+e.length]=m,p.set(this.keys,m),p[3+e.length+1]=m+=this.keys.length,p.set(this.bboxes,m),m+=this.bboxes.length,p.buffer};var bu=ut.ImageData,di=ut.ImageBitmap,Zi={};function rt(e,t,n){void 0===n&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Zi[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var ll in rt("Object",Object),ai.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},ai.deserialize=function(e){return new ai(e.buffer)},rt("Grid",ai),rt("Color",$t),rt("Error",Error),rt("ResolvedImage",Tn),rt("StylePropertyFunction",tl),rt("StyleExpression",qo,{omit:["_evaluator"]}),rt("ZoomDependentExpression",vs),rt("ZoomConstantExpression",el),rt("CompoundExpression",ri,{omit:["_evaluate"]}),es)es[ll]._classRegistryKey||rt("Expression_"+ll,es[ll]);function ws(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function xo(e){return di&&e instanceof di}function si(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(ws(e)||xo(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof bu)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var u=[],p=0,m=e;p<m.length;p+=1)u.push(si(m[p],t));return u}if("object"==typeof e){var y=e.constructor,S=y._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var T=y.serialize?y.serialize(e,t):{};if(!y.serialize){for(var A in e)if(e.hasOwnProperty(A)&&!(Zi[S].omit.indexOf(A)>=0)){var L=e[A];T[A]=Zi[S].shallow.indexOf(A)>=0?L:si(L,t)}e instanceof Error&&(T.message=e.message)}if(T.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==S&&(T.$name=S),T}throw new Error("can't serialize object of type "+typeof e)}function Oa(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||ws(e)||xo(e)||ArrayBuffer.isView(e)||e instanceof bu)return e;if(Array.isArray(e))return e.map(Oa);if("object"==typeof e){var t=e.$name||"Object",n=Zi[t].klass;if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);for(var u=Object.create(n.prototype),p=0,m=Object.keys(e);p<m.length;p+=1){var y=m[p];if("$name"!==y){var S=e[y];u[y]=Zi[t].shallow.indexOf(y)>=0?S:Oa(S)}}return u}throw new Error("can't deserialize object of type "+typeof e)}var ir=function(){this.first=!0};ir.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var ot={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function rs(e){for(var t=0,n=e;t<n.length;t+=1)if(Ss(n[t].charCodeAt(0)))return!0;return!1}function Ss(e){return!(746!==e&&747!==e&&(e<4352||!(ot["Bopomofo Extended"](e)||ot.Bopomofo(e)||ot["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||ot["CJK Compatibility Ideographs"](e)||ot["CJK Compatibility"](e)||ot["CJK Radicals Supplement"](e)||ot["CJK Strokes"](e)||!(!ot["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||ot["CJK Unified Ideographs Extension A"](e)||ot["CJK Unified Ideographs"](e)||ot["Enclosed CJK Letters and Months"](e)||ot["Hangul Compatibility Jamo"](e)||ot["Hangul Jamo Extended-A"](e)||ot["Hangul Jamo Extended-B"](e)||ot["Hangul Jamo"](e)||ot["Hangul Syllables"](e)||ot.Hiragana(e)||ot["Ideographic Description Characters"](e)||ot.Kanbun(e)||ot["Kangxi Radicals"](e)||ot["Katakana Phonetic Extensions"](e)||ot.Katakana(e)&&12540!==e||!(!ot["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!ot["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||ot["Unified Canadian Aboriginal Syllabics"](e)||ot["Unified Canadian Aboriginal Syllabics Extended"](e)||ot["Vertical Forms"](e)||ot["Yijing Hexagram Symbols"](e)||ot["Yi Syllables"](e)||ot["Yi Radicals"](e))))}function vr(e){return!(Ss(e)||(t=e,ot["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||ot["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||ot["Letterlike Symbols"](t)||ot["Number Forms"](t)||ot["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||ot["Control Pictures"](t)&&9251!==t||ot["Optical Character Recognition"](t)||ot["Enclosed Alphanumerics"](t)||ot["Geometric Shapes"](t)||ot["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||ot["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||ot["CJK Symbols and Punctuation"](t)||ot.Katakana(t)||ot["Private Use Area"](t)||ot["CJK Compatibility Forms"](t)||ot["Small Form Variants"](t)||ot["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t));var t}function rr(e){return e>=1424&&e<=2303||ot["Arabic Presentation Forms-A"](e)||ot["Arabic Presentation Forms-B"](e)}function Ra(e,t){return!(!t&&rr(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||ot.Khmer(e))}function ma(e){for(var t=0,n=e;t<n.length;t+=1)if(rr(n[t].charCodeAt(0)))return!0;return!1}var os=null,yr="unavailable",Ba=null,ql=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(yr="error"),os&&os(e)};function Cs(){Es.fire(new ge("pluginStateChange",{pluginStatus:yr,pluginURL:Ba}))}var Es=new me,Gr=function(){return yr},Qu=function(){if("deferred"!==yr||!Ba)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");yr="loading",Cs(),Ba&&Bn({url:Ba},function(e){e?ql(e):(yr="loaded",Cs())})},zn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===yr||null!=zn.applyArabicShaping},isLoading:function(){return"loading"===yr},setState:function(e){yr=e.pluginStatus,Ba=e.pluginURL},isParsed:function(){return null!=zn.applyArabicShaping&&null!=zn.processBidirectionalText&&null!=zn.processStyledBidirectionalText},getPluginURL:function(){return Ba}},an=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ir,this.transition={})};an.prototype.isSupportedScript=function(e){return function(t,n){for(var u=0,p=t;u<p.length;u+=1)if(!Ra(p[u].charCodeAt(0),n))return!1;return!0}(e,zn.isLoaded())},an.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},an.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}};var ro=function(e,t){this.property=e,this.value=t,this.expression=function(n,u){if(Nl(n))return new tl(n,u);if(Js(n)){var p=yu(n,u);if("error"===p.result)throw new Error(p.value.map(function(y){return y.key+": "+y.message}).join(", "));return p.value}var m=n;return"string"==typeof n&&"color"===u.type&&(m=$t.parse(n)),{kind:"constant",evaluate:function(){return m}}}(void 0===t?e.specification.default:t,e.specification)};ro.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},ro.prototype.possiblyEvaluate=function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)};var ln=function(e){this.property=e,this.value=new ro(e,void 0)};ln.prototype.transitioned=function(e,t){return new Fa(this.property,this.value,t,Rn({},e.transition,this.transition),e.now)},ln.prototype.untransitioned=function(){return new Fa(this.property,this.value,null,{},0)};var In=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};In.prototype.getValue=function(e){return Yi(this._values[e].value.value)},In.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ln(this._values[e].property)),this._values[e].value=new ro(this._values[e].property,null===t?void 0:Yi(t))},In.prototype.getTransition=function(e){return Yi(this._values[e].transition)},In.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ln(this._values[e].property)),this._values[e].transition=Yi(t)||void 0},In.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var u=n[t],p=this.getValue(u);void 0!==p&&(e[u]=p);var m=this.getTransition(u);void 0!==m&&(e[u+"-transition"]=m)}return e},In.prototype.transitioned=function(e,t){for(var n=new jr(this._properties),u=0,p=Object.keys(this._values);u<p.length;u+=1){var m=p[u];n._values[m]=this._values[m].transitioned(e,t._values[m])}return n},In.prototype.untransitioned=function(){for(var e=new jr(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var u=n[t];e._values[u]=this._values[u].untransitioned()}return e};var Fa=function(e,t,n,u,p){this.property=e,this.value=t,this.begin=p+u.delay||0,this.end=this.begin+u.duration||0,e.specification.transition&&(u.delay||u.duration)&&(this.prior=n)};Fa.prototype.possiblyEvaluate=function(e,t,n){var u=e.now||0,p=this.value.possiblyEvaluate(e,t,n),m=this.prior;if(m){if(u>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(u<this.begin)return m.possiblyEvaluate(e,t,n);var y=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,t,n),p,function(S){if(S<=0)return 0;if(S>=1)return 1;var T=S*S,A=T*S;return 4*(S<.5?A:3*(S-T)+A-.75)}(y))}return p};var jr=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};jr.prototype.possiblyEvaluate=function(e,t,n){for(var u=new Wo(this._properties),p=0,m=Object.keys(this._values);p<m.length;p+=1){var y=m[p];u._values[y]=this._values[y].possiblyEvaluate(e,t,n)}return u},jr.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var jo=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};jo.prototype.getValue=function(e){return Yi(this._values[e].value)},jo.prototype.setValue=function(e,t){this._values[e]=new ro(this._values[e].property,null===t?void 0:Yi(t))},jo.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var u=n[t],p=this.getValue(u);void 0!==p&&(e[u]=p)}return e},jo.prototype.possiblyEvaluate=function(e,t,n){for(var u=new Wo(this._properties),p=0,m=Object.keys(this._values);p<m.length;p+=1){var y=m[p];u._values[y]=this._values[y].possiblyEvaluate(e,t,n)}return u};var Dr=function(e,t,n){this.property=e,this.value=t,this.parameters=n};Dr.prototype.isConstant=function(){return"constant"===this.value.kind},Dr.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},Dr.prototype.evaluate=function(e,t,n,u){return this.property.evaluate(this.value,this.parameters,e,t,n,u)};var Wo=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};Wo.prototype.get=function(e){return this._values[e]};var et=function(e){this.specification=e};et.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},et.prototype.interpolate=function(e,t,n){var u=vn[this.specification.type];return u?u(e,t,n):e};var Ct=function(e,t){this.specification=e,this.overrides=t};Ct.prototype.possiblyEvaluate=function(e,t,n,u){return new Dr(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,u)}:e.expression,t)},Ct.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Dr(this,{kind:"constant",value:void 0},e.parameters);var u=vn[this.specification.type];return u?new Dr(this,{kind:"constant",value:u(e.value.value,t.value.value,n)},e.parameters):e},Ct.prototype.evaluate=function(e,t,n,u,p,m){return"constant"===e.kind?e.value:e.evaluate(t,n,u,p,m)};var mi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(n,u,p,m){if(void 0===n.value)return new Dr(this,{kind:"constant",value:void 0},u);if("constant"===n.expression.kind){var y=n.expression.evaluate(u,null,{},p,m),S="resolvedImage"===n.property.specification.type&&"string"!=typeof y?y.name:y,T=this._calculate(S,S,S,u);return new Dr(this,{kind:"constant",value:T},u)}if("camera"===n.expression.kind){var A=this._calculate(n.expression.evaluate({zoom:u.zoom-1}),n.expression.evaluate({zoom:u.zoom}),n.expression.evaluate({zoom:u.zoom+1}),u);return new Dr(this,{kind:"constant",value:A},u)}return new Dr(this,n.expression,u)},t.prototype.evaluate=function(n,u,p,m,y,S){if("source"===n.kind){var T=n.evaluate(u,p,m,y,S);return this._calculate(T,T,T,u)}return"composite"===n.kind?this._calculate(n.evaluate({zoom:Math.floor(u.zoom)-1},p,m),n.evaluate({zoom:Math.floor(u.zoom)},p,m),n.evaluate({zoom:Math.floor(u.zoom)+1},p,m),u):n.value},t.prototype._calculate=function(n,u,p,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:u}:{from:p,to:u}},t.prototype.interpolate=function(n){return n},t}(Ct),Gi=function(e){this.specification=e};Gi.prototype.possiblyEvaluate=function(e,t,n,u){if(void 0!==e.value){if("constant"===e.expression.kind){var p=e.expression.evaluate(t,null,{},n,u);return this._calculate(p,p,p,t)}return this._calculate(e.expression.evaluate(new an(Math.floor(t.zoom-1),t)),e.expression.evaluate(new an(Math.floor(t.zoom),t)),e.expression.evaluate(new an(Math.floor(t.zoom+1),t)),t)}},Gi.prototype._calculate=function(e,t,n,u){return u.zoom>u.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},Gi.prototype.interpolate=function(e){return e};var Lr=function(e){this.specification=e};Lr.prototype.possiblyEvaluate=function(e,t,n,u){return!!e.expression.evaluate(t,null,{},n,u)},Lr.prototype.interpolate=function(){return!1};var zi=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var n=e[t];n.specification.overridable&&this.overridableProperties.push(t);var u=this.defaultPropertyValues[t]=new ro(n,void 0),p=this.defaultTransitionablePropertyValues[t]=new ln(n);this.defaultTransitioningPropertyValues[t]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=u.possiblyEvaluate({})}};rt("DataDrivenProperty",Ct),rt("DataConstantProperty",et),rt("CrossFadedDataDrivenProperty",mi),rt("CrossFadedProperty",Gi),rt("ColorRampProperty",Lr);var ki=function(e){function t(n,u){if(e.call(this),this.id=n.id,this.type=n.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==n.type&&(this.metadata=(n=n).metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,"background"!==n.type&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),u.layout&&(this._unevaluatedLayout=new jo(u.layout)),u.paint)){for(var p in this._transitionablePaint=new In(u.paint),n.paint)this.setPaintProperty(p,n.paint[p],{validate:!1});for(var m in n.layout)this.setLayoutProperty(m,n.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wo(u.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(n){return"visibility"===n?this.visibility:this._unevaluatedLayout.getValue(n)},t.prototype.setLayoutProperty=function(n,u,p){void 0===p&&(p={}),null!=u&&this._validate(Zo,"layers."+this.id+".layout."+n,n,u,p)||("visibility"!==n?this._unevaluatedLayout.setValue(n,u):this.visibility=u)},t.prototype.getPaintProperty=function(n){return Ni(n,"-transition")?this._transitionablePaint.getTransition(n.slice(0,-"-transition".length)):this._transitionablePaint.getValue(n)},t.prototype.setPaintProperty=function(n,u,p){if(void 0===p&&(p={}),null!=u&&this._validate(bs,"layers."+this.id+".paint."+n,n,u,p))return!1;if(Ni(n,"-transition"))return this._transitionablePaint.setTransition(n.slice(0,-"-transition".length),u||void 0),!1;var m=this._transitionablePaint._values[n],y="cross-faded-data-driven"===m.property.specification["property-type"],S=m.value.isDataDriven(),T=m.value;this._transitionablePaint.setValue(n,u),this._handleSpecialPaintPropertyUpdate(n);var A=this._transitionablePaint._values[n].value;return A.isDataDriven()||S||y||this._handleOverridablePaintPropertyUpdate(n,T,A)},t.prototype._handleSpecialPaintPropertyUpdate=function(n){},t.prototype._handleOverridablePaintPropertyUpdate=function(n,u,p){return!1},t.prototype.isHidden=function(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(n,u){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,u)},t.prototype.serialize=function(){var n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Ai(n,function(u,p){return!(void 0===u||"layout"===p&&!Object.keys(u).length||"paint"===p&&!Object.keys(u).length)})},t.prototype._validate=function(n,u,p,m,y){return void 0===y&&(y={}),(!y||!1!==y.validate)&&Go(this,n.call(nr,{key:u,layerType:this.type,objectKey:p,value:m,styleSpec:te,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var n in this.paint._values){var u=this.paint.get(n);if(u instanceof Dr&&Da(u.property.specification)&&("source"===u.value.kind||"composite"===u.value.kind)&&u.value.isStateDependent)return!0}return!1},t}(me),ec={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ho=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},_n=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function gi(e,t){void 0===t&&(t=1);var n=0,u=0;return{members:e.map(function(p){var m=ec[p.type].BYTES_PER_ELEMENT,y=n=ul(n,Math.max(t,m)),S=p.components||1;return u=Math.max(u,m),n+=m*S,{name:p.name,type:p.type,components:S,offset:y}}),size:ul(n,Math.max(u,t)),alignment:t}}function ul(e,t){return Math.ceil(e/t)*t}_n.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},_n.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},_n.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},_n.prototype.clear=function(){this.length=0},_n.prototype.resize=function(e){this.reserve(e),this.length=e},_n.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},_n.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ga=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u){var p=this.length;return this.resize(p+1),this.emplace(p,n,u)},t.prototype.emplace=function(n,u,p){var m=2*n;return this.int16[m+0]=u,this.int16[m+1]=p,n},t}(_n);ga.prototype.bytesPerElement=4,rt("StructArrayLayout2i4",ga);var Or=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p,m){var y=this.length;return this.resize(y+1),this.emplace(y,n,u,p,m)},t.prototype.emplace=function(n,u,p,m,y){var S=4*n;return this.int16[S+0]=u,this.int16[S+1]=p,this.int16[S+2]=m,this.int16[S+3]=y,n},t}(_n);Or.prototype.bytesPerElement=8,rt("StructArrayLayout4i8",Or);var or=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p,m,y,S){var T=this.length;return this.resize(T+1),this.emplace(T,n,u,p,m,y,S)},t.prototype.emplace=function(n,u,p,m,y,S,T){var A=6*n;return this.int16[A+0]=u,this.int16[A+1]=p,this.int16[A+2]=m,this.int16[A+3]=y,this.int16[A+4]=S,this.int16[A+5]=T,n},t}(_n);or.prototype.bytesPerElement=12,rt("StructArrayLayout2i4i12",or);var J=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p,m,y,S){var T=this.length;return this.resize(T+1),this.emplace(T,n,u,p,m,y,S)},t.prototype.emplace=function(n,u,p,m,y,S,T){var A=4*n,L=8*n;return this.int16[A+0]=u,this.int16[A+1]=p,this.uint8[L+4]=m,this.uint8[L+5]=y,this.uint8[L+6]=S,this.uint8[L+7]=T,n},t}(_n);J.prototype.bytesPerElement=8,rt("StructArrayLayout2i4ub8",J);var Wr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u){var p=this.length;return this.resize(p+1),this.emplace(p,n,u)},t.prototype.emplace=function(n,u,p){var m=2*n;return this.float32[m+0]=u,this.float32[m+1]=p,n},t}(_n);Wr.prototype.bytesPerElement=8,rt("StructArrayLayout2f8",Wr);var Hr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p,m,y,S,T,A,L,B){var Z=this.length;return this.resize(Z+1),this.emplace(Z,n,u,p,m,y,S,T,A,L,B)},t.prototype.emplace=function(n,u,p,m,y,S,T,A,L,B,Z){var H=10*n;return this.uint16[H+0]=u,this.uint16[H+1]=p,this.uint16[H+2]=m,this.uint16[H+3]=y,this.uint16[H+4]=S,this.uint16[H+5]=T,this.uint16[H+6]=A,this.uint16[H+7]=L,this.uint16[H+8]=B,this.uint16[H+9]=Z,n},t}(_n);Hr.prototype.bytesPerElement=20,rt("StructArrayLayout10ui20",Hr);var Di=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p,m,y,S,T,A,L,B,Z,H){var oe=this.length;return this.resize(oe+1),this.emplace(oe,n,u,p,m,y,S,T,A,L,B,Z,H)},t.prototype.emplace=function(n,u,p,m,y,S,T,A,L,B,Z,H,oe){var se=12*n;return this.int16[se+0]=u,this.int16[se+1]=p,this.int16[se+2]=m,this.int16[se+3]=y,this.uint16[se+4]=S,this.uint16[se+5]=T,this.uint16[se+6]=A,this.uint16[se+7]=L,this.int16[se+8]=B,this.int16[se+9]=Z,this.int16[se+10]=H,this.int16[se+11]=oe,n},t}(_n);Di.prototype.bytesPerElement=24,rt("StructArrayLayout4i4ui4i24",Di);var Ht=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p){var m=this.length;return this.resize(m+1),this.emplace(m,n,u,p)},t.prototype.emplace=function(n,u,p,m){var y=3*n;return this.float32[y+0]=u,this.float32[y+1]=p,this.float32[y+2]=m,n},t}(_n);Ht.prototype.bytesPerElement=12,rt("StructArrayLayout3f12",Ht);var Zl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var u=this.length;return this.resize(u+1),this.emplace(u,n)},t.prototype.emplace=function(n,u){return this.uint32[1*n+0]=u,n},t}(_n);Zl.prototype.bytesPerElement=4,rt("StructArrayLayout1ul4",Zl);var Ts=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p,m,y,S,T,A,L){var B=this.length;return this.resize(B+1),this.emplace(B,n,u,p,m,y,S,T,A,L)},t.prototype.emplace=function(n,u,p,m,y,S,T,A,L,B){var Z=10*n,H=5*n;return this.int16[Z+0]=u,this.int16[Z+1]=p,this.int16[Z+2]=m,this.int16[Z+3]=y,this.int16[Z+4]=S,this.int16[Z+5]=T,this.uint32[H+3]=A,this.uint16[Z+8]=L,this.uint16[Z+9]=B,n},t}(_n);Ts.prototype.bytesPerElement=20,rt("StructArrayLayout6i1ul2ui20",Ts);var Rr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p,m,y,S){var T=this.length;return this.resize(T+1),this.emplace(T,n,u,p,m,y,S)},t.prototype.emplace=function(n,u,p,m,y,S,T){var A=6*n;return this.int16[A+0]=u,this.int16[A+1]=p,this.int16[A+2]=m,this.int16[A+3]=y,this.int16[A+4]=S,this.int16[A+5]=T,n},t}(_n);Rr.prototype.bytesPerElement=12,rt("StructArrayLayout2i2i2i12",Rr);var bo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p,m,y){var S=this.length;return this.resize(S+1),this.emplace(S,n,u,p,m,y)},t.prototype.emplace=function(n,u,p,m,y,S){var T=4*n,A=8*n;return this.float32[T+0]=u,this.float32[T+1]=p,this.float32[T+2]=m,this.int16[A+6]=y,this.int16[A+7]=S,n},t}(_n);bo.prototype.bytesPerElement=16,rt("StructArrayLayout2f1f2i16",bo);var wo=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p,m){var y=this.length;return this.resize(y+1),this.emplace(y,n,u,p,m)},t.prototype.emplace=function(n,u,p,m,y){var S=12*n,T=3*n;return this.uint8[S+0]=u,this.uint8[S+1]=p,this.float32[T+1]=m,this.float32[T+2]=y,n},t}(_n);wo.prototype.bytesPerElement=12,rt("StructArrayLayout2ub2f12",wo);var ji=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p){var m=this.length;return this.resize(m+1),this.emplace(m,n,u,p)},t.prototype.emplace=function(n,u,p,m){var y=3*n;return this.uint16[y+0]=u,this.uint16[y+1]=p,this.uint16[y+2]=m,n},t}(_n);ji.prototype.bytesPerElement=6,rt("StructArrayLayout3ui6",ji);var cl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p,m,y,S,T,A,L,B,Z,H,oe,se,de,pe,Se){var Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,n,u,p,m,y,S,T,A,L,B,Z,H,oe,se,de,pe,Se)},t.prototype.emplace=function(n,u,p,m,y,S,T,A,L,B,Z,H,oe,se,de,pe,Se,Ce){var Pe=24*n,ze=12*n,Fe=48*n;return this.int16[Pe+0]=u,this.int16[Pe+1]=p,this.uint16[Pe+2]=m,this.uint16[Pe+3]=y,this.uint32[ze+2]=S,this.uint32[ze+3]=T,this.uint32[ze+4]=A,this.uint16[Pe+10]=L,this.uint16[Pe+11]=B,this.uint16[Pe+12]=Z,this.float32[ze+7]=H,this.float32[ze+8]=oe,this.uint8[Fe+36]=se,this.uint8[Fe+37]=de,this.uint8[Fe+38]=pe,this.uint32[ze+10]=Se,this.int16[Pe+22]=Ce,n},t}(_n);cl.prototype.bytesPerElement=48,rt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",cl);var So=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p,m,y,S,T,A,L,B,Z,H,oe,se,de,pe,Se,Ce,Pe,ze,Fe,He,Je,dt,tt,xt,nt,Rt){var Et=this.length;return this.resize(Et+1),this.emplace(Et,n,u,p,m,y,S,T,A,L,B,Z,H,oe,se,de,pe,Se,Ce,Pe,ze,Fe,He,Je,dt,tt,xt,nt,Rt)},t.prototype.emplace=function(n,u,p,m,y,S,T,A,L,B,Z,H,oe,se,de,pe,Se,Ce,Pe,ze,Fe,He,Je,dt,tt,xt,nt,Rt,Et){var ct=34*n,Bt=17*n;return this.int16[ct+0]=u,this.int16[ct+1]=p,this.int16[ct+2]=m,this.int16[ct+3]=y,this.int16[ct+4]=S,this.int16[ct+5]=T,this.int16[ct+6]=A,this.int16[ct+7]=L,this.uint16[ct+8]=B,this.uint16[ct+9]=Z,this.uint16[ct+10]=H,this.uint16[ct+11]=oe,this.uint16[ct+12]=se,this.uint16[ct+13]=de,this.uint16[ct+14]=pe,this.uint16[ct+15]=Se,this.uint16[ct+16]=Ce,this.uint16[ct+17]=Pe,this.uint16[ct+18]=ze,this.uint16[ct+19]=Fe,this.uint16[ct+20]=He,this.uint16[ct+21]=Je,this.uint16[ct+22]=dt,this.uint32[Bt+12]=tt,this.float32[Bt+13]=xt,this.float32[Bt+14]=nt,this.float32[Bt+15]=Rt,this.float32[Bt+16]=Et,n},t}(_n);So.prototype.bytesPerElement=68,rt("StructArrayLayout8i15ui1ul4f68",So);var _r=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var u=this.length;return this.resize(u+1),this.emplace(u,n)},t.prototype.emplace=function(n,u){return this.float32[1*n+0]=u,n},t}(_n);_r.prototype.bytesPerElement=4,rt("StructArrayLayout1f4",_r);var Co=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p){var m=this.length;return this.resize(m+1),this.emplace(m,n,u,p)},t.prototype.emplace=function(n,u,p,m){var y=3*n;return this.int16[y+0]=u,this.int16[y+1]=p,this.int16[y+2]=m,n},t}(_n);Co.prototype.bytesPerElement=6,rt("StructArrayLayout3i6",Co);var Is=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p){var m=this.length;return this.resize(m+1),this.emplace(m,n,u,p)},t.prototype.emplace=function(n,u,p,m){var y=4*n;return this.uint32[2*n+0]=u,this.uint16[y+2]=p,this.uint16[y+3]=m,n},t}(_n);Is.prototype.bytesPerElement=8,rt("StructArrayLayout1ul2ui8",Is);var as=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u){var p=this.length;return this.resize(p+1),this.emplace(p,n,u)},t.prototype.emplace=function(n,u,p){var m=2*n;return this.uint16[m+0]=u,this.uint16[m+1]=p,n},t}(_n);as.prototype.bytesPerElement=4,rt("StructArrayLayout2ui4",as);var pl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n){var u=this.length;return this.resize(u+1),this.emplace(u,n)},t.prototype.emplace=function(n,u){return this.uint16[1*n+0]=u,n},t}(_n);pl.prototype.bytesPerElement=2,rt("StructArrayLayout1ui2",pl);var i=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(n,u,p,m){var y=this.length;return this.resize(y+1),this.emplace(y,n,u,p,m)},t.prototype.emplace=function(n,u,p,m,y){var S=4*n;return this.float32[S+0]=u,this.float32[S+1]=p,this.float32[S+2]=m,this.float32[S+3]=y,n},t}(_n);i.prototype.bytesPerElement=16,rt("StructArrayLayout4f16",i);var a=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new Tt(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(Ho);a.prototype.size=20;var r=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new a(this,n)},t}(Ts);rt("CollisionBoxArray",r);var c=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(u){this._structArray.uint8[this._pos1+37]=u},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(u){this._structArray.uint8[this._pos1+38]=u},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(u){this._structArray.uint32[this._pos4+10]=u},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,n),t}(Ho);c.prototype.size=48;var g=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new c(this,n)},t}(cl);rt("PlacedSymbolArray",g);var _=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(u){this._structArray.uint32[this._pos4+12]=u},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,n),t}(Ho);_.prototype.size=68;var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new _(this,n)},t}(So);rt("SymbolInstanceArray",w);var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(n){return this.float32[1*n+0]},t}(_r);rt("GlyphOffsetArray",E);var k=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(n){return this.int16[3*n+0]},t.prototype.gety=function(n){return this.int16[3*n+1]},t.prototype.gettileUnitDistanceFromAnchor=function(n){return this.int16[3*n+2]},t}(Co);rt("SymbolLineVertexArray",k);var N=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,n),t}(Ho);N.prototype.size=8;var X=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(n){return new N(this,n)},t}(Is);rt("FeatureIndexArray",X);var Q=gi([{name:"a_pos",components:2,type:"Int16"}],4).members,Y=function(e){void 0===e&&(e=[]),this.segments=e};function le(e,t){return 256*(e=ci(Math.floor(e),0,255))+ci(Math.floor(t),0,255)}Y.prototype.prepareSegment=function(e,t,n,u){var p=this.segments[this.segments.length-1];return e>Y.MAX_VERTEX_ARRAY_LENGTH&&qn("Max vertices per segment is "+Y.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!p||p.vertexLength+e>Y.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==u)&&(p={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==u&&(p.sortKey=u),this.segments.push(p)),p},Y.prototype.get=function(){return this.segments},Y.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var n=t[e];for(var u in n.vaos)n.vaos[u].destroy()}},Y.simpleSegment=function(e,t,n,u){return new Y([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:u,vaos:{},sortKey:0}])},Y.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rt("SegmentVector",Y);var o=gi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),v=Bi(function(e){e.exports=function(t,n){var u,p,m,y,S,T,A,L;for(p=t.length-(u=3&t.length),m=n,S=3432918353,T=461845907,L=0;L<p;)A=255&t.charCodeAt(L)|(255&t.charCodeAt(++L))<<8|(255&t.charCodeAt(++L))<<16|(255&t.charCodeAt(++L))<<24,++L,m=27492+(65535&(y=5*(65535&(m=(m^=A=(65535&(A=(A=(65535&A)*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*T+(((A>>>16)*T&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(A=0,u){case 3:A^=(255&t.charCodeAt(L+2))<<16;case 2:A^=(255&t.charCodeAt(L+1))<<8;case 1:m^=A=(65535&(A=(A=(65535&(A^=255&t.charCodeAt(L)))*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*T+(((A>>>16)*T&65535)<<16)&4294967295}return m^=t.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0}}),l=Bi(function(e){e.exports=function(t,n){for(var u,p=t.length,m=n^p,y=0;p>=4;)u=1540483477*(65535&(u=255&t.charCodeAt(y)|(255&t.charCodeAt(++y))<<8|(255&t.charCodeAt(++y))<<16|(255&t.charCodeAt(++y))<<24))+((1540483477*(u>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),p-=4,++y;switch(p){case 3:m^=(255&t.charCodeAt(y+2))<<16;case 2:m^=(255&t.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&t.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0}}),d=v,b=l;d.murmur3=v,d.murmur2=b;var C=function(){this.ids=[],this.positions=[],this.indexed=!1};C.prototype.add=function(e,t,n,u){this.ids.push(O(e)),this.positions.push(t,n,u)},C.prototype.getPositions=function(e){for(var t=O(e),n=0,u=this.ids.length-1;n<u;){var p=n+u>>1;this.ids[p]>=t?u=p:n=p+1}for(var m=[];this.ids[n]===t;)m.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return m},C.serialize=function(e,t){var n=new Float64Array(e.ids),u=new Uint32Array(e.positions);return function p(m,y,S,T){for(;S<T;){for(var A=m[S+T>>1],L=S-1,B=T+1;;){do{L++}while(m[L]<A);do{B--}while(m[B]>A);if(L>=B)break;z(m,L,B),z(y,3*L,3*B),z(y,3*L+1,3*B+1),z(y,3*L+2,3*B+2)}B-S<T-B?(p(m,y,S,B),S=B+1):(p(m,y,B+1,T),T=B)}}(n,u,0,n.length-1),t&&t.push(n.buffer,u.buffer),{ids:n,positions:u}},C.deserialize=function(e){var t=new C;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var M=Math.pow(2,53)-1;function O(e){var t=+e;return!isNaN(t)&&t<=M?t:d(String(e))}function z(e,t,n){var u=e[t];e[t]=e[n],e[n]=u}rt("FeaturePositionMap",C);var R=function(e,t){this.gl=e.gl,this.location=t},D=function(e){function t(n,u){e.call(this,n,u),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))},t}(R),P=function(e){function t(n,u){e.call(this,n,u),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))},t}(R),q=function(e){function t(n,u){e.call(this,n,u),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1]))},t}(R),W=function(e){function t(n,u){e.call(this,n,u),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2]))},t}(R),K=function(e){function t(n,u){e.call(this,n,u),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))},t}(R),ae=function(e){function t(n,u){e.call(this,n,u),this.current=$t.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))},t}(R),re=new Float32Array(16),ue=function(e){function t(n,u){e.call(this,n,u),this.current=re}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(n){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(var u=1;u<16;u++)if(n[u]!==this.current[u]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}},t}(R);function _e(e){return[le(255*e.r,255*e.g),le(255*e.b,255*e.a)]}var ve=function(e,t,n){this.value=e,this.uniformNames=t.map(function(u){return"u_"+u}),this.type=n};ve.prototype.setUniform=function(e,t,n){e.set(n.constantOr(this.value))},ve.prototype.getBinding=function(e,t,n){return"color"===this.type?new ae(e,t):new P(e,t)};var Ee=function(e,t){this.uniformNames=t.map(function(n){return"u_"+n}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ee.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Ee.prototype.setUniform=function(e,t,n,u){var p="u_pattern_to"===u?this.patternTo:"u_pattern_from"===u?this.patternFrom:"u_pixel_ratio_to"===u?this.pixelRatioTo:"u_pixel_ratio_from"===u?this.pixelRatioFrom:null;p&&e.set(p)},Ee.prototype.getBinding=function(e,t,n){return"u_pattern"===n.substr(0,9)?new K(e,t):new P(e,t)};var Me=function(e,t,n,u){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map(function(p){return{name:"a_"+p,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new u};Me.prototype.populatePaintArray=function(e,t,n,u,p){var m=this.paintVertexArray.length,y=this.expression.evaluate(new an(0),t,{},u,[],p);this.paintVertexArray.resize(e),this._setPaintValue(m,e,y)},Me.prototype.updatePaintArray=function(e,t,n,u){var p=this.expression.evaluate({zoom:0},n,u);this._setPaintValue(e,t,p)},Me.prototype._setPaintValue=function(e,t,n){if("color"===this.type)for(var u=_e(n),p=e;p<t;p++)this.paintVertexArray.emplace(p,u[0],u[1]);else{for(var m=e;m<t;m++)this.paintVertexArray.emplace(m,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},Me.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Me.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var De=function(e,t,n,u,p,m){this.expression=e,this.uniformNames=t.map(function(y){return"u_"+y+"_t"}),this.type=n,this.useIntegerZoom=u,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=t.map(function(y){return{name:"a_"+y,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new m};De.prototype.populatePaintArray=function(e,t,n,u,p){var m=this.expression.evaluate(new an(this.zoom),t,{},u,[],p),y=this.expression.evaluate(new an(this.zoom+1),t,{},u,[],p),S=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(S,e,m,y)},De.prototype.updatePaintArray=function(e,t,n,u){var p=this.expression.evaluate({zoom:this.zoom},n,u),m=this.expression.evaluate({zoom:this.zoom+1},n,u);this._setPaintValue(e,t,p,m)},De.prototype._setPaintValue=function(e,t,n,u){if("color"===this.type)for(var p=_e(n),m=_e(u),y=e;y<t;y++)this.paintVertexArray.emplace(y,p[0],p[1],m[0],m[1]);else{for(var S=e;S<t;S++)this.paintVertexArray.emplace(S,n,u);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(u))}},De.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},De.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},De.prototype.setUniform=function(e,t){var n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,u=ci(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(u)},De.prototype.getBinding=function(e,t,n){return new P(e,t)};var Oe=function(e,t,n,u,p,m){this.expression=e,this.type=t,this.useIntegerZoom=n,this.zoom=u,this.layerId=m,this.zoomInPaintVertexArray=new p,this.zoomOutPaintVertexArray=new p};Oe.prototype.populatePaintArray=function(e,t,n){var u=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(u,e,t.patterns&&t.patterns[this.layerId],n)},Oe.prototype.updatePaintArray=function(e,t,n,u,p){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],p)},Oe.prototype._setPaintValues=function(e,t,n,u){if(u&&n){var p=u[n.min],m=u[n.mid],y=u[n.max];if(p&&m&&y)for(var S=e;S<t;S++)this.zoomInPaintVertexArray.emplace(S,m.tl[0],m.tl[1],m.br[0],m.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],m.pixelRatio,p.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,m.tl[0],m.tl[1],m.br[0],m.br[1],y.tl[0],y.tl[1],y.br[0],y.br[1],m.pixelRatio,y.pixelRatio)}},Oe.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,o.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,o.members,this.expression.isStateDependent))},Oe.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var xe=function(e,t,n){this.binders={},this._buffers=[];var u=[];for(var p in e.paint._values)if(n(p)){var m=e.paint.get(p);if(m instanceof Dr&&Da(m.property.specification)){var y=Re(p,e.type),S=m.value,T=m.property.specification.type,A=m.property.useIntegerZoom,L=m.property.specification["property-type"],B="cross-faded"===L||"cross-faded-data-driven"===L;if("constant"===S.kind)this.binders[p]=B?new Ee(S.value,y):new ve(S.value,y,T),u.push("/u_"+p);else if("source"===S.kind||B){var Z=ke(p,T,"source");this.binders[p]=B?new Oe(S,T,A,t,Z,e.id):new Me(S,y,T,Z),u.push("/a_"+p)}else{var H=ke(p,T,"composite");this.binders[p]=new De(S,y,T,A,t,H),u.push("/z_"+p)}}}this.cacheKey=u.sort().join("")};xe.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Me||t instanceof De?t.maxValue:0},xe.prototype.populatePaintArrays=function(e,t,n,u,p){for(var m in this.binders){var y=this.binders[m];(y instanceof Me||y instanceof De||y instanceof Oe)&&y.populatePaintArray(e,t,n,u,p)}},xe.prototype.setConstantPatternPositions=function(e,t){for(var n in this.binders){var u=this.binders[n];u instanceof Ee&&u.setConstantPatternPositions(e,t)}},xe.prototype.updatePaintArrays=function(e,t,n,u,p){var m=!1;for(var y in e)for(var S=0,T=t.getPositions(y);S<T.length;S+=1){var A=T[S],L=n.feature(A.index);for(var B in this.binders){var Z=this.binders[B];if((Z instanceof Me||Z instanceof De||Z instanceof Oe)&&!0===Z.expression.isStateDependent){var H=u.paint.get(B);Z.expression=H.value,Z.updatePaintArray(A.start,A.end,L,e[y],p),m=!0}}}return m},xe.prototype.defines=function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof ve||n instanceof Ee)&&e.push.apply(e,n.uniformNames.map(function(u){return"#define HAS_UNIFORM_"+u}))}return e},xe.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Me||n instanceof De)for(var u=0;u<n.paintVertexAttributes.length;u++)e.push(n.paintVertexAttributes[u].name);else if(n instanceof Oe)for(var p=0;p<o.members.length;p++)e.push(o.members[p].name)}return e},xe.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof ve||n instanceof Ee||n instanceof De)for(var u=0,p=n.uniformNames;u<p.length;u+=1)e.push(p[u])}return e},xe.prototype.getPaintVertexBuffers=function(){return this._buffers},xe.prototype.getUniforms=function(e,t){var n=[];for(var u in this.binders){var p=this.binders[u];if(p instanceof ve||p instanceof Ee||p instanceof De)for(var m=0,y=p.uniformNames;m<y.length;m+=1){var S=y[m];if(t[S]){var T=p.getBinding(e,t[S],S);n.push({name:S,property:u,binding:T})}}}return n},xe.prototype.setUniforms=function(e,t,n,u){for(var p=0,m=t;p<m.length;p+=1){var y=m[p],S=y.name,T=y.property;this.binders[T].setUniform(y.binding,u,n.get(T),S)}},xe.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];if(e&&n instanceof Oe){var u=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;u&&this._buffers.push(u)}else(n instanceof Me||n instanceof De)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},xe.prototype.upload=function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof Me||n instanceof De||n instanceof Oe)&&n.upload(e)}this.updatePaintBuffers()},xe.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Me||t instanceof De||t instanceof Oe)&&t.destroy()}};var Te=function(e,t,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var u=0,p=e;u<p.length;u+=1){var m=p[u];this.programConfigurations[m.id]=new xe(m,t,n)}this.needsUpload=!1,this._featureMap=new C,this._bufferOffset=0};function Re(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function ke(e,t,n){var p={"line-pattern":{source:Hr,composite:Hr},"fill-pattern":{source:Hr,composite:Hr},"fill-extrusion-pattern":{source:Hr,composite:Hr}}[e];return p&&p[n]||{color:{source:Wr,composite:i},number:{source:_r,composite:Wr}}[t][n]}Te.prototype.populatePaintArrays=function(e,t,n,u,p,m){for(var y in this.programConfigurations)this.programConfigurations[y].populatePaintArrays(e,t,u,p,m);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Te.prototype.updatePaintArrays=function(e,t,n,u){for(var p=0,m=n;p<m.length;p+=1){var y=m[p];this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(e,this._featureMap,t,y,u)||this.needsUpload}},Te.prototype.get=function(e){return this.programConfigurations[e]},Te.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Te.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},rt("ConstantBinder",ve),rt("CrossFadedConstantBinder",Ee),rt("SourceExpressionBinder",Me),rt("CrossFadedCompositeBinder",Oe),rt("CompositeExpressionBinder",De),rt("ProgramConfiguration",xe,{omit:["_buffers"]}),rt("ProgramConfigurationSet",Te);var We=Math.pow(2,14)-1,Ke=-We-1;function mt(e){for(var t=8192/e.extent,n=e.loadGeometry(),u=0;u<n.length;u++)for(var p=n[u],m=0;m<p.length;m++){var y=p[m],S=Math.round(y.x*t),T=Math.round(y.y*t);y.x=ci(S,Ke,We),y.y=ci(T,Ke,We),(S<y.x||S>y.x+1||T<y.y||T>y.y+1)&&qn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function _t(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?mt(e):[]}}function Be(e,t,n,u,p){e.emplaceBack(2*t+(u+1)/2,2*n+(p+1)/2)}var it=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ga,this.indexArray=new ji,this.segments=new Y,this.programConfigurations=new Te(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function ft(e,t){for(var n=0;n<e.length;n++)if(Yr(t,e[n]))return!0;for(var u=0;u<t.length;u++)if(Yr(e,t[u]))return!0;return!!xr(e,t)}function wt(e,t,n){return!!Yr(e,t)||!!Xr(t,e,n)}function qt(e,t){if(1===e.length)return Wi(t,e[0]);for(var n=0;n<t.length;n++)for(var u=t[n],p=0;p<u.length;p++)if(Yr(e,u[p]))return!0;for(var m=0;m<e.length;m++)if(Wi(t,e[m]))return!0;for(var y=0;y<t.length;y++)if(xr(e,t[y]))return!0;return!1}function Xo(e,t,n){if(e.length>1){if(xr(e,t))return!0;for(var u=0;u<t.length;u++)if(Xr(t[u],e,n))return!0}for(var p=0;p<e.length;p++)if(Xr(e[p],t,n))return!0;return!1}function xr(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var u=e[n],p=e[n+1],m=0;m<t.length-1;m++)if(Yo(u,p,t[m],t[m+1]))return!0;return!1}function Yo(e,t,n,u){return Tr(e,n,u)!==Tr(t,n,u)&&Tr(e,t,n)!==Tr(e,t,u)}function Xr(e,t,n){var u=n*n;if(1===t.length)return e.distSqr(t[0])<u;for(var p=1;p<t.length;p++)if(Br(e,t[p-1],t[p])<u)return!0;return!1}function Br(e,t,n){var u=t.distSqr(n);if(0===u)return e.distSqr(t);var p=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/u;return e.distSqr(p<0?t:p>1?n:n.sub(t)._mult(p)._add(t))}function Wi(e,t){for(var n,u,p,m=!1,y=0;y<e.length;y++)for(var S=0,T=(n=e[y]).length-1;S<n.length;T=S++)(u=n[S]).y>t.y!=(p=n[T]).y>t.y&&t.x<(p.x-u.x)*(t.y-u.y)/(p.y-u.y)+u.x&&(m=!m);return m}function Yr(e,t){for(var n=!1,u=0,p=e.length-1;u<e.length;p=u++){var m=e[u],y=e[p];m.y>t.y!=y.y>t.y&&t.x<(y.x-m.x)*(t.y-m.y)/(y.y-m.y)+m.x&&(n=!n)}return n}function Na(e,t,n){var u=n[0],p=n[2];if(e.x<u.x&&t.x<u.x||e.x>p.x&&t.x>p.x||e.y<u.y&&t.y<u.y||e.y>p.y&&t.y>p.y)return!1;var m=Tr(e,t,n[0]);return m!==Tr(e,t,n[1])||m!==Tr(e,t,n[2])||m!==Tr(e,t,n[3])}function Xn(e,t,n){var u=t.paint.get(e).value;return"constant"===u.kind?u.value:n.programConfigurations.get(t.id).getMaxValue(e)}function br(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function wr(e,t,n,u,p){if(!t[0]&&!t[1])return e;var m=Tt.convert(t)._mult(p);"viewport"===n&&m._rotate(-u);for(var y=[],S=0;S<e.length;S++)y.push(e[S].sub(m));return y}it.prototype.populate=function(e,t,n){var u=this.layers[0],p=[],m=null,y=!1;"circle"===u.type&&(y=!(m=u.layout.get("circle-sort-key")).isConstant());for(var S=0,T=e;S<T.length;S+=1){var A=T[S],L=A.feature,B=A.id,Z=A.index,H=A.sourceLayerIndex,oe=this.layers[0]._featureFilter.needGeometry,se=_t(L,oe);if(this.layers[0]._featureFilter.filter(new an(this.zoom),se,n)){var de=y?m.evaluate(se,{},n):void 0,pe={id:B,properties:L.properties,type:L.type,sourceLayerIndex:H,index:Z,geometry:oe?se.geometry:mt(L),patterns:{},sortKey:de};p.push(pe)}}y&&p.sort(function(dt,tt){return dt.sortKey-tt.sortKey});for(var Se=0,Ce=p;Se<Ce.length;Se+=1){var Pe=Ce[Se],ze=Pe.geometry,Fe=Pe.index,He=Pe.sourceLayerIndex,Je=e[Fe].feature;this.addFeature(Pe,ze,Fe,n),t.featureIndex.insert(Je,ze,Fe,He,this.index)}},it.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},it.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},it.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},it.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Q),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},it.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},it.prototype.addFeature=function(e,t,n,u){for(var p=0,m=t;p<m.length;p+=1)for(var y=0,S=m[p];y<S.length;y+=1){var T=S[y],A=T.x,L=T.y;if(!(A<0||A>=8192||L<0||L>=8192)){var B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),Z=B.vertexLength;Be(this.layoutVertexArray,A,L,-1,-1),Be(this.layoutVertexArray,A,L,1,-1),Be(this.layoutVertexArray,A,L,1,1),Be(this.layoutVertexArray,A,L,-1,1),this.indexArray.emplaceBack(Z,Z+1,Z+2),this.indexArray.emplaceBack(Z,Z+3,Z+2),B.vertexLength+=4,B.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},u)},rt("CircleBucket",it,{omit:["layers"]});var Eo=new zi({"circle-sort-key":new Ct(te.layout_circle["circle-sort-key"])}),Mn={paint:new zi({"circle-radius":new Ct(te.paint_circle["circle-radius"]),"circle-color":new Ct(te.paint_circle["circle-color"]),"circle-blur":new Ct(te.paint_circle["circle-blur"]),"circle-opacity":new Ct(te.paint_circle["circle-opacity"]),"circle-translate":new et(te.paint_circle["circle-translate"]),"circle-translate-anchor":new et(te.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new et(te.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new et(te.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ct(te.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ct(te.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ct(te.paint_circle["circle-stroke-opacity"])}),layout:Eo},An="undefined"!=typeof Float32Array?Float32Array:Array;function Si(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ua(e,t,n){var u=t[0],p=t[1],m=t[2],y=t[3],S=t[4],T=t[5],A=t[6],L=t[7],B=t[8],Z=t[9],H=t[10],oe=t[11],se=t[12],de=t[13],pe=t[14],Se=t[15],Ce=n[0],Pe=n[1],ze=n[2],Fe=n[3];return e[0]=Ce*u+Pe*S+ze*B+Fe*se,e[1]=Ce*p+Pe*T+ze*Z+Fe*de,e[2]=Ce*m+Pe*A+ze*H+Fe*pe,e[3]=Ce*y+Pe*L+ze*oe+Fe*Se,e[4]=(Ce=n[4])*u+(Pe=n[5])*S+(ze=n[6])*B+(Fe=n[7])*se,e[5]=Ce*p+Pe*T+ze*Z+Fe*de,e[6]=Ce*m+Pe*A+ze*H+Fe*pe,e[7]=Ce*y+Pe*L+ze*oe+Fe*Se,e[8]=(Ce=n[8])*u+(Pe=n[9])*S+(ze=n[10])*B+(Fe=n[11])*se,e[9]=Ce*p+Pe*T+ze*Z+Fe*de,e[10]=Ce*m+Pe*A+ze*H+Fe*pe,e[11]=Ce*y+Pe*L+ze*oe+Fe*Se,e[12]=(Ce=n[12])*u+(Pe=n[13])*S+(ze=n[14])*B+(Fe=n[15])*se,e[13]=Ce*p+Pe*T+ze*Z+Fe*de,e[14]=Ce*m+Pe*A+ze*H+Fe*pe,e[15]=Ce*y+Pe*L+ze*oe+Fe*Se,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,n=arguments.length;n--;)t+=e[n]*e[n];return Math.sqrt(t)});var wu,e,Ac=Ua;function hl(e,t,n){var u=t[0],p=t[1],m=t[2],y=t[3];return e[0]=n[0]*u+n[4]*p+n[8]*m+n[12]*y,e[1]=n[1]*u+n[5]*p+n[9]*m+n[13]*y,e[2]=n[2]*u+n[6]*p+n[10]*m+n[14]*y,e[3]=n[3]*u+n[7]*p+n[11]*m+n[15]*y,e}wu=new An(3),An!=Float32Array&&(wu[0]=0,wu[1]=0,wu[2]=0),e=new An(4),An!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0);var Su=(function(){var e=new An(2);An!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(n){e.call(this,n,Mn)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new it(n)},t.prototype.queryRadius=function(n){var u=n;return Xn("circle-radius",this,u)+Xn("circle-stroke-width",this,u)+br(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(n,u,p,m,y,S,T,A){for(var L=wr(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,T),B=this.paint.get("circle-radius").evaluate(u,p)+this.paint.get("circle-stroke-width").evaluate(u,p),Z="map"===this.paint.get("circle-pitch-alignment"),H=Z?L:function(He,Je){return He.map(function(dt){return Cu(dt,Je)})}(L,A),oe=Z?B*T:B,se=0,de=m;se<de.length;se+=1)for(var pe=0,Se=de[se];pe<Se.length;pe+=1){var Ce=Se[pe],Pe=Z?Ce:Cu(Ce,A),ze=oe,Fe=hl([],[Ce.x,Ce.y,0,1],A);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ze*=Fe[3]/S.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ze*=S.cameraToCenterDistance/Fe[3]),wt(H,Pe,ze))return!0}return!1},t}(ki));function Cu(e,t){var n=hl([],[e.x,e.y,0,1],t);return new Tt(n[0]/n[3],n[1]/n[3])}var fl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(it);function dl(e,t,n,u){var p=t.width,m=t.height;if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==p*m*n)throw new RangeError("mismatched image size")}else u=new Uint8Array(p*m*n);return e.width=p,e.height=m,e.data=u,e}function fp(e,t,n){var u=t.width,p=t.height;if(u!==e.width||p!==e.height){var m=dl({},{width:u,height:p},n);Eu(e,m,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,u),height:Math.min(e.height,p)},n),e.width=u,e.height=p,e.data=m.data}}function Eu(e,t,n,u,p,m){if(0===p.width||0===p.height)return t;if(p.width>e.width||p.height>e.height||n.x>e.width-p.width||n.y>e.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||u.x>t.width-p.width||u.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");for(var y=e.data,S=t.data,T=0;T<p.height;T++)for(var A=((n.y+T)*e.width+n.x)*m,L=((u.y+T)*t.width+u.x)*m,B=0;B<p.width*m;B++)S[L+B]=y[A+B];return t}rt("HeatmapBucket",fl,{omit:["layers"]});var Gl=function(e,t){dl(this,e,1,t)};Gl.prototype.resize=function(e){fp(this,e,1)},Gl.prototype.clone=function(){return new Gl({width:this.width,height:this.height},new Uint8Array(this.data))},Gl.copy=function(e,t,n,u,p){Eu(e,t,n,u,p,1)};var Fr=function(e,t){dl(this,e,4,t)};Fr.prototype.resize=function(e){fp(this,e,4)},Fr.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},Fr.prototype.clone=function(){return new Fr({width:this.width,height:this.height},new Uint8Array(this.data))},Fr.copy=function(e,t,n,u,p){Eu(e,t,n,u,p,4)},rt("AlphaImage",Gl),rt("RGBAImage",Fr);var $p={paint:new zi({"heatmap-radius":new Ct(te.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ct(te.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new et(te.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Lr(te.paint_heatmap["heatmap-color"]),"heatmap-opacity":new et(te.paint_heatmap["heatmap-opacity"])})};function qp(e){var t={},n=e.resolution||256,u=e.clips?e.clips.length:1,p=e.image||new Fr({width:n,height:u}),m=function(oe,se,de){t[e.evaluationKey]=de;var pe=e.expression.evaluate(t);p.data[oe+se+0]=Math.floor(255*pe.r/pe.a),p.data[oe+se+1]=Math.floor(255*pe.g/pe.a),p.data[oe+se+2]=Math.floor(255*pe.b/pe.a),p.data[oe+se+3]=Math.floor(255*pe.a)};if(e.clips)for(var y=0,S=0;y<u;++y,S+=4*n)for(var T=0,A=0;T<n;T++,A+=4){var L=T/(n-1),B=e.clips[y];m(S,A,B.start*(1-L)+B.end*L)}else for(var Z=0,H=0;Z<n;Z++,H+=4)m(0,H,Z/(n-1));return p}var Zp=function(e){function t(n){e.call(this,n,$p),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new fl(n)},t.prototype._handleSpecialPaintPropertyUpdate=function(n){"heatmap-color"===n&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=qp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(ki),pf={paint:new zi({"hillshade-illumination-direction":new et(te.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new et(te.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new et(te.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new et(te.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new et(te.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new et(te.paint_hillshade["hillshade-accent-color"])})},dp=function(e){function t(n){e.call(this,n,pf)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(ki),Gp=gi([{name:"a_pos",components:2,type:"Int16"}],4).members,tc=Tu,hf=Tu;function Tu(e,t,n){n=n||2;var u,p,m,y,S,T,A,L=t&&t.length,B=L?t[0]*n:e.length,Z=en(e,0,B,n,!0),H=[];if(!Z||Z.next===Z.prev)return H;if(L&&(Z=function(se,de,pe,Se){var Ce,Pe,ze,Fe=[];for(Ce=0,Pe=de.length;Ce<Pe;Ce++)(ze=en(se,de[Ce]*Se,Ce<Pe-1?de[Ce+1]*Se:se.length,Se,!1))===ze.next&&(ze.steiner=!0),Fe.push(Wp(ze));for(Fe.sort(va),Ce=0;Ce<Fe.length;Ce++)mf(Fe[Ce],pe),pe=ml(pe,pe.next);return pe}(e,t,Z,n)),e.length>80*n){u=m=e[0],p=y=e[1];for(var oe=n;oe<B;oe+=n)(S=e[oe])<u&&(u=S),(T=e[oe+1])<p&&(p=T),S>m&&(m=S),T>y&&(y=T);A=0!==(A=Math.max(m-u,y-p))?1/A:0}return nc(Z,H,n,u,p,A),H}function en(e,t,n,u,p){var m,y;if(p===vp(e,t,n,u)>0)for(m=t;m<n;m+=u)y=zc(m,e[m],e[m+1],y);else for(m=n-u;m>=t;m-=u)y=zc(m,e[m],e[m+1],y);return y&&Iu(y,y.next)&&(Xl(y),y=y.next),y}function ml(e,t){if(!e)return e;t||(t=e);var n,u=e;do{if(n=!1,u.steiner||!Iu(u,u.next)&&0!==kn(u.prev,u,u.next))u=u.next;else{if(Xl(u),(u=t=u.prev)===u.next)break;n=!0}}while(n||u!==t);return t}function nc(e,t,n,u,p,m,y){if(e){!y&&m&&function(L,B,Z,H){var oe=L;do{null===oe.z&&(oe.z=rc(oe.x,oe.y,B,Z,H)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next}while(oe!==L);oe.prevZ.nextZ=null,oe.prevZ=null,function(se){var de,pe,Se,Ce,Pe,ze,Fe,He,Je=1;do{for(pe=se,se=null,Pe=null,ze=0;pe;){for(ze++,Se=pe,Fe=0,de=0;de<Je&&(Fe++,Se=Se.nextZ);de++);for(He=Je;Fe>0||He>0&&Se;)0!==Fe&&(0===He||!Se||pe.z<=Se.z)?(Ce=pe,pe=pe.nextZ,Fe--):(Ce=Se,Se=Se.nextZ,He--),Pe?Pe.nextZ=Ce:se=Ce,Ce.prevZ=Pe,Pe=Ce;pe=Se}Pe.nextZ=null,Je*=2}while(ze>1)}(oe)}(e,u,p,m);for(var S,T,A=e;e.prev!==e.next;)if(S=e.prev,T=e.next,m?jp(e,u,p,m):ic(e))t.push(S.i/n),t.push(e.i/n),t.push(T.i/n),Xl(e),e=T.next,A=T.next;else if((e=T)===A){y?1===y?nc(e=ff(ml(e),t,n),t,n,u,p,m,2):2===y&&df(e,t,n,u,p,m):nc(ml(e),t,n,u,p,m,1);break}}}function ic(e){var t=e.prev,n=e,u=e.next;if(kn(t,n,u)>=0)return!1;for(var p=e.next.next;p!==e.prev;){if(jl(t.x,t.y,n.x,n.y,u.x,u.y,p.x,p.y)&&kn(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function jp(e,t,n,u){var p=e.prev,m=e,y=e.next;if(kn(p,m,y)>=0)return!1;for(var S=p.x>m.x?p.x>y.x?p.x:y.x:m.x>y.x?m.x:y.x,T=p.y>m.y?p.y>y.y?p.y:y.y:m.y>y.y?m.y:y.y,A=rc(p.x<m.x?p.x<y.x?p.x:y.x:m.x<y.x?m.x:y.x,p.y<m.y?p.y<y.y?p.y:y.y:m.y<y.y?m.y:y.y,t,n,u),L=rc(S,T,t,n,u),B=e.prevZ,Z=e.nextZ;B&&B.z>=A&&Z&&Z.z<=L;){if(B!==e.prev&&B!==e.next&&jl(p.x,p.y,m.x,m.y,y.x,y.y,B.x,B.y)&&kn(B.prev,B,B.next)>=0||(B=B.prevZ,Z!==e.prev&&Z!==e.next&&jl(p.x,p.y,m.x,m.y,y.x,y.y,Z.x,Z.y)&&kn(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;B&&B.z>=A;){if(B!==e.prev&&B!==e.next&&jl(p.x,p.y,m.x,m.y,y.x,y.y,B.x,B.y)&&kn(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;Z&&Z.z<=L;){if(Z!==e.prev&&Z!==e.next&&jl(p.x,p.y,m.x,m.y,y.x,y.y,Z.x,Z.y)&&kn(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function ff(e,t,n){var u=e;do{var p=u.prev,m=u.next.next;!Iu(p,m)&&mp(p,u,u.next,m)&&Hl(p,m)&&Hl(m,p)&&(t.push(p.i/n),t.push(u.i/n),t.push(m.i/n),Xl(u),Xl(u.next),u=e=m),u=u.next}while(u!==e);return ml(u)}function df(e,t,n,u,p,m){var y=e;do{for(var S=y.next.next;S!==y.prev;){if(y.i!==S.i&&Ko(y,S)){var T=gp(y,S);return y=ml(y,y.next),T=ml(T,T.next),nc(y,t,n,u,p,m),void nc(T,t,n,u,p,m)}S=S.next}y=y.next}while(y!==e)}function va(e,t){return e.x-t.x}function mf(e,t){if(t=function(u,p){var m,y=p,S=u.x,T=u.y,A=-1/0;do{if(T<=y.y&&T>=y.next.y&&y.next.y!==y.y){var L=y.x+(T-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(L<=S&&L>A){if(A=L,L===S){if(T===y.y)return y;if(T===y.next.y)return y.next}m=y.x<y.next.x?y:y.next}}y=y.next}while(y!==p);if(!m)return null;if(S===A)return m;var B,Z=m,H=m.x,oe=m.y,se=1/0;y=m;do{S>=y.x&&y.x>=H&&S!==y.x&&jl(T<oe?S:A,T,H,oe,T<oe?A:S,T,y.x,y.y)&&(B=Math.abs(T-y.y)/(S-y.x),Hl(y,u)&&(B<se||B===se&&(y.x>m.x||y.x===m.x&&Pc(m,y)))&&(m=y,se=B)),y=y.next}while(y!==Z);return m}(e,t)){var n=gp(t,e);ml(t,t.next),ml(n,n.next)}}function Pc(e,t){return kn(e.prev,e,t.prev)<0&&kn(t.next,e,e.next)<0}function rc(e,t,n,u,p){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*p)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-u)*p)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Wp(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function jl(e,t,n,u,p,m,y,S){return(p-y)*(t-S)-(e-y)*(m-S)>=0&&(e-y)*(u-S)-(n-y)*(t-S)>=0&&(n-y)*(m-S)-(p-y)*(u-S)>=0}function Ko(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(n,u){var p=n;do{if(p.i!==n.i&&p.next.i!==n.i&&p.i!==u.i&&p.next.i!==u.i&&mp(p,p.next,n,u))return!0;p=p.next}while(p!==n);return!1}(e,t)&&(Hl(e,t)&&Hl(t,e)&&function(n,u){var p=n,m=!1,y=(n.x+u.x)/2,S=(n.y+u.y)/2;do{p.y>S!=p.next.y>S&&p.next.y!==p.y&&y<(p.next.x-p.x)*(S-p.y)/(p.next.y-p.y)+p.x&&(m=!m),p=p.next}while(p!==n);return m}(e,t)&&(kn(e.prev,e,t.prev)||kn(e,t.prev,t))||Iu(e,t)&&kn(e.prev,e,e.next)>0&&kn(t.prev,t,t.next)>0)}function kn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Iu(e,t){return e.x===t.x&&e.y===t.y}function mp(e,t,n,u){var p=oc(kn(e,t,n)),m=oc(kn(e,t,u)),y=oc(kn(n,u,e)),S=oc(kn(n,u,t));return p!==m&&y!==S||!(0!==p||!Wl(e,n,t))||!(0!==m||!Wl(e,u,t))||!(0!==y||!Wl(n,e,u))||!(0!==S||!Wl(n,t,u))}function Wl(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function oc(e){return e>0?1:e<0?-1:0}function Hl(e,t){return kn(e.prev,e,e.next)<0?kn(e,t,e.next)>=0&&kn(e,e.prev,t)>=0:kn(e,t,e.prev)<0||kn(e,e.next,t)<0}function gp(e,t){var n=new ss(e.i,e.x,e.y),u=new ss(t.i,t.x,t.y),p=e.next,m=t.prev;return e.next=t,t.prev=e,n.next=p,p.prev=n,u.next=n,n.prev=u,m.next=u,u.prev=m,u}function zc(e,t,n,u){var p=new ss(e,t,n);return u?(p.next=u.next,p.prev=u,u.next.prev=p,u.next=p):(p.prev=p,p.next=p),p}function Xl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ss(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vp(e,t,n,u){for(var p=0,m=t,y=n-u;m<n;m+=u)p+=(e[y]-e[m])*(e[m+1]+e[y+1]),y=m;return p}function gl(e,t,n,u,p){!function m(y,S,T,A,L){for(;A>T;){if(A-T>600){var B=A-T+1,Z=S-T+1,H=Math.log(B),oe=.5*Math.exp(2*H/3),se=.5*Math.sqrt(H*oe*(B-oe)/B)*(Z-B/2<0?-1:1);m(y,S,Math.max(T,Math.floor(S-Z*oe/B+se)),Math.min(A,Math.floor(S+(B-Z)*oe/B+se)),L)}var de=y[S],pe=T,Se=A;for(Mu(y,T,S),L(y[A],de)>0&&Mu(y,T,A);pe<Se;){for(Mu(y,pe,Se),pe++,Se--;L(y[pe],de)<0;)pe++;for(;L(y[Se],de)>0;)Se--}0===L(y[T],de)?Mu(y,T,Se):Mu(y,++Se,A),Se<=S&&(T=Se+1),S<=Se&&(A=Se-1)}}(e,t,n||0,u||e.length-1,p||Hp)}function Mu(e,t,n){var u=e[t];e[t]=e[n],e[n]=u}function Hp(e,t){return e<t?-1:e>t?1:0}function ac(e,t){var n=e.length;if(n<=1)return[e];for(var u,p,m=[],y=0;y<n;y++){var S=Tl(e[y]);0!==S&&(e[y].area=Math.abs(S),void 0===p&&(p=S<0),p===S<0?(u&&m.push(u),u=[e[y]]):u.push(e[y]))}if(u&&m.push(u),t>1)for(var T=0;T<m.length;T++)m[T].length<=t||(gl(m[T],t,1,m[T].length-1,gf),m[T]=m[T].slice(0,t));return m}function gf(e,t){return t.area-e.area}function yp(e,t,n){for(var u=n.patternDependencies,p=!1,m=0,y=t;m<y.length;m+=1){var S=y[m].paint.get(e+"-pattern");S.isConstant()||(p=!0);var T=S.constantOr(null);T&&(p=!0,u[T.to]=!0,u[T.from]=!0)}return p}function _p(e,t,n,u,p){for(var m=p.patternDependencies,y=0,S=t;y<S.length;y+=1){var T=S[y],A=T.paint.get(e+"-pattern").value;if("constant"!==A.kind){var L=A.evaluate({zoom:u-1},n,{},p.availableImages),B=A.evaluate({zoom:u},n,{},p.availableImages),Z=A.evaluate({zoom:u+1},n,{},p.availableImages);B=B&&B.name?B.name:B,Z=Z&&Z.name?Z.name:Z,m[L=L&&L.name?L.name:L]=!0,m[B]=!0,m[Z]=!0,n.patterns[T.id]={min:L,mid:B,max:Z}}}return n}Tu.deviation=function(e,t,n,u){var p=t&&t.length,m=Math.abs(vp(e,0,p?t[0]*n:e.length,n));if(p)for(var y=0,S=t.length;y<S;y++)m-=Math.abs(vp(e,t[y]*n,y<S-1?t[y+1]*n:e.length,n));var T=0;for(y=0;y<u.length;y+=3){var A=u[y]*n,L=u[y+1]*n,B=u[y+2]*n;T+=Math.abs((e[A]-e[B])*(e[L+1]-e[A+1])-(e[A]-e[L])*(e[B+1]-e[A+1]))}return 0===m&&0===T?0:Math.abs((T-m)/m)},Tu.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},u=0,p=0;p<e.length;p++){for(var m=0;m<e[p].length;m++)for(var y=0;y<t;y++)n.vertices.push(e[p][m][y]);p>0&&n.holes.push(u+=e[p-1].length)}return n},tc.default=hf;var ya=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ga,this.indexArray=new ji,this.indexArray2=new as,this.programConfigurations=new Te(e.layers,e.zoom),this.segments=new Y,this.segments2=new Y,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};ya.prototype.populate=function(e,t,n){this.hasPattern=yp("fill",this.layers,t);for(var u=this.layers[0].layout.get("fill-sort-key"),p=!u.isConstant(),m=[],y=0,S=e;y<S.length;y+=1){var T=S[y],A=T.feature,L=T.id,B=T.index,Z=T.sourceLayerIndex,H=this.layers[0]._featureFilter.needGeometry,oe=_t(A,H);if(this.layers[0]._featureFilter.filter(new an(this.zoom),oe,n)){var se=p?u.evaluate(oe,{},n,t.availableImages):void 0,de={id:L,properties:A.properties,type:A.type,sourceLayerIndex:Z,index:B,geometry:H?oe.geometry:mt(A),patterns:{},sortKey:se};m.push(de)}}p&&m.sort(function(Je,dt){return Je.sortKey-dt.sortKey});for(var pe=0,Se=m;pe<Se.length;pe+=1){var Ce=Se[pe],Pe=Ce.geometry,ze=Ce.index,Fe=Ce.sourceLayerIndex;if(this.hasPattern){var He=_p("fill",this.layers,Ce,this.zoom,t);this.patternFeatures.push(He)}else this.addFeature(Ce,Pe,ze,n,{});t.featureIndex.insert(e[ze].feature,Pe,ze,Fe,this.index)}},ya.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},ya.prototype.addFeatures=function(e,t,n){for(var u=0,p=this.patternFeatures;u<p.length;u+=1){var m=p[u];this.addFeature(m,m.geometry,m.index,t,n)}},ya.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ya.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ya.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Gp),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},ya.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ya.prototype.addFeature=function(e,t,n,u,p){for(var m=0,y=ac(t,500);m<y.length;m+=1){for(var S=y[m],T=0,A=0,L=S;A<L.length;A+=1)T+=L[A].length;for(var B=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),Z=B.vertexLength,H=[],oe=[],se=0,de=S;se<de.length;se+=1){var pe=de[se];if(0!==pe.length){pe!==S[0]&&oe.push(H.length/2);var Se=this.segments2.prepareSegment(pe.length,this.layoutVertexArray,this.indexArray2),Ce=Se.vertexLength;this.layoutVertexArray.emplaceBack(pe[0].x,pe[0].y),this.indexArray2.emplaceBack(Ce+pe.length-1,Ce),H.push(pe[0].x),H.push(pe[0].y);for(var Pe=1;Pe<pe.length;Pe++)this.layoutVertexArray.emplaceBack(pe[Pe].x,pe[Pe].y),this.indexArray2.emplaceBack(Ce+Pe-1,Ce+Pe),H.push(pe[Pe].x),H.push(pe[Pe].y);Se.vertexLength+=pe.length,Se.primitiveLength+=pe.length}}for(var ze=tc(H,oe),Fe=0;Fe<ze.length;Fe+=3)this.indexArray.emplaceBack(Z+ze[Fe],Z+ze[Fe+1],Z+ze[Fe+2]);B.vertexLength+=T,B.primitiveLength+=ze.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,p,u)},rt("FillBucket",ya,{omit:["layers","patternFeatures"]});var Xp=new zi({"fill-sort-key":new Ct(te.layout_fill["fill-sort-key"])}),vf={paint:new zi({"fill-antialias":new et(te.paint_fill["fill-antialias"]),"fill-opacity":new Ct(te.paint_fill["fill-opacity"]),"fill-color":new Ct(te.paint_fill["fill-color"]),"fill-outline-color":new Ct(te.paint_fill["fill-outline-color"]),"fill-translate":new et(te.paint_fill["fill-translate"]),"fill-translate-anchor":new et(te.paint_fill["fill-translate-anchor"]),"fill-pattern":new mi(te.paint_fill["fill-pattern"])}),layout:Xp},Yp=function(e){function t(n){e.call(this,n,vf)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(n,u){e.prototype.recalculate.call(this,n,u);var p=this.paint._values["fill-outline-color"];"constant"===p.value.kind&&void 0===p.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(n){return new ya(n)},t.prototype.queryRadius=function(){return br(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(n,u,p,m,y,S,T){return qt(wr(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,T),m)},t.prototype.isTileClipped=function(){return!0},t}(ki),Kp=gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,oo=ao;function ao(e,t,n,u,p){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=u,this._values=p,e.readFields(yf,this,t)}function yf(e,t,n){1==e?t.id=n.readVarint():2==e?function(u,p){for(var m=u.readVarint()+u.pos;u.pos<m;){var y=p._keys[u.readVarint()],S=p._values[u.readVarint()];p.properties[y]=S}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function _f(e){for(var t,n,u=0,p=0,m=e.length,y=m-1;p<m;y=p++)u+=((n=e[y]).x-(t=e[p]).x)*(t.y+n.y);return u}ao.types=["Unknown","Point","LineString","Polygon"],ao.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,u=1,p=0,m=0,y=0,S=[];e.pos<n;){if(p<=0){var T=e.readVarint();u=7&T,p=T>>3}if(p--,1===u||2===u)m+=e.readSVarint(),y+=e.readSVarint(),1===u&&(t&&S.push(t),t=[]),t.push(new Tt(m,y));else{if(7!==u)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&S.push(t),S},ao.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,u=0,p=0,m=0,y=1/0,S=-1/0,T=1/0,A=-1/0;e.pos<t;){if(u<=0){var L=e.readVarint();n=7&L,u=L>>3}if(u--,1===n||2===n)(p+=e.readSVarint())<y&&(y=p),p>S&&(S=p),(m+=e.readSVarint())<T&&(T=m),m>A&&(A=m);else if(7!==n)throw new Error("unknown command "+n)}return[y,T,S,A]},ao.prototype.toGeoJSON=function(e,t,n){var u,p,m=this.extent*Math.pow(2,n),y=this.extent*e,S=this.extent*t,T=this.loadGeometry(),A=ao.types[this.type];function L(H){for(var oe=0;oe<H.length;oe++){var se=H[oe];H[oe]=[360*(se.x+y)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(se.y+S)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(u=0;u<T.length;u++)B[u]=T[u][0];L(T=B);break;case 2:for(u=0;u<T.length;u++)L(T[u]);break;case 3:for(T=function(H){var oe=H.length;if(oe<=1)return[H];for(var se,de,pe=[],Se=0;Se<oe;Se++){var Ce=_f(H[Se]);0!==Ce&&(void 0===de&&(de=Ce<0),de===Ce<0?(se&&pe.push(se),se=[H[Se]]):se.push(H[Se]))}return se&&pe.push(se),pe}(T),u=0;u<T.length;u++)for(p=0;p<T[u].length;p++)L(T[u][p])}1===T.length?T=T[0]:A="Multi"+A;var Z={type:"Feature",geometry:{type:A,coordinates:T},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var sc=Yl;function Yl(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Jp,this,t),this.length=this._features.length}function Jp(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(u){for(var p=null,m=u.readVarint()+u.pos;u.pos<m;){var y=u.readVarint()>>3;p=1===y?u.readString():2===y?u.readFloat():3===y?u.readDouble():4===y?u.readVarint64():5===y?u.readVarint():6===y?u.readSVarint():7===y?u.readBoolean():null}return p}(n))}function Qp(e,t,n){if(3===e){var u=new sc(n,n.readVarint()+n.pos);u.length&&(t[u.name]=u)}}Yl.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new oo(this._pbf,t,this.extent,this._keys,this._values)};var Au={VectorTile:function(e,t){this.layers=e.readFields(Qp,{},t)},VectorTileFeature:oo,VectorTileLayer:sc},eh=Au.VectorTileFeature.types,vl=Math.pow(2,13);function Ms(e,t,n,u,p,m,y,S){e.emplaceBack(t,n,2*Math.floor(u*vl)+y,p*vl*2,m*vl*2,Math.round(S))}var Va=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new or,this.indexArray=new ji,this.programConfigurations=new Te(e.layers,e.zoom),this.segments=new Y,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function th(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Va.prototype.populate=function(e,t,n){this.features=[],this.hasPattern=yp("fill-extrusion",this.layers,t);for(var u=0,p=e;u<p.length;u+=1){var m=p[u],y=m.feature,S=m.id,T=m.index,A=m.sourceLayerIndex,L=this.layers[0]._featureFilter.needGeometry,B=_t(y,L);if(this.layers[0]._featureFilter.filter(new an(this.zoom),B,n)){var Z={id:S,sourceLayerIndex:A,index:T,geometry:L?B.geometry:mt(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(_p("fill-extrusion",this.layers,Z,this.zoom,t)):this.addFeature(Z,Z.geometry,T,n,{}),t.featureIndex.insert(y,Z.geometry,T,A,this.index,!0)}}},Va.prototype.addFeatures=function(e,t,n){for(var u=0,p=this.features;u<p.length;u+=1){var m=p[u];this.addFeature(m,m.geometry,m.index,t,n)}},Va.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Va.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Va.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Va.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Kp),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Va.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Va.prototype.addFeature=function(e,t,n,u,p){for(var m=0,y=ac(t,500);m<y.length;m+=1){for(var S=y[m],T=0,A=0,L=S;A<L.length;A+=1)T+=L[A].length;for(var B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Z=0,H=S;Z<H.length;Z+=1){var oe=H[Z];if(0!==oe.length&&!((Bt=oe).every(function(zt){return zt.x<0})||Bt.every(function(zt){return zt.x>8192})||Bt.every(function(zt){return zt.y<0})||Bt.every(function(zt){return zt.y>8192})))for(var se=0,de=0;de<oe.length;de++){var pe=oe[de];if(de>=1){var Se=oe[de-1];if(!th(pe,Se)){B.vertexLength+4>Y.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Ce=pe.sub(Se)._perp()._unit(),Pe=Se.dist(pe);se+Pe>32768&&(se=0),Ms(this.layoutVertexArray,pe.x,pe.y,Ce.x,Ce.y,0,0,se),Ms(this.layoutVertexArray,pe.x,pe.y,Ce.x,Ce.y,0,1,se),Ms(this.layoutVertexArray,Se.x,Se.y,Ce.x,Ce.y,0,0,se+=Pe),Ms(this.layoutVertexArray,Se.x,Se.y,Ce.x,Ce.y,0,1,se);var ze=B.vertexLength;this.indexArray.emplaceBack(ze,ze+2,ze+1),this.indexArray.emplaceBack(ze+1,ze+2,ze+3),B.vertexLength+=4,B.primitiveLength+=2}}}}if(B.vertexLength+T>Y.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),"Polygon"===eh[e.type]){for(var Fe=[],He=[],Je=B.vertexLength,dt=0,tt=S;dt<tt.length;dt+=1){var xt=tt[dt];if(0!==xt.length){xt!==S[0]&&He.push(Fe.length/2);for(var nt=0;nt<xt.length;nt++){var Rt=xt[nt];Ms(this.layoutVertexArray,Rt.x,Rt.y,0,0,1,1,0),Fe.push(Rt.x),Fe.push(Rt.y)}}}for(var Et=tc(Fe,He),ct=0;ct<Et.length;ct+=3)this.indexArray.emplaceBack(Je+Et[ct],Je+Et[ct+2],Je+Et[ct+1]);B.primitiveLength+=Et.length/3,B.vertexLength+=T}}var Bt;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,p,u)},rt("FillExtrusionBucket",Va,{omit:["layers","features"]});var nh={paint:new zi({"fill-extrusion-opacity":new et(te["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ct(te["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new et(te["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new et(te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mi(te["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ct(te["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ct(te["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new et(te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},kc=function(e){function t(n){e.call(this,n,nh)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(n){return new Va(n)},t.prototype.queryRadius=function(){return br(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(n,u,p,m,y,S,T,A){var L=wr(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,T),B=this.paint.get("fill-extrusion-height").evaluate(u,p),Z=this.paint.get("fill-extrusion-base").evaluate(u,p),H=function(se,de,pe,Se){for(var Ce=[],Pe=0,ze=se;Pe<ze.length;Pe+=1){var Fe=ze[Pe],He=[Fe.x,Fe.y,0,1];hl(He,He,de),Ce.push(new Tt(He[0]/He[3],He[1]/He[3]))}return Ce}(L,A),oe=function(se,de,pe,Se){for(var Ce=[],Pe=[],ze=Se[8]*de,Fe=Se[9]*de,He=Se[10]*de,Je=Se[11]*de,dt=Se[8]*pe,tt=Se[9]*pe,xt=Se[10]*pe,nt=Se[11]*pe,Rt=0,Et=se;Rt<Et.length;Rt+=1){for(var ct=[],Bt=[],zt=0,Xt=Et[Rt];zt<Xt.length;zt+=1){var bt=Xt[zt],tn=bt.x,Vn=bt.y,Yn=Se[0]*tn+Se[4]*Vn+Se[12],jn=Se[1]*tn+Se[5]*Vn+Se[13],Cn=Se[2]*tn+Se[6]*Vn+Se[14],$n=Se[3]*tn+Se[7]*Vn+Se[15],Ci=Cn+He,Ei=$n+Je,Hi=Yn+dt,Ti=jn+tt,Er=Cn+xt,ei=$n+nt,Oi=new Tt((Yn+ze)/Ei,(jn+Fe)/Ei);Oi.z=Ci/Ei,ct.push(Oi);var Gt=new Tt(Hi/ei,Ti/ei);Gt.z=Er/ei,Bt.push(Gt)}Ce.push(ct),Pe.push(Bt)}return[Ce,Pe]}(m,Z,B,A);return function(se,de,pe){var Se=1/0;qt(pe,de)&&(Se=lc(pe,de[0]));for(var Ce=0;Ce<de.length;Ce++)for(var Pe=de[Ce],ze=se[Ce],Fe=0;Fe<Pe.length-1;Fe++){var He=Pe[Fe],Je=[He,Pe[Fe+1],ze[Fe+1],ze[Fe],He];ft(pe,Je)&&(Se=Math.min(Se,lc(pe,Je)))}return Se!==1/0&&Se}(oe[0],oe[1],H)},t}(ki);function Pu(e,t){return e.x*t.x+e.y*t.y}function lc(e,t){if(1===e.length){for(var n,u=0,p=t[u++];!n||p.equals(n);)if(!(n=t[u++]))return 1/0;for(;u<t.length;u++){var m=t[u],y=e[0],S=n.sub(p),T=m.sub(p),A=y.sub(p),L=Pu(S,S),B=Pu(S,T),Z=Pu(T,T),H=Pu(A,S),oe=Pu(A,T),se=L*Z-B*B,de=(Z*H-B*oe)/se,pe=(L*oe-B*H)/se,Se=p.z*(1-de-pe)+n.z*de+m.z*pe;if(isFinite(Se))return Se}return 1/0}for(var Ce=1/0,Pe=0,ze=t;Pe<ze.length;Pe+=1)Ce=Math.min(Ce,ze[Pe].z);return Ce}var xp=gi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Dc=gi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,xf=Au.VectorTileFeature.types,ih=Math.cos(Math.PI/180*37.5),uc=Math.pow(2,14)/.5,Sr=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(n){return n.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(n){t.gradients[n.id]={}}),this.layoutVertexArray=new J,this.layoutVertexArray2=new Wr,this.indexArray=new ji,this.programConfigurations=new Te(e.layers,e.zoom),this.segments=new Y,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(n){return n.isStateDependent()}).map(function(n){return n.id})};Sr.prototype.populate=function(e,t,n){this.hasPattern=yp("line",this.layers,t);for(var u=this.layers[0].layout.get("line-sort-key"),p=!u.isConstant(),m=[],y=0,S=e;y<S.length;y+=1){var T=S[y],A=T.feature,L=T.id,B=T.index,Z=T.sourceLayerIndex,H=this.layers[0]._featureFilter.needGeometry,oe=_t(A,H);if(this.layers[0]._featureFilter.filter(new an(this.zoom),oe,n)){var se=p?u.evaluate(oe,{},n):void 0,de={id:L,properties:A.properties,type:A.type,sourceLayerIndex:Z,index:B,geometry:H?oe.geometry:mt(A),patterns:{},sortKey:se};m.push(de)}}p&&m.sort(function(Je,dt){return Je.sortKey-dt.sortKey});for(var pe=0,Se=m;pe<Se.length;pe+=1){var Ce=Se[pe],Pe=Ce.geometry,ze=Ce.index,Fe=Ce.sourceLayerIndex;if(this.hasPattern){var He=_p("line",this.layers,Ce,this.zoom,t);this.patternFeatures.push(He)}else this.addFeature(Ce,Pe,ze,n,{});t.featureIndex.insert(e[ze].feature,Pe,ze,Fe,this.index)}},Sr.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Sr.prototype.addFeatures=function(e,t,n){for(var u=0,p=this.patternFeatures;u<p.length;u+=1){var m=p[u];this.addFeature(m,m.geometry,m.index,t,n)}},Sr.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Sr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Sr.prototype.upload=function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Dc)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,xp),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Sr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Sr.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Sr.prototype.addFeature=function(e,t,n,u,p){var m=this.layers[0].layout,y=m.get("line-join").evaluate(e,{}),S=m.get("line-cap"),T=m.get("line-miter-limit"),A=m.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var L=0,B=t;L<B.length;L+=1)this.addLine(B[L],e,y,S,T,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,p,u)},Sr.prototype.addLine=function(e,t,n,u,p,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var y=0;y<e.length-1;y++)this.totalDistance+=e[y].dist(e[y+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var S="Polygon"===xf[t.type],T=e.length;T>=2&&e[T-1].equals(e[T-2]);)T--;for(var A=0;A<T-1&&e[A].equals(e[A+1]);)A++;if(!(T<(S?3:2))){"bevel"===n&&(p=1.05);var L,B=this.overscaling<=16?122880/(512*this.overscaling):0,Z=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray),H=void 0,oe=void 0,se=void 0,de=void 0;this.e1=this.e2=-1,S&&(de=e[A].sub(L=e[T-2])._unit()._perp());for(var pe=A;pe<T;pe++)if(!(oe=pe===T-1?S?e[A+1]:void 0:e[pe+1])||!e[pe].equals(oe)){de&&(se=de),L&&(H=L),L=e[pe],de=oe?oe.sub(L)._unit()._perp():se;var Se=(se=se||de).add(de);0===Se.x&&0===Se.y||Se._unit();var Ce=se.x*de.x+se.y*de.y,Pe=Se.x*de.x+Se.y*de.y,ze=0!==Pe?1/Pe:1/0,Fe=2*Math.sqrt(2-2*Pe),He=Pe<ih&&H&&oe,Je=se.x*de.y-se.y*de.x>0;if(He&&pe>A){var dt=L.dist(H);if(dt>2*B){var tt=L.sub(L.sub(H)._mult(B/dt)._round());this.updateDistance(H,tt),this.addCurrentVertex(tt,se,0,0,Z),H=tt}}var xt=H&&oe,nt=xt?n:S?"butt":u;if(xt&&"round"===nt&&(ze<m?nt="miter":ze<=2&&(nt="fakeround")),"miter"===nt&&ze>p&&(nt="bevel"),"bevel"===nt&&(ze>2&&(nt="flipbevel"),ze<p&&(nt="miter")),H&&this.updateDistance(H,L),"miter"===nt)Se._mult(ze),this.addCurrentVertex(L,Se,0,0,Z);else if("flipbevel"===nt){if(ze>100)Se=de.mult(-1);else{var Rt=ze*se.add(de).mag()/se.sub(de).mag();Se._perp()._mult(Rt*(Je?-1:1))}this.addCurrentVertex(L,Se,0,0,Z),this.addCurrentVertex(L,Se.mult(-1),0,0,Z)}else if("bevel"===nt||"fakeround"===nt){var Et=-Math.sqrt(ze*ze-1),ct=Je?Et:0,Bt=Je?0:Et;if(H&&this.addCurrentVertex(L,se,ct,Bt,Z),"fakeround"===nt)for(var zt=Math.round(180*Fe/Math.PI/20),Xt=1;Xt<zt;Xt++){var bt=Xt/zt;if(.5!==bt){var tn=bt-.5;bt+=bt*tn*(bt-1)*((1.0904+Ce*(Ce*(3.55645-1.43519*Ce)-3.2452))*tn*tn+(.848013+Ce*(.215638*Ce-1.06021)))}var Vn=de.sub(se)._mult(bt)._add(se)._unit()._mult(Je?-1:1);this.addHalfVertex(L,Vn.x,Vn.y,!1,Je,0,Z)}oe&&this.addCurrentVertex(L,de,-ct,-Bt,Z)}else if("butt"===nt)this.addCurrentVertex(L,Se,0,0,Z);else if("square"===nt){var Yn=H?1:-1;this.addCurrentVertex(L,Se,Yn,Yn,Z)}else"round"===nt&&(H&&(this.addCurrentVertex(L,se,0,0,Z),this.addCurrentVertex(L,se,1,1,Z,!0)),oe&&(this.addCurrentVertex(L,de,-1,-1,Z,!0),this.addCurrentVertex(L,de,0,0,Z)));if(He&&pe<T-1){var jn=L.dist(oe);if(jn>2*B){var Cn=L.add(oe.sub(L)._mult(B/jn)._round());this.updateDistance(L,Cn),this.addCurrentVertex(Cn,de,0,0,Z),L=Cn}}}}},Sr.prototype.addCurrentVertex=function(e,t,n,u,p,m){void 0===m&&(m=!1);var y=t.y*u-t.x,S=-t.y-t.x*u;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,m,!1,n,p),this.addHalfVertex(e,y,S,m,!0,-u,p),this.distance>uc/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,t,n,u,p,m))},Sr.prototype.addHalfVertex=function(e,t,n,u,p,m,y){var S=.5*(this.lineClips?this.scaledDistance*(uc-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(u?1:0),(e.y<<1)+(p?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===m?0:m<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var T=y.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),y.primitiveLength++),p?this.e2=T:this.e1=T},Sr.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Sr.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},rt("LineBucket",Sr,{omit:["layers","patternFeatures"]});var bp=new zi({"line-cap":new et(te.layout_line["line-cap"]),"line-join":new Ct(te.layout_line["line-join"]),"line-miter-limit":new et(te.layout_line["line-miter-limit"]),"line-round-limit":new et(te.layout_line["line-round-limit"]),"line-sort-key":new Ct(te.layout_line["line-sort-key"])}),rh={paint:new zi({"line-opacity":new Ct(te.paint_line["line-opacity"]),"line-color":new Ct(te.paint_line["line-color"]),"line-translate":new et(te.paint_line["line-translate"]),"line-translate-anchor":new et(te.paint_line["line-translate-anchor"]),"line-width":new Ct(te.paint_line["line-width"]),"line-gap-width":new Ct(te.paint_line["line-gap-width"]),"line-offset":new Ct(te.paint_line["line-offset"]),"line-blur":new Ct(te.paint_line["line-blur"]),"line-dasharray":new Gi(te.paint_line["line-dasharray"]),"line-pattern":new mi(te.paint_line["line-pattern"]),"line-gradient":new Lr(te.paint_line["line-gradient"])}),layout:bp},wp=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(n,u){return u=new an(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),e.prototype.possiblyEvaluate.call(this,n,u)},t.prototype.evaluate=function(n,u,p,m){return u=Rn({},u,{zoom:Math.floor(u.zoom)}),e.prototype.evaluate.call(this,n,u,p,m)},t}(Ct))(rh.paint.properties["line-width"].specification);wp.useIntegerZoom=!0;var As=function(e){function t(n){e.call(this,n,rh),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(n){"line-gradient"===n&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof no,this.gradientVersion=(this.gradientVersion+1)%xi)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(n,u){e.prototype.recalculate.call(this,n,u),this.paint._values["line-floorwidth"]=wp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)},t.prototype.createBucket=function(n){return new Sr(n)},t.prototype.queryRadius=function(n){var u=n,p=Sp(Xn("line-width",this,u),Xn("line-gap-width",this,u)),m=Xn("line-offset",this,u);return p/2+Math.abs(m)+br(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(n,u,p,m,y,S,T){var A=wr(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,T),L=T/2*Sp(this.paint.get("line-width").evaluate(u,p),this.paint.get("line-gap-width").evaluate(u,p)),B=this.paint.get("line-offset").evaluate(u,p);return B&&(m=function(Z,H){for(var oe=[],se=new Tt(0,0),de=0;de<Z.length;de++){for(var pe=Z[de],Se=[],Ce=0;Ce<pe.length;Ce++){var Pe=pe[Ce],ze=pe[Ce+1],Fe=0===Ce?se:Pe.sub(pe[Ce-1])._unit()._perp(),He=Ce===pe.length-1?se:ze.sub(Pe)._unit()._perp(),Je=Fe._add(He)._unit();Je._mult(1/(Je.x*He.x+Je.y*He.y)),Se.push(Je._mult(H)._add(Pe))}oe.push(Se)}return oe}(m,B*T)),function(Z,H,oe){for(var se=0;se<H.length;se++){var de=H[se];if(Z.length>=3)for(var pe=0;pe<de.length;pe++)if(Yr(Z,de[pe]))return!0;if(Xo(Z,de,oe))return!0}return!1}(A,m,L)},t.prototype.isTileClipped=function(){return!0},t}(ki);function Sp(e,t){return t>0?t+2*e:e}var oh=gi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),bf=gi([{name:"a_projected_pos",components:3,type:"Float32"}],4),ah=(gi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),gi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),sh=(gi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),wf=gi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ps(e,t,n){return e.sections.forEach(function(u){var p,y,S;u.text=(p=u.text,y=n,"uppercase"===(S=t.layout.get("text-transform").evaluate(y,{}))?p=p.toLocaleUpperCase():"lowercase"===S&&(p=p.toLocaleLowerCase()),zn.applyArabicShaping&&(p=zn.applyArabicShaping(p)),p)}),e}gi([{name:"triangle",components:3,type:"Uint16"}]),gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),gi([{type:"Float32",name:"offsetX"}]),gi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Kl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Lc=function(e,t,n,u,p){var m,y,S=8*p-u-1,T=(1<<S)-1,A=T>>1,L=-7,B=n?p-1:0,Z=n?-1:1,H=e[t+B];for(B+=Z,m=H&(1<<-L)-1,H>>=-L,L+=S;L>0;m=256*m+e[t+B],B+=Z,L-=8);for(y=m&(1<<-L)-1,m>>=-L,L+=u;L>0;y=256*y+e[t+B],B+=Z,L-=8);if(0===m)m=1-A;else{if(m===T)return y?NaN:1/0*(H?-1:1);y+=Math.pow(2,u),m-=A}return(H?-1:1)*y*Math.pow(2,m-u)},Oc=function(e,t,n,u,p,m){var y,S,T,A=8*m-p-1,L=(1<<A)-1,B=L>>1,Z=23===p?Math.pow(2,-24)-Math.pow(2,-77):0,H=u?0:m-1,oe=u?1:-1,se=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(S=isNaN(t)?1:0,y=L):(y=Math.floor(Math.log(t)/Math.LN2),t*(T=Math.pow(2,-y))<1&&(y--,T*=2),(t+=y+B>=1?Z/T:Z*Math.pow(2,1-B))*T>=2&&(y++,T/=2),y+B>=L?(S=0,y=L):y+B>=1?(S=(t*T-1)*Math.pow(2,p),y+=B):(S=t*Math.pow(2,B-1)*Math.pow(2,p),y=0));p>=8;e[n+H]=255&S,H+=oe,S/=256,p-=8);for(y=y<<p|S,A+=p;A>0;e[n+H]=255&y,H+=oe,y/=256,A-=8);e[n+H-oe]|=128*se},Jl=sn;function sn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}sn.Varint=0,sn.Fixed64=1,sn.Bytes=2,sn.Fixed32=5;var kt="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function _a(e){return e.type===sn.Bytes?e.readVarint()+e.pos:e.pos+1}function _l(e,t,n){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(u);for(var p=n.pos-1;p>=e;p--)n.buf[p+u]=n.buf[p]}function Sf(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Cp(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function lh(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Kr(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Cf(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Ef(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function uh(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Tf(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function ch(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Rc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function zu(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function ph(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function zs(e,t,n){1===e&&n.readMessage(so,t)}function so(e,t,n){if(3===e){var u=n.readMessage(Ep,{}),p=u.width,m=u.height,y=u.left,S=u.top,T=u.advance;t.push({id:u.id,bitmap:new Gl({width:p+6,height:m+6},u.bitmap),metrics:{width:p,height:m,left:y,top:S,advance:T}})}}function Ep(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function hh(e){for(var t=0,n=0,u=0,p=e;u<p.length;u+=1){var m=p[u];t+=m.w*m.h,n=Math.max(n,m.w)}e.sort(function(se,de){return de.h-se.h});for(var y=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}],S=0,T=0,A=0,L=e;A<L.length;A+=1)for(var B=L[A],Z=y.length-1;Z>=0;Z--){var H=y[Z];if(!(B.w>H.w||B.h>H.h)){if(B.x=H.x,B.y=H.y,T=Math.max(T,B.y+B.h),S=Math.max(S,B.x+B.w),B.w===H.w&&B.h===H.h){var oe=y.pop();Z<y.length&&(y[Z]=oe)}else B.h===H.h?(H.x+=B.w,H.w-=B.w):B.w===H.w?(H.y+=B.h,H.h-=B.h):(y.push({x:H.x+B.w,y:H.y,w:H.w-B.w,h:B.h}),H.y+=B.h,H.h-=B.h);break}}return{w:S,h:T,fill:t/(S*T)||0}}sn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var u=this.readVarint(),p=u>>3,m=this.pos;this.type=7&u,e(p,t,this),this.pos===m&&this.skip(u)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Rc(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ph(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Rc(this.buf,this.pos)+4294967296*Rc(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Rc(this.buf,this.pos)+4294967296*ph(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Lc(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Lc(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,u=this.buf;return t=127&(n=u[this.pos++]),n<128?t:(t|=(127&(n=u[this.pos++]))<<7,n<128?t:(t|=(127&(n=u[this.pos++]))<<14,n<128?t:(t|=(127&(n=u[this.pos++]))<<21,n<128?t:function(p,m,y){var S,T,A=y.buf;if(S=(112&(T=A[y.pos++]))>>4,T<128||(S|=(127&(T=A[y.pos++]))<<3,T<128)||(S|=(127&(T=A[y.pos++]))<<10,T<128)||(S|=(127&(T=A[y.pos++]))<<17,T<128)||(S|=(127&(T=A[y.pos++]))<<24,T<128)||(S|=(1&(T=A[y.pos++]))<<31,T<128))return function(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}(p,S,m);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=u[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&kt?kt.decode(this.buf.subarray(t,e)):function(n,u,p){for(var m="",y=u;y<p;){var S,T,A,L=n[y],B=null,Z=L>239?4:L>223?3:L>191?2:1;if(y+Z>p)break;1===Z?L<128&&(B=L):2===Z?128==(192&(S=n[y+1]))&&(B=(31&L)<<6|63&S)<=127&&(B=null):3===Z?(T=n[y+2],128==(192&(S=n[y+1]))&&128==(192&T)&&((B=(15&L)<<12|(63&S)<<6|63&T)<=2047||B>=55296&&B<=57343)&&(B=null)):4===Z&&(T=n[y+2],A=n[y+3],128==(192&(S=n[y+1]))&&128==(192&T)&&128==(192&A)&&((B=(15&L)<<18|(63&S)<<12|(63&T)<<6|63&A)<=65535||B>=1114112)&&(B=null)),null===B?(B=65533,Z=1):B>65535&&(B-=65536,m+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),m+=String.fromCharCode(B),y+=Z}return m}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==sn.Bytes)return e.push(this.readVarint(t));var n=_a(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==sn.Bytes)return e.push(this.readSVarint());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==sn.Bytes)return e.push(this.readBoolean());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==sn.Bytes)return e.push(this.readFloat());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==sn.Bytes)return e.push(this.readDouble());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==sn.Bytes)return e.push(this.readFixed32());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==sn.Bytes)return e.push(this.readSFixed32());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==sn.Bytes)return e.push(this.readFixed64());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==sn.Bytes)return e.push(this.readSFixed64());var t=_a(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===sn.Varint)for(;this.buf[this.pos++]>127;);else if(t===sn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===sn.Fixed32)this.pos+=4;else{if(t!==sn.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),zu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),zu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),zu(this.buf,-1&e,this.pos),zu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),zu(this.buf,-1&e,this.pos),zu(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(t,n){var u,p,m,S;if(t>=0?(u=t%4294967296|0,p=t/4294967296|0):(p=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,p=p+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),m=u,(S=n).buf[S.pos++]=127&m|128,m>>>=7,S.buf[S.pos++]=127&m|128,m>>>=7,S.buf[S.pos++]=127&m|128,m>>>=7,S.buf[S.pos++]=127&m|128,S.buf[S.pos]=127&(m>>>=7),function(m,y){var S=(7&m)<<4;y.buf[y.pos++]|=S|((m>>>=3)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m)))))}(p,n)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(u,p,m){for(var y,S,T=0;T<p.length;T++){if((y=p.charCodeAt(T))>55295&&y<57344){if(!S){y>56319||T+1===p.length?(u[m++]=239,u[m++]=191,u[m++]=189):S=y;continue}if(y<56320){u[m++]=239,u[m++]=191,u[m++]=189,S=y;continue}y=S-55296<<10|y-56320|65536,S=null}else S&&(u[m++]=239,u[m++]=191,u[m++]=189,S=null);y<128?u[m++]=y:(y<2048?u[m++]=y>>6|192:(y<65536?u[m++]=y>>12|224:(u[m++]=y>>18|240,u[m++]=y>>12&63|128),u[m++]=y>>6&63|128),u[m++]=63&y|128)}return m}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&_l(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Oc(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Oc(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var u=this.pos-n;u>=128&&_l(n,u,this),this.pos=n-1,this.writeVarint(u),this.pos+=u},writeMessage:function(e,t,n){this.writeTag(e,sn.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Sf,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Cp,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Cf,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,lh,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Kr,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Ef,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,uh,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Tf,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,ch,t)},writeBytesField:function(e,t){this.writeTag(e,sn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,sn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,sn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,sn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,sn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,sn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,sn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,sn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,sn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,sn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var ku=function(e,t){var n=t.pixelRatio,u=t.version,p=t.stretchX,m=t.stretchY,y=t.content;this.paddedRect=e,this.pixelRatio=n,this.stretchX=p,this.stretchY=m,this.content=y,this.version=u},cc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};cc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},cc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},cc.tlbr.get=function(){return this.tl.concat(this.br)},cc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ku.prototype,cc);var pc=function(e,t){var n={},u={};this.haveRenderCallbacks=[];var p=[];this.addImages(e,n,p),this.addImages(t,u,p);var m=hh(p),y=new Fr({width:m.w||1,height:m.h||1});for(var S in e){var T=e[S],A=n[S].paddedRect;Fr.copy(T.data,y,{x:0,y:0},{x:A.x+1,y:A.y+1},T.data)}for(var L in t){var B=t[L],Z=u[L].paddedRect,H=Z.x+1,oe=Z.y+1,se=B.data.width,de=B.data.height;Fr.copy(B.data,y,{x:0,y:0},{x:H,y:oe},B.data),Fr.copy(B.data,y,{x:0,y:de-1},{x:H,y:oe-1},{width:se,height:1}),Fr.copy(B.data,y,{x:0,y:0},{x:H,y:oe+de},{width:se,height:1}),Fr.copy(B.data,y,{x:se-1,y:0},{x:H-1,y:oe},{width:1,height:de}),Fr.copy(B.data,y,{x:0,y:0},{x:H+se,y:oe},{width:1,height:de})}this.image=y,this.iconPositions=n,this.patternPositions=u};pc.prototype.addImages=function(e,t,n){for(var u in e){var p=e[u],m={x:0,y:0,w:p.data.width+2,h:p.data.height+2};n.push(m),t[u]=new ku(m,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(u)}},pc.prototype.patchUpdatedImages=function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)},pc.prototype.patchUpdatedImage=function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var u=e.tl;n.update(t.data,void 0,{x:u[0],y:u[1]})}},rt("ImagePosition",ku),rt("ImageAtlas",pc);var Cr={horizontal:1,vertical:2,horizontalOnly:3},Ql=function(){this.scale=1,this.fontStack="",this.imageName=null};Ql.forText=function(e,t){var n=new Ql;return n.scale=e||1,n.fontStack=t,n},Ql.forImage=function(e){var t=new Ql;return t.imageName=e,t};var ar=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Bc(e,t,n,u,p,m,y,S,T,A,L,B,Z,H,oe,se){var de,pe=ar.fromFeature(e,p);B===Cr.vertical&&pe.verticalizePunctuation();var Se=zn.processBidirectionalText,Ce=zn.processStyledBidirectionalText;if(Se&&1===pe.sections.length){de=[];for(var Pe=0,ze=Se(pe.toString(),hc(pe,A,m,t,u,H,oe));Pe<ze.length;Pe+=1){var Fe=ze[Pe],He=new ar;He.text=Fe,He.sections=pe.sections;for(var Je=0;Je<Fe.length;Je++)He.sectionIndex.push(0);de.push(He)}}else if(Ce){de=[];for(var dt=0,tt=Ce(pe.text,pe.sectionIndex,hc(pe,A,m,t,u,H,oe));dt<tt.length;dt+=1){var xt=tt[dt],nt=new ar;nt.text=xt[0],nt.sectionIndex=xt[1],nt.sections=pe.sections,de.push(nt)}}else de=function(ct,Bt){for(var zt=[],Xt=ct.text,bt=0,tn=0,Vn=Bt;tn<Vn.length;tn+=1){var Yn=Vn[tn];zt.push(ct.substring(bt,Yn)),bt=Yn}return bt<Xt.length&&zt.push(ct.substring(bt,Xt.length)),zt}(pe,hc(pe,A,m,t,u,H,oe));var Rt=[],Et={positionedLines:Rt,text:pe.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:B,iconsInText:!1,verticalizable:!1};return function(ct,Bt,zt,Xt,bt,tn,Vn,Yn,jn,Cn,$n,Ci){for(var Ei=0,Hi=-17,Ti=0,Er=0,ei="right"===Yn?1:"left"===Yn?0:.5,Oi=0,Gt=0,xn=bt;Gt<xn.length;Gt+=1){var cn=xn[Gt];cn.trim();var Kt=cn.getMaxScale(),Nr=24*(Kt-1),sr={positionedGlyphs:[],lineOffset:0};ct.positionedLines[Oi]=sr;var Dn=sr.positionedGlyphs,li=0;if(cn.length()){for(var lr=0;lr<cn.length();lr++){var Ft=cn.getSection(lr),us=cn.getSectionIndex(lr),Io=cn.getCharCode(lr),Jr=0,St=null,cs=null,ti=null,Kn=24,ru=!(jn===Cr.horizontal||!$n&&!Ss(Io)||$n&&(Fc[Io]||(Ur=Io,ot.Arabic(Ur)||ot["Arabic Supplement"](Ur)||ot["Arabic Extended-A"](Ur)||ot["Arabic Presentation Forms-A"](Ur)||ot["Arabic Presentation Forms-B"](Ur))));if(Ft.imageName){var Jo=Xt[Ft.imageName];if(!Jo)continue;ti=Ft.imageName,ct.iconsInText=ct.iconsInText||!0,cs=Jo.paddedRect;var Ds=Jo.displaySize;Ft.scale=24*Ft.scale/Ci,Jr=Nr+(24-Ds[1]*Ft.scale),Kn=(St={width:Ds[0],height:Ds[1],left:1,top:-3,advance:ru?Ds[1]:Ds[0]}).advance;var Nu=ru?Ds[0]*Ft.scale-24*Kt:Ds[1]*Ft.scale-24*Kt;Nu>0&&Nu>li&&(li=Nu)}else{var ep=zt[Ft.fontStack],Uu=ep&&ep[Io];if(Uu&&Uu.rect)cs=Uu.rect,St=Uu.metrics;else{var vc=Bt[Ft.fontStack],Vu=vc&&vc[Io];if(!Vu)continue;St=Vu.metrics}Jr=24*(Kt-Ft.scale)}ru?(ct.verticalizable=!0,Dn.push({glyph:Io,imageName:ti,x:Ei,y:Hi+Jr,vertical:ru,scale:Ft.scale,fontStack:Ft.fontStack,sectionIndex:us,metrics:St,rect:cs}),Ei+=Kn*Ft.scale+Cn):(Dn.push({glyph:Io,imageName:ti,x:Ei,y:Hi+Jr,vertical:ru,scale:Ft.scale,fontStack:Ft.fontStack,sectionIndex:us,metrics:St,rect:cs}),Ei+=St.advance*Ft.scale+Cn)}0!==Dn.length&&(Ti=Math.max(Ei-Cn,Ti),fc(Dn,0,Dn.length-1,ei,li)),Ei=0;var tp=tn*Kt+li;sr.lineOffset=Math.max(li,Nr),Hi+=tp,Er=Math.max(tp,Er),++Oi}else Hi+=tn,++Oi}var Ur,$u=Hi- -17,Ls=Nc(Vn),Ln=Ls.horizontalAlign,Wn=Ls.verticalAlign;(function(yc,np,_c,xc,ip,bc,wc,qu,wl){var Sl,rp=(np-_c)*ip;Sl=bc!==wc?-qu*xc- -17:(-xc*wl+.5)*wc;for(var ou=0,Cl=yc;ou<Cl.length;ou+=1)for(var ur=0,ps=Cl[ou].positionedGlyphs;ur<ps.length;ur+=1){var Zu=ps[ur];Zu.x+=rp,Zu.y+=Sl}})(ct.positionedLines,ei,Ln,Wn,Ti,Er,tn,$u,bt.length),ct.top+=-Wn*$u,ct.bottom=ct.top+$u,ct.left+=-Ln*Ti,ct.right=ct.left+Ti}(Et,t,n,u,de,y,S,T,B,A,Z,se),!function(ct){for(var Bt=0,zt=ct;Bt<zt.length;Bt+=1)if(0!==zt[Bt].positionedGlyphs.length)return!1;return!0}(Rt)&&Et}ar.fromFeature=function(e,t){for(var n=new ar,u=0;u<e.sections.length;u++){var p=e.sections[u];p.image?n.addImageSection(p):n.addTextSection(p,t)}return n},ar.prototype.length=function(){return this.text.length},ar.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},ar.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},ar.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},ar.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",n=0;n<e.length;n++){var u=e.charCodeAt(n+1)||null,p=e.charCodeAt(n-1)||null;t+=u&&vr(u)&&!Kl[e[n+1]]||p&&vr(p)&&!Kl[e[n-1]]||!Kl[e[n]]?e[n]:Kl[e[n]]}return t}(this.text)},ar.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Fc[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,u=this.text.length-1;u>=0&&u>=e&&Fc[this.text.charCodeAt(u)];u--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)},ar.prototype.substring=function(e,t){var n=new ar;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n},ar.prototype.toString=function(){return this.text},ar.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(t,n){return Math.max(t,e.sections[n].scale)},0)},ar.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(Ql.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,u=0;u<e.text.length;++u)this.sectionIndex.push(n)},ar.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(0!==t.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Ql.forImage(t)),this.sectionIndex.push(this.sections.length-1)):qn("Reached maximum number of images 6401")}else qn("Can't add FormattedSection with an empty image.")},ar.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Fc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},lo={};function fh(e,t,n,u,p,m){if(t.imageName){var y=u[t.imageName];return y?y.displaySize[0]*t.scale*24/m+p:0}var S=n[t.fontStack],T=S&&S[e];return T?T.metrics.advance*t.scale+p:0}function Tp(e,t,n,u){var p=Math.pow(e-t,2);return u?e<t?p/2:2*p:p+Math.abs(n)*n}function dh(e,t,n){var u=0;return 10===e&&(u-=1e4),n&&(u+=150),40!==e&&65288!==e||(u+=50),41!==t&&65289!==t||(u+=50),u}function mh(e,t,n,u,p,m){for(var y=null,S=Tp(t,n,p,m),T=0,A=u;T<A.length;T+=1){var L=A[T],B=Tp(t-L.x,n,p,m)+L.badness;B<=S&&(y=L,S=B)}return{index:e,x:t,priorBreak:y,badness:S}}function hc(e,t,n,u,p,m,y){if("point"!==m)return[];if(!e)return[];for(var S,T=[],A=function(de,pe,Se,Ce,Pe,ze){for(var Fe=0,He=0;He<de.length();He++){var Je=de.getSection(He);Fe+=fh(de.getCharCode(He),Je,Ce,Pe,pe,ze)}return Fe/Math.max(1,Math.ceil(Fe/Se))}(e,t,n,u,p,y),L=e.text.indexOf("\u200b")>=0,B=0,Z=0;Z<e.length();Z++){var H=e.getSection(Z),oe=e.getCharCode(Z);if(Fc[oe]||(B+=fh(oe,H,u,p,t,y)),Z<e.length()-1){var se=!((S=oe)<11904||!(ot["Bopomofo Extended"](S)||ot.Bopomofo(S)||ot["CJK Compatibility Forms"](S)||ot["CJK Compatibility Ideographs"](S)||ot["CJK Compatibility"](S)||ot["CJK Radicals Supplement"](S)||ot["CJK Strokes"](S)||ot["CJK Symbols and Punctuation"](S)||ot["CJK Unified Ideographs Extension A"](S)||ot["CJK Unified Ideographs"](S)||ot["Enclosed CJK Letters and Months"](S)||ot["Halfwidth and Fullwidth Forms"](S)||ot.Hiragana(S)||ot["Ideographic Description Characters"](S)||ot["Kangxi Radicals"](S)||ot["Katakana Phonetic Extensions"](S)||ot.Katakana(S)||ot["Vertical Forms"](S)||ot["Yi Radicals"](S)||ot["Yi Syllables"](S)));(lo[oe]||se||H.imageName)&&T.push(mh(Z+1,B,A,T,dh(oe,e.getCharCode(Z+1),se&&L),!1))}}return function de(pe){return pe?de(pe.priorBreak).concat(pe.index):[]}(mh(e.length(),B,A,T,0,!0))}function Nc(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function fc(e,t,n,u,p){if(u||p)for(var m=e[n],y=(e[n].x+m.metrics.advance*m.scale)*u,S=t;S<=n;S++)e[S].x-=y,e[S].y+=p}function Uc(e,t,n,u,p,m){var y,S=e.image;if(S.content){var T=S.content,A=S.pixelRatio||1;y=[T[0]/A,T[1]/A,S.displaySize[0]-T[2]/A,S.displaySize[1]-T[3]/A]}var L,B,Z,H,oe=t.left*m,se=t.right*m;"width"===n||"both"===n?(H=p[0]+oe-u[3],B=p[0]+se+u[1]):B=(H=p[0]+(oe+se-S.displaySize[0])/2)+S.displaySize[0];var de=t.top*m,pe=t.bottom*m;return"height"===n||"both"===n?(L=p[1]+de-u[0],Z=p[1]+pe+u[2]):Z=(L=p[1]+(de+pe-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:L,right:B,bottom:Z,left:H,collisionPadding:y}}lo[10]=!0,lo[32]=!0,lo[38]=!0,lo[40]=!0,lo[41]=!0,lo[43]=!0,lo[45]=!0,lo[47]=!0,lo[173]=!0,lo[183]=!0,lo[8203]=!0,lo[8208]=!0,lo[8211]=!0,lo[8231]=!0;var eu=function(e){function t(n,u,p,m){e.call(this,n,u),this.angle=p,void 0!==m&&(this.segment=m)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(Tt);function Vc(e,t){var n=t.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new an(e+1))};if("source"===n.kind)return{kind:"source"};for(var u=n.zoomStops,p=n.interpolationType,m=0;m<u.length&&u[m]<=e;)m++;for(var y=m=Math.max(0,m-1);y<u.length&&u[y]<e+1;)y++;y=Math.min(u.length-1,y);var S=u[m],T=u[y];return"composite"===n.kind?{kind:"composite",minZoom:S,maxZoom:T,interpolationType:p}:{kind:"camera",minZoom:S,maxZoom:T,minSize:n.evaluate(new an(S)),maxSize:n.evaluate(new an(T)),interpolationType:p}}function dc(e,t,n){var u=t.uSize,p=n.lowerSize;return"source"===e.kind?p/128:"composite"===e.kind?Ot(p/128,n.upperSize/128,t.uSizeT):u}function Ip(e,t){var n=0,u=0;if("constant"===e.kind)u=e.layoutSize;else if("source"!==e.kind){var p=e.interpolationType,m=p?ci(dn.interpolationFactor(p,t,e.minZoom,e.maxZoom),0,1):0;"camera"===e.kind?u=Ot(e.minSize,e.maxSize,m):n=m}return{uSizeT:n,uSize:u}}rt("Anchor",eu);var ls=Object.freeze({__proto__:null,getSizeData:Vc,evaluateSizeForFeature:dc,evaluateSizeForZoom:Ip,SIZE_PACK_FACTOR:128});function xl(e,t,n,u,p){if(void 0===t.segment)return!0;for(var m=t,y=t.segment+1,S=0;S>-n/2;){if(--y<0)return!1;S-=e[y].dist(m),m=e[y]}S+=e[y].dist(e[y+1]),y++;for(var T=[],A=0;S<n/2;){var L=e[y],B=e[y+1];if(!B)return!1;var Z=e[y-1].angleTo(L)-L.angleTo(B);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:S,angleDelta:Z}),A+=Z;S-T[0].distance>u;)A-=T.shift().angleDelta;if(A>p)return!1;y++,S+=L.dist(B)}return!0}function gh(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Mp(e,t,n){return e?.6*t*n:0}function vh(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function If(e,t,n,u,p,m){for(var y=Mp(n,p,m),S=vh(n,u)*m,T=0,A=gh(e)/2,L=0;L<e.length-1;L++){var B=e[L],Z=e[L+1],H=B.dist(Z);if(T+H>A){var oe=(A-T)/H,se=Ot(B.x,Z.x,oe),de=Ot(B.y,Z.y,oe),pe=new eu(se,de,Z.angleTo(B),L);return pe._round(),!y||xl(e,pe,S,y,t)?pe:void 0}T+=H}}function Mf(e,t,n,u,p,m,y,S,T){var A=Mp(u,m,y),L=vh(u,p),B=L*y,Z=0===e[0].x||e[0].x===T||0===e[0].y||e[0].y===T;return t-B<t/4&&(t=B+t/4),function H(oe,se,de,pe,Se,Ce,Pe,ze,Fe){for(var He=Ce/2,Je=gh(oe),dt=0,tt=se-de,xt=[],nt=0;nt<oe.length-1;nt++){for(var Rt=oe[nt],Et=oe[nt+1],ct=Rt.dist(Et),Bt=Et.angleTo(Rt);tt+de<dt+ct;){var zt=((tt+=de)-dt)/ct,Xt=Ot(Rt.x,Et.x,zt),bt=Ot(Rt.y,Et.y,zt);if(Xt>=0&&Xt<Fe&&bt>=0&&bt<Fe&&tt-He>=0&&tt+He<=Je){var tn=new eu(Xt,bt,Bt,nt);tn._round(),pe&&!xl(oe,tn,Ce,pe,Se)||xt.push(tn)}}dt+=ct}return ze||xt.length||Pe||(xt=H(oe,dt/2,de,pe,Se,Ce,Pe,!0,Fe)),xt}(e,Z?t/2*S%t:(L/2+2*m)*y*S%t,t,A,n,B,Z,!1,T)}function yh(e,t,n,u,p){for(var m=[],y=0;y<e.length;y++)for(var S=e[y],T=void 0,A=0;A<S.length-1;A++){var L=S[A],B=S[A+1];L.x<t&&B.x<t||(L.x<t?L=new Tt(t,L.y+(t-L.x)/(B.x-L.x)*(B.y-L.y))._round():B.x<t&&(B=new Tt(t,L.y+(t-L.x)/(B.x-L.x)*(B.y-L.y))._round()),L.y<n&&B.y<n||(L.y<n?L=new Tt(L.x+(n-L.y)/(B.y-L.y)*(B.x-L.x),n)._round():B.y<n&&(B=new Tt(L.x+(n-L.y)/(B.y-L.y)*(B.x-L.x),n)._round()),L.x>=u&&B.x>=u||(L.x>=u?L=new Tt(u,L.y+(u-L.x)/(B.x-L.x)*(B.y-L.y))._round():B.x>=u&&(B=new Tt(u,L.y+(u-L.x)/(B.x-L.x)*(B.y-L.y))._round()),L.y>=p&&B.y>=p||(L.y>=p?L=new Tt(L.x+(p-L.y)/(B.y-L.y)*(B.x-L.x),p)._round():B.y>=p&&(B=new Tt(L.x+(p-L.y)/(B.y-L.y)*(B.x-L.x),p)._round()),T&&L.equals(T[T.length-1])||m.push(T=[L]),T.push(B)))))}return m}function _h(e,t,n,u){var p=[],m=e.image,y=m.pixelRatio,S=m.paddedRect.w-2,T=m.paddedRect.h-2,A=e.right-e.left,L=e.bottom-e.top,B=m.stretchX||[[0,S]],Z=m.stretchY||[[0,T]],H=function(Xt,bt){return Xt+bt[1]-bt[0]},oe=B.reduce(H,0),se=Z.reduce(H,0),de=S-oe,pe=T-se,Se=0,Ce=oe,Pe=0,ze=se,Fe=0,He=de,Je=0,dt=pe;if(m.content&&u){var tt=m.content;Se=$c(B,0,tt[0]),Pe=$c(Z,0,tt[1]),Ce=$c(B,tt[0],tt[2]),ze=$c(Z,tt[1],tt[3]),Fe=tt[0]-Se,Je=tt[1]-Pe,He=tt[2]-tt[0]-Ce,dt=tt[3]-tt[1]-ze}var xt=function(Xt,bt,tn,Vn){var Yn=qc(Xt.stretch-Se,Ce,A,e.left),jn=Zc(Xt.fixed-Fe,He,Xt.stretch,oe),Cn=qc(bt.stretch-Pe,ze,L,e.top),$n=Zc(bt.fixed-Je,dt,bt.stretch,se),Ci=qc(tn.stretch-Se,Ce,A,e.left),Ei=Zc(tn.fixed-Fe,He,tn.stretch,oe),Hi=qc(Vn.stretch-Pe,ze,L,e.top),Ti=Zc(Vn.fixed-Je,dt,Vn.stretch,se),Er=new Tt(Yn,Cn),ei=new Tt(Ci,Cn),Oi=new Tt(Ci,Hi),Gt=new Tt(Yn,Hi),xn=new Tt(jn/y,$n/y),cn=new Tt(Ei/y,Ti/y),Kt=t*Math.PI/180;if(Kt){var Nr=Math.sin(Kt),sr=Math.cos(Kt),Dn=[sr,-Nr,Nr,sr];Er._matMult(Dn),ei._matMult(Dn),Gt._matMult(Dn),Oi._matMult(Dn)}var li=Xt.stretch+Xt.fixed,lr=bt.stretch+bt.fixed;return{tl:Er,tr:ei,bl:Gt,br:Oi,tex:{x:m.paddedRect.x+1+li,y:m.paddedRect.y+1+lr,w:tn.stretch+tn.fixed-li,h:Vn.stretch+Vn.fixed-lr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:xn,pixelOffsetBR:cn,minFontScaleX:He/y/A,minFontScaleY:dt/y/L,isSDF:n}};if(u&&(m.stretchX||m.stretchY))for(var nt=xh(B,de,oe),Rt=xh(Z,pe,se),Et=0;Et<nt.length-1;Et++)for(var ct=nt[Et],Bt=nt[Et+1],zt=0;zt<Rt.length-1;zt++)p.push(xt(ct,Rt[zt],Bt,Rt[zt+1]));else p.push(xt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:T+1}));return p}function $c(e,t,n){for(var u=0,p=0,m=e;p<m.length;p+=1){var y=m[p];u+=Math.max(t,Math.min(n,y[1]))-Math.max(t,Math.min(n,y[0]))}return u}function xh(e,t,n){for(var u=[{fixed:-1,stretch:0}],p=0,m=e;p<m.length;p+=1){var y=m[p],S=y[0],T=y[1],A=u[u.length-1];u.push({fixed:S-A.stretch,stretch:A.stretch}),u.push({fixed:S-A.stretch,stretch:A.stretch+(T-S)})}return u.push({fixed:t+1,stretch:n}),u}function qc(e,t,n,u){return e/t*n+u}function Zc(e,t,n,u){return e-t*n/u}var Gc=function(e,t,n,u,p,m,y,S,T,A){if(this.boxStartIndex=e.length,T){var L=m.top,B=m.bottom,Z=m.collisionPadding;Z&&(L-=Z[1],B+=Z[3]);var H=B-L;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{var oe=m.top*y-S,se=m.bottom*y+S,de=m.left*y-S,pe=m.right*y+S,Se=m.collisionPadding;if(Se&&(de-=Se[0]*y,oe-=Se[1]*y,pe+=Se[2]*y,se+=Se[3]*y),A){var Ce=new Tt(de,oe),Pe=new Tt(pe,oe),ze=new Tt(de,se),Fe=new Tt(pe,se),He=A*Math.PI/180;Ce._rotate(He),Pe._rotate(He),ze._rotate(He),Fe._rotate(He),de=Math.min(Ce.x,Pe.x,ze.x,Fe.x),pe=Math.max(Ce.x,Pe.x,ze.x,Fe.x),oe=Math.min(Ce.y,Pe.y,ze.y,Fe.y),se=Math.max(Ce.y,Pe.y,ze.y,Fe.y)}e.emplaceBack(t.x,t.y,de,oe,pe,se,n,u,p)}this.boxEndIndex=e.length},Du=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=bh),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function bh(e,t){return e<t?-1:e>t?1:0}function wh(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);for(var u=1/0,p=1/0,m=-1/0,y=-1/0,S=e[0],T=0;T<S.length;T++){var A=S[T];(!T||A.x<u)&&(u=A.x),(!T||A.y<p)&&(p=A.y),(!T||A.x>m)&&(m=A.x),(!T||A.y>y)&&(y=A.y)}var L=Math.min(m-u,y-p),B=L/2,Z=new Du([],Sh);if(0===L)return new Tt(u,p);for(var H=u;H<m;H+=L)for(var oe=p;oe<y;oe+=L)Z.push(new Lu(H+B,oe+B,B,e));for(var se=function(Se){for(var Ce=0,Pe=0,ze=0,Fe=Se[0],He=0,Je=Fe.length,dt=Je-1;He<Je;dt=He++){var tt=Fe[He],xt=Fe[dt],nt=tt.x*xt.y-xt.x*tt.y;Pe+=(tt.x+xt.x)*nt,ze+=(tt.y+xt.y)*nt,Ce+=3*nt}return new Lu(Pe/Ce,ze/Ce,0,Se)}(e),de=Z.length;Z.length;){var pe=Z.pop();(pe.d>se.d||!se.d)&&(se=pe,n&&console.log("found best %d after %d probes",Math.round(1e4*pe.d)/1e4,de)),pe.max-se.d<=t||(Z.push(new Lu(pe.p.x-(B=pe.h/2),pe.p.y-B,B,e)),Z.push(new Lu(pe.p.x+B,pe.p.y-B,B,e)),Z.push(new Lu(pe.p.x-B,pe.p.y+B,B,e)),Z.push(new Lu(pe.p.x+B,pe.p.y+B,B,e)),de+=4)}return n&&(console.log("num probes: "+de),console.log("best distance: "+se.d)),se.p}function Sh(e,t){return t.max-e.max}function Lu(e,t,n,u){this.p=new Tt(e,t),this.h=n,this.d=function(p,m){for(var y=!1,S=1/0,T=0;T<m.length;T++)for(var A=m[T],L=0,B=A.length,Z=B-1;L<B;Z=L++){var H=A[L],oe=A[Z];H.y>p.y!=oe.y>p.y&&p.x<(oe.x-H.x)*(p.y-H.y)/(oe.y-H.y)+H.x&&(y=!y),S=Math.min(S,Br(p,H,oe))}return(y?1:-1)*Math.sqrt(S)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}Du.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Du.prototype.pop=function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},Du.prototype.peek=function(){return this.data[0]},Du.prototype._up=function(e){for(var t=this.data,n=this.compare,u=t[e];e>0;){var p=e-1>>1,m=t[p];if(n(u,m)>=0)break;t[e]=m,e=p}t[e]=u},Du.prototype._down=function(e){for(var t=this.data,n=this.compare,u=this.length>>1,p=t[e];e<u;){var m=1+(e<<1),y=t[m],S=m+1;if(S<this.length&&n(t[S],y)<0&&(m=S,y=t[S]),n(y,p)>=0)break;t[e]=y,e=m}t[e]=p};var Ap=Number.POSITIVE_INFINITY;function Ch(e,t){return t[1]!==Ap?function(n,u,p){var m=0,y=0;switch(u=Math.abs(u),p=Math.abs(p),n){case"top-right":case"top-left":case"top":y=p-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-p}switch(n){case"top-right":case"bottom-right":case"right":m=-u;break;case"top-left":case"bottom-left":case"left":m=u}return[m,y]}(e,t[0],t[1]):function(n,u){var p=0,m=0;u<0&&(u=0);var y=u/Math.sqrt(2);switch(n){case"top-right":case"top-left":m=y-7;break;case"bottom-right":case"bottom-left":m=7-y;break;case"bottom":m=7-u;break;case"top":m=u-7}switch(n){case"top-right":case"bottom-right":p=-y;break;case"top-left":case"bottom-left":p=y;break;case"left":p=u;break;case"right":p=-u}return[p,m]}(e,t[0])}function jc(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Eh(e,t,n,u,p,m,y,S,T,A,L,B,Z,H,oe){var se=function(Pe,ze,Fe,He,Je,dt,tt,xt){for(var nt=He.layout.get("text-rotate").evaluate(dt,{})*Math.PI/180,Rt=[],Et=0,ct=ze.positionedLines;Et<ct.length;Et+=1)for(var Bt=ct[Et],zt=0,Xt=Bt.positionedGlyphs;zt<Xt.length;zt+=1){var bt=Xt[zt];if(bt.rect){var tn=bt.rect||{},Vn=4,Yn=!0,jn=1,Cn=0,$n=(Je||xt)&&bt.vertical,Ci=bt.metrics.advance*bt.scale/2;if(xt&&ze.verticalizable&&(Cn=Bt.lineOffset/2-(bt.imageName?-(24-bt.metrics.width*bt.scale)/2:24*(bt.scale-1))),bt.imageName){var Ei=tt[bt.imageName];Yn=Ei.sdf,Vn=1/(jn=Ei.pixelRatio)}var Hi=Je?[bt.x+Ci,bt.y]:[0,0],Ti=Je?[0,0]:[bt.x+Ci+Fe[0],bt.y+Fe[1]-Cn],Er=[0,0];$n&&(Er=Ti,Ti=[0,0]);var ei=(bt.metrics.left-Vn)*bt.scale-Ci+Ti[0],Oi=(-bt.metrics.top-Vn)*bt.scale+Ti[1],Gt=ei+tn.w*bt.scale/jn,xn=Oi+tn.h*bt.scale/jn,cn=new Tt(ei,Oi),Kt=new Tt(Gt,Oi),Nr=new Tt(ei,xn),sr=new Tt(Gt,xn);if($n){var Dn=new Tt(-Ci,Ci- -17),li=-Math.PI/2,lr=12-Ci,Ft=new Tt(22-lr,-(bt.imageName?lr:0)),us=new(Function.prototype.bind.apply(Tt,[null].concat(Er)));cn._rotateAround(li,Dn)._add(Ft)._add(us),Kt._rotateAround(li,Dn)._add(Ft)._add(us),Nr._rotateAround(li,Dn)._add(Ft)._add(us),sr._rotateAround(li,Dn)._add(Ft)._add(us)}if(nt){var Io=Math.sin(nt),Jr=Math.cos(nt),St=[Jr,-Io,Io,Jr];cn._matMult(St),Kt._matMult(St),Nr._matMult(St),sr._matMult(St)}var cs=new Tt(0,0),ti=new Tt(0,0);Rt.push({tl:cn,tr:Kt,bl:Nr,br:sr,tex:tn,writingMode:ze.writingMode,glyphOffset:Hi,sectionIndex:bt.sectionIndex,isSDF:Yn,pixelOffsetTL:cs,pixelOffsetBR:ti,minFontScaleX:0,minFontScaleY:0})}}return Rt}(0,n,S,p,m,y,u,e.allowVerticalPlacement),de=e.textSizeData,pe=null;"source"===de.kind?(pe=[128*p.layout.get("text-size").evaluate(y,{})])[0]>32640&&qn(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===de.kind&&((pe=[128*H.compositeTextSizes[0].evaluate(y,{},oe),128*H.compositeTextSizes[1].evaluate(y,{},oe)])[0]>32640||pe[1]>32640)&&qn(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,se,pe,S,m,y,A,t,T.lineStartIndex,T.lineLength,Z,oe);for(var Se=0,Ce=L;Se<Ce.length;Se+=1)B[Ce[Se]]=e.text.placedSymbolArray.length-1;return 4*se.length}function Th(e){for(var t in e)return e[t];return null}function Af(e,t,n,u){var p=e.compareText;if(t in p){for(var m=p[t],y=m.length-1;y>=0;y--)if(u.dist(m[y])<n)return!0}else p[t]=[];return p[t].push(u),!1}var Pf=Au.VectorTileFeature.types,zf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wc(e,t,n,u,p,m,y,S,T,A,L,B,Z){var H=S?Math.min(32640,Math.round(S[0])):0,oe=S?Math.min(32640,Math.round(S[1])):0;e.emplaceBack(t,n,Math.round(32*u),Math.round(32*p),m,y,(H<<1)+(T?1:0),oe,16*A,16*L,256*B,256*Z)}function To(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function kf(e){for(var t=0,n=e.sections;t<n.length;t+=1)if(ma(n[t].text))return!0;return!1}var Ou=function(e){this.layoutVertexArray=new Di,this.indexArray=new ji,this.programConfigurations=e,this.segments=new Y,this.dynamicLayoutVertexArray=new Ht,this.opacityVertexArray=new Zl,this.placedSymbolArray=new g};Ou.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Ou.prototype.upload=function(e,t,n,u){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,oh.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,bf.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,zf,!0),this.opacityVertexBuffer.itemSize=1),(n||u)&&this.programConfigurations.upload(e))},Ou.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},rt("SymbolBuffers",Ou);var mc=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new Y,this.collisionVertexArray=new wo};mc.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,ah.members,!0)},mc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},rt("CollisionBuffers",mc);var un=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(m){return m.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Si([]),this.placementViewportMatrix=Si([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Vc(this.zoom,t["text-size"]),this.iconSizeData=Vc(this.zoom,t["icon-size"]);var n=this.layers[0].layout,u=n.get("symbol-sort-key"),p=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==p&&!u.isConstant(),this.sortFeaturesByY=("viewport-y"===p||"auto"===p&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map(function(m){return Cr[m]})),this.stateDependentLayerIds=this.layers.filter(function(m){return m.isStateDependent()}).map(function(m){return m.id}),this.sourceID=e.sourceID};un.prototype.createArrays=function(){this.text=new Ou(new Te(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Ou(new Te(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new E,this.lineVertexArray=new k,this.symbolInstances=new w},un.prototype.calculateGlyphDependencies=function(e,t,n,u,p){for(var m=0;m<e.length;m++)if(t[e.charCodeAt(m)]=!0,(n||u)&&p){var y=Kl[e.charAt(m)];y&&(t[y.charCodeAt(0)]=!0)}},un.prototype.populate=function(e,t,n){var u=this.layers[0],p=u.layout,m=p.get("text-font"),y=p.get("text-field"),S=p.get("icon-image"),T=("constant"!==y.value.kind||y.value.value instanceof hi&&!y.value.value.isEmpty()||y.value.value.toString().length>0)&&("constant"!==m.value.kind||m.value.value.length>0),A="constant"!==S.value.kind||!!S.value.value||Object.keys(S.parameters).length>0,L=p.get("symbol-sort-key");if(this.features=[],T||A){for(var B=t.iconDependencies,Z=t.glyphDependencies,H=t.availableImages,oe=new an(this.zoom),se=0,de=e;se<de.length;se+=1){var pe=de[se],Se=pe.feature,Ce=pe.id,Pe=pe.index,ze=pe.sourceLayerIndex,Fe=u._featureFilter.needGeometry,He=_t(Se,Fe);if(u._featureFilter.filter(oe,He,n)){Fe||(He.geometry=mt(Se));var Je=void 0;if(T){var dt=u.getValueAndResolveTokens("text-field",He,n,H),tt=hi.factory(dt);kf(tt)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Gr()||this.hasRTLText&&zn.isParsed())&&(Je=Ps(tt,u,He))}var xt=void 0;if(A){var nt=u.getValueAndResolveTokens("icon-image",He,n,H);xt=nt instanceof Tn?nt:Tn.fromString(nt)}if(Je||xt){var Rt=this.sortFeaturesByKey?L.evaluate(He,{},n):void 0;if(this.features.push({id:Ce,text:Je,icon:xt,index:Pe,sourceLayerIndex:ze,geometry:He.geometry,properties:Se.properties,type:Pf[Se.type],sortKey:Rt}),xt&&(B[xt.name]=!0),Je){var Et=m.evaluate(He,{},n).join(","),ct="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Cr.vertical)>=0;for(var Bt=0,zt=Je.sections;Bt<zt.length;Bt+=1){var Xt=zt[Bt];if(Xt.image)B[Xt.image.name]=!0;else{var bt=rs(Je.toString()),tn=Xt.fontStack||Et,Vn=Z[tn]=Z[tn]||{};this.calculateGlyphDependencies(Xt.text,Vn,ct,this.allowVerticalPlacement,bt)}}}}}}"line"===p.get("symbol-placement")&&(this.features=function(Yn){var jn={},Cn={},$n=[],Ci=0;function Ei(Dn){$n.push(Yn[Dn]),Ci++}function Hi(Dn,li,lr){var Ft=Cn[Dn];return delete Cn[Dn],Cn[li]=Ft,$n[Ft].geometry[0].pop(),$n[Ft].geometry[0]=$n[Ft].geometry[0].concat(lr[0]),Ft}function Ti(Dn,li,lr){var Ft=jn[li];return delete jn[li],jn[Dn]=Ft,$n[Ft].geometry[0].shift(),$n[Ft].geometry[0]=lr[0].concat($n[Ft].geometry[0]),Ft}function Er(Dn,li,lr){var Ft=lr?li[0][li[0].length-1]:li[0][0];return Dn+":"+Ft.x+":"+Ft.y}for(var ei=0;ei<Yn.length;ei++){var Oi=Yn[ei],Gt=Oi.geometry,xn=Oi.text?Oi.text.toString():null;if(xn){var cn=Er(xn,Gt),Kt=Er(xn,Gt,!0);if(cn in Cn&&Kt in jn&&Cn[cn]!==jn[Kt]){var Nr=Ti(cn,Kt,Gt),sr=Hi(cn,Kt,$n[Nr].geometry);delete jn[cn],delete Cn[Kt],Cn[Er(xn,$n[sr].geometry,!0)]=sr,$n[Nr].geometry=null}else cn in Cn?Hi(cn,Kt,Gt):Kt in jn?Ti(cn,Kt,Gt):(Ei(ei),jn[cn]=Ci-1,Cn[Kt]=Ci-1)}else Ei(ei)}return $n.filter(function(Dn){return Dn.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Yn,jn){return Yn.sortKey-jn.sortKey})}},un.prototype.update=function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},un.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},un.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},un.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},un.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},un.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},un.prototype.addToLineVertexArray=function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){for(var u=e.dist(t[e.segment+1]),p=e.dist(t[e.segment]),m={},y=e.segment+1;y<t.length;y++)m[y]={x:t[y].x,y:t[y].y,tileUnitDistanceFromAnchor:u},y<t.length-1&&(u+=t[y+1].dist(t[y]));for(var S=e.segment||0;S>=0;S--)m[S]={x:t[S].x,y:t[S].y,tileUnitDistanceFromAnchor:p},S>0&&(p+=t[S-1].dist(t[S]));for(var T=0;T<t.length;T++){var A=m[T];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},un.prototype.addSymbols=function(e,t,n,u,p,m,y,S,T,A,L,B){for(var Z=e.indexArray,H=e.layoutVertexArray,oe=e.segments.prepareSegment(4*t.length,H,Z,this.canOverlap?m.sortKey:void 0),se=this.glyphOffsetArray.length,de=oe.vertexLength,pe=this.allowVerticalPlacement&&y===Cr.vertical?Math.PI/2:0,Se=m.text&&m.text.sections,Ce=0;Ce<t.length;Ce++){var Pe=t[Ce],ze=Pe.tl,Fe=Pe.tr,He=Pe.bl,Je=Pe.br,dt=Pe.tex,tt=Pe.pixelOffsetTL,xt=Pe.pixelOffsetBR,nt=Pe.minFontScaleX,Rt=Pe.minFontScaleY,Et=Pe.glyphOffset,ct=Pe.isSDF,Bt=Pe.sectionIndex,zt=oe.vertexLength,Xt=Et[1];Wc(H,S.x,S.y,ze.x,Xt+ze.y,dt.x,dt.y,n,ct,tt.x,tt.y,nt,Rt),Wc(H,S.x,S.y,Fe.x,Xt+Fe.y,dt.x+dt.w,dt.y,n,ct,xt.x,tt.y,nt,Rt),Wc(H,S.x,S.y,He.x,Xt+He.y,dt.x,dt.y+dt.h,n,ct,tt.x,xt.y,nt,Rt),Wc(H,S.x,S.y,Je.x,Xt+Je.y,dt.x+dt.w,dt.y+dt.h,n,ct,xt.x,xt.y,nt,Rt),To(e.dynamicLayoutVertexArray,S,pe),Z.emplaceBack(zt,zt+1,zt+2),Z.emplaceBack(zt+1,zt+2,zt+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Et[0]),Ce!==t.length-1&&Bt===t[Ce+1].sectionIndex||e.programConfigurations.populatePaintArrays(H.length,m,m.index,{},B,Se&&Se[Bt])}e.placedSymbolArray.emplaceBack(S.x,S.y,se,this.glyphOffsetArray.length-se,de,T,A,S.segment,n?n[0]:0,n?n[1]:0,u[0],u[1],y,0,!1,0,L)},un.prototype._addCollisionDebugVertex=function(e,t,n,u,p,m){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,u,p,Math.round(m.x),Math.round(m.y))},un.prototype.addCollisionDebugVertices=function(e,t,n,u,p,m,y){var S=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),T=S.vertexLength,A=p.layoutVertexArray,L=p.collisionVertexArray,B=y.anchorX,Z=y.anchorY;this._addCollisionDebugVertex(A,L,m,B,Z,new Tt(e,t)),this._addCollisionDebugVertex(A,L,m,B,Z,new Tt(n,t)),this._addCollisionDebugVertex(A,L,m,B,Z,new Tt(n,u)),this._addCollisionDebugVertex(A,L,m,B,Z,new Tt(e,u)),S.vertexLength+=4;var H=p.indexArray;H.emplaceBack(T,T+1),H.emplaceBack(T+1,T+2),H.emplaceBack(T+2,T+3),H.emplaceBack(T+3,T),S.primitiveLength+=4},un.prototype.addDebugCollisionBoxes=function(e,t,n,u){for(var p=e;p<t;p++){var m=this.collisionBoxArray.get(p);this.addCollisionDebugVertices(m.x1,m.y1,m.x2,m.y2,u?this.textCollisionBox:this.iconCollisionBox,m.anchorPoint,n)}},un.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new mc(Rr,sh.members,as),this.iconCollisionBox=new mc(Rr,sh.members,as);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},un.prototype._deserializeCollisionBoxesForSymbol=function(e,t,n,u,p,m,y,S,T){for(var A={},L=t;L<n;L++){var B=e.get(L);A.textBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},A.textFeatureIndex=B.featureIndex;break}for(var Z=u;Z<p;Z++){var H=e.get(Z);A.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},A.verticalTextFeatureIndex=H.featureIndex;break}for(var oe=m;oe<y;oe++){var se=e.get(oe);A.iconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},A.iconFeatureIndex=se.featureIndex;break}for(var de=S;de<T;de++){var pe=e.get(de);A.verticalIconBox={x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,anchorPointX:pe.anchorPointX,anchorPointY:pe.anchorPointY},A.verticalIconFeatureIndex=pe.featureIndex;break}return A},un.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},un.prototype.hasTextData=function(){return this.text.segments.get().length>0},un.prototype.hasIconData=function(){return this.icon.segments.get().length>0},un.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},un.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},un.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},un.prototype.addIndicesForPlacedSymbol=function(e,t){for(var n=e.placedSymbolArray.get(t),u=n.vertexStartIndex+4*n.numGlyphs,p=n.vertexStartIndex;p<u;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)},un.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),u=[],p=[],m=[],y=0;y<this.symbolInstances.length;++y){m.push(y);var S=this.symbolInstances.get(y);u.push(0|Math.round(t*S.anchorX+n*S.anchorY)),p.push(S.featureIndex)}return m.sort(function(T,A){return u[T]-u[A]||p[A]-p[T]}),m},un.prototype.addToSortKeyRanges=function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},un.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,u=this.symbolInstanceIndexes;n<u.length;n+=1){var p=this.symbolInstances.get(u[n]);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(function(m,y,S){m>=0&&S.indexOf(m)===y&&t.addIndicesForPlacedSymbol(t.text,m)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},rt("SymbolBucket",un,{omit:["layers","collisionBoxArray","features","compareText"]}),un.MAX_GLYPHS=65535,un.addDynamicAttributes=To;var Df=new zi({"symbol-placement":new et(te.layout_symbol["symbol-placement"]),"symbol-spacing":new et(te.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new et(te.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ct(te.layout_symbol["symbol-sort-key"]),"symbol-z-order":new et(te.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new et(te.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new et(te.layout_symbol["icon-ignore-placement"]),"icon-optional":new et(te.layout_symbol["icon-optional"]),"icon-rotation-alignment":new et(te.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ct(te.layout_symbol["icon-size"]),"icon-text-fit":new et(te.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new et(te.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ct(te.layout_symbol["icon-image"]),"icon-rotate":new Ct(te.layout_symbol["icon-rotate"]),"icon-padding":new et(te.layout_symbol["icon-padding"]),"icon-keep-upright":new et(te.layout_symbol["icon-keep-upright"]),"icon-offset":new Ct(te.layout_symbol["icon-offset"]),"icon-anchor":new Ct(te.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new et(te.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new et(te.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new et(te.layout_symbol["text-rotation-alignment"]),"text-field":new Ct(te.layout_symbol["text-field"]),"text-font":new Ct(te.layout_symbol["text-font"]),"text-size":new Ct(te.layout_symbol["text-size"]),"text-max-width":new Ct(te.layout_symbol["text-max-width"]),"text-line-height":new et(te.layout_symbol["text-line-height"]),"text-letter-spacing":new Ct(te.layout_symbol["text-letter-spacing"]),"text-justify":new Ct(te.layout_symbol["text-justify"]),"text-radial-offset":new Ct(te.layout_symbol["text-radial-offset"]),"text-variable-anchor":new et(te.layout_symbol["text-variable-anchor"]),"text-anchor":new Ct(te.layout_symbol["text-anchor"]),"text-max-angle":new et(te.layout_symbol["text-max-angle"]),"text-writing-mode":new et(te.layout_symbol["text-writing-mode"]),"text-rotate":new Ct(te.layout_symbol["text-rotate"]),"text-padding":new et(te.layout_symbol["text-padding"]),"text-keep-upright":new et(te.layout_symbol["text-keep-upright"]),"text-transform":new Ct(te.layout_symbol["text-transform"]),"text-offset":new Ct(te.layout_symbol["text-offset"]),"text-allow-overlap":new et(te.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new et(te.layout_symbol["text-ignore-placement"]),"text-optional":new et(te.layout_symbol["text-optional"])}),Pp={paint:new zi({"icon-opacity":new Ct(te.paint_symbol["icon-opacity"]),"icon-color":new Ct(te.paint_symbol["icon-color"]),"icon-halo-color":new Ct(te.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ct(te.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ct(te.paint_symbol["icon-halo-blur"]),"icon-translate":new et(te.paint_symbol["icon-translate"]),"icon-translate-anchor":new et(te.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ct(te.paint_symbol["text-opacity"]),"text-color":new Ct(te.paint_symbol["text-color"],{runtimeType:At,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new Ct(te.paint_symbol["text-halo-color"]),"text-halo-width":new Ct(te.paint_symbol["text-halo-width"]),"text-halo-blur":new Ct(te.paint_symbol["text-halo-blur"]),"text-translate":new et(te.paint_symbol["text-translate"]),"text-translate-anchor":new et(te.paint_symbol["text-translate-anchor"])}),layout:Df},Ru=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:gt,this.defaultValue=e};Ru.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},Ru.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},Ru.prototype.outputDefined=function(){return!1},Ru.prototype.serialize=function(){return null},rt("FormatSectionOverride",Ru,{omit:["defaultValue"]});var Lf=function(e){function t(n){e.call(this,n,Pp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(n,u){if(e.prototype.recalculate.call(this,n,u),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var p=this.layout.get("text-writing-mode");if(p){for(var m=[],y=0,S=p;y<S.length;y+=1){var T=S[y];m.indexOf(T)<0&&m.push(T)}this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(n,u,p,m){var T,y=this.layout.get(n).evaluate(u,{},p,m),S=this._unevaluatedLayout._values[n];return S.isDataDriven()||Js(S.value)||!y?y:(T=u.properties,y.replace(/{([^{}]+)}/g,function(L,B){return B in T?String(T[B]):""}))},t.prototype.createBucket=function(n){return new un(n)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var n=0,u=Pp.paint.overridableProperties;n<u.length;n+=1){var p=u[n];if(t.hasPaintOverride(this.layout,p)){var m,y=this.paint.get(p),S=new Ru(y),T=new qo(S,y.property.specification);m="constant"===y.value.kind||"source"===y.value.kind?new el("source",T):new vs("composite",T,y.value.zoomStops,y.value._interpolationType),this.paint._values[p]=new Dr(y.property,m,y.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(n,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&t.hasPaintOverride(this.layout,n)},t.hasPaintOverride=function(n,u){var p=n.get("text-field"),m=Pp.paint.properties[u],y=!1,S=function(L){for(var B=0,Z=L;B<Z.length;B+=1)if(m.overrides&&m.overrides.hasOverride(Z[B]))return void(y=!0)};if("constant"===p.value.kind&&p.value.value instanceof hi)S(p.value.value.sections);else if("source"===p.value.kind){var T=function(L){y||(L instanceof tr&&Zn(L.value)===Vt?S(L.value.sections):L instanceof Pi?S(L.sections):L.eachChild(T))},A=p.value;A._styleExpression&&T(A._styleExpression.expression)}return y},t}(ki),zp={paint:new zi({"background-color":new et(te.paint_background["background-color"]),"background-pattern":new Gi(te.paint_background["background-pattern"]),"background-opacity":new et(te.paint_background["background-opacity"])})},Of=function(e){function t(n){e.call(this,n,zp)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ki),Rf={paint:new zi({"raster-opacity":new et(te.paint_raster["raster-opacity"]),"raster-hue-rotate":new et(te.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new et(te.paint_raster["raster-brightness-min"]),"raster-brightness-max":new et(te.paint_raster["raster-brightness-max"]),"raster-saturation":new et(te.paint_raster["raster-saturation"]),"raster-contrast":new et(te.paint_raster["raster-contrast"]),"raster-resampling":new et(te.paint_raster["raster-resampling"]),"raster-fade-duration":new et(te.paint_raster["raster-fade-duration"])})},Bf=function(e){function t(n){e.call(this,n,Rf)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ki),Ff=function(e){function t(n){e.call(this,n,{}),this.implementation=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},t.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)},t.prototype.onRemove=function(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)},t}(ki),Nf={circle:Su,heatmap:Zp,hillshade:dp,fill:Yp,"fill-extrusion":kc,line:As,symbol:Lf,background:Of,raster:Bf},Ih=ut.HTMLImageElement,Mh=ut.HTMLCanvasElement,Ah=ut.HTMLVideoElement,Ph=ut.ImageData,Hc=ut.ImageBitmap,tu=function(e,t,n,u){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,u)};tu.prototype.update=function(e,t,n){var u=e.width,p=e.height,m=!(this.size&&this.size[0]===u&&this.size[1]===p||n),y=this.context,S=y.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!t||!1!==t.premultiply)),m)this.size=[u,p],e instanceof Ih||e instanceof Mh||e instanceof Ah||e instanceof Ph||Hc&&e instanceof Hc?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,e):S.texImage2D(S.TEXTURE_2D,0,this.format,u,p,0,this.format,S.UNSIGNED_BYTE,e.data);else{var T=n||{x:0,y:0},A=T.x,L=T.y;e instanceof Ih||e instanceof Mh||e instanceof Ah||e instanceof Ph||Hc&&e instanceof Hc?S.texSubImage2D(S.TEXTURE_2D,0,A,L,S.RGBA,S.UNSIGNED_BYTE,e):S.texSubImage2D(S.TEXTURE_2D,0,A,L,u,p,S.RGBA,S.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},tu.prototype.bind=function(e,t,n){var u=this.context.gl;u.bindTexture(u.TEXTURE_2D,this.texture),n!==u.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=u.LINEAR),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,t),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,t),this.wrap=t)},tu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},tu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var kp=function(e){var t=this;this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};kp.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},kp.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Bu=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},It(["receive","process"],this),this.invoker=new kp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=$r()?e:ut};function zh(e,t,n){var u=2*Math.PI*6378137/256/Math.pow(2,n);return[e*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}Bu.prototype.send=function(e,t,n,u,p){var m=this;void 0===p&&(p=!1);var y=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[y]=n);var S=Il(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:e,hasCallback:!!n,targetMapId:u,mustQueue:p,sourceMapId:this.mapId,data:si(t,S)},S),{cancel:function(){n&&delete m.callbacks[y],m.target.postMessage({id:y,type:"<cancel>",targetMapId:u,sourceMapId:m.mapId})}}},Bu.prototype.receive=function(e){var t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){delete this.tasks[n];var u=this.cancelCallbacks[n];delete this.cancelCallbacks[n],u&&u()}else $r()||t.mustQueue?(this.tasks[n]=t,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,t)},Bu.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},Bu.prototype.processTask=function(e,t){var n=this;if("<response>"===t.type){var u=this.callbacks[e];delete this.callbacks[e],u&&(t.error?u(Oa(t.error)):u(null,Oa(t.data)))}else{var p=!1,m=Il(this.globalScope)?void 0:[],y=t.hasCallback?function(L,B){p=!0,delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:L?si(L):null,data:si(B,m)},m)}:function(L){p=!0},S=null,T=Oa(t.data);if(this.parent[t.type])S=this.parent[t.type](t.sourceMapId,T,y);else if(this.parent.getWorkerSource){var A=t.type.split(".");S=this.parent.getWorkerSource(t.sourceMapId,A[0],T.source)[A[1]](T,y)}else y(new Error("Could not find function "+t.type));!p&&S&&S.cancel&&(this.cancelCallbacks[e]=S.cancel)}},Bu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var vi=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};vi.prototype.setNorthEast=function(e){return this._ne=e instanceof Un?new Un(e.lng,e.lat):Un.convert(e),this},vi.prototype.setSouthWest=function(e){return this._sw=e instanceof Un?new Un(e.lng,e.lat):Un.convert(e),this},vi.prototype.extend=function(e){var t,n,u=this._sw,p=this._ne;if(e instanceof Un)t=e,n=e;else{if(!(e instanceof vi))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(vi.convert(e)):this.extend(Un.convert(e)):this;if(n=e._ne,!(t=e._sw)||!n)return this}return u||p?(u.lng=Math.min(t.lng,u.lng),u.lat=Math.min(t.lat,u.lat),p.lng=Math.max(n.lng,p.lng),p.lat=Math.max(n.lat,p.lat)):(this._sw=new Un(t.lng,t.lat),this._ne=new Un(n.lng,n.lat)),this},vi.prototype.getCenter=function(){return new Un((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},vi.prototype.getSouthWest=function(){return this._sw},vi.prototype.getNorthEast=function(){return this._ne},vi.prototype.getNorthWest=function(){return new Un(this.getWest(),this.getNorth())},vi.prototype.getSouthEast=function(){return new Un(this.getEast(),this.getSouth())},vi.prototype.getWest=function(){return this._sw.lng},vi.prototype.getSouth=function(){return this._sw.lat},vi.prototype.getEast=function(){return this._ne.lng},vi.prototype.getNorth=function(){return this._ne.lat},vi.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},vi.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},vi.prototype.isEmpty=function(){return!(this._sw&&this._ne)},vi.prototype.contains=function(e){var t=Un.convert(e),n=t.lng,u=t.lat,p=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&p},vi.convert=function(e){return!e||e instanceof vi?e:new vi(e)};var Un=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Un.prototype.wrap=function(){return new Un(Mi(this.lng,-180,180),this.lat)},Un.prototype.toArray=function(){return[this.lng,this.lat]},Un.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Un.prototype.distanceTo=function(e){var t=Math.PI/180,n=this.lat*t,u=e.lat*t,p=Math.sin(n)*Math.sin(u)+Math.cos(n)*Math.cos(u)*Math.cos((e.lng-this.lng)*t);return 6371008.8*Math.acos(Math.min(p,1))},Un.prototype.toBounds=function(e){void 0===e&&(e=0);var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new vi(new Un(this.lng-n,this.lat-t),new Un(this.lng+n,this.lat+t))},Un.convert=function(e){if(e instanceof Un)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Un(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Un(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var kh=2*Math.PI*6371008.8;function Dh(e){return kh*Math.cos(e*Math.PI/180)}function Lh(e){return(180+e)/360}function Oh(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Xc(e,t){return e/Dh(t)}function Yc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var nu=function(e,t,n){void 0===n&&(n=0),this.x=+e,this.y=+t,this.z=+n};nu.fromLngLat=function(e,t){void 0===t&&(t=0);var n=Un.convert(e);return new nu(Lh(n.lng),Oh(n.lat),Xc(t,n.lat))},nu.prototype.toLngLat=function(){return new Un(360*this.x-180,Yc(this.y))},nu.prototype.toAltitude=function(){return this.z*Dh(Yc(this.y))},nu.prototype.meterInMercatorCoordinateUnits=function(){return 1/kh*(e=Yc(this.y),1/Math.cos(e*Math.PI/180));var e};var iu=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=gc(0,e,e,t,n)};iu.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},iu.prototype.url=function(e,t){var n,u,p,m,y,S=(u=this.y,p=this.z,m=zh(256*(n=this.x),256*(u=Math.pow(2,p)-u-1),p),y=zh(256*(n+1),256*(u+1),p),m[0]+","+m[1]+","+y[0]+","+y[1]),T=function(A,L,B){for(var Z,H="",oe=A;oe>0;oe--)H+=(L&(Z=1<<oe-1)?1:0)+(B&Z?2:0);return H}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",T).replace("{bbox-epsg-3857}",S)},iu.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new Tt(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},iu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Rh=function(e,t){this.wrap=e,this.canonical=t,this.key=gc(e,t.z,t.z,t.x,t.y)},yi=function(e,t,n,u,p){this.overscaledZ=e,this.wrap=t,this.canonical=new iu(n,+u,+p),this.key=gc(t,e,n,u,p)};function gc(e,t,n,u,p){(e*=2)<0&&(e=-1*e-1);var m=1<<n;return(m*m*e+m*p+u).toString(36)+n.toString(36)+t.toString(36)}yi.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},yi.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new yi(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new yi(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},yi.prototype.calculateScaledKey=function(e,t){var n=this.canonical.z-e;return e>this.canonical.z?gc(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):gc(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)},yi.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},yi.prototype.children=function(e){if(this.overscaledZ>=e)return[new yi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,u=2*this.canonical.y;return[new yi(t,this.wrap,t,n,u),new yi(t,this.wrap,t,n+1,u),new yi(t,this.wrap,t,n,u+1),new yi(t,this.wrap,t,n+1,u+1)]},yi.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},yi.prototype.wrapped=function(){return new yi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},yi.prototype.unwrapTo=function(e){return new yi(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},yi.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},yi.prototype.toUnwrapped=function(){return new Rh(this.wrap,this.canonical)},yi.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},yi.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new nu(e.x-this.wrap,e.y))},rt("CanonicalTileID",iu),rt("OverscaledTileID",yi,{omit:["posMatrix"]});var ks=function(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return qn('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var u=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=n||"mapbox";for(var p=0;p<u;p++)this.data[this._idx(-1,p)]=this.data[this._idx(0,p)],this.data[this._idx(u,p)]=this.data[this._idx(u-1,p)],this.data[this._idx(p,-1)]=this.data[this._idx(p,0)],this.data[this._idx(p,u)]=this.data[this._idx(p,u-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(u,-1)]=this.data[this._idx(u-1,0)],this.data[this._idx(-1,u)]=this.data[this._idx(0,u-1)],this.data[this._idx(u,u)]=this.data[this._idx(u-1,u-1)]};ks.prototype.get=function(e,t){var n=new Uint8Array(this.data.buffer),u=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[u],n[u+1],n[u+2])},ks.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},ks.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},ks.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},ks.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},ks.prototype.getPixels=function(){return new Fr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ks.prototype.backfillBorder=function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var u=t*this.dim,p=t*this.dim+this.dim,m=n*this.dim,y=n*this.dim+this.dim;switch(t){case-1:u=p-1;break;case 1:p=u+1}switch(n){case-1:m=y-1;break;case 1:y=m+1}for(var S=-t*this.dim,T=-n*this.dim,A=m;A<y;A++)for(var L=u;L<p;L++)this.data[this._idx(L,A)]=e.data[this._idx(L+S,A+T)]},rt("DEMData",ks);var Kc=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}};Kc.prototype.encode=function(e){return this._stringToNumber[e]},Kc.prototype.decode=function(e){return this._numberToString[e]};var Jc=function(e,t,n,u,p){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=u,this.properties=e.properties,this.id=p},Qc={geometry:{configurable:!0}};Qc.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Qc.geometry.set=function(e){this._geometry=e},Jc.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(Jc.prototype,Qc);var Fu=function(){this.state={},this.stateChanges={},this.deletedStates={}};Fu.prototype.updateState=function(e,t,n){var u=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},Rn(this.stateChanges[e][u],n),null===this.deletedStates[e])for(var p in this.deletedStates[e]={},this.state[e])p!==u&&(this.deletedStates[e][p]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][u])for(var m in this.deletedStates[e][u]={},this.state[e][u])n[m]||(this.deletedStates[e][u][m]=null);else for(var y in n)this.deletedStates[e]&&this.deletedStates[e][u]&&null===this.deletedStates[e][u][y]&&delete this.deletedStates[e][u][y]},Fu.prototype.removeFeatureState=function(e,t,n){if(null!==this.deletedStates[e]){var u=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][u]&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][u])for(n in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][n]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}},Fu.prototype.getState=function(e,t){var n=String(t),u=Rn({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var p=this.deletedStates[e][t];if(null===p)return{};for(var m in p)delete u[m]}return u},Fu.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},Fu.prototype.coalesceChanges=function(e,t){var n={};for(var u in this.stateChanges){this.state[u]=this.state[u]||{};var p={};for(var m in this.stateChanges[u])this.state[u][m]||(this.state[u][m]={}),Rn(this.state[u][m],this.stateChanges[u][m]),p[m]=this.state[u][m];n[u]=p}for(var y in this.deletedStates){this.state[y]=this.state[y]||{};var S={};if(null===this.deletedStates[y])for(var T in this.state[y])S[T]={},this.state[y][T]={};else for(var A in this.deletedStates[y]){if(null===this.deletedStates[y][A])this.state[y][A]={};else for(var L=0,B=Object.keys(this.deletedStates[y][A]);L<B.length;L+=1)delete this.state[y][A][B[L]];S[A]=this.state[y][A]}n[y]=n[y]||{},Rn(n[y],S)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var Z in e)e[Z].setFeatureState(n,t)};var xa=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new ai(8192,16,0),this.grid3D=new ai(8192,16,0),this.featureIndexArray=new X,this.promoteId=t};function Bh(e,t,n,u,p){return Qn(e,function(m,y){var S=t instanceof Wo?t.get(y):null;return S&&S.evaluate?S.evaluate(n,u,p):S})}function Fh(e){for(var t=1/0,n=1/0,u=-1/0,p=-1/0,m=0,y=e;m<y.length;m+=1){var S=y[m];t=Math.min(t,S.x),n=Math.min(n,S.y),u=Math.max(u,S.x),p=Math.max(p,S.y)}return{minX:t,minY:n,maxX:u,maxY:p}}function Uf(e,t){return t-e}xa.prototype.insert=function(e,t,n,u,p,m){var y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,u,p);for(var S=m?this.grid3D:this.grid,T=0;T<t.length;T++){for(var A=t[T],L=[1/0,1/0,-1/0,-1/0],B=0;B<A.length;B++){var Z=A[B];L[0]=Math.min(L[0],Z.x),L[1]=Math.min(L[1],Z.y),L[2]=Math.max(L[2],Z.x),L[3]=Math.max(L[3],Z.y)}L[0]<8192&&L[1]<8192&&L[2]>=0&&L[3]>=0&&S.insert(y,L[0],L[1],L[2],L[3])}},xa.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Au.VectorTile(new Jl(this.rawTileData)).layers,this.sourceLayerCoder=new Kc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},xa.prototype.query=function(e,t,n,u){var p=this;this.loadVTLayers();for(var m=e.params||{},y=8192/e.tileSize/e.scale,S=il(m.filter),T=e.queryGeometry,A=e.queryPadding*y,L=Fh(T),B=this.grid.query(L.minX-A,L.minY-A,L.maxX+A,L.maxY+A),Z=Fh(e.cameraQueryGeometry),oe=0,se=this.grid3D.query(Z.minX-A,Z.minY-A,Z.maxX+A,Z.maxY+A,function(Pe,ze,Fe,He){return function(Je,dt,tt,xt,nt){for(var Rt=0,Et=Je;Rt<Et.length;Rt+=1){var ct=Et[Rt];if(dt<=ct.x&&tt<=ct.y&&xt>=ct.x&&nt>=ct.y)return!0}var Bt=[new Tt(dt,tt),new Tt(dt,nt),new Tt(xt,nt),new Tt(xt,tt)];if(Je.length>2)for(var zt=0,Xt=Bt;zt<Xt.length;zt+=1)if(Yr(Je,Xt[zt]))return!0;for(var bt=0;bt<Je.length-1;bt++)if(Na(Je[bt],Je[bt+1],Bt))return!0;return!1}(e.cameraQueryGeometry,Pe-A,ze-A,Fe+A,He+A)});oe<se.length;oe+=1)B.push(se[oe]);B.sort(Uf);for(var de,pe={},Se=function(Pe){var ze=B[Pe];if(ze!==de){de=ze;var Fe=p.featureIndexArray.get(ze),He=null;p.loadMatchingFeature(pe,Fe.bucketIndex,Fe.sourceLayerIndex,Fe.featureIndex,S,m.layers,m.availableImages,t,n,u,function(Je,dt,tt){return He||(He=mt(Je)),dt.queryIntersectsFeature(T,Je,tt,He,p.z,e.transform,y,e.pixelPosMatrix)})}},Ce=0;Ce<B.length;Ce++)Se(Ce);return pe},xa.prototype.loadMatchingFeature=function(e,t,n,u,p,m,y,S,T,A,L){var B=this.bucketLayerIDs[t];if(!m||function(Je,dt){for(var tt=0;tt<Je.length;tt++)if(dt.indexOf(Je[tt])>=0)return!0;return!1}(m,B)){var Z=this.sourceLayerCoder.decode(n),H=this.vtLayers[Z].feature(u);if(p.needGeometry){var oe=_t(H,!0);if(!p.filter(new an(this.tileID.overscaledZ),oe,this.tileID.canonical))return}else if(!p.filter(new an(this.tileID.overscaledZ),H))return;for(var se=this.getId(H,Z),de=0;de<B.length;de++){var pe=B[de];if(!(m&&m.indexOf(pe)<0)){var Se=S[pe];if(Se){var Ce={};void 0!==se&&A&&(Ce=A.getState(Se.sourceLayer||"_geojsonTileLayer",se));var Pe=Rn({},T[pe]);Pe.paint=Bh(Pe.paint,Se.paint,H,Ce,y),Pe.layout=Bh(Pe.layout,Se.layout,H,Ce,y);var ze=!L||L(H,Se,Ce);if(ze){var Fe=new Jc(H,this.z,this.x,this.y,se);Fe.layer=Pe;var He=e[pe];void 0===He&&(He=e[pe]=[]),He.push({featureIndex:u,feature:Fe,intersectionZ:ze})}}}}}},xa.prototype.lookupSymbolFeatures=function(e,t,n,u,p,m,y,S){var T={};this.loadVTLayers();for(var A=il(p),L=0,B=e;L<B.length;L+=1)this.loadMatchingFeature(T,n,u,B[L],A,m,y,S,t);return T},xa.prototype.hasLayer=function(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var u=0,p=n[t];u<p.length;u+=1)if(e===p[u])return!0;return!1},xa.prototype.getId=function(e,t){var n=e.id;return this.promoteId&&"boolean"==typeof(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(n=Number(n)),n},rt("FeatureIndex",xa,{omit:["rawTileData","sourceLayerCoder"]});var Li=function(e,t){this.tileID=e,this.uid=Vr(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Li.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<Ir.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},Li.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Li.prototype.loadVectorData=function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var u in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(A,L){var B={};if(!L)return B;for(var Z=function(){var se=oe[H],de=se.layerIds.map(function(Ce){return L.getLayer(Ce)}).filter(Boolean);if(0!==de.length){se.layers=de,se.stateDependentLayerIds&&(se.stateDependentLayers=se.stateDependentLayerIds.map(function(Ce){return de.filter(function(Pe){return Pe.id===Ce})[0]}));for(var pe=0,Se=de;pe<Se.length;pe+=1)B[Se[pe].id]=se}},H=0,oe=A;H<oe.length;H+=1)Z();return B}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var p=this.buckets[u];if(p instanceof un){if(this.hasSymbolBuckets=!0,!n)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var m in this.buckets){var y=this.buckets[m];if(y instanceof un&&y.hasRTLText){this.hasRTLText=!0,zn.isLoading()||zn.isLoaded()||"deferred"!==Gr()||Qu();break}}for(var S in this.queryPadding=0,this.buckets){var T=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(S).queryRadius(T))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new r},Li.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Li.prototype.getBucket=function(e){return this.buckets[e.id]},Li.prototype.upload=function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var u=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new tu(e,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new tu(e,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)},Li.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Li.prototype.queryRenderedFeatures=function(e,t,n,u,p,m,y,S,T,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:u,cameraQueryGeometry:p,scale:m,tileSize:this.tileSize,pixelPosMatrix:A,transform:S,params:y,queryPadding:this.queryPadding*T},e,t,n):{}},Li.prototype.querySourceFeatures=function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var u=n.loadVTLayers(),p=t?t.sourceLayer:"",m=u._geojsonTileLayer||u[p];if(m)for(var y=il(t&&t.filter),S=this.tileID.canonical,T=S.z,A=S.x,L=S.y,B={z:T,x:A,y:L},Z=0;Z<m.length;Z++){var H=m.feature(Z);if(y.needGeometry){var oe=_t(H,!0);if(!y.filter(new an(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!y.filter(new an(this.tileID.overscaledZ),H))continue;var se=n.getId(H,p),de=new Jc(H,T,A,L,se);de.tile=B,e.push(de)}}},Li.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Li.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Li.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=Za(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var u=Date.now(),p=!1;if(this.expirationTime>u)p=!1;else if(t)if(this.expirationTime<t)p=!0;else{var m=this.expirationTime-t;m?this.expirationTime=u+Math.max(m,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Li.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Li.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var n=this.latestFeatureIndex.loadVTLayers();for(var u in this.buckets)if(t.style.hasLayer(u)){var p=this.buckets[u],m=p.layers[0].sourceLayer||"_geojsonTileLayer",y=n[m],S=e[m];if(y&&S&&0!==Object.keys(S).length){p.update(S,y,this.imageAtlas&&this.imageAtlas.patternPositions||{});var T=t&&t.style&&t.style.getLayer(u);T&&(this.queryPadding=Math.max(this.queryPadding,T.queryRadius(p)))}}}},Li.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Li.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ir.now()},Li.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Li.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=Ir.now()+e},Li.prototype.setDependencies=function(e,t){for(var n={},u=0,p=t;u<p.length;u+=1)n[p[u]]=!0;this.dependencies[e]=n},Li.prototype.hasDependency=function(e,t){for(var n=0,u=e;n<u.length;n+=1){var p=this.dependencies[u[n]];if(p)for(var m=0,y=t;m<y.length;m+=1)if(p[y[m]])return!0}return!1};var bl=ut.performance,Nh=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},bl.mark(this._marks.start)};Nh.prototype.finish=function(){bl.mark(this._marks.end);var e=bl.getEntriesByName(this._marks.measure);return 0===e.length&&(bl.measure(this._marks.measure,this._marks.start,this._marks.end),e=bl.getEntriesByName(this._marks.measure),bl.clearMarks(this._marks.start),bl.clearMarks(this._marks.end),bl.clearMeasures(this._marks.measure)),e},f.Actor=Bu,f.AlphaImage=Gl,f.CanonicalTileID=iu,f.CollisionBoxArray=r,f.Color=$t,f.DEMData=ks,f.DataConstantProperty=et,f.DictionaryCoder=Kc,f.EXTENT=8192,f.ErrorEvent=be,f.EvaluationParameters=an,f.Event=ge,f.Evented=me,f.FeatureIndex=xa,f.FillBucket=ya,f.FillExtrusionBucket=Va,f.ImageAtlas=pc,f.ImagePosition=ku,f.LineBucket=Sr,f.LngLat=Un,f.LngLatBounds=vi,f.MercatorCoordinate=nu,f.ONE_EM=24,f.OverscaledTileID=yi,f.Point=Tt,f.Point$1=Tt,f.Properties=zi,f.Protobuf=Jl,f.RGBAImage=Fr,f.RequestManager=pi,f.RequestPerformance=Nh,f.ResourceType=Ha,f.SegmentVector=Y,f.SourceFeatureState=Fu,f.StructArrayLayout1ui2=pl,f.StructArrayLayout2f1f2i16=bo,f.StructArrayLayout2i4=ga,f.StructArrayLayout3ui6=ji,f.StructArrayLayout4i8=Or,f.SymbolBucket=un,f.Texture=tu,f.Tile=Li,f.Transitionable=In,f.Uniform1f=P,f.Uniform1i=D,f.Uniform2f=q,f.Uniform3f=W,f.Uniform4f=K,f.UniformColor=ae,f.UniformMatrix4f=ue,f.UnwrappedTileID=Rh,f.ValidationError=ce,f.WritingMode=Cr,f.ZoomHistory=ir,f.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},f.addDynamicAttributes=To,f.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var u=e.length,p=new Array(e.length),m=null;e.forEach(function(y,S){t(y,function(T,A){T&&(m=T),p[S]=A,0==--u&&n(m,p)})})},f.bezier=ui,f.bindAll=It,f.browser=Ir,f.cacheEntryPossiblyAdded=function(e){++Ea>ja&&(e.getActor().send("enforceCacheSizeLimit",Qr),Ea=0)},f.clamp=ci,f.clearTileCache=function(e){var t=ut.caches.delete("mapbox-tiles");e&&t.catch(e).then(function(){return e()})},f.clipLine=yh,f.clone=function(e){var t=new An(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},f.clone$1=Yi,f.clone$2=function(e){var t=new An(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},f.collisionCircleLayout=wf,f.config=nn,f.create=function(){var e=new An(16);return An!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},f.create$1=function(){var e=new An(9);return An!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},f.create$2=function(){var e=new An(4);return An!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},f.createCommonjsModule=Bi,f.createExpression=Qs,f.createLayout=gi,f.createStyleLayer=function(e){return"custom"===e.type?new Ff(e):new Nf[e.type](e)},f.cross=function(e,t,n){var u=t[0],p=t[1],m=t[2],y=n[0],S=n[1],T=n[2];return e[0]=p*T-m*S,e[1]=m*y-u*T,e[2]=u*S-p*y,e},f.deepEqual=function e(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(var u=0;u<t.length;u++)if(!e(t[u],n[u]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==n){if("object"!=typeof n||Object.keys(t).length!==Object.keys(n).length)return!1;for(var p in t)if(!e(t[p],n[p]))return!1;return!0}return t===n},f.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},f.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},f.ease=On,f.emitValidationErrors=Go,f.endsWith=Ni,f.enforceCacheSizeLimit=function(e){oa(),Hn&&Hn.then(function(t){t.keys().then(function(n){for(var u=0;u<n.length-e;u++)t.delete(n[u])})})},f.evaluateSizeForFeature=dc,f.evaluateSizeForZoom=Ip,f.evaluateVariableOffset=Ch,f.evented=Es,f.extend=Rn,f.featureFilter=il,f.filterObject=Ai,f.fromRotation=function(e,t){var n=Math.sin(t),u=Math.cos(t);return e[0]=u,e[1]=n,e[2]=0,e[3]=-n,e[4]=u,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},f.getAnchorAlignment=Nc,f.getAnchorJustification=jc,f.getArrayBuffer=Bn,f.getImage=j,f.getJSON=function(e,t){return Ja(Rn(e,{type:"json"}),t)},f.getRTLTextPluginStatus=Gr,f.getReferrer=ko,f.getVideo=function(e,t){var n,u,p=ut.document.createElement("video");p.muted=!0,p.onloadstart=function(){t(null,p)};for(var m=0;m<e.length;m++){var y=ut.document.createElement("source");n=e[m],u=void 0,(u=ut.document.createElement("a")).href=n,(u.protocol!==ut.document.location.protocol||u.host!==ut.document.location.host)&&(p.crossOrigin="Anonymous"),y.src=e[m],p.appendChild(y)}return{cancel:function(){}}},f.identity=Si,f.invert=function(e,t){var n=t[0],u=t[1],p=t[2],m=t[3],y=t[4],S=t[5],T=t[6],A=t[7],L=t[8],B=t[9],Z=t[10],H=t[11],oe=t[12],se=t[13],de=t[14],pe=t[15],Se=n*S-u*y,Ce=n*T-p*y,Pe=n*A-m*y,ze=u*T-p*S,Fe=u*A-m*S,He=p*A-m*T,Je=L*se-B*oe,dt=L*de-Z*oe,tt=L*pe-H*oe,xt=B*de-Z*se,nt=B*pe-H*se,Rt=Z*pe-H*de,Et=Se*Rt-Ce*nt+Pe*xt+ze*tt-Fe*dt+He*Je;return Et?(e[0]=(S*Rt-T*nt+A*xt)*(Et=1/Et),e[1]=(p*nt-u*Rt-m*xt)*Et,e[2]=(se*He-de*Fe+pe*ze)*Et,e[3]=(Z*Fe-B*He-H*ze)*Et,e[4]=(T*tt-y*Rt-A*dt)*Et,e[5]=(n*Rt-p*tt+m*dt)*Et,e[6]=(de*Pe-oe*He-pe*Ce)*Et,e[7]=(L*He-Z*Pe+H*Ce)*Et,e[8]=(y*nt-S*tt+A*Je)*Et,e[9]=(u*tt-n*nt-m*Je)*Et,e[10]=(oe*Fe-se*Pe+pe*Se)*Et,e[11]=(B*Pe-L*Fe-H*Se)*Et,e[12]=(S*dt-y*xt-T*Je)*Et,e[13]=(n*xt-u*dt+p*Je)*Et,e[14]=(se*Ce-oe*ze-de*Se)*Et,e[15]=(L*ze-B*Ce+Z*Se)*Et,e):null},f.isChar=ot,f.isMapboxURL=Mr,f.keysDifference=function(e,t){var n=[];for(var u in e)u in t||n.push(u);return n},f.makeRequest=Ja,f.mapObject=Qn,f.mercatorXfromLng=Lh,f.mercatorYfromLat=Oh,f.mercatorZfromAltitude=Xc,f.mul=Ac,f.multiply=Ua,f.mvt=Au,f.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},f.normalize=function(e,t){var n=t[0],u=t[1],p=t[2],m=n*n+u*u+p*p;return m>0&&(m=1/Math.sqrt(m)),e[0]=t[0]*m,e[1]=t[1]*m,e[2]=t[2]*m,e},f.number=Ot,f.offscreenCanvasSupported=Ta,f.ortho=function(e,t,n,u,p,m,y){var S=1/(t-n),T=1/(u-p),A=1/(m-y);return e[0]=-2*S,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*T,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*A,e[11]=0,e[12]=(t+n)*S,e[13]=(p+u)*T,e[14]=(y+m)*A,e[15]=1,e},f.parseGlyphPBF=function(e){return new Jl(e).readFields(zs,[])},f.pbf=Jl,f.performSymbolLayout=function(e,t,n,u,p,m,y){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var S=e.layers[0].layout,T=e.layers[0]._unevaluatedLayout._values,A={};if("composite"===e.textSizeData.kind){var L=e.textSizeData,B=L.maxZoom;A.compositeTextSizes=[T["text-size"].possiblyEvaluate(new an(L.minZoom),y),T["text-size"].possiblyEvaluate(new an(B),y)]}if("composite"===e.iconSizeData.kind){var Z=e.iconSizeData,H=Z.maxZoom;A.compositeIconSizes=[T["icon-size"].possiblyEvaluate(new an(Z.minZoom),y),T["icon-size"].possiblyEvaluate(new an(H),y)]}A.layoutTextSize=T["text-size"].possiblyEvaluate(new an(e.zoom+1),y),A.layoutIconSize=T["icon-size"].possiblyEvaluate(new an(e.zoom+1),y),A.textMaxSize=T["text-size"].possiblyEvaluate(new an(18));for(var oe=24*S.get("text-line-height"),se="map"===S.get("text-rotation-alignment")&&"point"!==S.get("symbol-placement"),de=S.get("text-keep-upright"),pe=S.get("text-size"),Se=function(){var ze=Pe[Ce],Fe=S.get("text-font").evaluate(ze,{},y).join(","),He=pe.evaluate(ze,{},y),Je=A.layoutTextSize.evaluate(ze,{},y),dt=A.layoutIconSize.evaluate(ze,{},y),tt={horizontal:{},vertical:void 0},xt=ze.text,nt=[0,0];if(xt){var Rt=xt.toString(),Et=24*S.get("text-letter-spacing").evaluate(ze,{},y),ct=function(Gt){for(var xn=0,cn=Gt;xn<cn.length;xn+=1)if(Kt=cn[xn].charCodeAt(0),ot.Arabic(Kt)||ot["Arabic Supplement"](Kt)||ot["Arabic Extended-A"](Kt)||ot["Arabic Presentation Forms-A"](Kt)||ot["Arabic Presentation Forms-B"](Kt))return!1;var Kt;return!0}(Rt)?Et:0,Bt=S.get("text-anchor").evaluate(ze,{},y),zt=S.get("text-variable-anchor");if(!zt){var Xt=S.get("text-radial-offset").evaluate(ze,{},y);nt=Xt?Ch(Bt,[24*Xt,Ap]):S.get("text-offset").evaluate(ze,{},y).map(function(Gt){return 24*Gt})}var bt=se?"center":S.get("text-justify").evaluate(ze,{},y),tn=S.get("symbol-placement"),Vn="point"===tn?24*S.get("text-max-width").evaluate(ze,{},y):0,Yn=function(){e.allowVerticalPlacement&&rs(Rt)&&(tt.vertical=Bc(xt,t,n,p,Fe,Vn,oe,Bt,"left",ct,nt,Cr.vertical,!0,tn,Je,He))};if(!se&&zt){for(var jn="auto"===bt?zt.map(function(Gt){return jc(Gt)}):[bt],Cn=!1,$n=0;$n<jn.length;$n++){var Ci=jn[$n];if(!tt.horizontal[Ci])if(Cn)tt.horizontal[Ci]=tt.horizontal[0];else{var Ei=Bc(xt,t,n,p,Fe,Vn,oe,"center",Ci,ct,nt,Cr.horizontal,!1,tn,Je,He);Ei&&(tt.horizontal[Ci]=Ei,Cn=1===Ei.positionedLines.length)}}Yn()}else{"auto"===bt&&(bt=jc(Bt));var Hi=Bc(xt,t,n,p,Fe,Vn,oe,Bt,bt,ct,nt,Cr.horizontal,!1,tn,Je,He);Hi&&(tt.horizontal[bt]=Hi),Yn(),rs(Rt)&&se&&de&&(tt.vertical=Bc(xt,t,n,p,Fe,Vn,oe,Bt,bt,ct,nt,Cr.vertical,!1,tn,Je,He))}}var Gt,xn,Kt,Nr,sr,Ti=void 0,Er=!1;if(ze.icon&&ze.icon.name){var ei=u[ze.icon.name];ei&&(Gt=p[ze.icon.name],xn=S.get("icon-offset").evaluate(ze,{},y),Kt=Nc(S.get("icon-anchor").evaluate(ze,{},y)),Ti={image:Gt,top:sr=xn[1]-Gt.displaySize[1]*Kt.verticalAlign,bottom:sr+Gt.displaySize[1],left:Nr=xn[0]-Gt.displaySize[0]*Kt.horizontalAlign,right:Nr+Gt.displaySize[0]},Er=ei.sdf,void 0===e.sdfIcons?e.sdfIcons=ei.sdf:e.sdfIcons!==ei.sdf&&qn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ei.pixelRatio!==e.pixelRatio||0!==S.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var Oi=Th(tt.horizontal)||tt.vertical;e.iconsInText=!!Oi&&Oi.iconsInText,(Oi||Ti)&&function(Gt,xn,cn,Kt,Nr,sr,Dn,li,lr,Ft,us){var Io=sr.textMaxSize.evaluate(xn,{});void 0===Io&&(Io=Dn);var Jr,St=Gt.layers[0].layout,cs=St.get("icon-offset").evaluate(xn,{},us),ti=Th(cn.horizontal),Kn=Dn/24,ru=Gt.tilePixelRatio*Kn,Jo=Gt.tilePixelRatio*Io/24,Ds=Gt.tilePixelRatio*li,Nu=Gt.tilePixelRatio*St.get("symbol-spacing"),ep=St.get("text-padding")*Gt.tilePixelRatio,Uu=St.get("icon-padding")*Gt.tilePixelRatio,vc=St.get("text-max-angle")/180*Math.PI,Vu="map"===St.get("text-rotation-alignment")&&"point"!==St.get("symbol-placement"),tp="map"===St.get("icon-rotation-alignment")&&"point"!==St.get("symbol-placement"),Ur=St.get("symbol-placement"),$u=Nu/2,Ls=St.get("icon-text-fit");Kt&&"none"!==Ls&&(Gt.allowVerticalPlacement&&cn.vertical&&(Jr=Uc(Kt,cn.vertical,Ls,St.get("icon-text-fit-padding"),cs,Kn)),ti&&(Kt=Uc(Kt,ti,Ls,St.get("icon-text-fit-padding"),cs,Kn)));var Ln=function(Os,jt){jt.x<0||jt.x>=8192||jt.y<0||jt.y>=8192||function(Jn,Ii,$h,El,En,qh,Sc,Qo,ap,Cc,sp,lp,Op,Zh,Ec,Gh,jh,Wh,Hh,Xh,Mo,Gu,Yh,ba,Vf){var Kh,au,_i,cr,ju,Wu=Jn.addToLineVertexArray(Ii,$h),Jh=0,Rp=0,Qh=0,ef=0,Bp=-1,up=-1,Rs={},tf=d(""),Fp=0,cp=0;if(void 0===Qo._unevaluatedLayout.getValue("text-radial-offset")?(Fp=(Kh=Qo.layout.get("text-offset").evaluate(Mo,{},ba).map(function(Ic){return 24*Ic}))[0],cp=Kh[1]):(Fp=24*Qo.layout.get("text-radial-offset").evaluate(Mo,{},ba),cp=Ap),Jn.allowVerticalPlacement&&El.vertical){var Np=Qo.layout.get("text-rotate").evaluate(Mo,{},ba)+90;cr=new Gc(ap,Ii,Cc,sp,lp,El.vertical,Op,Zh,Ec,Np),Sc&&(ju=new Gc(ap,Ii,Cc,sp,lp,Sc,jh,Wh,Ec,Np))}if(En){var Up=Qo.layout.get("icon-rotate").evaluate(Mo,{}),nf="none"!==Qo.layout.get("icon-text-fit"),rf=_h(En,Up,Yh,nf),Vp=Sc?_h(Sc,Up,Yh,nf):void 0;_i=new Gc(ap,Ii,Cc,sp,lp,En,jh,Wh,!1,Up),Jh=4*rf.length;var su=Jn.iconSizeData,Tc=null;"source"===su.kind?(Tc=[128*Qo.layout.get("icon-size").evaluate(Mo,{})])[0]>32640&&qn(Jn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===su.kind&&((Tc=[128*Gu.compositeIconSizes[0].evaluate(Mo,{},ba),128*Gu.compositeIconSizes[1].evaluate(Mo,{},ba)])[0]>32640||Tc[1]>32640)&&qn(Jn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Jn.addSymbols(Jn.icon,rf,Tc,Xh,Hh,Mo,!1,Ii,Wu.lineStartIndex,Wu.lineLength,-1,ba),Bp=Jn.icon.placedSymbolArray.length-1,Vp&&(Rp=4*Vp.length,Jn.addSymbols(Jn.icon,Vp,Tc,Xh,Hh,Mo,Cr.vertical,Ii,Wu.lineStartIndex,Wu.lineLength,-1,ba),up=Jn.icon.placedSymbolArray.length-1)}for(var of in El.horizontal){var pp=El.horizontal[of];if(!au){tf=d(pp.text);var $f=Qo.layout.get("text-rotate").evaluate(Mo,{},ba);au=new Gc(ap,Ii,Cc,sp,lp,pp,Op,Zh,Ec,$f)}var af=1===pp.positionedLines.length;if(Qh+=Eh(Jn,Ii,pp,qh,Qo,Ec,Mo,Gh,Wu,El.vertical?Cr.horizontal:Cr.horizontalOnly,af?Object.keys(El.horizontal):[of],Rs,Bp,Gu,ba),af)break}El.vertical&&(ef+=Eh(Jn,Ii,El.vertical,qh,Qo,Ec,Mo,Gh,Wu,Cr.vertical,["vertical"],Rs,up,Gu,ba));var sf=au?au.boxStartIndex:Jn.collisionBoxArray.length,lf=au?au.boxEndIndex:Jn.collisionBoxArray.length,qf=cr?cr.boxStartIndex:Jn.collisionBoxArray.length,Zf=cr?cr.boxEndIndex:Jn.collisionBoxArray.length,Gf=_i?_i.boxStartIndex:Jn.collisionBoxArray.length,jf=_i?_i.boxEndIndex:Jn.collisionBoxArray.length,Wf=ju?ju.boxStartIndex:Jn.collisionBoxArray.length,Hf=ju?ju.boxEndIndex:Jn.collisionBoxArray.length,hs=-1,hp=function(Ic,cf){return Ic&&Ic.circleDiameter?Math.max(Ic.circleDiameter,cf):cf};hs=hp(au,hs),hs=hp(cr,hs),hs=hp(_i,hs);var uf=(hs=hp(ju,hs))>-1?1:0;uf&&(hs*=Vf/24),Jn.glyphOffsetArray.length>=un.MAX_GLYPHS&&qn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Mo.sortKey&&Jn.addToSortKeyRanges(Jn.symbolInstances.length,Mo.sortKey),Jn.symbolInstances.emplaceBack(Ii.x,Ii.y,Rs.right>=0?Rs.right:-1,Rs.center>=0?Rs.center:-1,Rs.left>=0?Rs.left:-1,Rs.vertical||-1,Bp,up,tf,sf,lf,qf,Zf,Gf,jf,Wf,Hf,Cc,Qh,ef,Jh,Rp,uf,0,Op,Fp,cp,hs)}(Gt,jt,Os,cn,Kt,Nr,Jr,Gt.layers[0],Gt.collisionBoxArray,xn.index,xn.sourceLayerIndex,Gt.index,ru,ep,Vu,lr,Ds,Uu,tp,cs,xn,sr,Ft,us,Dn)};if("line"===Ur)for(var Wn=0,yc=yh(xn.geometry,0,0,8192,8192);Wn<yc.length;Wn+=1)for(var np=yc[Wn],_c=0,xc=Mf(np,Nu,vc,cn.vertical||ti,Kt,24,Jo,Gt.overscaling,8192);_c<xc.length;_c+=1){var ip=xc[_c];ti&&Af(Gt,ti.text,$u,ip)||Ln(np,ip)}else if("line-center"===Ur)for(var bc=0,wc=xn.geometry;bc<wc.length;bc+=1){var qu=wc[bc];if(qu.length>1){var wl=If(qu,vc,cn.vertical||ti,Kt,24,Jo);wl&&Ln(qu,wl)}}else if("Polygon"===xn.type)for(var Sl=0,rp=ac(xn.geometry,0);Sl<rp.length;Sl+=1){var ou=rp[Sl],Cl=wh(ou,16);Ln(ou[0],new eu(Cl.x,Cl.y,0))}else if("LineString"===xn.type)for(var ur=0,ps=xn.geometry;ur<ps.length;ur+=1){var Zu=ps[ur];Ln(Zu,new eu(Zu[0].x,Zu[0].y,0))}else if("Point"===xn.type)for(var Dp=0,Uh=xn.geometry;Dp<Uh.length;Dp+=1)for(var Lp=0,Vh=Uh[Dp];Lp<Vh.length;Lp+=1){var op=Vh[Lp];Ln([op],new eu(op.x,op.y,0))}}(e,ze,tt,Ti,u,A,Je,dt,nt,Er,y)},Ce=0,Pe=e.features;Ce<Pe.length;Ce+=1)Se();m&&e.generateCollisionDebugBuffers()},f.perspective=function(e,t,n,u,p){var m,y=1/Math.tan(t/2);return e[0]=y/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=y,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=p&&p!==1/0?(e[10]=(p+u)*(m=1/(u-p)),e[14]=2*p*u*m):(e[10]=-1,e[14]=-2*u),e},f.pick=function(e,t){for(var n={},u=0;u<t.length;u++){var p=t[u];p in e&&(n[p]=e[p])}return n},f.plugin=zn,f.polygonIntersectsPolygon=ft,f.postMapLoadEvent=Po,f.postTurnstileEvent=Ca,f.potpack=hh,f.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],f.register=rt,f.registerForPluginStateChange=function(e){return e({pluginStatus:yr,pluginURL:Ba}),Es.on("pluginStateChange",e),e},f.renderColorRamp=qp,f.rotate=function(e,t,n){var u=t[0],p=t[1],m=t[2],y=t[3],S=Math.sin(n),T=Math.cos(n);return e[0]=u*T+m*S,e[1]=p*T+y*S,e[2]=u*-S+m*T,e[3]=p*-S+y*T,e},f.rotateX=function(e,t,n){var u=Math.sin(n),p=Math.cos(n),m=t[4],y=t[5],S=t[6],T=t[7],A=t[8],L=t[9],B=t[10],Z=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=m*p+A*u,e[5]=y*p+L*u,e[6]=S*p+B*u,e[7]=T*p+Z*u,e[8]=A*p-m*u,e[9]=L*p-y*u,e[10]=B*p-S*u,e[11]=Z*p-T*u,e},f.rotateZ=function(e,t,n){var u=Math.sin(n),p=Math.cos(n),m=t[0],y=t[1],S=t[2],T=t[3],A=t[4],L=t[5],B=t[6],Z=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=m*p+A*u,e[1]=y*p+L*u,e[2]=S*p+B*u,e[3]=T*p+Z*u,e[4]=A*p-m*u,e[5]=L*p-y*u,e[6]=B*p-S*u,e[7]=Z*p-T*u,e},f.scale=function(e,t,n){var u=n[0],p=n[1],m=n[2];return e[0]=t[0]*u,e[1]=t[1]*u,e[2]=t[2]*u,e[3]=t[3]*u,e[4]=t[4]*p,e[5]=t[5]*p,e[6]=t[6]*p,e[7]=t[7]*p,e[8]=t[8]*m,e[9]=t[9]*m,e[10]=t[10]*m,e[11]=t[11]*m,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},f.scale$1=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},f.scale$2=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},f.setCacheLimits=function(e,t){Qr=e,ja=t},f.setRTLTextPlugin=function(e,t,n){if(void 0===n&&(n=!1),"deferred"===yr||"loading"===yr||"loaded"===yr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ba=Ir.resolveURL(e),yr="deferred",os=t,Cs(),n||Qu()},f.sphericalToCartesian=function(e){var t=e[0],n=e[1],u=e[2];return n+=90,n*=Math.PI/180,u*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(u),y:t*Math.sin(n)*Math.sin(u),z:t*Math.cos(u)}},f.sqrLen=function(e){var t=e[0],n=e[1];return t*t+n*n},f.styleSpec=te,f.sub=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},f.symbolSize=ls,f.transformMat3=function(e,t,n){var u=t[0],p=t[1],m=t[2];return e[0]=u*n[0]+p*n[3]+m*n[6],e[1]=u*n[1]+p*n[4]+m*n[7],e[2]=u*n[2]+p*n[5]+m*n[8],e},f.transformMat4=hl,f.translate=function(e,t,n){var u,p,m,y,S,T,A,L,B,Z,H,oe,se=n[0],de=n[1],pe=n[2];return t===e?(e[12]=t[0]*se+t[4]*de+t[8]*pe+t[12],e[13]=t[1]*se+t[5]*de+t[9]*pe+t[13],e[14]=t[2]*se+t[6]*de+t[10]*pe+t[14],e[15]=t[3]*se+t[7]*de+t[11]*pe+t[15]):(p=t[1],m=t[2],y=t[3],S=t[4],T=t[5],A=t[6],L=t[7],B=t[8],Z=t[9],H=t[10],oe=t[11],e[0]=u=t[0],e[1]=p,e[2]=m,e[3]=y,e[4]=S,e[5]=T,e[6]=A,e[7]=L,e[8]=B,e[9]=Z,e[10]=H,e[11]=oe,e[12]=u*se+S*de+B*pe+t[12],e[13]=p*se+T*de+Z*pe+t[13],e[14]=m*se+A*de+H*pe+t[14],e[15]=y*se+L*de+oe*pe+t[15]),e},f.triggerPluginCompletionEvent=ql,f.uniqueId=Vr,f.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers."+n+': missing required property "id"'}),void 0===e.render&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t},f.validateLight=$l,f.validateStyle=nr,f.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},f.vectorTile=Au,f.version="1.15.2",f.warnOnce=qn,f.webpSupported=Ao,f.window=ut,f.wrap=Mi}),he(0,function(f){function Bi(F){var G=typeof F;if("number"===G||"boolean"===G||"string"===G||null==F)return JSON.stringify(F);if(Array.isArray(F)){for(var j="[",ee=0,ie=F;ee<ie.length;ee+=1)j+=Bi(ie[ee])+",";return j+"]"}for(var ge=Object.keys(F).sort(),be="{",me=0;me<ge.length;me++)be+=JSON.stringify(ge[me])+":"+Bi(F[ge[me]])+",";return be+"}"}function Ge(F){for(var G="",j=0,ee=f.refProperties;j<ee.length;j+=1)G+="/"+Bi(F[ee[j]]);return G}var Jt=function(F){this.keyCache={},F&&this.replace(F)};Jt.prototype.replace=function(F){this._layerConfigs={},this._layers={},this.update(F,[])},Jt.prototype.update=function(F,G){for(var j=this,ee=0,ie=F;ee<ie.length;ee+=1){var ge=ie[ee];this._layerConfigs[ge.id]=ge;var be=this._layers[ge.id]=f.createStyleLayer(ge);be._featureFilter=f.featureFilter(be.filter),this.keyCache[ge.id]&&delete this.keyCache[ge.id]}for(var me=0,te=G;me<te.length;me+=1){var ce=te[me];delete this.keyCache[ce],delete this._layerConfigs[ce],delete this._layers[ce]}this.familiesBySource={};for(var $e=0,Ye=function(Qe,Ve){for(var At={},Pt=0;Pt<Qe.length;Pt++){var lt=Ve&&Ve[Qe[Pt].id]||Ge(Qe[Pt]);Ve&&(Ve[Qe[Pt].id]=lt);var mn=At[lt];mn||(mn=At[lt]=[]),mn.push(Qe[Pt])}var Vt=[];for(var wn in At)Vt.push(At[wn]);return Vt}(f.values(this._layerConfigs),this.keyCache);$e<Ye.length;$e+=1){var Ae=Ye[$e].map(function(Qe){return j._layers[Qe.id]}),qe=Ae[0];if("none"!==qe.visibility){var at=qe.source||"",st=this.familiesBySource[at];st||(st=this.familiesBySource[at]={});var gt=qe.sourceLayer||"_geojsonTileLayer",Ne=st[gt];Ne||(Ne=st[gt]=[]),Ne.push(Ae)}}};var Tt=function(F){var G={},j=[];for(var ee in F){var ie=F[ee],ge=G[ee]={};for(var be in ie){var me=ie[+be];if(me&&0!==me.bitmap.width&&0!==me.bitmap.height){var te={x:0,y:0,w:me.bitmap.width+2,h:me.bitmap.height+2};j.push(te),ge[be]={rect:te,metrics:me.metrics}}}}var ce=f.potpack(j),$e=new f.AlphaImage({width:ce.w||1,height:ce.h||1});for(var Ye in F){var Ae=F[Ye];for(var qe in Ae){var at=Ae[+qe];if(at&&0!==at.bitmap.width&&0!==at.bitmap.height){var st=G[Ye][qe].rect;f.AlphaImage.copy(at.bitmap,$e,{x:0,y:0},{x:st.x+1,y:st.y+1},at.bitmap)}}}this.image=$e,this.positions=G};f.register("GlyphAtlas",Tt);var hr=function(F){this.tileID=new f.OverscaledTileID(F.tileID.overscaledZ,F.tileID.wrap,F.tileID.canonical.z,F.tileID.canonical.x,F.tileID.canonical.y),this.uid=F.uid,this.zoom=F.zoom,this.pixelRatio=F.pixelRatio,this.tileSize=F.tileSize,this.source=F.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=F.showCollisionBoxes,this.collectResourceTiming=!!F.collectResourceTiming,this.returnDependencies=!!F.returnDependencies,this.promoteId=F.promoteId};function ut(F,G,j){for(var ee=new f.EvaluationParameters(G),ie=0,ge=F;ie<ge.length;ie+=1)ge[ie].recalculate(ee,j)}function xi(F,G){var j=f.getArrayBuffer(F.request,function(ee,ie,ge,be){ee?G(ee):ie&&G(null,{vectorTile:new f.vectorTile.VectorTile(new f.pbf(ie)),rawData:ie,cacheControl:ge,expires:be})});return function(){j.cancel(),G()}}hr.prototype.parse=function(F,G,j,ee,ie){var ge=this;this.status="parsing",this.data=F,this.collisionBoxArray=new f.CollisionBoxArray;var be=new f.DictionaryCoder(Object.keys(F.layers).sort()),me=new f.FeatureIndex(this.tileID,this.promoteId);me.bucketLayerIDs=[];var te,ce,$e,Ye,Ae={},qe={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:j},at=G.familiesBySource[this.source];for(var st in at){var gt=F.layers[st];if(gt){1===gt.version&&f.warnOnce('Vector tile source "'+this.source+'" layer "'+st+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ne=be.encode(st),Qe=[],Ve=0;Ve<gt.length;Ve++){var At=gt.feature(Ve),Pt=me.getId(At,st);Qe.push({feature:At,id:Pt,index:Ve,sourceLayerIndex:Ne})}for(var lt=0,mn=at[st];lt<mn.length;lt+=1){var Vt=mn[lt],wn=Vt[0];wn.minzoom&&this.zoom<Math.floor(wn.minzoom)||wn.maxzoom&&this.zoom>=wn.maxzoom||"none"!==wn.visibility&&(ut(Vt,this.zoom,j),(Ae[wn.id]=wn.createBucket({index:me.bucketLayerIDs.length,layers:Vt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ne,sourceID:this.source})).populate(Qe,qe,this.tileID.canonical),me.bucketLayerIDs.push(Vt.map(function(fn){return fn.id})))}}}var hn=f.mapObject(qe.glyphDependencies,function(fn){return Object.keys(fn).map(Number)});Object.keys(hn).length?ee.send("getGlyphs",{uid:this.uid,stacks:hn},function(fn,Lt){te||(te=fn,ce=Lt,Dt.call(ge))}):ce={};var Yt=Object.keys(qe.iconDependencies);Yt.length?ee.send("getImages",{icons:Yt,source:this.source,tileID:this.tileID,type:"icons"},function(fn,Lt){te||(te=fn,$e=Lt,Dt.call(ge))}):$e={};var rn=Object.keys(qe.patternDependencies);function Dt(){if(te)return ie(te);if(ce&&$e&&Ye){var fn=new Tt(ce),Lt=new f.ImageAtlas($e,Ye);for(var eo in Ae){var $t=Ae[eo];$t instanceof f.SymbolBucket?(ut($t.layers,this.zoom,j),f.performSymbolLayout($t,ce,fn.positions,$e,Lt.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):$t.hasPattern&&($t instanceof f.LineBucket||$t instanceof f.FillBucket||$t instanceof f.FillExtrusionBucket)&&(ut($t.layers,this.zoom,j),$t.addFeatures(qe,this.tileID.canonical,Lt.patternPositions))}this.status="done",ie(null,{buckets:f.values(Ae).filter(function(aa){return!aa.isEmpty()}),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:fn.image,imageAtlas:Lt,glyphMap:this.returnDependencies?ce:null,iconMap:this.returnDependencies?$e:null,glyphPositions:this.returnDependencies?fn.positions:null})}}rn.length?ee.send("getImages",{icons:rn,source:this.source,tileID:this.tileID,type:"patterns"},function(fn,Lt){te||(te=fn,Ye=Lt,Dt.call(ge))}):Ye={},Dt.call(this)};var ui=function(F,G,j,ee){this.actor=F,this.layerIndex=G,this.availableImages=j,this.loadVectorData=ee||xi,this.loading={},this.loaded={}};ui.prototype.loadTile=function(F,G){var j=this,ee=F.uid;this.loading||(this.loading={});var ie=!!(F&&F.request&&F.request.collectResourceTiming)&&new f.RequestPerformance(F.request),ge=this.loading[ee]=new hr(F);ge.abort=this.loadVectorData(F,function(be,me){if(delete j.loading[ee],be||!me)return ge.status="done",j.loaded[ee]=ge,G(be);var te=me.rawData,ce={};me.expires&&(ce.expires=me.expires),me.cacheControl&&(ce.cacheControl=me.cacheControl);var $e={};if(ie){var Ye=ie.finish();Ye&&($e.resourceTiming=JSON.parse(JSON.stringify(Ye)))}ge.vectorTile=me.vectorTile,ge.parse(me.vectorTile,j.layerIndex,j.availableImages,j.actor,function(Ae,qe){if(Ae||!qe)return G(Ae);G(null,f.extend({rawTileData:te.slice(0)},qe,ce,$e))}),j.loaded=j.loaded||{},j.loaded[ee]=ge})},ui.prototype.reloadTile=function(F,G){var j=this,ee=this.loaded,ie=F.uid,ge=this;if(ee&&ee[ie]){var be=ee[ie];be.showCollisionBoxes=F.showCollisionBoxes;var me=function(te,ce){var $e=be.reloadCallback;$e&&(delete be.reloadCallback,be.parse(be.vectorTile,ge.layerIndex,j.availableImages,ge.actor,$e)),G(te,ce)};"parsing"===be.status?be.reloadCallback=me:"done"===be.status&&(be.vectorTile?be.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,me):me())}},ui.prototype.abortTile=function(F,G){var j=this.loading,ee=F.uid;j&&j[ee]&&j[ee].abort&&(j[ee].abort(),delete j[ee]),G()},ui.prototype.removeTile=function(F,G){var j=this.loaded,ee=F.uid;j&&j[ee]&&delete j[ee],G()};var On=f.window.ImageBitmap,ci=function(){this.loaded={}};function Mi(F,G){if(0!==F.length){Rn(F[0],G);for(var j=1;j<F.length;j++)Rn(F[j],!G)}}function Rn(F,G){for(var j=0,ee=0,ie=F.length,ge=ie-1;ee<ie;ge=ee++)j+=(F[ee][0]-F[ge][0])*(F[ge][1]+F[ee][1]);j>=0!=!!G&&F.reverse()}ci.prototype.loadTile=function(F,G){var j=F.uid,ee=F.encoding,ie=F.rawImageData,ge=On&&ie instanceof On?this.getImageData(ie):ie,be=new f.DEMData(j,ge,ee);this.loaded=this.loaded||{},this.loaded[j]=be,G(null,be)},ci.prototype.getImageData=function(F){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(F.width,F.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=F.width,this.offscreenCanvas.height=F.height,this.offscreenCanvasContext.drawImage(F,0,0,F.width,F.height);var G=this.offscreenCanvasContext.getImageData(-1,-1,F.width+2,F.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new f.RGBAImage({width:G.width,height:G.height},G.data)},ci.prototype.removeTile=function(F){var G=this.loaded,j=F.uid;G&&G[j]&&delete G[j]};var Fi=f.vectorTile.VectorTileFeature.prototype.toGeoJSON,Vr=function(F){this._feature=F,this.extent=f.EXTENT,this.type=F.type,this.properties=F.tags,"id"in F&&!isNaN(F.id)&&(this.id=parseInt(F.id,10))};Vr.prototype.loadGeometry=function(){if(1===this._feature.type){for(var F=[],G=0,j=this._feature.geometry;G<j.length;G+=1){var ee=j[G];F.push([new f.Point$1(ee[0],ee[1])])}return F}for(var ie=[],ge=0,be=this._feature.geometry;ge<be.length;ge+=1){for(var me=[],te=0,ce=be[ge];te<ce.length;te+=1){var $e=ce[te];me.push(new f.Point$1($e[0],$e[1]))}ie.push(me)}return ie},Vr.prototype.toGeoJSON=function(F,G,j){return Fi.call(this,F,G,j)};var uo=function(F){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.EXTENT,this.length=F.length,this._features=F};uo.prototype.feature=function(F){return new Vr(this._features[F])};var Xi=f.vectorTile.VectorTileFeature,It=Ni;function Ni(F,G){this.options=G||{},this.features=F,this.length=F.length}function Qn(F,G){this.id="number"==typeof F.id?F.id:void 0,this.type=F.type,this.rawGeometry=1===F.type?[F.geometry]:F.geometry,this.properties=F.tags,this.extent=G||4096}Ni.prototype.feature=function(F){return new Qn(this.features[F],this.options.extent)},Qn.prototype.loadGeometry=function(){var F=this.rawGeometry;this.geometry=[];for(var G=0;G<F.length;G++){for(var j=F[G],ee=[],ie=0;ie<j.length;ie++)ee.push(new f.Point$1(j[ie][0],j[ie][1]));this.geometry.push(ee)}return this.geometry},Qn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var F=this.geometry,G=1/0,j=-1/0,ee=1/0,ie=-1/0,ge=0;ge<F.length;ge++)for(var be=F[ge],me=0;me<be.length;me++){var te=be[me];G=Math.min(G,te.x),j=Math.max(j,te.x),ee=Math.min(ee,te.y),ie=Math.max(ie,te.y)}return[G,ee,j,ie]},Qn.prototype.toGeoJSON=Xi.prototype.toGeoJSON;var Ai=na,Yi=It;function na(F){var G=new f.pbf;return function(j,ee){for(var ie in j.layers)ee.writeMessage(3,qn,j.layers[ie])}(F,G),G.finish()}function qn(F,G){var j;G.writeVarintField(15,F.version||1),G.writeStringField(1,F.name||""),G.writeVarintField(5,F.extent||4096);var ee={keys:[],values:[],keycache:{},valuecache:{}};for(j=0;j<F.length;j++)ee.feature=F.feature(j),G.writeMessage(2,Tr,ee);var ie=ee.keys;for(j=0;j<ie.length;j++)G.writeStringField(3,ie[j]);var ge=ee.values;for(j=0;j<ge.length;j++)G.writeMessage(4,Il,ge[j])}function Tr(F,G){var j=F.feature;void 0!==j.id&&G.writeVarintField(1,j.id),G.writeMessage(2,Tl,F),G.writeVarintField(3,j.type),G.writeMessage(4,fs,j)}function Tl(F,G){var j=F.feature,ee=F.keys,ie=F.values,ge=F.keycache,be=F.valuecache;for(var me in j.properties){var te=ge[me];void 0===te&&(ee.push(me),ge[me]=te=ee.length-1),G.writeVarint(te);var ce=j.properties[me],$e=typeof ce;"string"!==$e&&"boolean"!==$e&&"number"!==$e&&(ce=JSON.stringify(ce));var Ye=$e+":"+ce,Ae=be[Ye];void 0===Ae&&(ie.push(ce),be[Ye]=Ae=ie.length-1),G.writeVarint(Ae)}}function $r(F,G){return(G<<3)+(7&F)}function Za(F){return F<<1^F>>31}function fs(F,G){for(var j=F.loadGeometry(),ee=F.type,ie=0,ge=0,be=j.length,me=0;me<be;me++){var te=j[me],ce=1;1===ee&&(ce=te.length),G.writeVarint($r(1,ce));for(var $e=3===ee?te.length-1:te.length,Ye=0;Ye<$e;Ye++){1===Ye&&1!==ee&&G.writeVarint($r(2,$e-1));var Ae=te[Ye].x-ie,qe=te[Ye].y-ge;G.writeVarint(Za(Ae)),G.writeVarint(Za(qe)),ie+=Ae,ge+=qe}3===ee&&G.writeVarint($r(7,1))}}function Il(F,G){var j=typeof F;"string"===j?G.writeStringField(1,F):"boolean"===j?G.writeBooleanField(7,F):"number"===j&&(F%1!=0?G.writeDoubleField(3,F):F<0?G.writeSVarintField(6,F):G.writeVarintField(5,F))}function fr(F,G,j,ee){bi(F,j,ee),bi(G,2*j,2*ee),bi(G,2*j+1,2*ee+1)}function bi(F,G,j){var ee=F[G];F[G]=F[j],F[j]=ee}function co(F,G,j,ee){var ie=F-j,ge=G-ee;return ie*ie+ge*ge}Ai.fromVectorTileJs=na,Ai.fromGeojsonVt=function(F,G){G=G||{};var j={};for(var ee in F)j[ee]=new It(F[ee].features,G),j[ee].name=ee,j[ee].version=G.version,j[ee].extent=G.extent;return na({layers:j})},Ai.GeoJSONWrapper=Yi;var po=function(F){return F[0]},Ki=function(F){return F[1]},ia=function(F,G,j,ee,ie){void 0===G&&(G=po),void 0===j&&(j=Ki),void 0===ee&&(ee=64),void 0===ie&&(ie=Float64Array),this.nodeSize=ee,this.points=F;for(var ge=F.length<65536?Uint16Array:Uint32Array,be=this.ids=new ge(F.length),me=this.coords=new ie(2*F.length),te=0;te<F.length;te++)be[te]=te,me[2*te]=G(F[te]),me[2*te+1]=j(F[te]);!function ce($e,Ye,Ae,qe,at,st){if(!(at-qe<=Ae)){var gt=qe+at>>1;(function Ne(Qe,Ve,At,Pt,lt,mn){for(;lt>Pt;){if(lt-Pt>600){var Vt=lt-Pt+1,wn=At-Pt+1,hn=Math.log(Vt),Yt=.5*Math.exp(2*hn/3),rn=.5*Math.sqrt(hn*Yt*(Vt-Yt)/Vt)*(wn-Vt/2<0?-1:1);Ne(Qe,Ve,At,Math.max(Pt,Math.floor(At-wn*Yt/Vt+rn)),Math.min(lt,Math.floor(At+(Vt-wn)*Yt/Vt+rn)),mn)}var Dt=Ve[2*At+mn],fn=Pt,Lt=lt;for(fr(Qe,Ve,Pt,At),Ve[2*lt+mn]>Dt&&fr(Qe,Ve,Pt,lt);fn<Lt;){for(fr(Qe,Ve,fn,Lt),fn++,Lt--;Ve[2*fn+mn]<Dt;)fn++;for(;Ve[2*Lt+mn]>Dt;)Lt--}Ve[2*Pt+mn]===Dt?fr(Qe,Ve,Pt,Lt):fr(Qe,Ve,++Lt,lt),Lt<=At&&(Pt=Lt+1),At<=Lt&&(lt=Lt-1)}})($e,Ye,gt,qe,at,st%2),ce($e,Ye,Ae,qe,gt-1,st+1),ce($e,Ye,Ae,gt+1,at,st+1)}}(be,me,ee,0,be.length-1,0)};ia.prototype.range=function(F,G,j,ee){return function(ie,ge,be,me,te,ce,$e){for(var Ye,Ae,qe=[0,ie.length-1,0],at=[];qe.length;){var st=qe.pop(),gt=qe.pop(),Ne=qe.pop();if(gt-Ne<=$e)for(var Qe=Ne;Qe<=gt;Qe++)Ae=ge[2*Qe+1],(Ye=ge[2*Qe])>=be&&Ye<=te&&Ae>=me&&Ae<=ce&&at.push(ie[Qe]);else{var Ve=Math.floor((Ne+gt)/2);Ae=ge[2*Ve+1],(Ye=ge[2*Ve])>=be&&Ye<=te&&Ae>=me&&Ae<=ce&&at.push(ie[Ve]);var At=(st+1)%2;(0===st?be<=Ye:me<=Ae)&&(qe.push(Ne),qe.push(Ve-1),qe.push(At)),(0===st?te>=Ye:ce>=Ae)&&(qe.push(Ve+1),qe.push(gt),qe.push(At))}}return at}(this.ids,this.coords,F,G,j,ee,this.nodeSize)},ia.prototype.within=function(F,G,j){return function(ee,ie,ge,be,me,te){for(var ce=[0,ee.length-1,0],$e=[],Ye=me*me;ce.length;){var Ae=ce.pop(),qe=ce.pop(),at=ce.pop();if(qe-at<=te)for(var st=at;st<=qe;st++)co(ie[2*st],ie[2*st+1],ge,be)<=Ye&&$e.push(ee[st]);else{var gt=Math.floor((at+qe)/2),Ne=ie[2*gt],Qe=ie[2*gt+1];co(Ne,Qe,ge,be)<=Ye&&$e.push(ee[gt]);var Ve=(Ae+1)%2;(0===Ae?ge-me<=Ne:be-me<=Qe)&&(ce.push(at),ce.push(gt-1),ce.push(Ve)),(0===Ae?ge+me>=Ne:be+me>=Qe)&&(ce.push(gt+1),ce.push(qe),ce.push(Ve))}}return $e}(this.ids,this.coords,F,G,j,this.nodeSize)};var Ml={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(F){return F}},Ji=function(F){this.options=fo(Object.create(Ml),F),this.trees=new Array(this.options.maxZoom+1)};function Ir(F,G,j,ee,ie){return{x:F,y:G,zoom:1/0,id:j,parentId:-1,numPoints:ee,properties:ie}}function nn(F,G){var j=F.geometry.coordinates,ee=j[1];return{x:Qi(j[0]),y:Wt(ee),zoom:1/0,index:G,parentId:-1}}function Ao(F){return{type:"Feature",id:F.id,properties:ho(F),geometry:{type:"Point",coordinates:[(ee=F.x,360*(ee-.5)),(G=F.y,j=(180-360*G)*Math.PI/180,360*Math.atan(Math.exp(j))/Math.PI-90)]}};var G,j,ee}function ho(F){var G=F.numPoints,j=G>=1e4?Math.round(G/1e3)+"k":G>=1e3?Math.round(G/100)/10+"k":G;return fo(fo({},F.properties),{cluster:!0,cluster_id:F.id,point_count:G,point_count_abbreviated:j})}function Qi(F){return F/360+.5}function Wt(F){var G=Math.sin(F*Math.PI/180),j=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return j<0?0:j>1?1:j}function fo(F,G){for(var j in G)F[j]=G[j];return F}function pi(F){return F.x}function Mr(F){return F.y}function Ar(F,G,j,ee,ie,ge){var be=ie-j,me=ge-ee;if(0!==be||0!==me){var te=((F-j)*be+(G-ee)*me)/(be*be+me*me);te>1?(j=ie,ee=ge):te>0&&(j+=be*te,ee+=me*te)}return(be=F-j)*be+(me=G-ee)*me}function er(F,G,j,ee){var ie={id:void 0===F?null:F,type:G,geometry:j,tags:ee,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ge){var be=ge.geometry,me=ge.type;if("Point"===me||"MultiPoint"===me||"LineString"===me)ds(ge,be);else if("Polygon"===me||"MultiLineString"===me)for(var te=0;te<be.length;te++)ds(ge,be[te]);else if("MultiPolygon"===me)for(te=0;te<be.length;te++)for(var ce=0;ce<be[te].length;ce++)ds(ge,be[te][ce])}(ie),ie}function ds(F,G){for(var j=0;j<G.length;j+=3)F.minX=Math.min(F.minX,G[j]),F.minY=Math.min(F.minY,G[j+1]),F.maxX=Math.max(F.maxX,G[j]),F.maxY=Math.max(F.maxY,G[j+1])}function ni(F,G,j,ee){if(G.geometry){var ie=G.geometry.coordinates,ge=G.geometry.type,be=Math.pow(j.tolerance/((1<<j.maxZoom)*j.extent),2),me=[],te=G.id;if(j.promoteId?te=G.properties[j.promoteId]:j.generateId&&(te=ee||0),"Point"===ge)ra(ie,me);else if("MultiPoint"===ge)for(var ce=0;ce<ie.length;ce++)ra(ie[ce],me);else if("LineString"===ge)Ga(ie,me,be,!1);else if("MultiLineString"===ge){if(j.lineMetrics){for(ce=0;ce<ie.length;ce++)Ga(ie[ce],me=[],be,!1),F.push(er(te,"LineString",me,G.properties));return}Ui(ie,me,be,!1)}else if("Polygon"===ge)Ui(ie,me,be,!0);else{if("MultiPolygon"!==ge){if("GeometryCollection"===ge){for(ce=0;ce<G.geometry.geometries.length;ce++)ni(F,{id:te,geometry:G.geometry.geometries[ce],properties:G.properties},j,ee);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ce=0;ce<ie.length;ce++){var $e=[];Ui(ie[ce],$e,be,!0),me.push($e)}}F.push(er(te,ge,me,G.properties))}}function ra(F,G){G.push(Hn(F[0])),G.push(mo(F[1])),G.push(0)}function Ga(F,G,j,ee){for(var ie,ge,be=0,me=0;me<F.length;me++){var te=Hn(F[me][0]),ce=mo(F[me][1]);G.push(te),G.push(ce),G.push(0),me>0&&(be+=ee?(ie*ce-te*ge)/2:Math.sqrt(Math.pow(te-ie,2)+Math.pow(ce-ge,2))),ie=te,ge=ce}var $e=G.length-3;G[2]=1,function Ye(Ae,qe,at,st){for(var gt,Ne=st,Qe=at-qe>>1,Ve=at-qe,At=Ae[qe],Pt=Ae[qe+1],lt=Ae[at],mn=Ae[at+1],Vt=qe+3;Vt<at;Vt+=3){var wn=Ar(Ae[Vt],Ae[Vt+1],At,Pt,lt,mn);if(wn>Ne)gt=Vt,Ne=wn;else if(wn===Ne){var hn=Math.abs(Vt-Qe);hn<Ve&&(gt=Vt,Ve=hn)}}Ne>st&&(gt-qe>3&&Ye(Ae,qe,gt,st),Ae[gt+2]=Ne,at-gt>3&&Ye(Ae,gt,at,st))}(G,0,$e,j),G[$e+2]=1,G.size=Math.abs(be),G.start=0,G.end=G.size}function Ui(F,G,j,ee){for(var ie=0;ie<F.length;ie++){var ge=[];Ga(F[ie],ge,j,ee),G.push(ge)}}function Hn(F){return F/360+.5}function mo(F){var G=Math.sin(F*Math.PI/180),j=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return j<0?0:j>1?1:j}function dr(F,G,j,ee,ie,ge,be,me){if(ee/=G,ge>=(j/=G)&&be<ee)return F;if(be<j||ge>=ee)return null;for(var te=[],ce=0;ce<F.length;ce++){var $e=F[ce],Ye=$e.geometry,Ae=$e.type,qe=0===ie?$e.minX:$e.minY,at=0===ie?$e.maxX:$e.maxY;if(qe>=j&&at<ee)te.push($e);else if(!(at<j||qe>=ee)){var st=[];if("Point"===Ae||"MultiPoint"===Ae)Al(Ye,st,j,ee,ie);else if("LineString"===Ae)Ca(Ye,st,j,ee,ie,!1,me.lineMetrics);else if("MultiLineString"===Ae)Po(Ye,st,j,ee,ie,!1);else if("Polygon"===Ae)Po(Ye,st,j,ee,ie,!0);else if("MultiPolygon"===Ae)for(var gt=0;gt<Ye.length;gt++){var Ne=[];Po(Ye[gt],Ne,j,ee,ie,!0),Ne.length&&st.push(Ne)}if(st.length){if(me.lineMetrics&&"LineString"===Ae){for(gt=0;gt<st.length;gt++)te.push(er($e.id,Ae,st[gt],$e.tags));continue}"LineString"!==Ae&&"MultiLineString"!==Ae||(1===st.length?(Ae="LineString",st=st[0]):Ae="MultiLineString"),"Point"!==Ae&&"MultiPoint"!==Ae||(Ae=3===st.length?"Point":"MultiPoint"),te.push(er($e.id,Ae,st,$e.tags))}}}return te.length?te:null}function Al(F,G,j,ee,ie){for(var ge=0;ge<F.length;ge+=3){var be=F[ge+ie];be>=j&&be<=ee&&(G.push(F[ge]),G.push(F[ge+1]),G.push(F[ge+2]))}}function Ca(F,G,j,ee,ie,ge,be){for(var me,te,ce=Ns(F),$e=0===ie?ja:oa,Ye=F.start,Ae=0;Ae<F.length-3;Ae+=3){var qe=F[Ae],at=F[Ae+1],st=F[Ae+2],gt=F[Ae+3],Ne=F[Ae+4],Qe=0===ie?qe:at,Ve=0===ie?gt:Ne,At=!1;be&&(me=Math.sqrt(Math.pow(qe-gt,2)+Math.pow(at-Ne,2))),Qe<j?Ve>j&&(te=$e(ce,qe,at,gt,Ne,j),be&&(ce.start=Ye+me*te)):Qe>ee?Ve<ee&&(te=$e(ce,qe,at,gt,Ne,ee),be&&(ce.start=Ye+me*te)):Qr(ce,qe,at,st),Ve<j&&Qe>=j&&(te=$e(ce,qe,at,gt,Ne,j),At=!0),Ve>ee&&Qe<=ee&&(te=$e(ce,qe,at,gt,Ne,ee),At=!0),!ge&&At&&(be&&(ce.end=Ye+me*te),G.push(ce),ce=Ns(F)),be&&(Ye+=me)}var Pt=F.length-3;qe=F[Pt],at=F[Pt+1],st=F[Pt+2],(Qe=0===ie?qe:at)>=j&&Qe<=ee&&Qr(ce,qe,at,st),Pt=ce.length-3,ge&&Pt>=3&&(ce[Pt]!==ce[0]||ce[Pt+1]!==ce[1])&&Qr(ce,ce[0],ce[1],ce[2]),ce.length&&G.push(ce)}function Ns(F){var G=[];return G.size=F.size,G.start=F.start,G.end=F.end,G}function Po(F,G,j,ee,ie,ge){for(var be=0;be<F.length;be++)Ca(F[be],G,j,ee,ie,ge,!1)}function Qr(F,G,j,ee){F.push(G),F.push(j),F.push(ee)}function ja(F,G,j,ee,ie,ge){var be=(ge-G)/(ee-G);return F.push(ge),F.push(j+(ie-j)*be),F.push(1),be}function oa(F,G,j,ee,ie,ge){var be=(ge-j)/(ie-j);return F.push(G+(ee-G)*be),F.push(ge),F.push(1),be}function Wa(F,G){for(var j=[],ee=0;ee<F.length;ee++){var ie,ge=F[ee],be=ge.type;if("Point"===be||"MultiPoint"===be||"LineString"===be)ie=zo(ge.geometry,G);else if("MultiLineString"===be||"Polygon"===be){ie=[];for(var me=0;me<ge.geometry.length;me++)ie.push(zo(ge.geometry[me],G))}else if("MultiPolygon"===be)for(ie=[],me=0;me<ge.geometry.length;me++){for(var te=[],ce=0;ce<ge.geometry[me].length;ce++)te.push(zo(ge.geometry[me][ce],G));ie.push(te)}j.push(er(ge.id,be,ie,ge.tags))}return j}function zo(F,G){var j=[];j.size=F.size,void 0!==F.start&&(j.start=F.start,j.end=F.end);for(var ee=0;ee<F.length;ee+=3)j.push(F[ee]+G,F[ee+1],F[ee+2]);return j}function Ea(F,G){if(F.transformed)return F;var j,ee,ie,ge=1<<F.z,be=F.x,me=F.y;for(j=0;j<F.features.length;j++){var te=F.features[j],ce=te.geometry,$e=te.type;if(te.geometry=[],1===$e)for(ee=0;ee<ce.length;ee+=2)te.geometry.push(Ta(ce[ee],ce[ee+1],G,ge,be,me));else for(ee=0;ee<ce.length;ee++){var Ye=[];for(ie=0;ie<ce[ee].length;ie+=2)Ye.push(Ta(ce[ee][ie],ce[ee][ie+1],G,ge,be,me));te.geometry.push(Ye)}}return F.transformed=!0,F}function Ta(F,G,j,ee,ie,ge){return[Math.round(j*(F*ee-ie)),Math.round(j*(G*ee-ge))]}function Ha(F,G,j,ee,ie){for(var ge=G===ie.maxZoom?0:ie.tolerance/((1<<G)*ie.extent),be={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:j,y:ee,z:G,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},me=0;me<F.length;me++){be.numFeatures++,Xa(be,F[me],ge,ie);var te=F[me].minX,ce=F[me].minY,$e=F[me].maxX,Ye=F[me].maxY;te<be.minX&&(be.minX=te),ce<be.minY&&(be.minY=ce),$e>be.maxX&&(be.maxX=$e),Ye>be.maxY&&(be.maxY=Ye)}return be}function Xa(F,G,j,ee){var ie=G.geometry,ge=G.type,be=[];if("Point"===ge||"MultiPoint"===ge)for(var me=0;me<ie.length;me+=3)be.push(ie[me]),be.push(ie[me+1]),F.numPoints++,F.numSimplified++;else if("LineString"===ge)ko(be,ie,F,j,!1,!1);else if("MultiLineString"===ge||"Polygon"===ge)for(me=0;me<ie.length;me++)ko(be,ie[me],F,j,"Polygon"===ge,0===me);else if("MultiPolygon"===ge)for(var te=0;te<ie.length;te++){var ce=ie[te];for(me=0;me<ce.length;me++)ko(be,ce[me],F,j,!0,0===me)}if(be.length){var $e=G.tags||null;if("LineString"===ge&&ee.lineMetrics){for(var Ye in $e={},G.tags)$e[Ye]=G.tags[Ye];$e.mapbox_clip_start=ie.start/ie.size,$e.mapbox_clip_end=ie.end/ie.size}var Ae={geometry:be,type:"Polygon"===ge||"MultiPolygon"===ge?3:"LineString"===ge||"MultiLineString"===ge?2:1,tags:$e};null!==G.id&&(Ae.id=G.id),F.features.push(Ae)}}function ko(F,G,j,ee,ie,ge){var be=ee*ee;if(ee>0&&G.size<(ie?be:ee))j.numPoints+=G.length/3;else{for(var me=[],te=0;te<G.length;te+=3)(0===ee||G[te+2]>be)&&(j.numSimplified++,me.push(G[te]),me.push(G[te+1])),j.numPoints++;ie&&function(ce,$e){for(var Ye=0,Ae=0,qe=ce.length,at=qe-2;Ae<qe;at=Ae,Ae+=2)Ye+=(ce[Ae]-ce[at])*(ce[Ae+1]+ce[at+1]);if(Ye>0===$e)for(Ae=0,qe=ce.length;Ae<qe/2;Ae+=2){var st=ce[Ae],gt=ce[Ae+1];ce[Ae]=ce[qe-2-Ae],ce[Ae+1]=ce[qe-1-Ae],ce[qe-2-Ae]=st,ce[qe-1-Ae]=gt}}(me,ge),F.push(me)}}function Ya(F,G){var j=(G=this.options=function(ie,ge){for(var be in ge)ie[be]=ge[be];return ie}(Object.create(this.options),G)).debug;if(j&&console.time("preprocess data"),G.maxZoom<0||G.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(G.promoteId&&G.generateId)throw new Error("promoteId and generateId cannot be used together.");var ie,ge,be,me,te,ce,ee=function(ie,ge){var be=[];if("FeatureCollection"===ie.type)for(var me=0;me<ie.features.length;me++)ni(be,ie.features[me],ge,me);else ni(be,"Feature"===ie.type?ie:{geometry:ie},ge);return be}(F,G);this.tiles={},this.tileCoords=[],j&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",G.indexMaxZoom,G.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ie=ee,ge=G,be=ge.buffer/ge.extent,me=ie,te=dr(ie,1,-1-be,be,0,-1,2,ge),ce=dr(ie,1,1-be,2+be,0,-1,2,ge),(te||ce)&&(me=dr(ie,1,-be,1+be,0,-1,2,ge)||[],te&&(me=Wa(te,1).concat(me)),ce&&(me=me.concat(Wa(ce,-1)))),ee=me).length&&this.splitTile(ee,0,0,0),j&&(ee.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ia(F,G,j){return 32*((1<<F)*j+G)+F}function Ka(F,G){var j=F.tileID.canonical;if(!this._geoJSONIndex)return G(null,null);var ee=this._geoJSONIndex.getTile(j.z,j.x,j.y);if(!ee)return G(null,null);var ie=new uo(ee.features),ge=Ai(ie);0===ge.byteOffset&&ge.byteLength===ge.buffer.byteLength||(ge=new Uint8Array(ge)),G(null,{vectorTile:ie,rawData:ge.buffer})}Ji.prototype.load=function(F){var G=this.options,j=G.log,ee=G.minZoom,ie=G.maxZoom,ge=G.nodeSize;j&&console.time("total time");var be="prepare "+F.length+" points";j&&console.time(be),this.points=F;for(var me=[],te=0;te<F.length;te++)F[te].geometry&&me.push(nn(F[te],te));this.trees[ie+1]=new ia(me,pi,Mr,ge,Float32Array),j&&console.timeEnd(be);for(var ce=ie;ce>=ee;ce--){var $e=+Date.now();me=this._cluster(me,ce),this.trees[ce]=new ia(me,pi,Mr,ge,Float32Array),j&&console.log("z%d: %d clusters in %dms",ce,me.length,+Date.now()-$e)}return j&&console.timeEnd("total time"),this},Ji.prototype.getClusters=function(F,G){var j=((F[0]+180)%360+360)%360-180,ee=Math.max(-90,Math.min(90,F[1])),ie=180===F[2]?180:((F[2]+180)%360+360)%360-180,ge=Math.max(-90,Math.min(90,F[3]));if(F[2]-F[0]>=360)j=-180,ie=180;else if(j>ie){var be=this.getClusters([j,ee,180,ge],G),me=this.getClusters([-180,ee,ie,ge],G);return be.concat(me)}for(var te=this.trees[this._limitZoom(G)],ce=[],$e=0,Ye=te.range(Qi(j),Wt(ge),Qi(ie),Wt(ee));$e<Ye.length;$e+=1){var Ae=te.points[Ye[$e]];ce.push(Ae.numPoints?Ao(Ae):this.points[Ae.index])}return ce},Ji.prototype.getChildren=function(F){var G=this._getOriginId(F),j=this._getOriginZoom(F),ee="No cluster with the specified id.",ie=this.trees[j];if(!ie)throw new Error(ee);var ge=ie.points[G];if(!ge)throw new Error(ee);for(var be=this.options.radius/(this.options.extent*Math.pow(2,j-1)),me=[],te=0,ce=ie.within(ge.x,ge.y,be);te<ce.length;te+=1){var $e=ie.points[ce[te]];$e.parentId===F&&me.push($e.numPoints?Ao($e):this.points[$e.index])}if(0===me.length)throw new Error(ee);return me},Ji.prototype.getLeaves=function(F,G,j){var ee=[];return this._appendLeaves(ee,F,G=G||10,j=j||0,0),ee},Ji.prototype.getTile=function(F,G,j){var ee=this.trees[this._limitZoom(F)],ie=Math.pow(2,F),ge=this.options,be=ge.radius/ge.extent,me=(j-be)/ie,te=(j+1+be)/ie,ce={features:[]};return this._addTileFeatures(ee.range((G-be)/ie,me,(G+1+be)/ie,te),ee.points,G,j,ie,ce),0===G&&this._addTileFeatures(ee.range(1-be/ie,me,1,te),ee.points,ie,j,ie,ce),G===ie-1&&this._addTileFeatures(ee.range(0,me,be/ie,te),ee.points,-1,j,ie,ce),ce.features.length?ce:null},Ji.prototype.getClusterExpansionZoom=function(F){for(var G=this._getOriginZoom(F)-1;G<=this.options.maxZoom;){var j=this.getChildren(F);if(G++,1!==j.length)break;F=j[0].properties.cluster_id}return G},Ji.prototype._appendLeaves=function(F,G,j,ee,ie){for(var ge=0,be=this.getChildren(G);ge<be.length;ge+=1){var me=be[ge],te=me.properties;if(te&&te.cluster?ie+te.point_count<=ee?ie+=te.point_count:ie=this._appendLeaves(F,te.cluster_id,j,ee,ie):ie<ee?ie++:F.push(me),F.length===j)break}return ie},Ji.prototype._addTileFeatures=function(F,G,j,ee,ie,ge){for(var be=0,me=F;be<me.length;be+=1){var te=G[me[be]],ce=te.numPoints,$e={type:1,geometry:[[Math.round(this.options.extent*(te.x*ie-j)),Math.round(this.options.extent*(te.y*ie-ee))]],tags:ce?ho(te):this.points[te.index].properties},Ye=void 0;ce?Ye=te.id:this.options.generateId?Ye=te.index:this.points[te.index].id&&(Ye=this.points[te.index].id),void 0!==Ye&&($e.id=Ye),ge.features.push($e)}},Ji.prototype._limitZoom=function(F){return Math.max(this.options.minZoom,Math.min(+F,this.options.maxZoom+1))},Ji.prototype._cluster=function(F,G){for(var j=[],ee=this.options,ie=ee.reduce,ge=ee.minPoints,be=ee.radius/(ee.extent*Math.pow(2,G)),me=0;me<F.length;me++){var te=F[me];if(!(te.zoom<=G)){te.zoom=G;for(var ce=this.trees[G+1],$e=ce.within(te.x,te.y,be),Ye=te.numPoints||1,Ae=Ye,qe=0,at=$e;qe<at.length;qe+=1){var st=ce.points[at[qe]];st.zoom>G&&(Ae+=st.numPoints||1)}if(Ae>=ge){for(var gt=te.x*Ye,Ne=te.y*Ye,Qe=ie&&Ye>1?this._map(te,!0):null,Ve=(me<<5)+(G+1)+this.points.length,At=0,Pt=$e;At<Pt.length;At+=1){var lt=ce.points[Pt[At]];if(!(lt.zoom<=G)){lt.zoom=G;var mn=lt.numPoints||1;gt+=lt.x*mn,Ne+=lt.y*mn,lt.parentId=Ve,ie&&(Qe||(Qe=this._map(te,!0)),ie(Qe,this._map(lt)))}}te.parentId=Ve,j.push(Ir(gt/Ae,Ne/Ae,Ve,Ae,Qe))}else if(j.push(te),Ae>1)for(var Vt=0,wn=$e;Vt<wn.length;Vt+=1){var hn=ce.points[wn[Vt]];hn.zoom<=G||(hn.zoom=G,j.push(hn))}}}return j},Ji.prototype._getOriginId=function(F){return F-this.points.length>>5},Ji.prototype._getOriginZoom=function(F){return(F-this.points.length)%32},Ji.prototype._map=function(F,G){if(F.numPoints)return G?fo({},F.properties):F.properties;var j=this.points[F.index].properties,ee=this.options.map(j);return G&&ee===j?fo({},ee):ee},Ya.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ya.prototype.splitTile=function(F,G,j,ee,ie,ge,be){for(var me=[F,G,j,ee],te=this.options,ce=te.debug;me.length;){ee=me.pop(),j=me.pop(),G=me.pop(),F=me.pop();var $e=1<<G,Ye=Ia(G,j,ee),Ae=this.tiles[Ye];if(!Ae&&(ce>1&&console.time("creation"),Ae=this.tiles[Ye]=Ha(F,G,j,ee,te),this.tileCoords.push({z:G,x:j,y:ee}),ce)){ce>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",G,j,ee,Ae.numFeatures,Ae.numPoints,Ae.numSimplified),console.timeEnd("creation"));var qe="z"+G;this.stats[qe]=(this.stats[qe]||0)+1,this.total++}if(Ae.source=F,ie){if(G===te.maxZoom||G===ie)continue;var at=1<<ie-G;if(j!==Math.floor(ge/at)||ee!==Math.floor(be/at))continue}else if(G===te.indexMaxZoom||Ae.numPoints<=te.indexMaxPoints)continue;if(Ae.source=null,0!==F.length){ce>1&&console.time("clipping");var st,gt,Ne,Qe,Ve,At,Pt=.5*te.buffer/te.extent,lt=.5-Pt,mn=.5+Pt,Vt=1+Pt;st=gt=Ne=Qe=null,Ve=dr(F,$e,j-Pt,j+mn,0,Ae.minX,Ae.maxX,te),At=dr(F,$e,j+lt,j+Vt,0,Ae.minX,Ae.maxX,te),F=null,Ve&&(st=dr(Ve,$e,ee-Pt,ee+mn,1,Ae.minY,Ae.maxY,te),gt=dr(Ve,$e,ee+lt,ee+Vt,1,Ae.minY,Ae.maxY,te),Ve=null),At&&(Ne=dr(At,$e,ee-Pt,ee+mn,1,Ae.minY,Ae.maxY,te),Qe=dr(At,$e,ee+lt,ee+Vt,1,Ae.minY,Ae.maxY,te),At=null),ce>1&&console.timeEnd("clipping"),me.push(st||[],G+1,2*j,2*ee),me.push(gt||[],G+1,2*j,2*ee+1),me.push(Ne||[],G+1,2*j+1,2*ee),me.push(Qe||[],G+1,2*j+1,2*ee+1)}}},Ya.prototype.getTile=function(F,G,j){var ee=this.options,ie=ee.extent,ge=ee.debug;if(F<0||F>24)return null;var be=1<<F,me=Ia(F,G=(G%be+be)%be,j);if(this.tiles[me])return Ea(this.tiles[me],ie);ge>1&&console.log("drilling down to z%d-%d-%d",F,G,j);for(var te,ce=F,$e=G,Ye=j;!te&&ce>0;)ce--,$e=Math.floor($e/2),Ye=Math.floor(Ye/2),te=this.tiles[Ia(ce,$e,Ye)];return te&&te.source?(ge>1&&console.log("found parent tile z%d-%d-%d",ce,$e,Ye),ge>1&&console.time("drilling down"),this.splitTile(te.source,ce,$e,Ye,F,G,j),ge>1&&console.timeEnd("drilling down"),this.tiles[me]?Ea(this.tiles[me],ie):null):null};var Ja=function(F){function G(j,ee,ie,ge){F.call(this,j,ee,ie,Ka),ge&&(this.loadGeoJSON=ge)}return F&&(G.__proto__=F),(G.prototype=Object.create(F&&F.prototype)).constructor=G,G.prototype.loadData=function(j,ee){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ee,this._pendingLoadDataParams=j,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},G.prototype._loadData=function(){var j=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ee=this._pendingCallback,ie=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ge=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new f.RequestPerformance(ie.request);this.loadGeoJSON(ie,function(be,me){if(be||!me)return ee(be);if("object"!=typeof me)return ee(new Error("Input data given to '"+ie.source+"' is not a valid GeoJSON object."));!function Ae(qe,at){var st,gt=qe&&qe.type;if("FeatureCollection"===gt)for(st=0;st<qe.features.length;st++)Ae(qe.features[st],at);else if("GeometryCollection"===gt)for(st=0;st<qe.geometries.length;st++)Ae(qe.geometries[st],at);else if("Feature"===gt)Ae(qe.geometry,at);else if("Polygon"===gt)Mi(qe.coordinates,at);else if("MultiPolygon"===gt)for(st=0;st<qe.coordinates.length;st++)Mi(qe.coordinates[st],at);return qe}(me,!0);try{if(ie.filter){var te=f.createExpression(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===te.result)throw new Error(te.value.map(function(Ae){return Ae.key+": "+Ae.message}).join(", "));var ce=me.features.filter(function(Ae){return te.value.evaluate({zoom:0},Ae)});me={type:"FeatureCollection",features:ce}}j._geoJSONIndex=ie.cluster?new Ji(function(Ae){var qe=Ae.superclusterOptions,at=Ae.clusterProperties;if(!at||!qe)return qe;for(var st={},gt={},Ne={accumulated:null,zoom:0},Qe={properties:null},Ve=Object.keys(at),At=0,Pt=Ve;At<Pt.length;At+=1){var lt=Pt[At],mn=at[lt],Vt=mn[0],wn=f.createExpression(mn[1]),hn=f.createExpression("string"==typeof Vt?[Vt,["accumulated"],["get",lt]]:Vt);st[lt]=wn.value,gt[lt]=hn.value}return qe.map=function(Yt){Qe.properties=Yt;for(var rn={},Dt=0,fn=Ve;Dt<fn.length;Dt+=1){var Lt=fn[Dt];rn[Lt]=st[Lt].evaluate(Ne,Qe)}return rn},qe.reduce=function(Yt,rn){Qe.properties=rn;for(var Dt=0,fn=Ve;Dt<fn.length;Dt+=1){var Lt=fn[Dt];Ne.accumulated=Yt[Lt],Yt[Lt]=gt[Lt].evaluate(Ne,Qe)}},qe}(ie)).load(me.features):new Ya(Ae=me,ie.geojsonVtOptions)}catch(Ae){return ee(Ae)}var Ae;j.loaded={};var $e={};if(ge){var Ye=ge.finish();Ye&&($e.resourceTiming={},$e.resourceTiming[ie.source]=JSON.parse(JSON.stringify(Ye)))}ee(null,$e)})}},G.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},G.prototype.reloadTile=function(j,ee){var ie=this.loaded;return ie&&ie[j.uid]?F.prototype.reloadTile.call(this,j,ee):this.loadTile(j,ee)},G.prototype.loadGeoJSON=function(j,ee){if(j.request)f.getJSON(j.request,ee);else{if("string"!=typeof j.data)return ee(new Error("Input data given to '"+j.source+"' is not a valid GeoJSON object."));try{return ee(null,JSON.parse(j.data))}catch(ie){return ee(new Error("Input data given to '"+j.source+"' is not a valid GeoJSON object."))}}},G.prototype.removeSource=function(j,ee){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ee()},G.prototype.getClusterExpansionZoom=function(j,ee){try{ee(null,this._geoJSONIndex.getClusterExpansionZoom(j.clusterId))}catch(ie){ee(ie)}},G.prototype.getClusterChildren=function(j,ee){try{ee(null,this._geoJSONIndex.getChildren(j.clusterId))}catch(ie){ee(ie)}},G.prototype.getClusterLeaves=function(j,ee){try{ee(null,this._geoJSONIndex.getLeaves(j.clusterId,j.limit,j.offset))}catch(ie){ee(ie)}},G}(ui),Bn=function(F){var G=this;this.self=F,this.actor=new f.Actor(F,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ui,geojson:Ja},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(j,ee){if(G.workerSourceTypes[j])throw new Error('Worker source with name "'+j+'" already registered.');G.workerSourceTypes[j]=ee},this.self.registerRTLTextPlugin=function(j){if(f.plugin.isParsed())throw new Error("RTL text plugin already registered.");f.plugin.applyArabicShaping=j.applyArabicShaping,f.plugin.processBidirectionalText=j.processBidirectionalText,f.plugin.processStyledBidirectionalText=j.processStyledBidirectionalText}};return Bn.prototype.setReferrer=function(F,G){this.referrer=G},Bn.prototype.setImages=function(F,G,j){for(var ee in this.availableImages[F]=G,this.workerSources[F]){var ie=this.workerSources[F][ee];for(var ge in ie)ie[ge].availableImages=G}j()},Bn.prototype.setLayers=function(F,G,j){this.getLayerIndex(F).replace(G),j()},Bn.prototype.updateLayers=function(F,G,j){this.getLayerIndex(F).update(G.layers,G.removedIds),j()},Bn.prototype.loadTile=function(F,G,j){this.getWorkerSource(F,G.type,G.source).loadTile(G,j)},Bn.prototype.loadDEMTile=function(F,G,j){this.getDEMWorkerSource(F,G.source).loadTile(G,j)},Bn.prototype.reloadTile=function(F,G,j){this.getWorkerSource(F,G.type,G.source).reloadTile(G,j)},Bn.prototype.abortTile=function(F,G,j){this.getWorkerSource(F,G.type,G.source).abortTile(G,j)},Bn.prototype.removeTile=function(F,G,j){this.getWorkerSource(F,G.type,G.source).removeTile(G,j)},Bn.prototype.removeDEMTile=function(F,G){this.getDEMWorkerSource(F,G.source).removeTile(G)},Bn.prototype.removeSource=function(F,G,j){if(this.workerSources[F]&&this.workerSources[F][G.type]&&this.workerSources[F][G.type][G.source]){var ee=this.workerSources[F][G.type][G.source];delete this.workerSources[F][G.type][G.source],void 0!==ee.removeSource?ee.removeSource(G,j):j()}},Bn.prototype.loadWorkerSource=function(F,G,j){try{this.self.importScripts(G.url),j()}catch(ee){j(ee.toString())}},Bn.prototype.syncRTLPluginState=function(F,G,j){try{f.plugin.setState(G);var ee=f.plugin.getPluginURL();if(f.plugin.isLoaded()&&!f.plugin.isParsed()&&null!=ee){this.self.importScripts(ee);var ie=f.plugin.isParsed();j(ie?void 0:new Error("RTL Text Plugin failed to import scripts from "+ee),ie)}}catch(ge){j(ge.toString())}},Bn.prototype.getAvailableImages=function(F){var G=this.availableImages[F];return G||(G=[]),G},Bn.prototype.getLayerIndex=function(F){var G=this.layerIndexes[F];return G||(G=this.layerIndexes[F]=new Jt),G},Bn.prototype.getWorkerSource=function(F,G,j){var ee=this;return this.workerSources[F]||(this.workerSources[F]={}),this.workerSources[F][G]||(this.workerSources[F][G]={}),this.workerSources[F][G][j]||(this.workerSources[F][G][j]=new this.workerSourceTypes[G]({send:function(ie,ge,be){ee.actor.send(ie,ge,be,F)}},this.getLayerIndex(F),this.getAvailableImages(F))),this.workerSources[F][G][j]},Bn.prototype.getDEMWorkerSource=function(F,G){return this.demWorkerSources[F]||(this.demWorkerSources[F]={}),this.demWorkerSources[F][G]||(this.demWorkerSources[F][G]=new ci),this.demWorkerSources[F][G]},Bn.prototype.enforceCacheSizeLimit=function(F,G){f.enforceCacheSizeLimit(G)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Bn(self)),Bn}),he(0,function(f){var Bi=f.createCommonjsModule(function(i){function a(g){return!r(g)}function r(g){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var w,E,k=new Blob([""],{type:"text/javascript"}),N=URL.createObjectURL(k);try{E=new Worker(N),w=!0}catch(X){w=!1}return E&&E.terminate(),URL.revokeObjectURL(N),w}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var w=document.createElement("canvas");w.width=w.height=1;var E=w.getContext("2d");if(!E)return!1;var k=E.getImageData(0,0,1,1);return k&&k.width===w.width}()?(void 0===c[_=g&&g.failIfMajorPerformanceCaveat]&&(c[_]=function(w){var N,X,Q,E=(N=w,X=document.createElement("canvas"),(Q=Object.create(a.webGLContextAttributes)).failIfMajorPerformanceCaveat=N,X.probablySupportsContext?X.probablySupportsContext("webgl",Q)||X.probablySupportsContext("experimental-webgl",Q):X.supportsContext?X.supportsContext("webgl",Q)||X.supportsContext("experimental-webgl",Q):X.getContext("webgl",Q)||X.getContext("experimental-webgl",Q));if(!E)return!1;var k=E.createShader(E.VERTEX_SHADER);return!(!k||E.isContextLost())&&(E.shaderSource(k,"void main() {}"),E.compileShader(k),!0===E.getShaderParameter(k,E.COMPILE_STATUS))}(_)),c[_]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var _}i.exports?i.exports=a:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=a,window.mapboxgl.notSupportedReason=r);var c={};a.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Ge={create:function(i,a,r){var c=f.window.document.createElement(i);return void 0!==a&&(c.className=a),r&&r.appendChild(c),c},createNS:function(i,a){return f.window.document.createElementNS(i,a)}},Jt=f.window.document&&f.window.document.documentElement.style;function Tt(i){if(!Jt)return i[0];for(var a=0;a<i.length;a++)if(i[a]in Jt)return i[a];return i[0]}var hr,ut=Tt(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);Ge.disableDrag=function(){Jt&&ut&&(hr=Jt[ut],Jt[ut]="none")},Ge.enableDrag=function(){Jt&&ut&&(Jt[ut]=hr)};var xi=Tt(["transform","WebkitTransform"]);Ge.setTransform=function(i,a){i.style[xi]=a};var ui=!1;try{var On=Object.defineProperty({},"passive",{get:function(){ui=!0}});f.window.addEventListener("test",On,On),f.window.removeEventListener("test",On,On)}catch(i){ui=!1}Ge.addEventListener=function(i,a,r,c){void 0===c&&(c={}),i.addEventListener(a,r,"passive"in c&&ui?c:c.capture)},Ge.removeEventListener=function(i,a,r,c){void 0===c&&(c={}),i.removeEventListener(a,r,"passive"in c&&ui?c:c.capture)};var ci=function(i){i.preventDefault(),i.stopPropagation(),f.window.removeEventListener("click",ci,!0)};function Mi(i){var a=i.userImage;return!!(a&&a.render&&a.render())&&(i.data.replace(new Uint8Array(a.data.buffer)),!0)}Ge.suppressClick=function(){f.window.addEventListener("click",ci,!0),f.window.setTimeout(function(){f.window.removeEventListener("click",ci,!0)},0)},Ge.mousePos=function(i,a){var r=i.getBoundingClientRect();return new f.Point(a.clientX-r.left-i.clientLeft,a.clientY-r.top-i.clientTop)},Ge.touchPos=function(i,a){for(var r=i.getBoundingClientRect(),c=[],g=0;g<a.length;g++)c.push(new f.Point(a[g].clientX-r.left-i.clientLeft,a[g].clientY-r.top-i.clientTop));return c},Ge.mouseButton=function(i){return void 0!==f.window.InstallTrigger&&2===i.button&&i.ctrlKey&&f.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:i.button},Ge.remove=function(i){i.parentNode&&i.parentNode.removeChild(i)};var Rn=function(i){function a(){i.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new f.RGBAImage({width:1,height:1}),this.dirty=!0}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.isLoaded=function(){return this.loaded},a.prototype.setLoaded=function(r){if(this.loaded!==r&&(this.loaded=r,r)){for(var c=0,g=this.requestors;c<g.length;c+=1){var _=g[c];this._notify(_.ids,_.callback)}this.requestors=[]}},a.prototype.getImage=function(r){return this.images[r]},a.prototype.addImage=function(r,c){this._validate(r,c)&&(this.images[r]=c)},a.prototype._validate=function(r,c){var g=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new f.ErrorEvent(new Error('Image "'+r+'" has invalid "stretchX" value'))),g=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new f.ErrorEvent(new Error('Image "'+r+'" has invalid "stretchY" value'))),g=!1),this._validateContent(c.content,c)||(this.fire(new f.ErrorEvent(new Error('Image "'+r+'" has invalid "content" value'))),g=!1),g},a.prototype._validateStretch=function(r,c){if(!r)return!0;for(var g=0,_=0,w=r;_<w.length;_+=1){var E=w[_];if(E[0]<g||E[1]<E[0]||c<E[1])return!1;g=E[1]}return!0},a.prototype._validateContent=function(r,c){return!(r&&(4!==r.length||r[0]<0||c.data.width<r[0]||r[1]<0||c.data.height<r[1]||r[2]<0||c.data.width<r[2]||r[3]<0||c.data.height<r[3]||r[2]<r[0]||r[3]<r[1]))},a.prototype.updateImage=function(r,c){c.version=this.images[r].version+1,this.images[r]=c,this.updatedImages[r]=!0},a.prototype.removeImage=function(r){var c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()},a.prototype.listImages=function(){return Object.keys(this.images)},a.prototype.getImages=function(r,c){var g=!0;if(!this.isLoaded())for(var _=0,w=r;_<w.length;_+=1)this.images[w[_]]||(g=!1);this.isLoaded()||g?this._notify(r,c):this.requestors.push({ids:r,callback:c})},a.prototype._notify=function(r,c){for(var g={},_=0,w=r;_<w.length;_+=1){var E=w[_];this.images[E]||this.fire(new f.Event("styleimagemissing",{id:E}));var k=this.images[E];k?g[E]={data:k.data.clone(),pixelRatio:k.pixelRatio,sdf:k.sdf,version:k.version,stretchX:k.stretchX,stretchY:k.stretchY,content:k.content,hasRenderCallback:Boolean(k.userImage&&k.userImage.render)}:f.warnOnce('Image "'+E+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}c(null,g)},a.prototype.getPixelSize=function(){var r=this.atlasImage;return{width:r.width,height:r.height}},a.prototype.getPattern=function(r){var c=this.patterns[r],g=this.getImage(r);if(!g)return null;if(c&&c.position.version===g.version)return c.position;if(c)c.position.version=g.version;else{var _={w:g.data.width+2,h:g.data.height+2,x:0,y:0},w=new f.ImagePosition(_,g);this.patterns[r]={bin:_,position:w}}return this._updatePatternAtlas(),this.patterns[r].position},a.prototype.bind=function(r){var c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new f.Texture(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)},a.prototype._updatePatternAtlas=function(){var r=[];for(var c in this.patterns)r.push(this.patterns[c].bin);var g=f.potpack(r),_=g.w,w=g.h,E=this.atlasImage;for(var k in E.resize({width:_||1,height:w||1}),this.patterns){var N=this.patterns[k].bin,X=N.x+1,Q=N.y+1,Y=this.images[k].data,le=Y.width,o=Y.height;f.RGBAImage.copy(Y,E,{x:0,y:0},{x:X,y:Q},{width:le,height:o}),f.RGBAImage.copy(Y,E,{x:0,y:o-1},{x:X,y:Q-1},{width:le,height:1}),f.RGBAImage.copy(Y,E,{x:0,y:0},{x:X,y:Q+o},{width:le,height:1}),f.RGBAImage.copy(Y,E,{x:le-1,y:0},{x:X-1,y:Q},{width:1,height:o}),f.RGBAImage.copy(Y,E,{x:0,y:0},{x:X+le,y:Q},{width:1,height:o})}this.dirty=!0},a.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},a.prototype.dispatchRenderCallbacks=function(r){for(var c=0,g=r;c<g.length;c+=1){var _=g[c];if(!this.callbackDispatchedThisFrame[_]){this.callbackDispatchedThisFrame[_]=!0;var w=this.images[_];Mi(w)&&this.updateImage(_,w)}}},a}(f.Evented),Fi=Xi,Vr=Xi,uo=1e20;function Xi(i,a,r,c,g,_){this.fontSize=i||24,this.buffer=void 0===a?3:a,this.cutoff=c||.25,this.fontFamily=g||"sans-serif",this.fontWeight=_||"normal",this.radius=r||8;var w=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=w,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.d=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Int16Array(w),this.middle=Math.round(w/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function It(i,a,r,c,g,_,w){for(var E=0;E<a;E++){for(var k=0;k<r;k++)c[k]=i[k*a+E];for(Ni(c,g,_,w,r),k=0;k<r;k++)i[k*a+E]=g[k]}for(k=0;k<r;k++){for(E=0;E<a;E++)c[E]=i[k*a+E];for(Ni(c,g,_,w,a),E=0;E<a;E++)i[k*a+E]=Math.sqrt(g[E])}}function Ni(i,a,r,c,g){r[0]=0,c[0]=-uo,c[1]=+uo;for(var _=1,w=0;_<g;_++){for(var E=(i[_]+_*_-(i[r[w]]+r[w]*r[w]))/(2*_-2*r[w]);E<=c[w];)w--,E=(i[_]+_*_-(i[r[w]]+r[w]*r[w]))/(2*_-2*r[w]);r[++w]=_,c[w]=E,c[w+1]=+uo}for(_=0,w=0;_<g;_++){for(;c[w+1]<_;)w++;a[_]=(_-r[w])*(_-r[w])+i[r[w]]}}Xi.prototype.draw=function(i){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(i,this.buffer,this.middle);for(var a=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),c=0;c<this.size*this.size;c++){var g=a.data[4*c+3]/255;this.gridOuter[c]=1===g?0:0===g?uo:Math.pow(Math.max(0,.5-g),2),this.gridInner[c]=1===g?uo:0===g?0:Math.pow(Math.max(0,g-.5),2)}for(It(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),It(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),c=0;c<this.size*this.size;c++)r[c]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[c]-this.gridInner[c])/this.radius+this.cutoff))));return r},Fi.default=Vr;var Qn=function(i,a){this.requestManager=i,this.localIdeographFontFamily=a,this.entries={}};Qn.prototype.setURL=function(i){this.url=i},Qn.prototype.getGlyphs=function(i,a){var r=this,c=[];for(var g in i)for(var _=0,w=i[g];_<w.length;_+=1)c.push({stack:g,id:w[_]});f.asyncAll(c,function(E,k){var N=E.stack,X=E.id,Q=r.entries[N];Q||(Q=r.entries[N]={glyphs:{},requests:{},ranges:{}});var Y=Q.glyphs[X];if(void 0===Y){if(Y=r._tinySDF(Q,N,X))return Q.glyphs[X]=Y,void k(null,{stack:N,id:X,glyph:Y});var le=Math.floor(X/256);if(256*le>65535)k(new Error("glyphs > 65535 not supported"));else if(Q.ranges[le])k(null,{stack:N,id:X,glyph:Y});else{var o=Q.requests[le];o||(o=Q.requests[le]=[],Qn.loadGlyphRange(N,le,r.url,r.requestManager,function(v,l){if(l){for(var d in l)r._doesCharSupportLocalGlyph(+d)||(Q.glyphs[+d]=l[+d]);Q.ranges[le]=!0}for(var b=0,C=o;b<C.length;b+=1)(0,C[b])(v,l);delete Q.requests[le]})),o.push(function(v,l){v?k(v):l&&k(null,{stack:N,id:X,glyph:l[X]||null})})}}else k(null,{stack:N,id:X,glyph:Y})},function(E,k){if(E)a(E);else if(k){for(var N={},X=0,Q=k;X<Q.length;X+=1){var Y=Q[X],le=Y.stack,o=Y.id,v=Y.glyph;(N[le]||(N[le]={}))[o]=v&&{id:v.id,bitmap:v.bitmap.clone(),metrics:v.metrics}}a(null,N)}})},Qn.prototype._doesCharSupportLocalGlyph=function(i){return!!this.localIdeographFontFamily&&(f.isChar["CJK Unified Ideographs"](i)||f.isChar["Hangul Syllables"](i)||f.isChar.Hiragana(i)||f.isChar.Katakana(i))},Qn.prototype._tinySDF=function(i,a,r){var c=this.localIdeographFontFamily;if(c&&this._doesCharSupportLocalGlyph(r)){var g=i.tinySDF;if(!g){var _="400";/bold/i.test(a)?_="900":/medium/i.test(a)?_="500":/light/i.test(a)&&(_="200"),g=i.tinySDF=new Qn.TinySDF(24,3,8,.25,c,_)}return{id:r,bitmap:new f.AlphaImage({width:30,height:30},g.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Qn.loadGlyphRange=function(i,a,r,c,g){var _=256*a,w=_+255,E=c.transformRequest(c.normalizeGlyphsURL(r).replace("{fontstack}",i).replace("{range}",_+"-"+w),f.ResourceType.Glyphs);f.getArrayBuffer(E,function(k,N){if(k)g(k);else if(N){for(var X={},Q=0,Y=f.parseGlyphPBF(N);Q<Y.length;Q+=1){var le=Y[Q];X[le.id]=le}g(null,X)}})},Qn.TinySDF=Fi;var Ai=function(){this.specification=f.styleSpec.light.position};Ai.prototype.possiblyEvaluate=function(i,a){return f.sphericalToCartesian(i.expression.evaluate(a))},Ai.prototype.interpolate=function(i,a,r){return{x:f.number(i.x,a.x,r),y:f.number(i.y,a.y,r),z:f.number(i.z,a.z,r)}};var Yi=new f.Properties({anchor:new f.DataConstantProperty(f.styleSpec.light.anchor),position:new Ai,color:new f.DataConstantProperty(f.styleSpec.light.color),intensity:new f.DataConstantProperty(f.styleSpec.light.intensity)}),na=function(i){function a(r){i.call(this),this._transitionable=new f.Transitionable(Yi),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getLight=function(){return this._transitionable.serialize()},a.prototype.setLight=function(r,c){if(void 0===c&&(c={}),!this._validate(f.validateLight,r,c))for(var g in r){var _=r[g];f.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-"-transition".length),_):this._transitionable.setValue(g,_)}},a.prototype.updateTransitions=function(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)},a.prototype.hasTransition=function(){return this._transitioning.hasTransition()},a.prototype.recalculate=function(r){this.properties=this._transitioning.possiblyEvaluate(r)},a.prototype._validate=function(r,c,g){return(!g||!1!==g.validate)&&f.emitValidationErrors(this,r.call(f.validateStyle,f.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:f.styleSpec})))},a}(f.Evented),qn=function(i,a){this.width=i,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};qn.prototype.getDash=function(i,a){var r=i.join(",")+String(a);return this.dashEntry[r]||(this.dashEntry[r]=this.addDash(i,a)),this.dashEntry[r]},qn.prototype.getDashRanges=function(i,a,r){var c=[],g=i.length%2==1?-i[i.length-1]*r:0,_=i[0]*r,w=!0;c.push({left:g,right:_,isDash:w,zeroLength:0===i[0]});for(var E=i[0],k=1;k<i.length;k++){var N=i[k];c.push({left:g=E*r,right:_=(E+=N)*r,isDash:w=!w,zeroLength:0===N})}return c},qn.prototype.addRoundDash=function(i,a,r){for(var c=a/2,g=-r;g<=r;g++)for(var _=this.width*(this.nextRow+r+g),w=0,E=i[w],k=0;k<this.width;k++){k/E.right>1&&(E=i[++w]);var N=Math.abs(k-E.left),X=Math.abs(k-E.right),Q=Math.min(N,X),Y=void 0,le=g/r*(c+1);if(E.isDash){var o=c-Math.abs(le);Y=Math.sqrt(Q*Q+o*o)}else Y=c-Math.sqrt(Q*Q+le*le);this.data[_+k]=Math.max(0,Math.min(255,Y+128))}},qn.prototype.addRegularDash=function(i){for(var a=i.length-1;a>=0;--a){var r=i[a],c=i[a+1];r.zeroLength?i.splice(a,1):c&&c.isDash===r.isDash&&(c.left=r.left,i.splice(a,1))}var g=i[0],_=i[i.length-1];g.isDash===_.isDash&&(g.left=_.left-this.width,_.right=g.right+this.width);for(var w=this.width*this.nextRow,E=0,k=i[E],N=0;N<this.width;N++){N/k.right>1&&(k=i[++E]);var X=Math.abs(N-k.left),Q=Math.abs(N-k.right),Y=Math.min(X,Q);this.data[w+N]=Math.max(0,Math.min(255,(k.isDash?Y:-Y)+128))}},qn.prototype.addDash=function(i,a){var r=a?7:0,c=2*r+1;if(this.nextRow+c>this.height)return f.warnOnce("LineAtlas out of space"),null;for(var g=0,_=0;_<i.length;_++)g+=i[_];if(0!==g){var w=this.width/g,E=this.getDashRanges(i,this.width,w);a?this.addRoundDash(E,w,r):this.addRegularDash(E)}var k={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:g};return this.nextRow+=c,this.dirty=!0,k},qn.prototype.bind=function(i){var a=i.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))};var Tr=function i(a,r){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=f.uniqueId();for(var c=this.workerPool.acquire(this.id),g=0;g<c.length;g++){var _=new i.Actor(c[g],r,this.id);_.name="Worker "+g,this.actors.push(_)}};function Tl(i,a,r){var c=function(g,_){if(g)return r(g);if(_){var w=f.pick(f.extend(_,i),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(w.vectorLayers=_.vector_layers,w.vectorLayerIds=w.vectorLayers.map(function(E){return E.id})),w.tiles=a.canonicalizeTileset(w,i.url),r(null,w)}};return i.url?f.getJSON(a.transformRequest(a.normalizeSourceURL(i.url),f.ResourceType.Source),c):f.browser.frame(function(){return c(null,i)})}Tr.prototype.broadcast=function(i,a,r){f.asyncAll(this.actors,function(c,g){c.send(i,a,g)},r=r||function(){})},Tr.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Tr.prototype.remove=function(){this.actors.forEach(function(i){i.remove()}),this.actors=[],this.workerPool.release(this.id)},Tr.Actor=f.Actor;var $r=function(i,a,r){this.bounds=f.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=a||0,this.maxzoom=r||24};$r.prototype.validateBounds=function(i){return Array.isArray(i)&&4===i.length?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]},$r.prototype.contains=function(i){var a=Math.pow(2,i.z),r=Math.floor(f.mercatorXfromLng(this.bounds.getWest())*a),c=Math.floor(f.mercatorYfromLat(this.bounds.getNorth())*a),g=Math.ceil(f.mercatorXfromLng(this.bounds.getEast())*a),_=Math.ceil(f.mercatorYfromLat(this.bounds.getSouth())*a);return i.x>=r&&i.x<g&&i.y>=c&&i.y<_};var Za=function(i){function a(r,c,g,_){if(i.call(this),this.id=r,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,f.extend(this,f.pick(c,["url","scheme","tileSize","promoteId"])),this._options=f.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.load=function(){var r=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Tl(this._options,this.map._requestManager,function(c,g){r._tileJSONRequest=null,r._loaded=!0,c?r.fire(new f.ErrorEvent(c)):g&&(f.extend(r,g),g.bounds&&(r.tileBounds=new $r(g.bounds,r.minzoom,r.maxzoom)),f.postTurnstileEvent(g.tiles,r.map._requestManager._customAccessToken),f.postMapLoadEvent(g.tiles,r.map._getMapId(),r.map._requestManager._skuToken,r.map._requestManager._customAccessToken),r.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})))})},a.prototype.loaded=function(){return this._loaded},a.prototype.hasTile=function(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)},a.prototype.onAdd=function(r){this.map=r,this.load()},a.prototype.setSourceProperty=function(r){this._tileJSONRequest&&this._tileJSONRequest.cancel(),r(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},a.prototype.setTiles=function(r){var c=this;return this.setSourceProperty(function(){c._options.tiles=r}),this},a.prototype.setUrl=function(r){var c=this;return this.setSourceProperty(function(){c.url=r,c._options.url=r}),this},a.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},a.prototype.serialize=function(){return f.extend({},this._options)},a.prototype.loadTile=function(r,c){var g=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(g,f.ResourceType.Tile),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:f.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function w(E,k){return delete r.request,r.aborted?c(null):E&&404!==E.status?c(E):(k&&k.resourceTiming&&(r.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&r.setExpiryData(k),r.loadVectorData(k,this.map.painter),f.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(r.reloadCallback&&(this.loadTile(r,r.reloadCallback),r.reloadCallback=null)))}_.request.collectResourceTiming=this._collectResourceTiming,r.actor&&"expired"!==r.state?"loading"===r.state?r.reloadCallback=c:r.request=r.actor.send("reloadTile",_,w.bind(this)):(r.actor=this.dispatcher.getActor(),r.request=r.actor.send("loadTile",_,w.bind(this)))},a.prototype.abortTile=function(r){r.request&&(r.request.cancel(),delete r.request),r.actor&&r.actor.send("abortTile",{uid:r.uid,type:this.type,source:this.id},void 0)},a.prototype.unloadTile=function(r){r.unloadVectorData(),r.actor&&r.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id},void 0)},a.prototype.hasTransition=function(){return!1},a}(f.Evented),fs=function(i){function a(r,c,g,_){i.call(this),this.id=r,this.dispatcher=g,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=f.extend({type:"raster"},c),f.extend(this,f.pick(c,["url","scheme","tileSize"]))}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.load=function(){var r=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Tl(this._options,this.map._requestManager,function(c,g){r._tileJSONRequest=null,r._loaded=!0,c?r.fire(new f.ErrorEvent(c)):g&&(f.extend(r,g),g.bounds&&(r.tileBounds=new $r(g.bounds,r.minzoom,r.maxzoom)),f.postTurnstileEvent(g.tiles),f.postMapLoadEvent(g.tiles,r.map._getMapId(),r.map._requestManager._skuToken),r.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),r.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})))})},a.prototype.loaded=function(){return this._loaded},a.prototype.onAdd=function(r){this.map=r,this.load()},a.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},a.prototype.serialize=function(){return f.extend({},this._options)},a.prototype.hasTile=function(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)},a.prototype.loadTile=function(r,c){var g=this,_=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);r.request=f.getImage(this.map._requestManager.transformRequest(_,f.ResourceType.Tile),function(w,E){if(delete r.request,r.aborted)r.state="unloaded",c(null);else if(w)r.state="errored",c(w);else if(E){g.map._refreshExpiredTiles&&r.setExpiryData(E),delete E.cacheControl,delete E.expires;var k=g.map.painter.context,N=k.gl;r.texture=g.map.painter.getTileTexture(E.width),r.texture?r.texture.update(E,{useMipmap:!0}):(r.texture=new f.Texture(k,E,N.RGBA,{useMipmap:!0}),r.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&N.texParameterf(N.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),r.state="loaded",f.cacheEntryPossiblyAdded(g.dispatcher),c(null)}})},a.prototype.abortTile=function(r,c){r.request&&(r.request.cancel(),delete r.request),c()},a.prototype.unloadTile=function(r,c){r.texture&&this.map.painter.saveTileTexture(r.texture),c()},a.prototype.hasTransition=function(){return!1},a}(f.Evented),Il=function(i){function a(r,c,g,_){i.call(this,r,c,g,_),this.type="raster-dem",this.maxzoom=22,this._options=f.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},a.prototype.loadTile=function(r,c){var g=this.map._requestManager.normalizeTileURL(r.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function _(w,E){w&&(r.state="errored",c(w)),E&&(r.dem=E,r.needsHillshadePrepare=!0,r.state="loaded",c(null))}r.request=f.getImage(this.map._requestManager.transformRequest(g,f.ResourceType.Tile),function(w,E){if(delete r.request,r.aborted)r.state="unloaded",c(null);else if(w)r.state="errored",c(w);else if(E){this.map._refreshExpiredTiles&&r.setExpiryData(E),delete E.cacheControl,delete E.expires;var k=f.window.ImageBitmap&&E instanceof f.window.ImageBitmap&&f.offscreenCanvasSupported()?E:f.browser.getImageData(E,1),N={uid:r.uid,coord:r.tileID,source:this.id,rawImageData:k,encoding:this.encoding};r.actor&&"expired"!==r.state||(r.actor=this.dispatcher.getActor(),r.actor.send("loadDEMTile",N,_.bind(this)))}}.bind(this)),r.neighboringTiles=this._getNeighboringTiles(r.tileID)},a.prototype._getNeighboringTiles=function(r){var c=r.canonical,g=Math.pow(2,c.z),_=(c.x-1+g)%g,w=0===c.x?r.wrap-1:r.wrap,E=(c.x+1+g)%g,k=c.x+1===g?r.wrap+1:r.wrap,N={};return N[new f.OverscaledTileID(r.overscaledZ,w,c.z,_,c.y).key]={backfilled:!1},N[new f.OverscaledTileID(r.overscaledZ,k,c.z,E,c.y).key]={backfilled:!1},c.y>0&&(N[new f.OverscaledTileID(r.overscaledZ,w,c.z,_,c.y-1).key]={backfilled:!1},N[new f.OverscaledTileID(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},N[new f.OverscaledTileID(r.overscaledZ,k,c.z,E,c.y-1).key]={backfilled:!1}),c.y+1<g&&(N[new f.OverscaledTileID(r.overscaledZ,w,c.z,_,c.y+1).key]={backfilled:!1},N[new f.OverscaledTileID(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},N[new f.OverscaledTileID(r.overscaledZ,k,c.z,E,c.y+1).key]={backfilled:!1}),N},a.prototype.unloadTile=function(r){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&r.actor.send("removeDEMTile",{uid:r.uid,source:this.id})},a}(fs),fr=function(i){function a(r,c,g,_){i.call(this),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=g.getActor(),this.setEventedParent(_),this._data=c.data,this._options=f.extend({},c),this._collectResourceTiming=c.collectResourceTiming,this._resourceTiming=[],void 0!==c.maxzoom&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;var w=f.EXTENT/this.tileSize;this.workerOptions=f.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(void 0!==c.buffer?c.buffer:128)*w,tolerance:(void 0!==c.tolerance?c.tolerance:.375)*w,extent:f.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:void 0!==c.clusterMaxZoom?Math.min(c.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:f.EXTENT,radius:(c.clusterRadius||50)*w,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.load=function(){var r=this;this.fire(new f.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(c){if(c)r.fire(new f.ErrorEvent(c));else{var g={dataType:"source",sourceDataType:"metadata"};r._collectResourceTiming&&r._resourceTiming&&r._resourceTiming.length>0&&(g.resourceTiming=r._resourceTiming,r._resourceTiming=[]),r.fire(new f.Event("data",g))}})},a.prototype.onAdd=function(r){this.map=r,this.load()},a.prototype.setData=function(r){var c=this;return this._data=r,this.fire(new f.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(g){if(g)c.fire(new f.ErrorEvent(g));else{var _={dataType:"source",sourceDataType:"content"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(_.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new f.Event("data",_))}}),this},a.prototype.getClusterExpansionZoom=function(r,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:r,source:this.id},c),this},a.prototype.getClusterChildren=function(r,c){return this.actor.send("geojson.getClusterChildren",{clusterId:r,source:this.id},c),this},a.prototype.getClusterLeaves=function(r,c,g,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:r,limit:c,offset:g},_),this},a.prototype._updateWorkerData=function(r){var c=this;this._loaded=!1;var g=f.extend({},this.workerOptions),_=this._data;"string"==typeof _?(g.request=this.map._requestManager.transformRequest(f.browser.resolveURL(_),f.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(_),this.actor.send(this.type+".loadData",g,function(w,E){c._removed||E&&E.abandoned||(c._loaded=!0,E&&E.resourceTiming&&E.resourceTiming[c.id]&&(c._resourceTiming=E.resourceTiming[c.id].slice(0)),c.actor.send(c.type+".coalesce",{source:g.source},null),r(w))})},a.prototype.loaded=function(){return this._loaded},a.prototype.loadTile=function(r,c){var g=this,_=r.actor?"reloadTile":"loadTile";r.actor=this.actor,r.request=this.actor.send(_,{type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:f.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(w,E){return delete r.request,r.unloadVectorData(),r.aborted?c(null):w?c(w):(r.loadVectorData(E,g.map.painter,"reloadTile"===_),c(null))})},a.prototype.abortTile=function(r){r.request&&(r.request.cancel(),delete r.request),r.aborted=!0},a.prototype.unloadTile=function(r){r.unloadVectorData(),this.actor.send("removeTile",{uid:r.uid,type:this.type,source:this.id})},a.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},a.prototype.serialize=function(){return f.extend({},this._options,{type:this.type,data:this._data})},a.prototype.hasTransition=function(){return!1},a}(f.Evented),bi=f.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),co=function(i){function a(r,c,g,_){i.call(this),this.id=r,this.dispatcher=g,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=c}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.load=function(r,c){var g=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this.url=this.options.url,f.getImage(this.map._requestManager.transformRequest(this.url,f.ResourceType.Image),function(_,w){g._loaded=!0,_?g.fire(new f.ErrorEvent(_)):w&&(g.image=w,r&&(g.coordinates=r),c&&c(),g._finishLoading())})},a.prototype.loaded=function(){return this._loaded},a.prototype.updateImage=function(r){var c=this;return this.image&&r.url?(this.options.url=r.url,this.load(r.coordinates,function(){c.texture=null}),this):this},a.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})))},a.prototype.onAdd=function(r){this.map=r,this.load()},a.prototype.setCoordinates=function(r){var c=this;this.coordinates=r;var g=r.map(f.MercatorCoordinate.fromLngLat);this.tileID=function(w){for(var E=1/0,k=1/0,N=-1/0,X=-1/0,Q=0,Y=w;Q<Y.length;Q+=1){var le=Y[Q];E=Math.min(E,le.x),k=Math.min(k,le.y),N=Math.max(N,le.x),X=Math.max(X,le.y)}var o=Math.max(N-E,X-k),v=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),l=Math.pow(2,v);return new f.CanonicalTileID(v,Math.floor((E+N)/2*l),Math.floor((k+X)/2*l))}(g),this.minzoom=this.maxzoom=this.tileID.z;var _=g.map(function(w){return c.tileID.getTilePoint(w)._round()});return this._boundsArray=new f.StructArrayLayout4i8,this._boundsArray.emplaceBack(_[0].x,_[0].y,0,0),this._boundsArray.emplaceBack(_[1].x,_[1].y,f.EXTENT,0),this._boundsArray.emplaceBack(_[3].x,_[3].y,0,f.EXTENT),this._boundsArray.emplaceBack(_[2].x,_[2].y,f.EXTENT,f.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})),this},a.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var r=this.map.painter.context,c=r.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,bi.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new f.Texture(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var _=this.tiles[g];"loaded"!==_.state&&(_.state="loaded",_.texture=this.texture)}}},a.prototype.loadTile=function(r,c){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={},c(null)):(r.state="errored",c(null))},a.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},a.prototype.hasTransition=function(){return!1},a}(f.Evented),po=function(i){function a(r,c,g,_){i.call(this,r,c,g,_),this.roundZoom=!0,this.type="video",this.options=c}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.load=function(){var r=this;this._loaded=!1;var c=this.options;this.urls=[];for(var g=0,_=c.urls;g<_.length;g+=1)this.urls.push(this.map._requestManager.transformRequest(_[g],f.ResourceType.Source).url);f.getVideo(this.urls,function(w,E){r._loaded=!0,w?r.fire(new f.ErrorEvent(w)):E&&(r.video=E,r.video.loop=!0,r.video.addEventListener("playing",function(){r.map.triggerRepaint()}),r.map&&r.video.play(),r._finishLoading())})},a.prototype.pause=function(){this.video&&this.video.pause()},a.prototype.play=function(){this.video&&this.video.play()},a.prototype.seek=function(r){if(this.video){var c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new f.ErrorEvent(new f.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+c.start(0)+" and "+c.end(0)+"-second mark."))):this.video.currentTime=r}},a.prototype.getVideo=function(){return this.video},a.prototype.onAdd=function(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},a.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var r=this.map.painter.context,c=r.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,bi.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new f.Texture(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this.tiles){var _=this.tiles[g];"loaded"!==_.state&&(_.state="loaded",_.texture=this.texture)}}},a.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},a.prototype.hasTransition=function(){return this.video&&!this.video.paused},a}(co),Ki=function(i){function a(r,c,g,_){i.call(this,r,c,g,_),c.coordinates?Array.isArray(c.coordinates)&&4===c.coordinates.length&&!c.coordinates.some(function(w){return!Array.isArray(w)||2!==w.length||w.some(function(E){return"number"!=typeof E})})||this.fire(new f.ErrorEvent(new f.ValidationError("sources."+r,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new f.ErrorEvent(new f.ValidationError("sources."+r,null,'missing required property "coordinates"'))),c.animate&&"boolean"!=typeof c.animate&&this.fire(new f.ErrorEvent(new f.ValidationError("sources."+r,null,'optional "animate" property must be a boolean value'))),c.canvas?"string"==typeof c.canvas||c.canvas instanceof f.window.HTMLCanvasElement||this.fire(new f.ErrorEvent(new f.ValidationError("sources."+r,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new f.ErrorEvent(new f.ValidationError("sources."+r,null,'missing required property "canvas"'))),this.options=c,this.animate=void 0===c.animate||c.animate}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof f.window.HTMLCanvasElement?this.options.canvas:f.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new f.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},a.prototype.getCanvas=function(){return this.canvas},a.prototype.onAdd=function(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()},a.prototype.onRemove=function(){this.pause()},a.prototype.prepare=function(){var r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var c=this.map.painter.context,g=c.gl;for(var _ in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,bi.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new f.Texture(c,this.canvas,g.RGBA,{premultiply:!0}),this.tiles){var w=this.tiles[_];"loaded"!==w.state&&(w.state="loaded",w.texture=this.texture)}}},a.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},a.prototype.hasTransition=function(){return this._playing},a.prototype._hasInvalidDimensions=function(){for(var r=0,c=[this.canvas.width,this.canvas.height];r<c.length;r+=1){var g=c[r];if(isNaN(g)||g<=0)return!0}return!1},a}(co),ia={vector:Za,raster:fs,"raster-dem":Il,geojson:fr,video:po,image:co,canvas:Ki};function Ml(i,a){var r=f.identity([]);return f.translate(r,r,[1,1,0]),f.scale(r,r,[.5*i.width,.5*i.height,1]),f.multiply(r,r,i.calculatePosMatrix(a.toUnwrapped()))}function Ji(i,a,r,c,g,_){var w=function(v,l,d){if(v)for(var b=0,C=v;b<C.length;b+=1){var M=l[C[b]];if(M&&M.source===d&&"fill-extrusion"===M.type)return!0}else for(var O in l){var z=l[O];if(z.source===d&&"fill-extrusion"===z.type)return!0}return!1}(g&&g.layers,a,i.id),E=_.maxPitchScaleFactor(),k=i.tilesIn(c,E,w);k.sort(Ir);for(var N=[],X=0,Q=k;X<Q.length;X+=1){var Y=Q[X];N.push({wrappedTileID:Y.tileID.wrapped().key,queryResults:Y.tile.queryRenderedFeatures(a,r,i._state,Y.queryGeometry,Y.cameraQueryGeometry,Y.scale,g,_,E,Ml(i.transform,Y.tileID))})}var le=function(v){for(var l={},d={},b=0,C=v;b<C.length;b+=1){var M=C[b],O=M.queryResults,z=M.wrappedTileID,R=d[z]=d[z]||{};for(var D in O)for(var P=O[D],q=R[D]=R[D]||{},W=l[D]=l[D]||[],K=0,ae=P;K<ae.length;K+=1){var re=ae[K];q[re.featureIndex]||(q[re.featureIndex]=!0,W.push(re))}}return l}(N);for(var o in le)le[o].forEach(function(v){var l=v.feature,d=i.getFeatureState(l.layer["source-layer"],l.id);l.source=l.layer.source,l.layer["source-layer"]&&(l.sourceLayer=l.layer["source-layer"]),l.state=d});return le}function Ir(i,a){var r=i.tileID,c=a.tileID;return r.overscaledZ-c.overscaledZ||r.canonical.y-c.canonical.y||r.wrap-c.wrap||r.canonical.x-c.canonical.x}var nn=function(i,a){this.max=i,this.onRemove=a,this.reset()};nn.prototype.reset=function(){for(var i in this.data)for(var a=0,r=this.data[i];a<r.length;a+=1){var c=r[a];c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value)}return this.data={},this.order=[],this},nn.prototype.add=function(i,a,r){var c=this,g=i.wrapped().key;void 0===this.data[g]&&(this.data[g]=[]);var _={value:a,timeout:void 0};if(void 0!==r&&(_.timeout=setTimeout(function(){c.remove(i,_)},r)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){var w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this},nn.prototype.has=function(i){return i.wrapped().key in this.data},nn.prototype.getAndRemove=function(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null},nn.prototype._getAndRemoveByKey=function(i){var a=this.data[i].shift();return a.timeout&&clearTimeout(a.timeout),0===this.data[i].length&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),a.value},nn.prototype.getByKey=function(i){var a=this.data[i];return a?a[0].value:null},nn.prototype.get=function(i){return this.has(i)?this.data[i.wrapped().key][0].value:null},nn.prototype.remove=function(i,a){if(!this.has(i))return this;var r=i.wrapped().key,c=void 0===a?0:this.data[r].indexOf(a),g=this.data[r][c];return this.data[r].splice(c,1),g.timeout&&clearTimeout(g.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(g.value),this.order.splice(this.order.indexOf(r),1),this},nn.prototype.setMaxSize=function(i){for(this.max=i;this.order.length>this.max;){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},nn.prototype.filter=function(i){var a=[];for(var r in this.data)for(var c=0,g=this.data[r];c<g.length;c+=1){var _=g[c];i(_.value)||a.push(_)}for(var w=0,E=a;w<E.length;w+=1){var k=E[w];this.remove(k.value.tileID,k)}};var Ao=function(i,a,r){this.context=i;var c=i.gl;this.buffer=c.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),c.bufferData(c.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?c.DYNAMIC_DRAW:c.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer};Ao.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ao.prototype.updateData=function(i){var a=this.context.gl;this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)},Ao.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ho={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Qi=function(i,a,r,c){this.length=a.length,this.attributes=r,this.itemSize=a.bytesPerElement,this.dynamicDraw=c,this.context=i;var g=i.gl;this.buffer=g.createBuffer(),i.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer};Qi.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Qi.prototype.updateData=function(i){var a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,i.arrayBuffer)},Qi.prototype.enableAttributes=function(i,a){for(var r=0;r<this.attributes.length;r++){var c=a.attributes[this.attributes[r].name];void 0!==c&&i.enableVertexAttribArray(c)}},Qi.prototype.setVertexAttribPointers=function(i,a,r){for(var c=0;c<this.attributes.length;c++){var g=this.attributes[c],_=a.attributes[g.name];void 0!==_&&i.vertexAttribPointer(_,g.components,i[ho[g.type]],!1,this.itemSize,g.offset+this.itemSize*(r||0))}},Qi.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Wt=function(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Wt.prototype.get=function(){return this.current},Wt.prototype.set=function(i){},Wt.prototype.getDefault=function(){return this.default},Wt.prototype.setDefault=function(){this.set(this.default)};var fo=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return f.Color.transparent},a.prototype.set=function(r){var c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)},a}(Wt),pi=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return 1},a.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)},a}(Wt),Mr=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return 0},a.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)},a}(Wt),Ar=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return[!0,!0,!0,!0]},a.prototype.set=function(r){var c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)},a}(Wt),er=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return!0},a.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)},a}(Wt),ds=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return 255},a.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)},a}(Wt),ni=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},a.prototype.set=function(r){var c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)},a}(Wt),ra=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){var r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]},a.prototype.set=function(r){var c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)},a}(Wt),Ga=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(r){if(r!==this.current||this.dirty){var c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}},a}(Wt),Ui=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return[0,1]},a.prototype.set=function(r){var c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)},a}(Wt),Hn=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(r){if(r!==this.current||this.dirty){var c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}},a}(Wt),mo=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return this.gl.LESS},a.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)},a}(Wt),dr=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(r){if(r!==this.current||this.dirty){var c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}},a}(Wt),Al=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){var r=this.gl;return[r.ONE,r.ZERO]},a.prototype.set=function(r){var c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)},a}(Wt),Ca=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return f.Color.transparent},a.prototype.set=function(r){var c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)},a}(Wt),Ns=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return this.gl.FUNC_ADD},a.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)},a}(Wt),Po=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(r){if(r!==this.current||this.dirty){var c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}},a}(Wt),Qr=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return this.gl.BACK},a.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)},a}(Wt),ja=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return this.gl.CCW},a.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)},a}(Wt),oa=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)},a}(Wt),Wa=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return this.gl.TEXTURE0},a.prototype.set=function(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)},a}(Wt),zo=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){var r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]},a.prototype.set=function(r){var c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)},a}(Wt),Ea=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(r){if(r!==this.current||this.dirty){var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}},a}(Wt),Ta=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(r){if(r!==this.current||this.dirty){var c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}},a}(Wt),Ha=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(r){if(r!==this.current||this.dirty){var c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}},a}(Wt),Xa=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(r){if(r!==this.current||this.dirty){var c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}},a}(Wt),ko=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(r){var c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1},a}(Wt),Ya=function(i){function a(r){i.call(this,r),this.vao=r.extVertexArrayObject}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a.prototype.set=function(r){this.vao&&(r!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(r),this.current=r,this.dirty=!1)},a}(Wt),Ia=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return 4},a.prototype.set=function(r){if(r!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}},a}(Wt),Ka=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(r){if(r!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}},a}(Wt),Ja=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return!1},a.prototype.set=function(r){if(r!==this.current||this.dirty){var c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}},a}(Wt),Bn=function(i){function a(r,c){i.call(this,r),this.context=r,this.parent=c}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getDefault=function(){return null},a}(Wt),F=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.setDirty=function(){this.dirty=!0},a.prototype.set=function(r){if(r!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}},a}(Bn),G=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.set=function(r){if(r!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}},a}(Bn),j=function(i,a,r,c){this.context=i,this.width=a,this.height=r;var g=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new F(i,g),c&&(this.depthAttachment=new G(i,g))};j.prototype.destroy=function(){var i=this.context.gl,a=this.colorAttachment.get();if(a&&i.deleteTexture(a),this.depthAttachment){var r=this.depthAttachment.get();r&&i.deleteRenderbuffer(r)}i.deleteFramebuffer(this.framebuffer)};var ee=function(i,a,r){this.func=i,this.mask=a,this.range=r};ee.ReadOnly=!1,ee.ReadWrite=!0,ee.disabled=new ee(519,ee.ReadOnly,[0,1]);var ie=function(i,a,r,c,g,_){this.test=i,this.ref=a,this.mask=r,this.fail=c,this.depthFail=g,this.pass=_};ie.disabled=new ie({func:519,mask:0},0,0,7680,7680,7680);var ge=function(i,a,r){this.blendFunction=i,this.blendColor=a,this.mask=r};ge.disabled=new ge(ge.Replace=[1,0],f.Color.transparent,[!1,!1,!1,!1]),ge.unblended=new ge(ge.Replace,f.Color.transparent,[!0,!0,!0,!0]),ge.alphaBlended=new ge([1,771],f.Color.transparent,[!0,!0,!0,!0]);var be=function(i,a,r){this.enable=i,this.mode=a,this.frontFace=r};be.disabled=new be(!1,1029,2305),be.backCCW=new be(!0,1029,2305);var me=function(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new fo(this),this.clearDepth=new pi(this),this.clearStencil=new Mr(this),this.colorMask=new Ar(this),this.depthMask=new er(this),this.stencilMask=new ds(this),this.stencilFunc=new ni(this),this.stencilOp=new ra(this),this.stencilTest=new Ga(this),this.depthRange=new Ui(this),this.depthTest=new Hn(this),this.depthFunc=new mo(this),this.blend=new dr(this),this.blendFunc=new Al(this),this.blendColor=new Ca(this),this.blendEquation=new Ns(this),this.cullFace=new Po(this),this.cullFaceSide=new Qr(this),this.frontFace=new ja(this),this.program=new oa(this),this.activeTexture=new Wa(this),this.viewport=new zo(this),this.bindFramebuffer=new Ea(this),this.bindRenderbuffer=new Ta(this),this.bindTexture=new Ha(this),this.bindVertexBuffer=new Xa(this),this.bindElementBuffer=new ko(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ya(this),this.pixelStoreUnpack=new Ia(this),this.pixelStoreUnpackPremultiplyAlpha=new Ka(this),this.pixelStoreUnpackFlipY=new Ja(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)};me.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},me.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},me.prototype.createIndexBuffer=function(i,a){return new Ao(this,i,a)},me.prototype.createVertexBuffer=function(i,a,r){return new Qi(this,i,a,r)},me.prototype.createRenderbuffer=function(i,a,r){var c=this.gl,g=c.createRenderbuffer();return this.bindRenderbuffer.set(g),c.renderbufferStorage(c.RENDERBUFFER,i,a,r),this.bindRenderbuffer.set(null),g},me.prototype.createFramebuffer=function(i,a,r){return new j(this,i,a,r)},me.prototype.clear=function(i){var a=i.color,r=i.depth,c=this.gl,g=0;a&&(g|=c.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(g|=c.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),c.clear(g)},me.prototype.setCullFace=function(i){!1===i.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))},me.prototype.setDepthMode=function(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)},me.prototype.setStencilMode=function(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)},me.prototype.setColorMode=function(i){f.deepEqual(i.blendFunction,ge.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)},me.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var te=function(i){function a(r,c,g){var _=this;i.call(this),this.id=r,this.dispatcher=g,this.on("data",function(w){"source"===w.dataType&&"metadata"===w.sourceDataType&&(_._sourceLoaded=!0),_._sourceLoaded&&!_._paused&&"source"===w.dataType&&"content"===w.sourceDataType&&(_.reload(),_.transform&&_.update(_.transform))}),this.on("error",function(){_._sourceErrored=!0}),this._source=function(w,E,k,N){var X=new ia[E.type](w,E,k,N);if(X.id!==w)throw new Error("Expected Source id to be "+w+" instead of "+X.id);return f.bindAll(["load","abort","unload","serialize","prepare"],X),X}(r,c,g,this),this._tiles={},this._cache=new nn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new f.SourceFeatureState}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.onAdd=function(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(r)},a.prototype.onRemove=function(r){this._source&&this._source.onRemove&&this._source.onRemove(r)},a.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var r in this._tiles){var c=this._tiles[r];if("loaded"!==c.state&&"errored"!==c.state)return!1}return!0},a.prototype.getSource=function(){return this._source},a.prototype.pause=function(){this._paused=!0},a.prototype.resume=function(){if(this._paused){var r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}},a.prototype._loadTile=function(r,c){return this._source.loadTile(r,c)},a.prototype._unloadTile=function(r){if(this._source.unloadTile)return this._source.unloadTile(r,function(){})},a.prototype._abortTile=function(r){if(this._source.abortTile)return this._source.abortTile(r,function(){})},a.prototype.serialize=function(){return this._source.serialize()},a.prototype.prepare=function(r){for(var c in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var g=this._tiles[c];g.upload(r),g.prepare(this.map.style.imageManager)}},a.prototype.getIds=function(){return f.values(this._tiles).map(function(r){return r.tileID}).sort(ce).map(function(r){return r.key})},a.prototype.getRenderableIds=function(r){var c=this,g=[];for(var _ in this._tiles)this._isIdRenderable(_,r)&&g.push(this._tiles[_]);return r?g.sort(function(w,E){var k=w.tileID,N=E.tileID,X=new f.Point(k.canonical.x,k.canonical.y)._rotate(c.transform.angle),Q=new f.Point(N.canonical.x,N.canonical.y)._rotate(c.transform.angle);return k.overscaledZ-N.overscaledZ||Q.y-X.y||Q.x-X.x}).map(function(w){return w.tileID.key}):g.map(function(w){return w.tileID}).sort(ce).map(function(w){return w.key})},a.prototype.hasRenderableParent=function(r){var c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)},a.prototype._isIdRenderable=function(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())},a.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var r in this._cache.reset(),this._tiles)"errored"!==this._tiles[r].state&&this._reloadTile(r,"reloading")},a.prototype._reloadTile=function(r,c){var g=this._tiles[r];g&&("loading"!==g.state&&(g.state=c),this._loadTile(g,this._tileLoaded.bind(this,g,r,c)))},a.prototype._tileLoaded=function(r,c,g,_){if(_)return r.state="errored",void(404!==_.status?this._source.fire(new f.ErrorEvent(_,{tile:r})):this.update(this.transform));r.timeAdded=f.browser.now(),"expired"===g&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),"raster-dem"===this.getSource().type&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),this._source.fire(new f.Event("data",{dataType:"source",tile:r,coord:r.tileID}))},a.prototype._backfillDEM=function(r){for(var c=this.getRenderableIds(),g=0;g<c.length;g++){var _=c[g];if(r.neighboringTiles&&r.neighboringTiles[_]){var w=this.getTileByID(_);E(r,w),E(w,r)}}function E(k,N){k.needsHillshadePrepare=!0;var X=N.tileID.canonical.x-k.tileID.canonical.x,Q=N.tileID.canonical.y-k.tileID.canonical.y,Y=Math.pow(2,k.tileID.canonical.z),le=N.tileID.key;0===X&&0===Q||Math.abs(Q)>1||(Math.abs(X)>1&&(1===Math.abs(X+Y)?X+=Y:1===Math.abs(X-Y)&&(X-=Y)),N.dem&&k.dem&&(k.dem.backfillBorder(N.dem,X,Q),k.neighboringTiles&&k.neighboringTiles[le]&&(k.neighboringTiles[le].backfilled=!0)))}},a.prototype.getTile=function(r){return this.getTileByID(r.key)},a.prototype.getTileByID=function(r){return this._tiles[r]},a.prototype._retainLoadedChildren=function(r,c,g,_){for(var w in this._tiles){var E=this._tiles[w];if(!(_[w]||!E.hasData()||E.tileID.overscaledZ<=c||E.tileID.overscaledZ>g)){for(var k=E.tileID;E&&E.tileID.overscaledZ>c+1;){var N=E.tileID.scaledTo(E.tileID.overscaledZ-1);(E=this._tiles[N.key])&&E.hasData()&&(k=N)}for(var X=k;X.overscaledZ>c;)if(r[(X=X.scaledTo(X.overscaledZ-1)).key]){_[k.key]=k;break}}}},a.prototype.findLoadedParent=function(r,c){if(r.key in this._loadedParentTiles){var g=this._loadedParentTiles[r.key];return g&&g.tileID.overscaledZ>=c?g:null}for(var _=r.overscaledZ-1;_>=c;_--){var w=r.scaledTo(_),E=this._getLoadedTile(w);if(E)return E}},a.prototype._getLoadedTile=function(r){var c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)},a.prototype.updateCacheSize=function(r){var c=Math.ceil(r.width/this._source.tileSize)+1,g=Math.ceil(r.height/this._source.tileSize)+1,_=Math.floor(c*g*5),w="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(w)},a.prototype.handleWrapJump=function(r){var c=Math.round((r-(void 0===this._prevLng?r:this._prevLng))/360);if(this._prevLng=r,c){var g={};for(var _ in this._tiles){var w=this._tiles[_];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+c),g[w.tileID.key]=w}for(var E in this._tiles=g,this._timers)clearTimeout(this._timers[E]),delete this._timers[E];for(var k in this._tiles)this._setTileReloadTimer(k,this._tiles[k])}},a.prototype.update=function(r){var c=this;if(this.transform=r,this._sourceLoaded&&!this._paused){var g;this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?g=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(R){return new f.OverscaledTileID(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)}):(g=r.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(g=g.filter(function(R){return c._source.hasTile(R)}))):g=[];var _=r.coveringZoomLevel(this._source),w=Math.max(_-a.maxOverzooming,this._source.minzoom),E=Math.max(_+a.maxUnderzooming,this._source.minzoom),k=this._updateRetainedTiles(g,_);if($e(this._source.type)){for(var N={},X={},Q=0,Y=Object.keys(k);Q<Y.length;Q+=1){var le=Y[Q],o=k[le],v=this._tiles[le];if(v&&!(v.fadeEndTime&&v.fadeEndTime<=f.browser.now())){var l=this.findLoadedParent(o,w);l&&(this._addTile(l.tileID),N[l.tileID.key]=l.tileID),X[le]=o}}for(var d in this._retainLoadedChildren(X,_,E,k),N)k[d]||(this._coveredTiles[d]=!0,k[d]=N[d])}for(var b in k)this._tiles[b].clearFadeHold();for(var C=0,M=f.keysDifference(this._tiles,k);C<M.length;C+=1){var O=M[C],z=this._tiles[O];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache()}},a.prototype.releaseSymbolFadeTiles=function(){for(var r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)},a.prototype._updateRetainedTiles=function(r,c){for(var g={},_={},w=Math.max(c-a.maxOverzooming,this._source.minzoom),E=Math.max(c+a.maxUnderzooming,this._source.minzoom),k={},N=0,X=r;N<X.length;N+=1){var Q=X[N],Y=this._addTile(Q);g[Q.key]=Q,Y.hasData()||c<this._source.maxzoom&&(k[Q.key]=Q)}this._retainLoadedChildren(k,c,E,g);for(var le=0,o=r;le<o.length;le+=1){var v=o[le],l=this._tiles[v.key];if(!l.hasData()){if(c+1>this._source.maxzoom){var d=v.children(this._source.maxzoom)[0],b=this.getTile(d);if(b&&b.hasData()){g[d.key]=d;continue}}else{var C=v.children(this._source.maxzoom);if(g[C[0].key]&&g[C[1].key]&&g[C[2].key]&&g[C[3].key])continue}for(var M=l.wasRequested(),O=v.overscaledZ-1;O>=w;--O){var z=v.scaledTo(O);if(_[z.key]||(_[z.key]=!0,!(l=this.getTile(z))&&M&&(l=this._addTile(z)),l&&(g[z.key]=z,M=l.wasRequested(),l.hasData())))break}}}return g},a.prototype._updateLoadedParentTileCache=function(){for(var r in this._loadedParentTiles={},this._tiles){for(var c=[],g=void 0,_=this._tiles[r].tileID;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){g=this._loadedParentTiles[_.key];break}c.push(_.key);var w=_.scaledTo(_.overscaledZ-1);if(g=this._getLoadedTile(w))break;_=w}for(var E=0,k=c;E<k.length;E+=1)this._loadedParentTiles[k[E]]=g}},a.prototype._addTile=function(r){var c=this._tiles[r.key];if(c)return c;(c=this._cache.getAndRemove(r))&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));var g=Boolean(c);return g||(c=new f.Tile(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,this._tileLoaded.bind(this,c,r.key,c.state))),c?(c.uses++,this._tiles[r.key]=c,g||this._source.fire(new f.Event("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null},a.prototype._setTileReloadTimer=function(r,c){var g=this;r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);var _=c.getExpiryTimeout();_&&(this._timers[r]=setTimeout(function(){g._reloadTile(r,"expired"),delete g._timers[r]},_))},a.prototype._removeTile=function(r){var c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&"reloading"!==c.state?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))},a.prototype.clearTiles=function(){for(var r in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(r);this._cache.reset()},a.prototype.tilesIn=function(r,c,g){var _=this,w=[],E=this.transform;if(!E)return w;for(var k=g?E.getCameraQueryGeometry(r):r,N=r.map(function(O){return E.pointCoordinate(O)}),X=k.map(function(O){return E.pointCoordinate(O)}),Q=this.getIds(),Y=1/0,le=1/0,o=-1/0,v=-1/0,l=0,d=X;l<d.length;l+=1){var b=d[l];Y=Math.min(Y,b.x),le=Math.min(le,b.y),o=Math.max(o,b.x),v=Math.max(v,b.y)}for(var C=function(O){var z=_._tiles[Q[O]];if(!z.holdingForFade()){var R=z.tileID,D=Math.pow(2,E.zoom-z.tileID.overscaledZ),P=c*z.queryPadding*f.EXTENT/z.tileSize/D,q=[R.getTilePoint(new f.MercatorCoordinate(Y,le)),R.getTilePoint(new f.MercatorCoordinate(o,v))];if(q[0].x-P<f.EXTENT&&q[0].y-P<f.EXTENT&&q[1].x+P>=0&&q[1].y+P>=0){var W=N.map(function(ae){return R.getTilePoint(ae)}),K=X.map(function(ae){return R.getTilePoint(ae)});w.push({tile:z,tileID:R,queryGeometry:W,cameraQueryGeometry:K,scale:D})}}},M=0;M<Q.length;M++)C(M);return w},a.prototype.getVisibleCoordinates=function(r){for(var c=this,g=this.getRenderableIds(r).map(function(k){return c._tiles[k].tileID}),_=0,w=g;_<w.length;_+=1){var E=w[_];E.posMatrix=this.transform.calculatePosMatrix(E.toUnwrapped())}return g},a.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if($e(this._source.type))for(var r in this._tiles){var c=this._tiles[r];if(void 0!==c.fadeEndTime&&c.fadeEndTime>=f.browser.now())return!0}return!1},a.prototype.setFeatureState=function(r,c,g){this._state.updateState(r=r||"_geojsonTileLayer",c,g)},a.prototype.removeFeatureState=function(r,c,g){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,g)},a.prototype.getFeatureState=function(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)},a.prototype.setDependencies=function(r,c,g){var _=this._tiles[r];_&&_.setDependencies(c,g)},a.prototype.reloadTilesForDependencies=function(r,c){for(var g in this._tiles)this._tiles[g].hasDependency(r,c)&&this._reloadTile(g,"reloading");this._cache.filter(function(_){return!_.hasDependency(r,c)})},a}(f.Evented);function ce(i,a){var r=Math.abs(2*i.wrap)-+(i.wrap<0),c=Math.abs(2*a.wrap)-+(a.wrap<0);return i.overscaledZ-a.overscaledZ||c-r||a.canonical.y-i.canonical.y||a.canonical.x-i.canonical.x}function $e(i){return"raster"===i||"image"===i||"video"===i}function Ye(){return new f.window.Worker(pl.workerUrl)}te.maxOverzooming=10,te.maxUnderzooming=3;var Ae="mapboxgl_preloaded_worker_pool",qe=function(){this.active={}};qe.prototype.acquire=function(i){if(!this.workers)for(this.workers=[];this.workers.length<qe.workerCount;)this.workers.push(new Ye);return this.active[i]=!0,this.workers.slice()},qe.prototype.release=function(i){delete this.active[i],0===this.numActive()&&(this.workers.forEach(function(a){a.terminate()}),this.workers=null)},qe.prototype.isPreloaded=function(){return!!this.active[Ae]},qe.prototype.numActive=function(){return Object.keys(this.active).length};var at,st=Math.floor(f.browser.hardwareConcurrency/2);function gt(){return at||(at=new qe),at}function Ne(i,a){var r={};for(var c in i)"ref"!==c&&(r[c]=i[c]);return f.refProperties.forEach(function(g){g in a&&(r[g]=a[g])}),r}function Qe(i){i=i.slice();for(var a=Object.create(null),r=0;r<i.length;r++)a[i[r].id]=i[r];for(var c=0;c<i.length;c++)"ref"in i[c]&&(i[c]=Ne(i[c],a[i[c].ref]));return i}qe.workerCount=Math.max(Math.min(st,6),1);var Ve={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function At(i,a,r){r.push({command:Ve.addSource,args:[i,a[i]]})}function Pt(i,a,r){a.push({command:Ve.removeSource,args:[i]}),r[i]=!0}function lt(i,a,r,c){Pt(i,r,c),At(i,a,r)}function mn(i,a,r){var c;for(c in i[r])if(i[r].hasOwnProperty(c)&&"data"!==c&&!f.deepEqual(i[r][c],a[r][c]))return!1;for(c in a[r])if(a[r].hasOwnProperty(c)&&"data"!==c&&!f.deepEqual(i[r][c],a[r][c]))return!1;return!0}function Vt(i,a,r,c,g,_){var w;for(w in a=a||{},i=i||{})i.hasOwnProperty(w)&&(f.deepEqual(i[w],a[w])||r.push({command:_,args:[c,w,a[w],g]}));for(w in a)a.hasOwnProperty(w)&&!i.hasOwnProperty(w)&&(f.deepEqual(i[w],a[w])||r.push({command:_,args:[c,w,a[w],g]}))}function wn(i){return i.id}function hn(i,a){return i[a.id]=a,i}var Yt=function(i,a){this.reset(i,a)};Yt.prototype.reset=function(i,a){this.points=i||[],this._distances=[0];for(var r=1;r<this.points.length;r++)this._distances[r]=this._distances[r-1]+this.points[r].dist(this.points[r-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Yt.prototype.lerp=function(i){if(1===this.points.length)return this.points[0];i=f.clamp(i,0,1);for(var a=1,r=this._distances[a],c=i*this.paddedLength+this.padding;r<c&&a<this._distances.length;)r=this._distances[++a];var g=a-1,_=this._distances[g],w=r-_,E=w>0?(c-_)/w:0;return this.points[g].mult(1-E).add(this.points[a].mult(E))};var rn=function(i,a,r){var c=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(i/r),this.yCellCount=Math.ceil(a/r);for(var _=0;_<this.xCellCount*this.yCellCount;_++)c.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=a,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0};function Dt(i,a,r,c,g){var _=f.create();return a?(f.scale(_,_,[1/g,1/g,1]),r||f.rotateZ(_,_,c.angle)):f.multiply(_,c.labelPlaneMatrix,i),_}function fn(i,a,r,c,g){if(a){var _=f.clone(i);return f.scale(_,_,[g,g,1]),r||f.rotateZ(_,_,-c.angle),_}return c.glCoordMatrix}function Lt(i,a){var r=[i.x,i.y,0,1];tr(r,r,a);var c=r[3];return{point:new f.Point(r[0]/c,r[1]/c),signedDistanceFromCamera:c}}function eo(i,a){return.5+i/a*.5}function $t(i,a){var r=i[0]/i[3],c=i[1]/i[3];return r>=-a[0]&&r<=a[0]&&c>=-a[1]&&c<=a[1]}function aa(i,a,r,c,g,_,w,E){var k=c?i.textSizeData:i.iconSizeData,N=f.evaluateSizeForZoom(k,r.transform.zoom),X=[256/r.width*2+1,256/r.height*2+1],Q=c?i.text.dynamicLayoutVertexArray:i.icon.dynamicLayoutVertexArray;Q.clear();for(var Y=i.lineVertexArray,le=c?i.text.placedSymbolArray:i.icon.placedSymbolArray,o=r.transform.width/r.transform.height,v=!1,l=0;l<le.length;l++){var d=le.get(l);if(d.hidden||d.writingMode===f.WritingMode.vertical&&!v)to(d.numGlyphs,Q);else{v=!1;var b=[d.anchorX,d.anchorY,0,1];if(f.transformMat4(b,b,a),$t(b,X)){var C=eo(r.transform.cameraToCenterDistance,b[3]),M=f.evaluateSizeForFeature(k,N,d),O=w?M/C:M*C,z=new f.Point(d.anchorX,d.anchorY),R=Lt(z,g).point,D={},P=Tn(d,O,!1,E,a,g,_,i.glyphOffsetArray,Y,Q,R,z,D,o);v=P.useVertical,(P.notEnoughRoom||v||P.needsFlipping&&Tn(d,O,!0,E,a,g,_,i.glyphOffsetArray,Y,Q,R,z,D,o).notEnoughRoom)&&to(d.numGlyphs,Q)}else to(d.numGlyphs,Q)}}c?i.text.dynamicLayoutVertexBuffer.updateData(Q):i.icon.dynamicLayoutVertexBuffer.updateData(Q)}function Ma(i,a,r,c,g,_,w,E,k,N,X){var Q=E.glyphStartIndex+E.numGlyphs,Y=E.lineStartIndex,le=E.lineStartIndex+E.lineLength,o=a.getoffsetX(E.glyphStartIndex),v=a.getoffsetX(Q-1),l=Do(i*o,r,c,g,_,w,E.segment,Y,le,k,N,X);if(!l)return null;var d=Do(i*v,r,c,g,_,w,E.segment,Y,le,k,N,X);return d?{first:l,last:d}:null}function hi(i,a,r,c){return i===f.WritingMode.horizontal&&Math.abs(r.y-a.y)>Math.abs(r.x-a.x)*c?{useVertical:!0}:(i===f.WritingMode.vertical?a.y<r.y:a.x>r.x)?{needsFlipping:!0}:null}function Tn(i,a,r,c,g,_,w,E,k,N,X,Q,Y,le){var o,v=a/24,l=i.lineOffsetX*v,d=i.lineOffsetY*v;if(i.numGlyphs>1){var b=i.glyphStartIndex+i.numGlyphs,C=i.lineStartIndex,M=i.lineStartIndex+i.lineLength,O=Ma(v,E,l,d,r,X,Q,i,k,_,Y);if(!O)return{notEnoughRoom:!0};var z=Lt(O.first.point,w).point,R=Lt(O.last.point,w).point;if(c&&!r){var D=hi(i.writingMode,z,R,le);if(D)return D}o=[O.first];for(var P=i.glyphStartIndex+1;P<b-1;P++)o.push(Do(v*E.getoffsetX(P),l,d,r,X,Q,i.segment,C,M,k,_,Y));o.push(O.last)}else{if(c&&!r){var q=Lt(Q,g).point,W=i.lineStartIndex+i.segment+1,K=new f.Point(k.getx(W),k.gety(W)),ae=Lt(K,g),re=ae.signedDistanceFromCamera>0?ae.point:Aa(Q,K,q,1,g),ue=hi(i.writingMode,q,re,le);if(ue)return ue}var _e=Do(v*E.getoffsetX(i.glyphStartIndex),l,d,r,X,Q,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,k,_,Y);if(!_e)return{notEnoughRoom:!0};o=[_e]}for(var ve=0,Ee=o;ve<Ee.length;ve+=1){var Me=Ee[ve];f.addDynamicAttributes(N,Me.point,Me.angle)}return{}}function Aa(i,a,r,c,g){var _=Lt(i.add(i.sub(a)._unit()),g).point,w=r.sub(_);return r.add(w._mult(c/w.mag()))}function Do(i,a,r,c,g,_,w,E,k,N,X,Q){var Y=c?i-a:i+a,le=Y>0?1:-1,o=0;c&&(le*=-1,o=Math.PI),le<0&&(o+=Math.PI);for(var v=le>0?E+w:E+w+1,l=g,d=g,b=0,C=0,M=Math.abs(Y),O=[];b+C<=M;){if((v+=le)<E||v>=k)return null;if(d=l,O.push(l),void 0===(l=Q[v])){var z=new f.Point(N.getx(v),N.gety(v)),R=Lt(z,X);if(R.signedDistanceFromCamera>0)l=Q[v]=R.point;else{var D=v-le;l=Aa(0===b?_:new f.Point(N.getx(D),N.gety(D)),z,d,M-b+1,X)}}b+=C,C=d.dist(l)}var P=(M-b)/C,q=l.sub(d),W=q.mult(P)._add(d);W._add(q._unit()._perp()._mult(r*le));var K=o+Math.atan2(l.y-d.y,l.x-d.x);return O.push(W),{point:W,angle:K,path:O}}rn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},rn.prototype.insert=function(i,a,r,c,g){this._forEachCell(a,r,c,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(a),this.bboxes.push(r),this.bboxes.push(c),this.bboxes.push(g)},rn.prototype.insertCircle=function(i,a,r,c){this._forEachCell(a-c,r-c,a+c,r+c,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(a),this.circles.push(r),this.circles.push(c)},rn.prototype._insertBoxCell=function(i,a,r,c,g,_){this.boxCells[g].push(_)},rn.prototype._insertCircleCell=function(i,a,r,c,g,_){this.circleCells[g].push(_)},rn.prototype._query=function(i,a,r,c,g,_){if(r<0||i>this.width||c<0||a>this.height)return!g&&[];var w=[];if(i<=0&&a<=0&&this.width<=r&&this.height<=c){if(g)return!0;for(var E=0;E<this.boxKeys.length;E++)w.push({key:this.boxKeys[E],x1:this.bboxes[4*E],y1:this.bboxes[4*E+1],x2:this.bboxes[4*E+2],y2:this.bboxes[4*E+3]});for(var k=0;k<this.circleKeys.length;k++){var N=this.circles[3*k],X=this.circles[3*k+1],Q=this.circles[3*k+2];w.push({key:this.circleKeys[k],x1:N-Q,y1:X-Q,x2:N+Q,y2:X+Q})}return _?w.filter(_):w}return this._forEachCell(i,a,r,c,this._queryCell,w,{hitTest:g,seenUids:{box:{},circle:{}}},_),g?w.length>0:w},rn.prototype._queryCircle=function(i,a,r,c,g){var _=i-r,w=i+r,E=a-r,k=a+r;if(w<0||_>this.width||k<0||E>this.height)return!c&&[];var N=[];return this._forEachCell(_,E,w,k,this._queryCellCircle,N,{hitTest:c,circle:{x:i,y:a,radius:r},seenUids:{box:{},circle:{}}},g),c?N.length>0:N},rn.prototype.query=function(i,a,r,c,g){return this._query(i,a,r,c,!1,g)},rn.prototype.hitTest=function(i,a,r,c,g){return this._query(i,a,r,c,!0,g)},rn.prototype.hitTestCircle=function(i,a,r,c){return this._queryCircle(i,a,r,!0,c)},rn.prototype._queryCell=function(i,a,r,c,g,_,w,E){var k=w.seenUids,N=this.boxCells[g];if(null!==N)for(var X=this.bboxes,Q=0,Y=N;Q<Y.length;Q+=1){var le=Y[Q];if(!k.box[le]){k.box[le]=!0;var o=4*le;if(i<=X[o+2]&&a<=X[o+3]&&r>=X[o+0]&&c>=X[o+1]&&(!E||E(this.boxKeys[le]))){if(w.hitTest)return _.push(!0),!0;_.push({key:this.boxKeys[le],x1:X[o],y1:X[o+1],x2:X[o+2],y2:X[o+3]})}}}var v=this.circleCells[g];if(null!==v)for(var l=this.circles,d=0,b=v;d<b.length;d+=1){var C=b[d];if(!k.circle[C]){k.circle[C]=!0;var M=3*C;if(this._circleAndRectCollide(l[M],l[M+1],l[M+2],i,a,r,c)&&(!E||E(this.circleKeys[C]))){if(w.hitTest)return _.push(!0),!0;var O=l[M],z=l[M+1],R=l[M+2];_.push({key:this.circleKeys[C],x1:O-R,y1:z-R,x2:O+R,y2:z+R})}}}},rn.prototype._queryCellCircle=function(i,a,r,c,g,_,w,E){var k=w.circle,N=w.seenUids,X=this.boxCells[g];if(null!==X)for(var Q=this.bboxes,Y=0,le=X;Y<le.length;Y+=1){var o=le[Y];if(!N.box[o]){N.box[o]=!0;var v=4*o;if(this._circleAndRectCollide(k.x,k.y,k.radius,Q[v+0],Q[v+1],Q[v+2],Q[v+3])&&(!E||E(this.boxKeys[o])))return _.push(!0),!0}}var l=this.circleCells[g];if(null!==l)for(var d=this.circles,b=0,C=l;b<C.length;b+=1){var M=C[b];if(!N.circle[M]){N.circle[M]=!0;var O=3*M;if(this._circlesCollide(d[O],d[O+1],d[O+2],k.x,k.y,k.radius)&&(!E||E(this.circleKeys[M])))return _.push(!0),!0}}},rn.prototype._forEachCell=function(i,a,r,c,g,_,w,E){for(var k=this._convertToXCellCoord(i),N=this._convertToYCellCoord(a),X=this._convertToXCellCoord(r),Q=this._convertToYCellCoord(c),Y=k;Y<=X;Y++)for(var le=N;le<=Q;le++)if(g.call(this,i,a,r,c,this.xCellCount*le+Y,_,w,E))return},rn.prototype._convertToXCellCoord=function(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))},rn.prototype._convertToYCellCoord=function(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))},rn.prototype._circlesCollide=function(i,a,r,c,g,_){var w=c-i,E=g-a,k=r+_;return k*k>w*w+E*E},rn.prototype._circleAndRectCollide=function(i,a,r,c,g,_,w){var E=(_-c)/2,k=Math.abs(i-(c+E));if(k>E+r)return!1;var N=(w-g)/2,X=Math.abs(a-(g+N));if(X>N+r)return!1;if(k<=E||X<=N)return!0;var Q=k-E,Y=X-N;return Q*Q+Y*Y<=r*r};var Zn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function to(i,a){for(var r=0;r<i;r++){var c=a.length;a.resize(c+4),a.float32.set(Zn,3*c)}}function tr(i,a,r){var c=a[0],g=a[1];return i[0]=r[0]*c+r[4]*g+r[12],i[1]=r[1]*c+r[5]*g+r[13],i[3]=r[3]*c+r[7]*g+r[15],i}var gn=function(i,a,r){void 0===a&&(a=new rn(i.width+200,i.height+200,25)),void 0===r&&(r=new rn(i.width+200,i.height+200,25)),this.transform=i,this.grid=a,this.ignoredGrid=r,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+100,this.screenBottomBoundary=i.height+100,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200};function Vi(i,a,r){return a*(f.EXTENT/(i.tileSize*Math.pow(2,r-i.tileID.overscaledZ)))}gn.prototype.placeCollisionBox=function(i,a,r,c,g){var _=this.projectAndGetPerspectiveRatio(c,i.anchorPointX,i.anchorPointY),w=r*_.perspectiveRatio,E=i.x1*w+_.point.x,k=i.y1*w+_.point.y,N=i.x2*w+_.point.x,X=i.y2*w+_.point.y;return!this.isInsideGrid(E,k,N,X)||!a&&this.grid.hitTest(E,k,N,X,g)?{box:[],offscreen:!1}:{box:[E,k,N,X],offscreen:this.isOffscreen(E,k,N,X)}},gn.prototype.placeCollisionCircles=function(i,a,r,c,g,_,w,E,k,N,X,Q,Y){var le=[],o=new f.Point(a.anchorX,a.anchorY),v=Lt(o,_),l=eo(this.transform.cameraToCenterDistance,v.signedDistanceFromCamera),d=(N?g/l:g*l)/f.ONE_EM,b=Lt(o,w).point,C=Ma(d,c,a.lineOffsetX*d,a.lineOffsetY*d,!1,b,o,a,r,w,{}),M=!1,O=!1,z=!0;if(C){for(var R=.5*Q*l+Y,D=new f.Point(-100,-100),P=new f.Point(this.screenRightBoundary,this.screenBottomBoundary),q=new Yt,W=C.first,K=C.last,ae=[],re=W.path.length-1;re>=1;re--)ae.push(W.path[re]);for(var ue=1;ue<K.path.length;ue++)ae.push(K.path[ue]);var _e=2.5*R;if(E){var ve=ae.map(function(qt){return Lt(qt,E)});ae=ve.some(function(qt){return qt.signedDistanceFromCamera<=0})?[]:ve.map(function(qt){return qt.point})}var Ee=[];if(ae.length>0){for(var Me=ae[0].clone(),De=ae[0].clone(),Oe=1;Oe<ae.length;Oe++)Me.x=Math.min(Me.x,ae[Oe].x),Me.y=Math.min(Me.y,ae[Oe].y),De.x=Math.max(De.x,ae[Oe].x),De.y=Math.max(De.y,ae[Oe].y);Ee=Me.x>=D.x&&De.x<=P.x&&Me.y>=D.y&&De.y<=P.y?[ae]:De.x<D.x||Me.x>P.x||De.y<D.y||Me.y>P.y?[]:f.clipLine([ae],D.x,D.y,P.x,P.y)}for(var xe=0,Te=Ee;xe<Te.length;xe+=1){var Re;q.reset(Te[xe],.25*R),Re=q.length<=.5*R?1:Math.ceil(q.paddedLength/_e)+1;for(var ke=0;ke<Re;ke++){var We=ke/Math.max(Re-1,1),Ke=q.lerp(We),mt=Ke.x+100,_t=Ke.y+100;le.push(mt,_t,R,0);var Be=mt-R,it=_t-R,ft=mt+R,wt=_t+R;if(z=z&&this.isOffscreen(Be,it,ft,wt),O=O||this.isInsideGrid(Be,it,ft,wt),!i&&this.grid.hitTestCircle(mt,_t,R,X)&&(M=!0,!k))return{circles:[],offscreen:!1,collisionDetected:M}}}}return{circles:!k&&M||!O?[]:le,offscreen:z,collisionDetected:M}},gn.prototype.queryRenderedSymbols=function(i){if(0===i.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var a=[],r=1/0,c=1/0,g=-1/0,_=-1/0,w=0,E=i;w<E.length;w+=1){var k=E[w],N=new f.Point(k.x+100,k.y+100);r=Math.min(r,N.x),c=Math.min(c,N.y),g=Math.max(g,N.x),_=Math.max(_,N.y),a.push(N)}for(var X={},Q={},Y=0,le=this.grid.query(r,c,g,_).concat(this.ignoredGrid.query(r,c,g,_));Y<le.length;Y+=1){var o=le[Y],v=o.key;if(void 0===X[v.bucketInstanceId]&&(X[v.bucketInstanceId]={}),!X[v.bucketInstanceId][v.featureIndex]){var l=[new f.Point(o.x1,o.y1),new f.Point(o.x2,o.y1),new f.Point(o.x2,o.y2),new f.Point(o.x1,o.y2)];f.polygonIntersectsPolygon(a,l)&&(X[v.bucketInstanceId][v.featureIndex]=!0,void 0===Q[v.bucketInstanceId]&&(Q[v.bucketInstanceId]=[]),Q[v.bucketInstanceId].push(v.featureIndex))}}return Q},gn.prototype.insertCollisionBox=function(i,a,r,c,g){(a?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:c,collisionGroupID:g},i[0],i[1],i[2],i[3])},gn.prototype.insertCollisionCircles=function(i,a,r,c,g){for(var _=a?this.ignoredGrid:this.grid,w={bucketInstanceId:r,featureIndex:c,collisionGroupID:g},E=0;E<i.length;E+=4)_.insertCircle(w,i[E],i[E+1],i[E+2])},gn.prototype.projectAndGetPerspectiveRatio=function(i,a,r){var c=[a,r,0,1];return tr(c,c,i),{point:new f.Point((c[0]/c[3]+1)/2*this.transform.width+100,(-c[1]/c[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/c[3]*.5}},gn.prototype.isOffscreen=function(i,a,r,c){return r<100||i>=this.screenRightBoundary||c<100||a>this.screenBottomBoundary},gn.prototype.isInsideGrid=function(i,a,r,c){return r>=0&&i<this.gridRightBoundary&&c>=0&&a<this.gridBottomBoundary},gn.prototype.getViewportMatrix=function(){var i=f.identity([]);return f.translate(i,i,[-100,-100,0]),i};var ii=function(i,a,r,c){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?a:-a))):c&&r?1:0,this.placed=r};ii.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Pi=function(i,a,r,c,g){this.text=new ii(i?i.text:null,a,r,g),this.icon=new ii(i?i.icon:null,a,c,g)};Pi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Lo=function(i,a,r){this.text=i,this.icon=a,this.skipFade=r},uu=function(){this.invProjMatrix=f.create(),this.viewportMatrix=f.create(),this.circles=[]},Pr=function(i,a,r,c,g){this.bucketInstanceId=i,this.featureIndex=a,this.sourceLayerIndex=r,this.bucketIndex=c,this.tileID=g},Us=function(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}};function Oo(i,a,r,c,g){var _=f.getAnchorAlignment(i),w=-(_.horizontalAlign-.5)*a,E=-(_.verticalAlign-.5)*r,k=f.evaluateVariableOffset(i,c);return new f.Point(w+k[0]*g,E+k[1]*g)}function ri(i,a,r,c,g,_){var w=i.x1,E=i.x2,k=i.y1,N=i.y2,X=i.anchorPointX,Q=i.anchorPointY,Y=new f.Point(a,r);return c&&Y._rotate(g?_:-_),{x1:w+Y.x,y1:k+Y.y,x2:E+Y.x,y2:N+Y.y,anchorPointX:X,anchorPointY:Q}}Us.prototype.get=function(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){var a=++this.maxGroupID;this.collisionGroups[i]={ID:a,predicate:function(r){return r.collisionGroupID===a}}}return this.collisionGroups[i]};var Gn=function(i,a,r,c){this.transform=i.clone(),this.collisionIndex=new gn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=a,this.retainedQueryData={},this.collisionGroups=new Us(r),this.collisionCircleArrays={},this.prevPlacement=c,c&&(c.prevPlacement=void 0),this.placedOrientations={}};function sa(i,a,r,c,g){i.emplaceBack(a?1:0,r?1:0,c||0,g||0),i.emplaceBack(a?1:0,r?1:0,c||0,g||0),i.emplaceBack(a?1:0,r?1:0,c||0,g||0),i.emplaceBack(a?1:0,r?1:0,c||0,g||0)}Gn.prototype.getBucketParts=function(i,a,r,c){var g=r.getBucket(a),_=r.latestFeatureIndex;if(g&&_&&a.id===g.layerIds[0]){var w=r.collisionBoxArray,E=g.layers[0].layout,k=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),N=r.tileSize/f.EXTENT,X=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),Q="map"===E.get("text-pitch-alignment"),Y="map"===E.get("text-rotation-alignment"),le=Vi(r,1,this.transform.zoom),o=Dt(X,Q,Y,this.transform,le),v=null;if(Q){var l=fn(X,Q,Y,this.transform,le);v=f.multiply([],this.transform.labelPlaneMatrix,l)}this.retainedQueryData[g.bucketInstanceId]=new Pr(g.bucketInstanceId,_,g.sourceLayerIndex,g.index,r.tileID);var d={bucket:g,layout:E,posMatrix:X,textLabelPlaneMatrix:o,labelToScreenMatrix:v,scale:k,textPixelRatio:N,holdingForFade:r.holdingForFade(),collisionBoxArray:w,partiallyEvaluatedTextSize:f.evaluateSizeForZoom(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(c)for(var b=0,C=g.sortKeyRanges;b<C.length;b+=1){var M=C[b];i.push({sortKey:M.sortKey,symbolInstanceStart:M.symbolInstanceStart,symbolInstanceEnd:M.symbolInstanceEnd,parameters:d})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:d})}},Gn.prototype.attemptAnchorPlacement=function(i,a,r,c,g,_,w,E,k,N,X,Q,Y,le,o){var v,l=[Q.textOffset0,Q.textOffset1],d=Oo(i,r,c,l,g),b=this.collisionIndex.placeCollisionBox(ri(a,d.x,d.y,_,w,this.transform.angle),X,E,k,N.predicate);if(!o||0!==this.collisionIndex.placeCollisionBox(ri(o,d.x,d.y,_,w,this.transform.angle),X,E,k,N.predicate).box.length)return b.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(v=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),this.variableOffsets[Q.crossTileID]={textOffset:l,width:r,height:c,anchor:i,textBoxScale:g,prevAnchor:v},this.markUsedJustification(Y,i,Q,le),Y.allowVerticalPlacement&&(this.markUsedOrientation(Y,le,Q),this.placedOrientations[Q.crossTileID]=le),{shift:d,placedGlyphBoxes:b}):void 0},Gn.prototype.placeLayerBucketPart=function(i,a,r){var c=this,g=i.parameters,_=g.bucket,w=g.layout,E=g.posMatrix,k=g.textLabelPlaneMatrix,N=g.labelToScreenMatrix,X=g.textPixelRatio,Q=g.holdingForFade,Y=g.collisionBoxArray,le=g.partiallyEvaluatedTextSize,o=g.collisionGroup,v=w.get("text-optional"),l=w.get("icon-optional"),d=w.get("text-allow-overlap"),b=w.get("icon-allow-overlap"),C="map"===w.get("text-rotation-alignment"),M="map"===w.get("text-pitch-alignment"),O="none"!==w.get("icon-text-fit"),z="viewport-y"===w.get("symbol-z-order"),R=d&&(b||!_.hasIconData()||l),D=b&&(d||!_.hasTextData()||v);!_.collisionArrays&&Y&&_.deserializeCollisionBoxes(Y);var P=function(ue,_e){if(!a[ue.crossTileID])if(Q)c.placements[ue.crossTileID]=new Lo(!1,!1,!1);else{var ve,Ee=!1,Me=!1,De=!0,Oe=null,xe={box:null,offscreen:null},Te={box:null,offscreen:null},Re=null,ke=null,We=0,Ke=0,mt=0;_e.textFeatureIndex?We=_e.textFeatureIndex:ue.useRuntimeCollisionCircles&&(We=ue.featureIndex),_e.verticalTextFeatureIndex&&(Ke=_e.verticalTextFeatureIndex);var _t=_e.textBox;if(_t){var Be=function(Mn){var An=f.WritingMode.horizontal;if(_.allowVerticalPlacement&&!Mn&&c.prevPlacement){var Si=c.prevPlacement.placedOrientations[ue.crossTileID];Si&&(c.placedOrientations[ue.crossTileID]=Si,c.markUsedOrientation(_,An=Si,ue))}return An},it=function(Mn,An){if(_.allowVerticalPlacement&&ue.numVerticalGlyphVertices>0&&_e.verticalTextBox)for(var Si=0,Ua=_.writingModes;Si<Ua.length&&(Ua[Si]===f.WritingMode.vertical?(xe=An(),Te=xe):xe=Mn(),!(xe&&xe.box&&xe.box.length));Si+=1);else xe=Mn()};if(w.get("text-variable-anchor")){var ft=w.get("text-variable-anchor");if(c.prevPlacement&&c.prevPlacement.variableOffsets[ue.crossTileID]){var wt=c.prevPlacement.variableOffsets[ue.crossTileID];ft.indexOf(wt.anchor)>0&&(ft=ft.filter(function(Mn){return Mn!==wt.anchor})).unshift(wt.anchor)}var qt=function(Mn,An,Si){for(var Ua=Mn.x2-Mn.x1,wu=Mn.y2-Mn.y1,Ac=ue.textBoxScale,hl=O&&!b?An:null,Su={box:[],offscreen:!1},Cu=d?2*ft.length:ft.length,fl=0;fl<Cu;++fl){var dl=c.attemptAnchorPlacement(ft[fl%ft.length],Mn,Ua,wu,Ac,C,M,X,E,o,fl>=ft.length,ue,_,Si,hl);if(dl&&(Su=dl.placedGlyphBoxes)&&Su.box&&Su.box.length){Ee=!0,Oe=dl.shift;break}}return Su};it(function(){return qt(_t,_e.iconBox,f.WritingMode.horizontal)},function(){var Mn=_e.verticalTextBox;return _.allowVerticalPlacement&&!(xe&&xe.box&&xe.box.length)&&ue.numVerticalGlyphVertices>0&&Mn?qt(Mn,_e.verticalIconBox,f.WritingMode.vertical):{box:null,offscreen:null}}),xe&&(Ee=xe.box,De=xe.offscreen);var Xo=Be(xe&&xe.box);if(!Ee&&c.prevPlacement){var xr=c.prevPlacement.variableOffsets[ue.crossTileID];xr&&(c.variableOffsets[ue.crossTileID]=xr,c.markUsedJustification(_,xr.anchor,ue,Xo))}}else{var Yo=function(Mn,An){var Si=c.collisionIndex.placeCollisionBox(Mn,d,X,E,o.predicate);return Si&&Si.box&&Si.box.length&&(c.markUsedOrientation(_,An,ue),c.placedOrientations[ue.crossTileID]=An),Si};it(function(){return Yo(_t,f.WritingMode.horizontal)},function(){var Mn=_e.verticalTextBox;return _.allowVerticalPlacement&&ue.numVerticalGlyphVertices>0&&Mn?Yo(Mn,f.WritingMode.vertical):{box:null,offscreen:null}}),Be(xe&&xe.box&&xe.box.length)}}if(Ee=(ve=xe)&&ve.box&&ve.box.length>0,De=ve&&ve.offscreen,ue.useRuntimeCollisionCircles){var Xr=_.text.placedSymbolArray.get(ue.centerJustifiedTextSymbolIndex),Br=f.evaluateSizeForFeature(_.textSizeData,le,Xr),Wi=w.get("text-padding");Re=c.collisionIndex.placeCollisionCircles(d,Xr,_.lineVertexArray,_.glyphOffsetArray,Br,E,k,N,r,M,o.predicate,ue.collisionCircleDiameter,Wi),Ee=d||Re.circles.length>0&&!Re.collisionDetected,De=De&&Re.offscreen}if(_e.iconFeatureIndex&&(mt=_e.iconFeatureIndex),_e.iconBox){var Yr=function(Mn){var An=O&&Oe?ri(Mn,Oe.x,Oe.y,C,M,c.transform.angle):Mn;return c.collisionIndex.placeCollisionBox(An,b,X,E,o.predicate)};Me=Te&&Te.box&&Te.box.length&&_e.verticalIconBox?(ke=Yr(_e.verticalIconBox)).box.length>0:(ke=Yr(_e.iconBox)).box.length>0,De=De&&ke.offscreen}var Na=v||0===ue.numHorizontalGlyphVertices&&0===ue.numVerticalGlyphVertices,Xn=l||0===ue.numIconVertices;if(Na||Xn?Xn?Na||(Me=Me&&Ee):Ee=Me&&Ee:Me=Ee=Me&&Ee,Ee&&ve&&ve.box&&c.collisionIndex.insertCollisionBox(ve.box,w.get("text-ignore-placement"),_.bucketInstanceId,Te&&Te.box&&Ke?Ke:We,o.ID),Me&&ke&&c.collisionIndex.insertCollisionBox(ke.box,w.get("icon-ignore-placement"),_.bucketInstanceId,mt,o.ID),Re&&(Ee&&c.collisionIndex.insertCollisionCircles(Re.circles,w.get("text-ignore-placement"),_.bucketInstanceId,We,o.ID),r)){var br=_.bucketInstanceId,wr=c.collisionCircleArrays[br];void 0===wr&&(wr=c.collisionCircleArrays[br]=new uu);for(var Eo=0;Eo<Re.circles.length;Eo+=4)wr.circles.push(Re.circles[Eo+0]),wr.circles.push(Re.circles[Eo+1]),wr.circles.push(Re.circles[Eo+2]),wr.circles.push(Re.collisionDetected?1:0)}c.placements[ue.crossTileID]=new Lo(Ee||R,Me||D,De||_.justReloaded),a[ue.crossTileID]=!0}};if(z)for(var q=_.getSortedSymbolIndexes(this.transform.angle),W=q.length-1;W>=0;--W){var K=q[W];P(_.symbolInstances.get(K),_.collisionArrays[K])}else for(var ae=i.symbolInstanceStart;ae<i.symbolInstanceEnd;ae++)P(_.symbolInstances.get(ae),_.collisionArrays[ae]);if(r&&_.bucketInstanceId in this.collisionCircleArrays){var re=this.collisionCircleArrays[_.bucketInstanceId];f.invert(re.invProjMatrix,E),re.viewportMatrix=this.collisionIndex.getViewportMatrix()}_.justReloaded=!1},Gn.prototype.markUsedJustification=function(i,a,r,c){var g;g=c===f.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[f.getAnchorJustification(a)];for(var _=0,w=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];_<w.length;_+=1){var E=w[_];E>=0&&(i.text.placedSymbolArray.get(E).crossTileID=g>=0&&E!==g?0:r.crossTileID)}},Gn.prototype.markUsedOrientation=function(i,a,r){for(var c=a===f.WritingMode.horizontal||a===f.WritingMode.horizontalOnly?a:0,g=a===f.WritingMode.vertical?a:0,_=0,w=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];_<w.length;_+=1)i.text.placedSymbolArray.get(w[_]).placedOrientation=c;r.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=g)},Gn.prototype.commit=function(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;var a=this.prevPlacement,r=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;var c=a?a.symbolFadeChange(i):1,g=a?a.opacities:{},_=a?a.variableOffsets:{},w=a?a.placedOrientations:{};for(var E in this.placements){var k=this.placements[E],N=g[E];N?(this.opacities[E]=new Pi(N,c,k.text,k.icon),r=r||k.text!==N.text.placed||k.icon!==N.icon.placed):(this.opacities[E]=new Pi(null,c,k.text,k.icon,k.skipFade),r=r||k.text||k.icon)}for(var X in g){var Q=g[X];if(!this.opacities[X]){var Y=new Pi(Q,c,!1,!1);Y.isHidden()||(this.opacities[X]=Y,r=r||Q.text.placed||Q.icon.placed)}}for(var le in _)this.variableOffsets[le]||!this.opacities[le]||this.opacities[le].isHidden()||(this.variableOffsets[le]=_[le]);for(var o in w)this.placedOrientations[o]||!this.opacities[o]||this.opacities[o].isHidden()||(this.placedOrientations[o]=w[o]);r?this.lastPlacementChangeTime=i:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:i)},Gn.prototype.updateLayerOpacities=function(i,a){for(var r={},c=0,g=a;c<g.length;c+=1){var _=g[c],w=_.getBucket(i);w&&_.latestFeatureIndex&&i.id===w.layerIds[0]&&this.updateBucketOpacities(w,r,_.collisionBoxArray)}},Gn.prototype.updateBucketOpacities=function(i,a,r){var c=this;i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();var g=i.layers[0].layout,_=new Pi(null,0,!1,!1,!0),w=g.get("text-allow-overlap"),E=g.get("icon-allow-overlap"),k=g.get("text-variable-anchor"),N="map"===g.get("text-rotation-alignment"),X="map"===g.get("text-pitch-alignment"),Q="none"!==g.get("icon-text-fit"),Y=new Pi(null,0,w&&(E||!i.hasIconData()||g.get("icon-optional")),E&&(w||!i.hasTextData()||g.get("text-optional")),!0);!i.collisionArrays&&r&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(r);for(var le=function(d,b,C){for(var M=0;M<b/4;M++)d.opacityVertexArray.emplaceBack(C)},o=function(d){var b=i.symbolInstances.get(d),C=b.numHorizontalGlyphVertices,M=b.numVerticalGlyphVertices,O=b.crossTileID,z=c.opacities[O];a[O]?z=_:z||(c.opacities[O]=z=Y),a[O]=!0;var R=b.numIconVertices>0,D=c.placedOrientations[b.crossTileID],P=D===f.WritingMode.vertical,q=D===f.WritingMode.horizontal||D===f.WritingMode.horizontalOnly;if(C>0||M>0){var W=Vs(z.text);le(i.text,C,P?$s:W),le(i.text,M,q?$s:W);var K=z.text.isHidden();[b.rightJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.leftJustifiedTextSymbolIndex].forEach(function(xe){xe>=0&&(i.text.placedSymbolArray.get(xe).hidden=K||P?1:0)}),b.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).hidden=K||q?1:0);var ae=c.variableOffsets[b.crossTileID];ae&&c.markUsedJustification(i,ae.anchor,b,D);var re=c.placedOrientations[b.crossTileID];re&&(c.markUsedJustification(i,"left",b,re),c.markUsedOrientation(i,re,b))}if(R){var ue=Vs(z.icon),_e=!(Q&&b.verticalPlacedIconSymbolIndex&&P);b.placedIconSymbolIndex>=0&&(le(i.icon,b.numIconVertices,_e?ue:$s),i.icon.placedSymbolArray.get(b.placedIconSymbolIndex).hidden=z.icon.isHidden()),b.verticalPlacedIconSymbolIndex>=0&&(le(i.icon,b.numVerticalIconVertices,_e?$s:ue),i.icon.placedSymbolArray.get(b.verticalPlacedIconSymbolIndex).hidden=z.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){var ve=i.collisionArrays[d];if(ve){var Ee=new f.Point(0,0);if(ve.textBox||ve.verticalTextBox){var Me=!0;if(k){var De=c.variableOffsets[O];De?(Ee=Oo(De.anchor,De.width,De.height,De.textOffset,De.textBoxScale),N&&Ee._rotate(X?c.transform.angle:-c.transform.angle)):Me=!1}ve.textBox&&sa(i.textCollisionBox.collisionVertexArray,z.text.placed,!Me||P,Ee.x,Ee.y),ve.verticalTextBox&&sa(i.textCollisionBox.collisionVertexArray,z.text.placed,!Me||q,Ee.x,Ee.y)}var Oe=Boolean(!q&&ve.verticalIconBox);ve.iconBox&&sa(i.iconCollisionBox.collisionVertexArray,z.icon.placed,Oe,Q?Ee.x:0,Q?Ee.y:0),ve.verticalIconBox&&sa(i.iconCollisionBox.collisionVertexArray,z.icon.placed,!Oe,Q?Ee.x:0,Q?Ee.y:0)}}},v=0;v<i.symbolInstances.length;v++)o(v);if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){var l=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=l.invProjMatrix,i.placementViewportMatrix=l.viewportMatrix,i.collisionCircleArray=l.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}},Gn.prototype.symbolFadeChange=function(i){return 0===this.fadeDuration?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Gn.prototype.zoomAdjustment=function(i){return Math.max(0,(this.transform.zoom-i)/1.5)},Gn.prototype.hasTransitions=function(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration},Gn.prototype.stillRecent=function(i,a){var r=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*r>i},Gn.prototype.setStale=function(){this.stale=!0};var Ro=Math.pow(2,25),cu=Math.pow(2,24),pu=Math.pow(2,17),Pl=Math.pow(2,16),hu=Math.pow(2,9),zl=Math.pow(2,8),fu=Math.pow(2,1);function Vs(i){if(0===i.opacity&&!i.placed)return 0;if(1===i.opacity&&i.placed)return 4294967295;var a=i.placed?1:0,r=Math.floor(127*i.opacity);return r*Ro+a*cu+r*pu+a*Pl+r*hu+a*zl+r*fu+a}var $s=0,qs=function(i){this._sortAcrossTiles="viewport-y"!==i.layout.get("symbol-z-order")&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};qs.prototype.continuePlacement=function(i,a,r,c,g){for(var _=this._bucketParts;this._currentTileIndex<i.length;)if(a.getBucketParts(_,c,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,_.sort(function(w,E){return w.sortKey-E.sortKey}));this._currentPartIndex<_.length;)if(a.placeLayerBucketPart(_[this._currentPartIndex],this._seenCrossTileIDs,r),this._currentPartIndex++,g())return!0;return!1};var ms=function(i,a,r,c,g,_,w){this.placement=new Gn(i,g,_,w),this._currentPlacementIndex=a.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=c,this._done=!1};ms.prototype.isDone=function(){return this._done},ms.prototype.continuePlacement=function(i,a,r){for(var c=this,g=f.browser.now(),_=function(){var k=f.browser.now()-g;return!c._forceFullPlacement&&k>2};this._currentPlacementIndex>=0;){var w=a[i[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if("symbol"===w.type&&(!w.minzoom||w.minzoom<=E)&&(!w.maxzoom||w.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new qs(w)),this._inProgressLayer.continuePlacement(r[w.source],this.placement,this._showCollisionBoxes,w,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ms.prototype.commit=function(i){return this.placement.commit(i),this.placement};var kl=512/f.EXTENT/2,Zs=function(i,a,r){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var c=0;c<a.length;c++){var g=a.get(c),_=g.key;this.indexedSymbolInstances[_]||(this.indexedSymbolInstances[_]=[]),this.indexedSymbolInstances[_].push({crossTileID:g.crossTileID,coord:this.getScaledCoordinates(g,i)})}};Zs.prototype.getScaledCoordinates=function(i,a){var r=kl/Math.pow(2,a.canonical.z-this.tileID.canonical.z);return{x:Math.floor((a.canonical.x*f.EXTENT+i.anchorX)*r),y:Math.floor((a.canonical.y*f.EXTENT+i.anchorY)*r)}},Zs.prototype.findMatches=function(i,a,r){for(var c=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z),g=0;g<i.length;g++){var _=i.get(g);if(!_.crossTileID){var w=this.indexedSymbolInstances[_.key];if(w)for(var E=this.getScaledCoordinates(_,a),k=0,N=w;k<N.length;k+=1){var X=N[k];if(Math.abs(X.coord.x-E.x)<=c&&Math.abs(X.coord.y-E.y)<=c&&!r[X.crossTileID]){r[X.crossTileID]=!0,_.crossTileID=X.crossTileID;break}}}}};var Dl=function(){this.maxCrossTileID=0};Dl.prototype.generate=function(){return++this.maxCrossTileID};var $i=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};$i.prototype.handleWrapJump=function(i){var a=Math.round((i-this.lng)/360);if(0!==a)for(var r in this.indexes){var c=this.indexes[r],g={};for(var _ in c){var w=c[_];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+a),g[w.tileID.key]=w}this.indexes[r]=g}this.lng=i},$i.prototype.addBucket=function(i,a,r){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(var c=0;c<a.symbolInstances.length;c++)a.symbolInstances.get(c).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});var g=this.usedCrossTileIDs[i.overscaledZ];for(var _ in this.indexes){var w=this.indexes[_];if(Number(_)>i.overscaledZ)for(var E in w){var k=w[E];k.tileID.isChildOf(i)&&k.findMatches(a.symbolInstances,i,g)}else{var N=w[i.scaledTo(Number(_)).key];N&&N.findMatches(a.symbolInstances,i,g)}}for(var X=0;X<a.symbolInstances.length;X++){var Q=a.symbolInstances.get(X);Q.crossTileID||(Q.crossTileID=r.generate(),g[Q.crossTileID]=!0)}return void 0===this.indexes[i.overscaledZ]&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Zs(i,a.symbolInstances,a.bucketInstanceId),!0},$i.prototype.removeBucketCrossTileIDs=function(i,a){for(var r in a.indexedSymbolInstances)for(var c=0,g=a.indexedSymbolInstances[r];c<g.length;c+=1)delete this.usedCrossTileIDs[i][g[c].crossTileID]},$i.prototype.removeStaleBuckets=function(i){var a=!1;for(var r in this.indexes){var c=this.indexes[r];for(var g in c)i[c[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,c[g]),delete c[g],a=!0)}return a};var Pa=function(){this.layerIndexes={},this.crossTileIDs=new Dl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Pa.prototype.addLayer=function(i,a,r){var c=this.layerIndexes[i.id];void 0===c&&(c=this.layerIndexes[i.id]=new $i);var g=!1,_={};c.handleWrapJump(r);for(var w=0,E=a;w<E.length;w+=1){var k=E[w],N=k.getBucket(i);N&&i.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),c.addBucket(k.tileID,N,this.crossTileIDs)&&(g=!0),_[N.bucketInstanceId]=!0)}return c.removeStaleBuckets(_)&&(g=!0),g},Pa.prototype.pruneUnusedLayers=function(i){var a={};for(var r in i.forEach(function(c){a[c]=!0}),this.layerIndexes)a[r]||delete this.layerIndexes[r]};var go=function(i,a){return f.emitValidationErrors(i,a&&a.filter(function(r){return"source.canvas"!==r.identifier}))},Gs=f.pick(Ve,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),la=f.pick(Ve,["setCenter","setZoom","setBearing","setPitch"]),ua=function(){var i={},a=f.styleSpec.$version;for(var r in f.styleSpec.$root){var c,g=f.styleSpec.$root[r];g.required&&null!=(c="version"===r?a:"array"===g.type?[]:{})&&(i[r]=c)}return i}(),Bo=function(i){function a(r,c){var g=this;void 0===c&&(c={}),i.call(this),this.map=r,this.dispatcher=new Tr(gt(),this),this.imageManager=new Rn,this.imageManager.setEventedParent(this),this.glyphManager=new Qn(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new qn(256,512),this.crossTileSymbolIndex=new Pa,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new f.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",f.getReferrer());var _=this;this._rtlTextPluginCallback=a.registerForPluginStateChange(function(w){_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:w.pluginStatus,pluginURL:w.pluginURL},function(E,k){if(f.triggerPluginCompletionEvent(E),k&&k.every(function(X){return X}))for(var N in _.sourceCaches)_.sourceCaches[N].reload()})}),this.on("data",function(w){if("source"===w.dataType&&"metadata"===w.sourceDataType){var E=g.sourceCaches[w.sourceId];if(E){var k=E.getSource();if(k&&k.vectorLayerIds)for(var N in g._layers){var X=g._layers[N];X.source===k.id&&g._validateLayer(X)}}}})}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.loadURL=function(r,c){var g=this;void 0===c&&(c={}),this.fire(new f.Event("dataloading",{dataType:"style"}));var _="boolean"==typeof c.validate?c.validate:!f.isMapboxURL(r);r=this.map._requestManager.normalizeStyleURL(r,c.accessToken);var w=this.map._requestManager.transformRequest(r,f.ResourceType.Style);this._request=f.getJSON(w,function(E,k){g._request=null,E?g.fire(new f.ErrorEvent(E)):k&&g._load(k,_)})},a.prototype.loadJSON=function(r,c){var g=this;void 0===c&&(c={}),this.fire(new f.Event("dataloading",{dataType:"style"})),this._request=f.browser.frame(function(){g._request=null,g._load(r,!1!==c.validate)})},a.prototype.loadEmpty=function(){this.fire(new f.Event("dataloading",{dataType:"style"})),this._load(ua,!1)},a.prototype._load=function(r,c){if(!c||!go(this,f.validateStyle(r))){for(var g in this._loaded=!0,this.stylesheet=r,r.sources)this.addSource(g,r.sources[g],{validate:!1});r.sprite?this._loadSprite(r.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(r.glyphs);var _=Qe(this.stylesheet.layers);this._order=_.map(function(N){return N.id}),this._layers={},this._serializedLayers={};for(var w=0,E=_;w<E.length;w+=1){var k=E[w];(k=f.createStyleLayer(k)).setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=k,this._serializedLayers[k.id]=k.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new na(this.stylesheet.light),this.fire(new f.Event("data",{dataType:"style"})),this.fire(new f.Event("style.load"))}},a.prototype._loadSprite=function(r){var c=this;this._spriteRequest=function(g,_,w){var E,k,N,X=f.browser.devicePixelRatio>1?"@2x":"",Q=f.getJSON(_.transformRequest(_.normalizeSpriteURL(g,X,".json"),f.ResourceType.SpriteJSON),function(o,v){Q=null,N||(N=o,E=v,le())}),Y=f.getImage(_.transformRequest(_.normalizeSpriteURL(g,X,".png"),f.ResourceType.SpriteImage),function(o,v){Y=null,N||(N=o,k=v,le())});function le(){if(N)w(N);else if(E&&k){var o=f.browser.getImageData(k),v={};for(var l in E){var d=E[l],b=d.width,C=d.height,M=d.x,O=d.y,z=d.sdf,R=d.pixelRatio,D=d.stretchX,P=d.stretchY,q=d.content,W=new f.RGBAImage({width:b,height:C});f.RGBAImage.copy(o,W,{x:M,y:O},{x:0,y:0},{width:b,height:C}),v[l]={data:W,pixelRatio:R,sdf:z,stretchX:D,stretchY:P,content:q}}w(null,v)}}return{cancel:function(){Q&&(Q.cancel(),Q=null),Y&&(Y.cancel(),Y=null)}}}(r,this.map._requestManager,function(g,_){if(c._spriteRequest=null,g)c.fire(new f.ErrorEvent(g));else if(_)for(var w in _)c.imageManager.addImage(w,_[w]);c.imageManager.setLoaded(!0),c._availableImages=c.imageManager.listImages(),c.dispatcher.broadcast("setImages",c._availableImages),c.fire(new f.Event("data",{dataType:"style"}))})},a.prototype._validateLayer=function(r){var c=this.sourceCaches[r.source];if(c){var g=r.sourceLayer;if(g){var _=c.getSource();("geojson"===_.type||_.vectorLayerIds&&-1===_.vectorLayerIds.indexOf(g))&&this.fire(new f.ErrorEvent(new Error('Source layer "'+g+'" does not exist on source "'+_.id+'" as specified by style layer "'+r.id+'"')))}}},a.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()},a.prototype._serializeLayers=function(r){for(var c=[],g=0,_=r;g<_.length;g+=1){var w=this._layers[_[g]];"custom"!==w.type&&c.push(w.serialize())}return c},a.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(var c in this._layers)if(this._layers[c].hasTransition())return!0;return!1},a.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},a.prototype.update=function(r){if(this._loaded){var c=this._changed;if(this._changed){var g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);for(var w in(g.length||_.length)&&this._updateWorkerLayers(g,_),this._updatedSources){var E=this._updatedSources[w];"reload"===E?this._reloadSource(w):"clear"===E&&this._clearSource(w)}for(var k in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[k].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}var N={};for(var X in this.sourceCaches){var Q=this.sourceCaches[X];N[X]=Q.used,Q.used=!1}for(var Y=0,le=this._order;Y<le.length;Y+=1){var o=this._layers[le[Y]];o.recalculate(r,this._availableImages),!o.isHidden(r.zoom)&&o.source&&(this.sourceCaches[o.source].used=!0)}for(var v in N){var l=this.sourceCaches[v];N[v]!==l.used&&l.fire(new f.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(r),this.z=r.zoom,c&&this.fire(new f.Event("data",{dataType:"style"}))}},a.prototype._updateTilesForChangedImages=function(){var r=Object.keys(this._changedImages);if(r.length){for(var c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}},a.prototype._updateWorkerLayers=function(r,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(r),removedIds:c})},a.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},a.prototype.setState=function(r){var c=this;if(this._checkLoaded(),go(this,f.validateStyle(r)))return!1;(r=f.clone$1(r)).layers=Qe(r.layers);var g=function(w,E){if(!w)return[{command:Ve.setStyle,args:[E]}];var k=[];try{if(!f.deepEqual(w.version,E.version))return[{command:Ve.setStyle,args:[E]}];f.deepEqual(w.center,E.center)||k.push({command:Ve.setCenter,args:[E.center]}),f.deepEqual(w.zoom,E.zoom)||k.push({command:Ve.setZoom,args:[E.zoom]}),f.deepEqual(w.bearing,E.bearing)||k.push({command:Ve.setBearing,args:[E.bearing]}),f.deepEqual(w.pitch,E.pitch)||k.push({command:Ve.setPitch,args:[E.pitch]}),f.deepEqual(w.sprite,E.sprite)||k.push({command:Ve.setSprite,args:[E.sprite]}),f.deepEqual(w.glyphs,E.glyphs)||k.push({command:Ve.setGlyphs,args:[E.glyphs]}),f.deepEqual(w.transition,E.transition)||k.push({command:Ve.setTransition,args:[E.transition]}),f.deepEqual(w.light,E.light)||k.push({command:Ve.setLight,args:[E.light]});var N={},X=[];!function(Y,le,o,v){var l;for(l in le=le||{},Y=Y||{})Y.hasOwnProperty(l)&&(le.hasOwnProperty(l)||Pt(l,o,v));for(l in le)le.hasOwnProperty(l)&&(Y.hasOwnProperty(l)?f.deepEqual(Y[l],le[l])||("geojson"===Y[l].type&&"geojson"===le[l].type&&mn(Y,le,l)?o.push({command:Ve.setGeoJSONSourceData,args:[l,le[l].data]}):lt(l,le,o,v)):At(l,le,o))}(w.sources,E.sources,X,N);var Q=[];w.layers&&w.layers.forEach(function(Y){N[Y.source]?k.push({command:Ve.removeLayer,args:[Y.id]}):Q.push(Y)}),k=k.concat(X),function(Y,le,o){le=le||[];var v,l,d,b,C,M,O,z=(Y=Y||[]).map(wn),R=le.map(wn),D=Y.reduce(hn,{}),P=le.reduce(hn,{}),q=z.slice(),W=Object.create(null);for(v=0,l=0;v<z.length;v++)P.hasOwnProperty(d=z[v])?l++:(o.push({command:Ve.removeLayer,args:[d]}),q.splice(q.indexOf(d,l),1));for(v=0,l=0;v<R.length;v++)q[q.length-1-v]!==(d=R[R.length-1-v])&&(D.hasOwnProperty(d)?(o.push({command:Ve.removeLayer,args:[d]}),q.splice(q.lastIndexOf(d,q.length-l),1)):l++,o.push({command:Ve.addLayer,args:[P[d],M=q[q.length-v]]}),q.splice(q.length-v,0,d),W[d]=!0);for(v=0;v<R.length;v++)if(b=D[d=R[v]],C=P[d],!W[d]&&!f.deepEqual(b,C))if(f.deepEqual(b.source,C.source)&&f.deepEqual(b["source-layer"],C["source-layer"])&&f.deepEqual(b.type,C.type)){for(O in Vt(b.layout,C.layout,o,d,null,Ve.setLayoutProperty),Vt(b.paint,C.paint,o,d,null,Ve.setPaintProperty),f.deepEqual(b.filter,C.filter)||o.push({command:Ve.setFilter,args:[d,C.filter]}),f.deepEqual(b.minzoom,C.minzoom)&&f.deepEqual(b.maxzoom,C.maxzoom)||o.push({command:Ve.setLayerZoomRange,args:[d,C.minzoom,C.maxzoom]}),b)b.hasOwnProperty(O)&&"layout"!==O&&"paint"!==O&&"filter"!==O&&"metadata"!==O&&"minzoom"!==O&&"maxzoom"!==O&&(0===O.indexOf("paint.")?Vt(b[O],C[O],o,d,O.slice(6),Ve.setPaintProperty):f.deepEqual(b[O],C[O])||o.push({command:Ve.setLayerProperty,args:[d,O,C[O]]}));for(O in C)C.hasOwnProperty(O)&&!b.hasOwnProperty(O)&&"layout"!==O&&"paint"!==O&&"filter"!==O&&"metadata"!==O&&"minzoom"!==O&&"maxzoom"!==O&&(0===O.indexOf("paint.")?Vt(b[O],C[O],o,d,O.slice(6),Ve.setPaintProperty):f.deepEqual(b[O],C[O])||o.push({command:Ve.setLayerProperty,args:[d,O,C[O]]}))}else o.push({command:Ve.removeLayer,args:[d]}),M=q[q.lastIndexOf(d)+1],o.push({command:Ve.addLayer,args:[C,M]})}(Q,E.layers,k)}catch(Y){console.warn("Unable to compute style diff:",Y),k=[{command:Ve.setStyle,args:[E]}]}return k}(this.serialize(),r).filter(function(w){return!(w.command in la)});if(0===g.length)return!1;var _=g.filter(function(w){return!(w.command in Gs)});if(_.length>0)throw new Error("Unimplemented: "+_.map(function(w){return w.command}).join(", ")+".");return g.forEach(function(w){"setTransition"!==w.command&&c[w.command].apply(c,w.args)}),this.stylesheet=r,!0},a.prototype.addImage=function(r,c){if(this.getImage(r))return this.fire(new f.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(r,c),this._afterImageUpdated(r)},a.prototype.updateImage=function(r,c){this.imageManager.updateImage(r,c)},a.prototype.getImage=function(r){return this.imageManager.getImage(r)},a.prototype.removeImage=function(r){if(!this.getImage(r))return this.fire(new f.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(r),this._afterImageUpdated(r)},a.prototype._afterImageUpdated=function(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new f.Event("data",{dataType:"style"}))},a.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},a.prototype.addSource=function(r,c,g){var _=this;if(void 0===g&&(g={}),this._checkLoaded(),void 0!==this.sourceCaches[r])throw new Error("There is already a source with this ID");if(!c.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(c).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(f.validateStyle.source,"sources."+r,c,null,g))){this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);var w=this.sourceCaches[r]=new te(r,c,this.dispatcher);w.style=this,w.setEventedParent(this,function(){return{isSourceLoaded:_.loaded(),source:w.serialize(),sourceId:r}}),w.onAdd(this.map),this._changed=!0}},a.prototype.removeSource=function(r){if(this._checkLoaded(),void 0===this.sourceCaches[r])throw new Error("There is no source with this ID");for(var c in this._layers)if(this._layers[c].source===r)return this.fire(new f.ErrorEvent(new Error('Source "'+r+'" cannot be removed while layer "'+c+'" is using it.')));var g=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],g.fire(new f.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),g.setEventedParent(null),g.clearTiles(),g.onRemove&&g.onRemove(this.map),this._changed=!0},a.prototype.setGeoJSONSourceData=function(r,c){this._checkLoaded(),this.sourceCaches[r].getSource().setData(c),this._changed=!0},a.prototype.getSource=function(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()},a.prototype.addLayer=function(r,c,g){void 0===g&&(g={}),this._checkLoaded();var _=r.id;if(this.getLayer(_))this.fire(new f.ErrorEvent(new Error('Layer with id "'+_+'" already exists on this map')));else{var w;if("custom"===r.type){if(go(this,f.validateCustomStyleLayer(r)))return;w=f.createStyleLayer(r)}else{if("object"==typeof r.source&&(this.addSource(_,r.source),r=f.clone$1(r),r=f.extend(r,{source:_})),this._validate(f.validateStyle.layer,"layers."+_,r,{arrayIndex:-1},g))return;w=f.createStyleLayer(r),this._validateLayer(w),w.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[w.id]=w.serialize()}var E=c?this._order.indexOf(c):this._order.length;if(c&&-1===E)this.fire(new f.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.')));else{if(this._order.splice(E,0,_),this._layerOrderChanged=!0,this._layers[_]=w,this._removedLayers[_]&&w.source&&"custom"!==w.type){var k=this._removedLayers[_];delete this._removedLayers[_],k.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}},a.prototype.moveLayer=function(r,c){if(this._checkLoaded(),this._changed=!0,this._layers[r]){if(r!==c){var g=this._order.indexOf(r);this._order.splice(g,1);var _=c?this._order.indexOf(c):this._order.length;c&&-1===_?this.fire(new f.ErrorEvent(new Error('Layer with id "'+c+'" does not exist on this map.'))):(this._order.splice(_,0,r),this._layerOrderChanged=!0)}}else this.fire(new f.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be moved.")))},a.prototype.removeLayer=function(r){this._checkLoaded();var c=this._layers[r];if(c){c.setEventedParent(null);var g=this._order.indexOf(r);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}else this.fire(new f.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be removed.")))},a.prototype.getLayer=function(r){return this._layers[r]},a.prototype.hasLayer=function(r){return r in this._layers},a.prototype.setLayerZoomRange=function(r,c,g){this._checkLoaded();var _=this.getLayer(r);_?_.minzoom===c&&_.maxzoom===g||(null!=c&&(_.minzoom=c),null!=g&&(_.maxzoom=g),this._updateLayer(_)):this.fire(new f.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot have zoom extent.")))},a.prototype.setFilter=function(r,c,g){void 0===g&&(g={}),this._checkLoaded();var _=this.getLayer(r);if(_){if(!f.deepEqual(_.filter,c))return null==c?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(f.validateStyle.filter,"layers."+_.id+".filter",c,null,g)||(_.filter=f.clone$1(c),this._updateLayer(_)))}else this.fire(new f.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be filtered.")))},a.prototype.getFilter=function(r){return f.clone$1(this.getLayer(r).filter)},a.prototype.setLayoutProperty=function(r,c,g,_){void 0===_&&(_={}),this._checkLoaded();var w=this.getLayer(r);w?f.deepEqual(w.getLayoutProperty(c),g)||(w.setLayoutProperty(c,g,_),this._updateLayer(w)):this.fire(new f.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be styled.")))},a.prototype.getLayoutProperty=function(r,c){var g=this.getLayer(r);if(g)return g.getLayoutProperty(c);this.fire(new f.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style.")))},a.prototype.setPaintProperty=function(r,c,g,_){void 0===_&&(_={}),this._checkLoaded();var w=this.getLayer(r);w?f.deepEqual(w.getPaintProperty(c),g)||(w.setPaintProperty(c,g,_)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[r]=!0):this.fire(new f.ErrorEvent(new Error("The layer '"+r+"' does not exist in the map's style and cannot be styled.")))},a.prototype.getPaintProperty=function(r,c){return this.getLayer(r).getPaintProperty(c)},a.prototype.setFeatureState=function(r,c){this._checkLoaded();var g=r.source,_=r.sourceLayer,w=this.sourceCaches[g];if(void 0!==w){var E=w.getSource().type;"geojson"===E&&_?this.fire(new f.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==E||_?(void 0===r.id&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),w.setFeatureState(_,r.id,c)):this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},a.prototype.removeFeatureState=function(r,c){this._checkLoaded();var g=r.source,_=this.sourceCaches[g];if(void 0!==_){var w=_.getSource().type,E="vector"===w?r.sourceLayer:void 0;"vector"!==w||E?c&&"string"!=typeof r.id&&"number"!=typeof r.id?this.fire(new f.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(E,r.id,c):this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},a.prototype.getFeatureState=function(r){this._checkLoaded();var c=r.source,g=r.sourceLayer,_=this.sourceCaches[c];if(void 0!==_){if("vector"!==_.getSource().type||g)return void 0===r.id&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),_.getFeatureState(g,r.id);this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+c+"' does not exist in the map's style.")))},a.prototype.getTransition=function(){return f.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},a.prototype.serialize=function(){return f.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:f.mapObject(this.sourceCaches,function(r){return r.serialize()}),layers:this._serializeLayers(this._order)},function(r){return void 0!==r})},a.prototype._updateLayer=function(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&"raster"!==this.sourceCaches[r.source].getSource().type&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._changed=!0},a.prototype._flattenAndSortRenderedFeatures=function(r){for(var c=this,g=function(D){return"fill-extrusion"===c._layers[D].type},_={},w=[],E=this._order.length-1;E>=0;E--){var k=this._order[E];if(g(k)){_[k]=E;for(var N=0,X=r;N<X.length;N+=1){var Q=X[N][k];if(Q)for(var Y=0,le=Q;Y<le.length;Y+=1)w.push(le[Y])}}}w.sort(function(D,P){return P.intersectionZ-D.intersectionZ});for(var o=[],v=this._order.length-1;v>=0;v--){var l=this._order[v];if(g(l))for(var d=w.length-1;d>=0;d--){var b=w[d].feature;if(_[b.layer.id]<v)break;o.push(b),w.pop()}else for(var C=0,M=r;C<M.length;C+=1){var O=M[C][l];if(O)for(var z=0,R=O;z<R.length;z+=1)o.push(R[z].feature)}}return o},a.prototype.queryRenderedFeatures=function(r,c,g){c&&c.filter&&this._validate(f.validateStyle.filter,"queryRenderedFeatures.filter",c.filter,null,c);var _={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new f.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var w=0,E=c.layers;w<E.length;w+=1){var k=E[w],N=this._layers[k];if(!N)return this.fire(new f.ErrorEvent(new Error("The layer '"+k+"' does not exist in the map's style and cannot be queried for features."))),[];_[N.source]=!0}}var X=[];for(var Q in c.availableImages=this._availableImages,this.sourceCaches)c.layers&&!_[Q]||X.push(Ji(this.sourceCaches[Q],this._layers,this._serializedLayers,r,c,g));return this.placement&&X.push(function(Y,le,o,v,l,d,b){for(var C={},M=d.queryRenderedSymbols(v),O=[],z=0,R=Object.keys(M).map(Number);z<R.length;z+=1)O.push(b[R[z]]);O.sort(Ir);for(var D=function(){var ae=q[P],re=ae.featureIndex.lookupSymbolFeatures(M[ae.bucketInstanceId],le,ae.bucketIndex,ae.sourceLayerIndex,l.filter,l.layers,l.availableImages,Y);for(var ue in re){var _e=C[ue]=C[ue]||[],ve=re[ue];ve.sort(function(De,Oe){var xe=ae.featureSortOrder;if(xe){var Te=xe.indexOf(De.featureIndex);return xe.indexOf(Oe.featureIndex)-Te}return Oe.featureIndex-De.featureIndex});for(var Ee=0,Me=ve;Ee<Me.length;Ee+=1)_e.push(Me[Ee])}},P=0,q=O;P<q.length;P+=1)D();var W=function(ae){C[ae].forEach(function(re){var ue=re.feature,_e=o[Y[ae].source].getFeatureState(ue.layer["source-layer"],ue.id);ue.source=ue.layer.source,ue.layer["source-layer"]&&(ue.sourceLayer=ue.layer["source-layer"]),ue.state=_e})};for(var K in C)W(K);return C}(this._layers,this._serializedLayers,this.sourceCaches,r,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(X)},a.prototype.querySourceFeatures=function(r,c){c&&c.filter&&this._validate(f.validateStyle.filter,"querySourceFeatures.filter",c.filter,null,c);var g=this.sourceCaches[r];return g?function(_,w){for(var E=_.getRenderableIds().map(function(le){return _.getTileByID(le)}),k=[],N={},X=0;X<E.length;X++){var Q=E[X],Y=Q.tileID.canonical.key;N[Y]||(N[Y]=!0,Q.querySourceFeatures(k,w))}return k}(g,c):[]},a.prototype.addSourceType=function(r,c,g){return a.getSourceType(r)?g(new Error('A source type called "'+r+'" already exists.')):(a.setSourceType(r,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:r,url:c.workerSourceURL},g):g(null,null))},a.prototype.getLight=function(){return this.light.getLight()},a.prototype.setLight=function(r,c){void 0===c&&(c={}),this._checkLoaded();var g=this.light.getLight(),_=!1;for(var w in r)if(!f.deepEqual(r[w],g[w])){_=!0;break}if(_){var E={now:f.browser.now(),transition:f.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(E)}},a.prototype._validate=function(r,c,g,_,w){return void 0===w&&(w={}),(!w||!1!==w.validate)&&go(this,r.call(f.validateStyle,f.extend({key:c,style:this.serialize(),value:g,styleSpec:f.styleSpec},_)))},a.prototype._remove=function(){for(var r in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),f.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[r].setEventedParent(null);for(var c in this.sourceCaches)this.sourceCaches[c].clearTiles(),this.sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},a.prototype._clearSource=function(r){this.sourceCaches[r].clearTiles()},a.prototype._reloadSource=function(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()},a.prototype._updateSources=function(r){for(var c in this.sourceCaches)this.sourceCaches[c].update(r)},a.prototype._generateCollisionBoxes=function(){for(var r in this.sourceCaches)this._reloadSource(r)},a.prototype._updatePlacement=function(r,c,g,_,w){void 0===w&&(w=!1);for(var E=!1,k=!1,N={},X=0,Q=this._order;X<Q.length;X+=1){var Y=this._layers[Q[X]];if("symbol"===Y.type){if(!N[Y.source]){var le=this.sourceCaches[Y.source];N[Y.source]=le.getRenderableIds(!0).map(function(b){return le.getTileByID(b)}).sort(function(b,C){return C.tileID.overscaledZ-b.tileID.overscaledZ||(b.tileID.isLessThan(C.tileID)?-1:1)})}var o=this.crossTileSymbolIndex.addLayer(Y,N[Y.source],r.center.lng);E=E||o}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||0===g)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(f.browser.now(),r.zoom))&&(this.pauseablePlacement=new ms(r,this._order,w,c,g,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(f.browser.now()),k=!0),E&&this.pauseablePlacement.placement.setStale()),k||E)for(var v=0,l=this._order;v<l.length;v+=1){var d=this._layers[l[v]];"symbol"===d.type&&this.placement.updateLayerOpacities(d,N[d.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(f.browser.now())},a.prototype._releaseSymbolFadeTiles=function(){for(var r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()},a.prototype.getImages=function(r,c,g){this.imageManager.getImages(c.icons,g),this._updateTilesForChangedImages();var _=this.sourceCaches[c.source];_&&_.setDependencies(c.tileID.key,c.type,c.icons)},a.prototype.getGlyphs=function(r,c,g){this.glyphManager.getGlyphs(c.stacks,g)},a.prototype.getResource=function(r,c,g){return f.makeRequest(c,g)},a}(f.Evented);Bo.getSourceType=function(i){return ia[i]},Bo.setSourceType=function(i,a){ia[i]=a},Bo.registerForPluginStateChange=f.registerForPluginStateChange;var no=f.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ot=Sn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),vn=Sn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),du=Sn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Hu=Sn("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Xu=Sn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ll=Sn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Ol=Sn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Rl=Sn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),js=Sn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),mu=Sn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),wi=Sn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),gu=Sn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Fo=Sn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Qa=Sn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ws=Sn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),dn=Sn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Hs=Sn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),No=Sn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),vo=Sn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ca=Sn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Uo=Sn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Vo=Sn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),fi=Sn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),za=Sn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),oi=Sn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),vu=Sn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Sn(i,a){var r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=a.match(/attribute ([\w]+) ([\w]+)/g),g=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=_?_.concat(g):g,E={};return{fragmentSource:i=i.replace(r,function(k,N,X,Q,Y){return E[Y]=!0,"define"===N?"\n#ifndef HAS_UNIFORM_u_"+Y+"\nvarying "+X+" "+Q+" "+Y+";\n#else\nuniform "+X+" "+Q+" u_"+Y+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Y+"\n    "+X+" "+Q+" "+Y+" = u_"+Y+";\n#endif\n"}),vertexSource:a=a.replace(r,function(k,N,X,Q,Y){var le="float"===Q?"vec2":"vec4",o=Y.match(/color/)?"color":le;return E[Y]?"define"===N?"\n#ifndef HAS_UNIFORM_u_"+Y+"\nuniform lowp float u_"+Y+"_t;\nattribute "+X+" "+le+" a_"+Y+";\nvarying "+X+" "+Q+" "+Y+";\n#else\nuniform "+X+" "+Q+" u_"+Y+";\n#endif\n":"vec4"===o?"\n#ifndef HAS_UNIFORM_u_"+Y+"\n    "+Y+" = a_"+Y+";\n#else\n    "+X+" "+Q+" "+Y+" = u_"+Y+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Y+"\n    "+Y+" = unpack_mix_"+o+"(a_"+Y+", u_"+Y+"_t);\n#else\n    "+X+" "+Q+" "+Y+" = u_"+Y+";\n#endif\n":"define"===N?"\n#ifndef HAS_UNIFORM_u_"+Y+"\nuniform lowp float u_"+Y+"_t;\nattribute "+X+" "+le+" a_"+Y+";\n#else\nuniform "+X+" "+Q+" u_"+Y+";\n#endif\n":"vec4"===o?"\n#ifndef HAS_UNIFORM_u_"+Y+"\n    "+X+" "+Q+" "+Y+" = a_"+Y+";\n#else\n    "+X+" "+Q+" "+Y+" = u_"+Y+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Y+"\n    "+X+" "+Q+" "+Y+" = unpack_mix_"+o+"(a_"+Y+", u_"+Y+"_t);\n#else\n    "+X+" "+Q+" "+Y+" = u_"+Y+";\n#endif\n"}),staticAttributes:c,staticUniforms:w}}var zr=Object.freeze({__proto__:null,prelude:Ot,background:vn,backgroundPattern:du,circle:Hu,clippingMask:Xu,heatmap:Ll,heatmapTexture:Ol,collisionBox:Rl,collisionCircle:js,debug:mu,fill:wi,fillOutline:gu,fillOutlinePattern:Fo,fillPattern:Qa,fillExtrusion:Ws,fillExtrusionPattern:dn,hillshadePrepare:Hs,hillshade:No,line:vo,lineGradient:ca,linePattern:Uo,lineSDF:Vo,raster:fi,symbolIcon:za,symbolSDF:oi,symbolTextAndIcon:vu}),ka=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Xs(i){for(var a=[],r=0;r<i.length;r++)if(null!==i[r]){var c=i[r].split(" ");a.push(c.pop())}return a}ka.prototype.bind=function(i,a,r,c,g,_,w,E){this.context=i;for(var k=this.boundPaintVertexBuffers.length!==c.length,N=0;!k&&N<c.length;N++)this.boundPaintVertexBuffers[N]!==c[N]&&(k=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===a&&this.boundLayoutVertexBuffer===r&&!k&&this.boundIndexBuffer===g&&this.boundVertexOffset===_&&this.boundDynamicVertexBuffer===w&&this.boundDynamicVertexBuffer2===E?(i.bindVertexArrayOES.set(this.vao),w&&w.bind(),g&&g.dynamicDraw&&g.bind(),E&&E.bind()):this.freshBind(a,r,c,g,_,w,E)},ka.prototype.freshBind=function(i,a,r,c,g,_,w){var E,k=i.numAttributes,N=this.context,X=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),E=0,this.boundProgram=i,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=c,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=_,this.boundDynamicVertexBuffer2=w;else{E=N.currentNumAttributes||0;for(var Q=k;Q<E;Q++)X.disableVertexAttribArray(Q)}a.enableAttributes(X,i);for(var Y=0,le=r;Y<le.length;Y+=1)le[Y].enableAttributes(X,i);_&&_.enableAttributes(X,i),w&&w.enableAttributes(X,i),a.bind(),a.setVertexAttribPointers(X,i,g);for(var o=0,v=r;o<v.length;o+=1){var l=v[o];l.bind(),l.setVertexAttribPointers(X,i,g)}_&&(_.bind(),_.setVertexAttribPointers(X,i,g)),c&&c.bind(),w&&(w.bind(),w.setVertexAttribPointers(X,i,g)),N.currentNumAttributes=k},ka.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Fn=function(i,a,r,c,g,_){var w=i.gl;this.program=w.createProgram();for(var E=Xs(r.staticAttributes),k=c?c.getBinderAttributes():[],N=E.concat(k),X=r.staticUniforms?Xs(r.staticUniforms):[],Q=c?c.getBinderUniforms():[],Y=[],le=0,o=X.concat(Q);le<o.length;le+=1){var v=o[le];Y.indexOf(v)<0&&Y.push(v)}var l=c?c.defines():[];_&&l.push("#define OVERDRAW_INSPECTOR;");var d=l.concat(Ot.fragmentSource,r.fragmentSource).join("\n"),b=l.concat(Ot.vertexSource,r.vertexSource).join("\n"),C=w.createShader(w.FRAGMENT_SHADER);if(w.isContextLost())this.failedToCreate=!0;else{w.shaderSource(C,d),w.compileShader(C),w.attachShader(this.program,C);var M=w.createShader(w.VERTEX_SHADER);if(w.isContextLost())this.failedToCreate=!0;else{w.shaderSource(M,b),w.compileShader(M),w.attachShader(this.program,M),this.attributes={};var O={};this.numAttributes=N.length;for(var z=0;z<this.numAttributes;z++)N[z]&&(w.bindAttribLocation(this.program,z,N[z]),this.attributes[N[z]]=z);w.linkProgram(this.program),w.deleteShader(M),w.deleteShader(C);for(var R=0;R<Y.length;R++){var D=Y[R];if(D&&!O[D]){var P=w.getUniformLocation(this.program,D);P&&(O[D]=P)}}this.fixedUniforms=g(i,O),this.binderUniforms=c?c.getUniforms(i,O):[]}}};function $o(i,a,r){var c=1/Vi(r,1,a.transform.tileZoom),g=Math.pow(2,r.tileID.overscaledZ),_=r.tileSize*Math.pow(2,a.transform.tileZoom)/g,w=_*(r.tileID.canonical.x+r.tileID.wrap*g),E=_*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[c,i.fromScale,i.toScale],u_fade:i.t,u_pixel_coord_upper:[w>>16,E>>16],u_pixel_coord_lower:[65535&w,65535&E]}}Fn.prototype.draw=function(i,a,r,c,g,_,w,E,k,N,X,Q,Y,le,o,v){var l,d=i.gl;if(!this.failedToCreate){for(var b in i.program.set(this.program),i.setDepthMode(r),i.setStencilMode(c),i.setColorMode(g),i.setCullFace(_),this.fixedUniforms)this.fixedUniforms[b].set(w[b]);le&&le.setUniforms(i,this.binderUniforms,Q,{zoom:Y});for(var C=(l={},l[d.LINES]=2,l[d.TRIANGLES]=3,l[d.LINE_STRIP]=1,l)[a],M=0,O=X.get();M<O.length;M+=1){var z=O[M],R=z.vaos||(z.vaos={});(R[E]||(R[E]=new ka)).bind(i,this,k,le?le.getPaintVertexBuffers():[],N,z.vertexOffset,o,v),d.drawElements(a,z.primitiveLength*C,d.UNSIGNED_SHORT,z.primitiveOffset*C*2)}}};var Ys=function(i,a,r,c){var g=a.style.light,_=g.properties.get("position"),w=[_.x,_.y,_.z],E=f.create$1();"viewport"===g.properties.get("anchor")&&f.fromRotation(E,-a.transform.angle),f.transformMat3(w,w,E);var k=g.properties.get("color");return{u_matrix:i,u_lightpos:w,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+r,u_opacity:c}},Yu=function(i,a,r,c,g,_,w){return f.extend(Ys(i,a,r,c),$o(_,a,w),{u_height_factor:-Math.pow(2,g.overscaledZ)/w.tileSize/8})},yo=function(i){return{u_matrix:i}},pa=function(i,a,r,c){return f.extend(yo(i),$o(r,a,c))},es=function(i,a){return{u_matrix:i,u_world:a}},Bl=function(i,a,r,c,g){return f.extend(pa(i,a,r,c),{u_world:g})},Fl=function(i,a,r,c){var g,_,w=i.transform;if("map"===c.paint.get("circle-pitch-alignment")){var E=Vi(r,1,w.zoom);g=!0,_=[E,E]}else g=!1,_=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+("map"===c.paint.get("circle-pitch-scale")),u_matrix:i.translatePosMatrix(a.posMatrix,r,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:f.browser.devicePixelRatio,u_extrude_scale:_}},ha=function(i,a,r){var c=Vi(r,1,a.zoom),g=Math.pow(2,a.zoom-r.tileID.overscaledZ),_=r.tileID.overscaleFactor();return{u_matrix:i,u_camera_to_center_distance:a.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[a.pixelsToGLUnits[0]/(c*g),a.pixelsToGLUnits[1]/(c*g)],u_overscale_factor:_}},mr=function(i,a,r){return{u_matrix:i,u_inv_matrix:a,u_camera_to_center_distance:r.cameraToCenterDistance,u_viewport_size:[r.width,r.height]}},gr=function(i,a,r){return void 0===r&&(r=1),{u_matrix:i,u_color:a,u_overlay:0,u_overlay_scale:r}},qr=function(i){return{u_matrix:i}},Da=function(i,a,r,c){return{u_matrix:i,u_extrude_scale:Vi(a,1,r),u_intensity:c}},gs=function(i,a,r){var c=i.transform;return{u_matrix:La(i,a,r),u_ratio:1/Vi(a,1,c.zoom),u_device_pixel_ratio:f.browser.devicePixelRatio,u_units_to_pixels:[1/c.pixelsToGLUnits[0],1/c.pixelsToGLUnits[1]]}},Ks=function(i,a,r,c){return f.extend(gs(i,a,r),{u_image:0,u_image_height:c})},yn=function(i,a,r,c){var g=i.transform,_=Ul(a,g);return{u_matrix:La(i,a,r),u_texsize:a.imageAtlasTexture.size,u_ratio:1/Vi(a,1,g.zoom),u_device_pixel_ratio:f.browser.devicePixelRatio,u_image:0,u_scale:[_,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Nl=function(i,a,r,c,g){var _=i.lineAtlas,w=Ul(a,i.transform),E="round"===r.layout.get("line-cap"),k=_.getDash(c.from,E),N=_.getDash(c.to,E),X=k.width*g.fromScale,Q=N.width*g.toScale;return f.extend(gs(i,a,r),{u_patternscale_a:[w/X,-k.height/2],u_patternscale_b:[w/Q,-N.height/2],u_sdfgamma:_.width/(256*Math.min(X,Q)*f.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:N.y,u_mix:g.t})};function Ul(i,a){return 1/Vi(i,1,a.tileZoom)}function La(i,a,r){return i.translatePosMatrix(a.tileID.posMatrix,a,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}var Mc=function(i,a,r,c,g){return{u_matrix:i,u_tl_parent:a,u_scale_parent:r,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(w=g.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Ku(g.paint.get("raster-hue-rotate"))};var _,w};function Ku(i){i*=Math.PI/180;var a=Math.sin(i),r=Math.cos(i);return[(2*r+1)/3,(-Math.sqrt(3)*a-r+1)/3,(Math.sqrt(3)*a-r+1)/3]}var qi,Vl=function(i,a,r,c,g,_,w,E,k,N){var X=g.transform;return{u_is_size_zoom_constant:+("constant"===i||"source"===i),u_is_size_feature_constant:+("constant"===i||"camera"===i),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:X.width/X.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:w,u_coord_matrix:E,u_is_text:+k,u_pitch_with_map:+c,u_texsize:N,u_texture:0}},qo=function(i,a,r,c,g,_,w,E,k,N,X){var Q=g.transform;return f.extend(Vl(i,a,r,c,g,_,w,E,k,N),{u_gamma_scale:c?Math.cos(Q._pitch)*Q.cameraToCenterDistance:1,u_device_pixel_ratio:f.browser.devicePixelRatio,u_is_halo:+X})},Js=function(i,a,r,c,g,_,w,E,k,N){return f.extend(qo(i,a,r,c,g,_,w,E,!0,k,!0),{u_texsize_icon:N,u_texture_icon:1})},Qs=function(i,a,r){return{u_matrix:i,u_opacity:a,u_color:r}},el=function(i,a,r,c,g,_){return f.extend((E=_,N=g,X=(k=r).imageManager.getPattern((w=c).from.toString()),Q=k.imageManager.getPattern(w.to.toString()),le=(Y=k.imageManager.getPixelSize()).width,o=Y.height,v=Math.pow(2,N.tileID.overscaledZ),d=(l=N.tileSize*Math.pow(2,k.transform.tileZoom)/v)*(N.tileID.canonical.x+N.tileID.wrap*v),b=l*N.tileID.canonical.y,{u_image:0,u_pattern_tl_a:X.tl,u_pattern_br_a:X.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[le,o],u_mix:E.t,u_pattern_size_a:X.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Vi(N,1,k.transform.tileZoom),u_pixel_coord_upper:[d>>16,b>>16],u_pixel_coord_lower:[65535&d,65535&b]}),{u_matrix:i,u_opacity:a});var w,E,k,N,X,Q,Y,le,o,v,l,d,b},vs={fillExtrusion:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_lightpos:new f.Uniform3f(i,a.u_lightpos),u_lightintensity:new f.Uniform1f(i,a.u_lightintensity),u_lightcolor:new f.Uniform3f(i,a.u_lightcolor),u_vertical_gradient:new f.Uniform1f(i,a.u_vertical_gradient),u_opacity:new f.Uniform1f(i,a.u_opacity)}},fillExtrusionPattern:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_lightpos:new f.Uniform3f(i,a.u_lightpos),u_lightintensity:new f.Uniform1f(i,a.u_lightintensity),u_lightcolor:new f.Uniform3f(i,a.u_lightcolor),u_vertical_gradient:new f.Uniform1f(i,a.u_vertical_gradient),u_height_factor:new f.Uniform1f(i,a.u_height_factor),u_image:new f.Uniform1i(i,a.u_image),u_texsize:new f.Uniform2f(i,a.u_texsize),u_pixel_coord_upper:new f.Uniform2f(i,a.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(i,a.u_pixel_coord_lower),u_scale:new f.Uniform3f(i,a.u_scale),u_fade:new f.Uniform1f(i,a.u_fade),u_opacity:new f.Uniform1f(i,a.u_opacity)}},fill:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix)}},fillPattern:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_image:new f.Uniform1i(i,a.u_image),u_texsize:new f.Uniform2f(i,a.u_texsize),u_pixel_coord_upper:new f.Uniform2f(i,a.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(i,a.u_pixel_coord_lower),u_scale:new f.Uniform3f(i,a.u_scale),u_fade:new f.Uniform1f(i,a.u_fade)}},fillOutline:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_world:new f.Uniform2f(i,a.u_world)}},fillOutlinePattern:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_world:new f.Uniform2f(i,a.u_world),u_image:new f.Uniform1i(i,a.u_image),u_texsize:new f.Uniform2f(i,a.u_texsize),u_pixel_coord_upper:new f.Uniform2f(i,a.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(i,a.u_pixel_coord_lower),u_scale:new f.Uniform3f(i,a.u_scale),u_fade:new f.Uniform1f(i,a.u_fade)}},circle:function(i,a){return{u_camera_to_center_distance:new f.Uniform1f(i,a.u_camera_to_center_distance),u_scale_with_map:new f.Uniform1i(i,a.u_scale_with_map),u_pitch_with_map:new f.Uniform1i(i,a.u_pitch_with_map),u_extrude_scale:new f.Uniform2f(i,a.u_extrude_scale),u_device_pixel_ratio:new f.Uniform1f(i,a.u_device_pixel_ratio),u_matrix:new f.UniformMatrix4f(i,a.u_matrix)}},collisionBox:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_camera_to_center_distance:new f.Uniform1f(i,a.u_camera_to_center_distance),u_pixels_to_tile_units:new f.Uniform1f(i,a.u_pixels_to_tile_units),u_extrude_scale:new f.Uniform2f(i,a.u_extrude_scale),u_overscale_factor:new f.Uniform1f(i,a.u_overscale_factor)}},collisionCircle:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_inv_matrix:new f.UniformMatrix4f(i,a.u_inv_matrix),u_camera_to_center_distance:new f.Uniform1f(i,a.u_camera_to_center_distance),u_viewport_size:new f.Uniform2f(i,a.u_viewport_size)}},debug:function(i,a){return{u_color:new f.UniformColor(i,a.u_color),u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_overlay:new f.Uniform1i(i,a.u_overlay),u_overlay_scale:new f.Uniform1f(i,a.u_overlay_scale)}},clippingMask:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix)}},heatmap:function(i,a){return{u_extrude_scale:new f.Uniform1f(i,a.u_extrude_scale),u_intensity:new f.Uniform1f(i,a.u_intensity),u_matrix:new f.UniformMatrix4f(i,a.u_matrix)}},heatmapTexture:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_world:new f.Uniform2f(i,a.u_world),u_image:new f.Uniform1i(i,a.u_image),u_color_ramp:new f.Uniform1i(i,a.u_color_ramp),u_opacity:new f.Uniform1f(i,a.u_opacity)}},hillshade:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_image:new f.Uniform1i(i,a.u_image),u_latrange:new f.Uniform2f(i,a.u_latrange),u_light:new f.Uniform2f(i,a.u_light),u_shadow:new f.UniformColor(i,a.u_shadow),u_highlight:new f.UniformColor(i,a.u_highlight),u_accent:new f.UniformColor(i,a.u_accent)}},hillshadePrepare:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_image:new f.Uniform1i(i,a.u_image),u_dimension:new f.Uniform2f(i,a.u_dimension),u_zoom:new f.Uniform1f(i,a.u_zoom),u_unpack:new f.Uniform4f(i,a.u_unpack)}},line:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_ratio:new f.Uniform1f(i,a.u_ratio),u_device_pixel_ratio:new f.Uniform1f(i,a.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(i,a.u_units_to_pixels)}},lineGradient:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_ratio:new f.Uniform1f(i,a.u_ratio),u_device_pixel_ratio:new f.Uniform1f(i,a.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(i,a.u_units_to_pixels),u_image:new f.Uniform1i(i,a.u_image),u_image_height:new f.Uniform1f(i,a.u_image_height)}},linePattern:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_texsize:new f.Uniform2f(i,a.u_texsize),u_ratio:new f.Uniform1f(i,a.u_ratio),u_device_pixel_ratio:new f.Uniform1f(i,a.u_device_pixel_ratio),u_image:new f.Uniform1i(i,a.u_image),u_units_to_pixels:new f.Uniform2f(i,a.u_units_to_pixels),u_scale:new f.Uniform3f(i,a.u_scale),u_fade:new f.Uniform1f(i,a.u_fade)}},lineSDF:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_ratio:new f.Uniform1f(i,a.u_ratio),u_device_pixel_ratio:new f.Uniform1f(i,a.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(i,a.u_units_to_pixels),u_patternscale_a:new f.Uniform2f(i,a.u_patternscale_a),u_patternscale_b:new f.Uniform2f(i,a.u_patternscale_b),u_sdfgamma:new f.Uniform1f(i,a.u_sdfgamma),u_image:new f.Uniform1i(i,a.u_image),u_tex_y_a:new f.Uniform1f(i,a.u_tex_y_a),u_tex_y_b:new f.Uniform1f(i,a.u_tex_y_b),u_mix:new f.Uniform1f(i,a.u_mix)}},raster:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_tl_parent:new f.Uniform2f(i,a.u_tl_parent),u_scale_parent:new f.Uniform1f(i,a.u_scale_parent),u_buffer_scale:new f.Uniform1f(i,a.u_buffer_scale),u_fade_t:new f.Uniform1f(i,a.u_fade_t),u_opacity:new f.Uniform1f(i,a.u_opacity),u_image0:new f.Uniform1i(i,a.u_image0),u_image1:new f.Uniform1i(i,a.u_image1),u_brightness_low:new f.Uniform1f(i,a.u_brightness_low),u_brightness_high:new f.Uniform1f(i,a.u_brightness_high),u_saturation_factor:new f.Uniform1f(i,a.u_saturation_factor),u_contrast_factor:new f.Uniform1f(i,a.u_contrast_factor),u_spin_weights:new f.Uniform3f(i,a.u_spin_weights)}},symbolIcon:function(i,a){return{u_is_size_zoom_constant:new f.Uniform1i(i,a.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(i,a.u_is_size_feature_constant),u_size_t:new f.Uniform1f(i,a.u_size_t),u_size:new f.Uniform1f(i,a.u_size),u_camera_to_center_distance:new f.Uniform1f(i,a.u_camera_to_center_distance),u_pitch:new f.Uniform1f(i,a.u_pitch),u_rotate_symbol:new f.Uniform1i(i,a.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(i,a.u_aspect_ratio),u_fade_change:new f.Uniform1f(i,a.u_fade_change),u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(i,a.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(i,a.u_coord_matrix),u_is_text:new f.Uniform1i(i,a.u_is_text),u_pitch_with_map:new f.Uniform1i(i,a.u_pitch_with_map),u_texsize:new f.Uniform2f(i,a.u_texsize),u_texture:new f.Uniform1i(i,a.u_texture)}},symbolSDF:function(i,a){return{u_is_size_zoom_constant:new f.Uniform1i(i,a.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(i,a.u_is_size_feature_constant),u_size_t:new f.Uniform1f(i,a.u_size_t),u_size:new f.Uniform1f(i,a.u_size),u_camera_to_center_distance:new f.Uniform1f(i,a.u_camera_to_center_distance),u_pitch:new f.Uniform1f(i,a.u_pitch),u_rotate_symbol:new f.Uniform1i(i,a.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(i,a.u_aspect_ratio),u_fade_change:new f.Uniform1f(i,a.u_fade_change),u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(i,a.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(i,a.u_coord_matrix),u_is_text:new f.Uniform1i(i,a.u_is_text),u_pitch_with_map:new f.Uniform1i(i,a.u_pitch_with_map),u_texsize:new f.Uniform2f(i,a.u_texsize),u_texture:new f.Uniform1i(i,a.u_texture),u_gamma_scale:new f.Uniform1f(i,a.u_gamma_scale),u_device_pixel_ratio:new f.Uniform1f(i,a.u_device_pixel_ratio),u_is_halo:new f.Uniform1i(i,a.u_is_halo)}},symbolTextAndIcon:function(i,a){return{u_is_size_zoom_constant:new f.Uniform1i(i,a.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(i,a.u_is_size_feature_constant),u_size_t:new f.Uniform1f(i,a.u_size_t),u_size:new f.Uniform1f(i,a.u_size),u_camera_to_center_distance:new f.Uniform1f(i,a.u_camera_to_center_distance),u_pitch:new f.Uniform1f(i,a.u_pitch),u_rotate_symbol:new f.Uniform1i(i,a.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(i,a.u_aspect_ratio),u_fade_change:new f.Uniform1f(i,a.u_fade_change),u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(i,a.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(i,a.u_coord_matrix),u_is_text:new f.Uniform1i(i,a.u_is_text),u_pitch_with_map:new f.Uniform1i(i,a.u_pitch_with_map),u_texsize:new f.Uniform2f(i,a.u_texsize),u_texsize_icon:new f.Uniform2f(i,a.u_texsize_icon),u_texture:new f.Uniform1i(i,a.u_texture),u_texture_icon:new f.Uniform1i(i,a.u_texture_icon),u_gamma_scale:new f.Uniform1f(i,a.u_gamma_scale),u_device_pixel_ratio:new f.Uniform1f(i,a.u_device_pixel_ratio),u_is_halo:new f.Uniform1i(i,a.u_is_halo)}},background:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_opacity:new f.Uniform1f(i,a.u_opacity),u_color:new f.UniformColor(i,a.u_color)}},backgroundPattern:function(i,a){return{u_matrix:new f.UniformMatrix4f(i,a.u_matrix),u_opacity:new f.Uniform1f(i,a.u_opacity),u_image:new f.Uniform1i(i,a.u_image),u_pattern_tl_a:new f.Uniform2f(i,a.u_pattern_tl_a),u_pattern_br_a:new f.Uniform2f(i,a.u_pattern_br_a),u_pattern_tl_b:new f.Uniform2f(i,a.u_pattern_tl_b),u_pattern_br_b:new f.Uniform2f(i,a.u_pattern_br_b),u_texsize:new f.Uniform2f(i,a.u_texsize),u_mix:new f.Uniform1f(i,a.u_mix),u_pattern_size_a:new f.Uniform2f(i,a.u_pattern_size_a),u_pattern_size_b:new f.Uniform2f(i,a.u_pattern_size_b),u_scale_a:new f.Uniform1f(i,a.u_scale_a),u_scale_b:new f.Uniform1f(i,a.u_scale_b),u_pixel_coord_upper:new f.Uniform2f(i,a.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(i,a.u_pixel_coord_lower),u_tile_units_to_pixels:new f.Uniform1f(i,a.u_tile_units_to_pixels)}}};function yu(i,a,r,c,g,_,w){for(var E=i.context,k=E.gl,N=i.useProgram("collisionBox"),X=[],Q=0,Y=0,le=0;le<c.length;le++){var o=c[le],v=a.getTile(o),l=v.getBucket(r);if(l){var d=o.posMatrix;0===g[0]&&0===g[1]||(d=i.translatePosMatrix(o.posMatrix,v,g,_));var b=w?l.textCollisionBox:l.iconCollisionBox,C=l.collisionCircleArray;if(C.length>0){var M=f.create(),O=d;f.mul(M,l.placementInvProjMatrix,i.transform.glCoordMatrix),f.mul(M,M,l.placementViewportMatrix),X.push({circleArray:C,circleOffset:Y,transform:O,invTransform:M}),Y=Q+=C.length/4}b&&N.draw(E,k.LINES,ee.disabled,ie.disabled,i.colorModeForRenderPass(),be.disabled,ha(d,i.transform,v),r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,i.transform.zoom,null,null,b.collisionVertexBuffer)}}if(w&&X.length){var z=i.useProgram("collisionCircle"),R=new f.StructArrayLayout2f1f2i16;R.resize(4*Q),R._trim();for(var D=0,P=0,q=X;P<q.length;P+=1)for(var W=q[P],K=0;K<W.circleArray.length/4;K++){var ae=4*K,re=W.circleArray[ae+0],ue=W.circleArray[ae+1],_e=W.circleArray[ae+2],ve=W.circleArray[ae+3];R.emplace(D++,re,ue,_e,ve,0),R.emplace(D++,re,ue,_e,ve,1),R.emplace(D++,re,ue,_e,ve,2),R.emplace(D++,re,ue,_e,ve,3)}(!qi||qi.length<2*Q)&&(qi=function(Re){var ke=2*Re,We=new f.StructArrayLayout3ui6;We.resize(ke),We._trim();for(var Ke=0;Ke<ke;Ke++){var mt=6*Ke;We.uint16[mt+0]=4*Ke+0,We.uint16[mt+1]=4*Ke+1,We.uint16[mt+2]=4*Ke+2,We.uint16[mt+3]=4*Ke+2,We.uint16[mt+4]=4*Ke+3,We.uint16[mt+5]=4*Ke+0}return We}(Q));for(var Ee=E.createIndexBuffer(qi,!0),Me=E.createVertexBuffer(R,f.collisionCircleLayout.members,!0),De=0,Oe=X;De<Oe.length;De+=1){var xe=Oe[De],Te=mr(xe.transform,xe.invTransform,i.transform);z.draw(E,k.TRIANGLES,ee.disabled,ie.disabled,i.colorModeForRenderPass(),be.disabled,Te,r.id,Me,Ee,f.SegmentVector.simpleSegment(0,2*xe.circleOffset,xe.circleArray.length,xe.circleArray.length/2),null,i.transform.zoom,null,null,null)}Me.destroy(),Ee.destroy()}}var tl=f.identity(new Float32Array(16));function _o(i,a,r,c,g,_){var w=f.getAnchorAlignment(i),E=-(w.horizontalAlign-.5)*a,k=-(w.verticalAlign-.5)*r,N=f.evaluateVariableOffset(i,c);return new f.Point((E/g+N[0])*_,(k/g+N[1])*_)}function ts(i,a,r,c,g,_,w,E,k,N,X){var Q=i.text.placedSymbolArray,Y=i.text.dynamicLayoutVertexArray,le=i.icon.dynamicLayoutVertexArray,o={};Y.clear();for(var v=0;v<Q.length;v++){var l=Q.get(v),d=l.hidden||!l.crossTileID||i.allowVerticalPlacement&&!l.placedOrientation?null:c[l.crossTileID];if(d){var b=new f.Point(l.anchorX,l.anchorY),C=Lt(b,r?E:w),M=eo(_.cameraToCenterDistance,C.signedDistanceFromCamera),O=g.evaluateSizeForFeature(i.textSizeData,N,l)*M/f.ONE_EM;r&&(O*=i.tilePixelRatio/k);for(var z=_o(d.anchor,d.width,d.height,d.textOffset,d.textBoxScale,O),R=r?Lt(b.add(z),w).point:C.point.add(a?z.rotate(-_.angle):z),D=i.allowVerticalPlacement&&l.placedOrientation===f.WritingMode.vertical?Math.PI/2:0,P=0;P<l.numGlyphs;P++)f.addDynamicAttributes(Y,R,D);X&&l.associatedIconIndex>=0&&(o[l.associatedIconIndex]={shiftedAnchor:R,angle:D})}else to(l.numGlyphs,Y)}if(X){le.clear();for(var q=i.icon.placedSymbolArray,W=0;W<q.length;W++){var K=q.get(W);if(K.hidden)to(K.numGlyphs,le);else{var ae=o[W];if(ae)for(var re=0;re<K.numGlyphs;re++)f.addDynamicAttributes(le,ae.shiftedAnchor,ae.angle);else to(K.numGlyphs,le)}}i.icon.dynamicLayoutVertexBuffer.updateData(le)}i.text.dynamicLayoutVertexBuffer.updateData(Y)}function Ju(i,a,r){return r.iconsInText&&a?"symbolTextAndIcon":i?"symbolSDF":"symbolIcon"}function _u(i,a,r,c,g,_,w,E,k,N,X,Q){for(var Y=i.context,le=Y.gl,o=i.transform,v="map"===E,l="map"===k,d=v&&"point"!==r.layout.get("symbol-placement"),b=v&&!l&&!d,C=!r.layout.get("symbol-sort-key").isConstant(),M=!1,O=i.depthModeForSublayer(0,ee.ReadOnly),z=r.layout.get("text-variable-anchor"),R=[],D=0,P=c;D<P.length;D+=1){var q=P[D],W=a.getTile(q),K=W.getBucket(r);if(K){var ae=g?K.text:K.icon;if(ae&&ae.segments.get().length){var re=ae.programConfigurations.get(r.id),ue=g||K.sdfIcons,_e=g?K.textSizeData:K.iconSizeData,ve=l||0!==o.pitch,Ee=i.useProgram(Ju(ue,g,K),re),Me=f.evaluateSizeForZoom(_e,o.zoom),De=void 0,Oe=[0,0],xe=void 0,Te=void 0,Re=null,ke=void 0;if(g)xe=W.glyphAtlasTexture,Te=le.LINEAR,De=W.glyphAtlasTexture.size,K.iconsInText&&(Oe=W.imageAtlasTexture.size,Re=W.imageAtlasTexture,ke=ve||i.options.rotating||i.options.zooming||"composite"===_e.kind||"camera"===_e.kind?le.LINEAR:le.NEAREST);else{var We=1!==r.layout.get("icon-size").constantOr(0)||K.iconsNeedLinear;xe=W.imageAtlasTexture,Te=ue||i.options.rotating||i.options.zooming||We||ve?le.LINEAR:le.NEAREST,De=W.imageAtlasTexture.size}var Ke=Vi(W,1,i.transform.zoom),mt=Dt(q.posMatrix,l,v,i.transform,Ke),_t=fn(q.posMatrix,l,v,i.transform,Ke),Be=z&&K.hasTextData(),it="none"!==r.layout.get("icon-text-fit")&&Be&&K.hasIconData();d&&aa(K,q.posMatrix,i,g,mt,_t,l,N);var ft=i.translatePosMatrix(q.posMatrix,W,_,w),wt=d||g&&z||it?tl:mt,qt=i.translatePosMatrix(_t,W,_,w,!0),Xo=ue&&0!==r.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1),xr={program:Ee,buffers:ae,uniformValues:ue?K.iconsInText?Js(_e.kind,Me,b,l,i,ft,wt,qt,De,Oe):qo(_e.kind,Me,b,l,i,ft,wt,qt,g,De,!0):Vl(_e.kind,Me,b,l,i,ft,wt,qt,g,De),atlasTexture:xe,atlasTextureIcon:Re,atlasInterpolation:Te,atlasInterpolationIcon:ke,isSDF:ue,hasHalo:Xo};if(C&&K.canOverlap){M=!0;for(var Yo=0,Xr=ae.segments.get();Yo<Xr.length;Yo+=1){var Br=Xr[Yo];R.push({segments:new f.SegmentVector([Br]),sortKey:Br.sortKey,state:xr})}}else R.push({segments:ae.segments,sortKey:0,state:xr})}}}M&&R.sort(function(wr,Eo){return wr.sortKey-Eo.sortKey});for(var Wi=0,Yr=R;Wi<Yr.length;Wi+=1){var Na=Yr[Wi],Xn=Na.state;if(Y.activeTexture.set(le.TEXTURE0),Xn.atlasTexture.bind(Xn.atlasInterpolation,le.CLAMP_TO_EDGE),Xn.atlasTextureIcon&&(Y.activeTexture.set(le.TEXTURE1),Xn.atlasTextureIcon&&Xn.atlasTextureIcon.bind(Xn.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),Xn.isSDF){var br=Xn.uniformValues;Xn.hasHalo&&(br.u_is_halo=1,fa(Xn.buffers,Na.segments,r,i,Xn.program,O,X,Q,br)),br.u_is_halo=0}fa(Xn.buffers,Na.segments,r,i,Xn.program,O,X,Q,Xn.uniformValues)}}function fa(i,a,r,c,g,_,w,E,k){var N=c.context;g.draw(N,N.gl.TRIANGLES,_,w,E,be.disabled,k,r.id,i.layoutVertexBuffer,i.indexBuffer,a,r.paint,c.transform.zoom,i.programConfigurations.get(r.id),i.dynamicLayoutVertexBuffer,i.opacityVertexBuffer)}function V(i,a,r,c,g,_,w){var E,k,N,X,Q,Y=i.context.gl,le=r.paint.get("fill-pattern"),o=le&&le.constantOr(1),v=r.getCrossfadeParameters();w?(k=o&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",E=Y.LINES):(k=o?"fillPattern":"fill",E=Y.TRIANGLES);for(var l=0,d=c;l<d.length;l+=1){var b=d[l],C=a.getTile(b);if(!o||C.patternsLoaded()){var M=C.getBucket(r);if(M){var O=M.programConfigurations.get(r.id),z=i.useProgram(k,O);o&&(i.context.activeTexture.set(Y.TEXTURE0),C.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),O.updatePaintBuffers(v));var R=le.constantOr(null);if(R&&C.imageAtlas){var D=C.imageAtlas,P=D.patternPositions[R.to.toString()],q=D.patternPositions[R.from.toString()];P&&q&&O.setConstantPatternPositions(P,q)}var W=i.translatePosMatrix(b.posMatrix,C,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(w){X=M.indexBuffer2,Q=M.segments2;var K=[Y.drawingBufferWidth,Y.drawingBufferHeight];N="fillOutlinePattern"===k&&o?Bl(W,i,v,C,K):es(W,K)}else X=M.indexBuffer,Q=M.segments,N=o?pa(W,i,v,C):yo(W);z.draw(i.context,E,g,i.stencilModeForClipping(b),_,be.disabled,N,r.id,M.layoutVertexBuffer,X,Q,r.paint,i.transform.zoom,O)}}}}function Zr(i,a,r,c,g,_,w){for(var E=i.context,k=E.gl,N=r.paint.get("fill-extrusion-pattern"),X=N.constantOr(1),Q=r.getCrossfadeParameters(),Y=r.paint.get("fill-extrusion-opacity"),le=0,o=c;le<o.length;le+=1){var v=o[le],l=a.getTile(v),d=l.getBucket(r);if(d){var b=d.programConfigurations.get(r.id),C=i.useProgram(X?"fillExtrusionPattern":"fillExtrusion",b);X&&(i.context.activeTexture.set(k.TEXTURE0),l.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),b.updatePaintBuffers(Q));var M=N.constantOr(null);if(M&&l.imageAtlas){var O=l.imageAtlas,z=O.patternPositions[M.to.toString()],R=O.patternPositions[M.from.toString()];z&&R&&b.setConstantPatternPositions(z,R)}var D=i.translatePosMatrix(v.posMatrix,l,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),P=r.paint.get("fill-extrusion-vertical-gradient"),q=X?Yu(D,i,P,Y,v,Q,l):Ys(D,i,P,Y);C.draw(E,E.gl.TRIANGLES,g,_,w,be.backCCW,q,r.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,r.paint,i.transform.zoom,b)}}}function nl(i,a,r,c,g,_){var w=i.context,E=w.gl,k=a.fbo;if(k){var N=i.useProgram("hillshade");w.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,k.colorAttachment.get());var X=function(Q,Y,le){var o=le.paint.get("hillshade-shadow-color"),v=le.paint.get("hillshade-highlight-color"),l=le.paint.get("hillshade-accent-color"),d=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===le.paint.get("hillshade-illumination-anchor")&&(d-=Q.transform.angle);var b,C,M,O=!Q.options.moving;return{u_matrix:Q.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),O),u_image:0,u_latrange:(b=Y.tileID,C=Math.pow(2,b.canonical.z),M=b.canonical.y,[new f.MercatorCoordinate(0,M/C).toLngLat().lat,new f.MercatorCoordinate(0,(M+1)/C).toLngLat().lat]),u_light:[le.paint.get("hillshade-exaggeration"),d],u_shadow:o,u_highlight:v,u_accent:l}}(i,a,r);N.draw(w,E.TRIANGLES,c,g,_,be.disabled,X,r.id,i.rasterBoundsBuffer,i.quadTriangleIndexBuffer,i.rasterBoundsSegments)}}function il(i,a,r,c,g,_){var v,l,d,b,w=i.context,E=w.gl,k=a.dem;if(k&&k.data){var N=k.dim,X=k.stride,Q=k.getPixels();if(w.activeTexture.set(E.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||i.getTileTexture(X),a.demTexture){var Y=a.demTexture;Y.update(Q,{premultiply:!1}),Y.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else a.demTexture=new f.Texture(w,Q,E.RGBA,{premultiply:!1}),a.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);w.activeTexture.set(E.TEXTURE0);var le=a.fbo;if(!le){var o=new f.Texture(w,{width:N,height:N,data:null},E.RGBA);o.bind(E.LINEAR,E.CLAMP_TO_EDGE),(le=a.fbo=w.createFramebuffer(N,N,!0)).colorAttachment.set(o.texture)}w.bindFramebuffer.set(le.framebuffer),w.viewport.set([0,0,N,N]),i.useProgram("hillshadePrepare").draw(w,E.TRIANGLES,c,g,_,be.disabled,(v=a.tileID,d=(l=k).stride,b=f.create(),f.ortho(b,0,f.EXTENT,-f.EXTENT,0,0,1),f.translate(b,b,[0,-f.EXTENT,0]),{u_matrix:b,u_image:1,u_dimension:[d,d],u_zoom:v.overscaledZ,u_unpack:l.getUnpackVector()}),r.id,i.rasterBoundsBuffer,i.quadTriangleIndexBuffer,i.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function da(i,a,r,c,g){var _=c.paint.get("raster-fade-duration");if(_>0){var w=f.browser.now(),E=(w-i.timeAdded)/_,k=a?(w-a.timeAdded)/_:-1,N=r.getSource(),X=g.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),Q=!a||Math.abs(a.tileID.overscaledZ-X)>Math.abs(i.tileID.overscaledZ-X),Y=Q&&i.refreshedUponExpiration?1:f.clamp(Q?E:1-k,0,1);return i.refreshedUponExpiration&&E>=1&&(i.refreshedUponExpiration=!1),a?{opacity:1,mix:1-Y}:{opacity:Y,mix:0}}return{opacity:1,mix:0}}var ns=new f.Color(1,0,0,1),io=new f.Color(0,1,0,1),kr=new f.Color(0,0,1,1),rl=new f.Color(1,0,1,1),ol=new f.Color(0,1,1,1);function ys(i,a,r,c){_s(i,0,a+r/2,i.transform.width,r,c)}function al(i,a,r,c){_s(i,a-r/2,0,r,i.transform.height,c)}function _s(i,a,r,c,g,_){var w=i.context,E=w.gl;E.enable(E.SCISSOR_TEST),E.scissor(a*f.browser.devicePixelRatio,r*f.browser.devicePixelRatio,c*f.browser.devicePixelRatio,g*f.browser.devicePixelRatio),w.clear({color:_}),E.disable(E.SCISSOR_TEST)}function xu(i,a,r){var c=i.context,g=c.gl,_=r.posMatrix,w=i.useProgram("debug"),E=ee.disabled,k=ie.disabled,N=i.colorModeForRenderPass();c.activeTexture.set(g.TEXTURE0),i.emptyTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),w.draw(c,g.LINE_STRIP,E,k,N,be.disabled,gr(_,f.Color.red),"$debug",i.debugBuffer,i.tileBorderIndexBuffer,i.debugSegments);var X=a.getTileByID(r.key).latestRawTileData,Q=Math.floor((X&&X.byteLength||0)/1024),Y=a.getTile(r).tileSize,le=512/Math.min(Y,512)*(r.overscaledZ/i.transform.zoom)*.5,o=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(o+=" => "+r.overscaledZ),function(v,l){v.initDebugOverlayCanvas();var d=v.debugOverlayCanvas,b=v.context.gl,C=v.debugOverlayCanvas.getContext("2d");C.clearRect(0,0,d.width,d.height),C.shadowColor="white",C.shadowBlur=2,C.lineWidth=1.5,C.strokeStyle="white",C.textBaseline="top",C.font="bold 36px Open Sans, sans-serif",C.fillText(l,5,5),C.strokeText(l,5,5),v.debugOverlayTexture.update(d),v.debugOverlayTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE)}(i,o+" "+Q+"kb"),w.draw(c,g.TRIANGLES,E,k,ge.alphaBlended,be.disabled,gr(_,f.Color.transparent,le),"$debug",i.debugBuffer,i.quadTriangleIndexBuffer,i.debugSegments)}var xs={symbol:function(i,a,r,c,g){if("translucent"===i.renderPass){var _=ie.disabled,w=i.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(E,k,N,X,Q,Y,le){for(var o=k.transform,v="map"===Q,l="map"===Y,d=0,b=E;d<b.length;d+=1){var C=b[d],M=X.getTile(C),O=M.getBucket(N);if(O&&O.text&&O.text.segments.get().length){var z=f.evaluateSizeForZoom(O.textSizeData,o.zoom),R=Vi(M,1,k.transform.zoom),D=Dt(C.posMatrix,l,v,k.transform,R),P="none"!==N.layout.get("icon-text-fit")&&O.hasIconData();if(z){var q=Math.pow(2,o.zoom-M.tileID.overscaledZ);ts(O,v,l,le,f.symbolSize,o,D,C.posMatrix,q,z,P)}}}}(c,i,r,a,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),g),0!==r.paint.get("icon-opacity").constantOr(1)&&_u(i,a,r,c,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),_,w),0!==r.paint.get("text-opacity").constantOr(1)&&_u(i,a,r,c,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),_,w),a.map.showCollisionBoxes&&(yu(i,a,r,c,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),yu(i,a,r,c,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(i,a,r,c){if("translucent"===i.renderPass){var g=r.paint.get("circle-opacity"),_=r.paint.get("circle-stroke-width"),w=r.paint.get("circle-stroke-opacity"),E=!r.layout.get("circle-sort-key").isConstant();if(0!==g.constantOr(1)||0!==_.constantOr(1)&&0!==w.constantOr(1)){for(var k=i.context,N=k.gl,X=i.depthModeForSublayer(0,ee.ReadOnly),Q=ie.disabled,Y=i.colorModeForRenderPass(),le=[],o=0;o<c.length;o++){var v=c[o],l=a.getTile(v),d=l.getBucket(r);if(d){var b=d.programConfigurations.get(r.id),C={programConfiguration:b,program:i.useProgram("circle",b),layoutVertexBuffer:d.layoutVertexBuffer,indexBuffer:d.indexBuffer,uniformValues:Fl(i,v,l,r)};if(E)for(var M=0,O=d.segments.get();M<O.length;M+=1){var z=O[M];le.push({segments:new f.SegmentVector([z]),sortKey:z.sortKey,state:C})}else le.push({segments:d.segments,sortKey:0,state:C})}}E&&le.sort(function(W,K){return W.sortKey-K.sortKey});for(var R=0,D=le;R<D.length;R+=1){var P=D[R],q=P.state;q.program.draw(k,N.TRIANGLES,X,Q,Y,be.disabled,q.uniformValues,r.id,q.layoutVertexBuffer,q.indexBuffer,P.segments,r.paint,i.transform.zoom,q.programConfiguration)}}}},heatmap:function(i,a,r,c){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===i.renderPass){var g=i.context,_=g.gl,w=ie.disabled,E=new ge([_.ONE,_.ONE],f.Color.transparent,[!0,!0,!0,!0]);(function(le,o,v){var l=le.gl;le.activeTexture.set(l.TEXTURE1),le.viewport.set([0,0,o.width/4,o.height/4]);var C,M,O,z,R,d=v.heatmapFbo;if(d)l.bindTexture(l.TEXTURE_2D,d.colorAttachment.get()),le.bindFramebuffer.set(d.framebuffer);else{var b=l.createTexture();l.bindTexture(l.TEXTURE_2D,b),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),O=b,z=d=v.heatmapFbo=le.createFramebuffer(o.width/4,o.height/4,!1),(R=(C=le).gl).texImage2D(R.TEXTURE_2D,0,R.RGBA,(M=o).width/4,M.height/4,0,R.RGBA,C.extRenderToTextureHalfFloat?C.extTextureHalfFloat.HALF_FLOAT_OES:R.UNSIGNED_BYTE,null),z.colorAttachment.set(O)}})(g,i,r),g.clear({color:f.Color.transparent});for(var k=0;k<c.length;k++){var N=c[k];if(!a.hasRenderableParent(N)){var X=a.getTile(N),Q=X.getBucket(r);if(Q){var Y=Q.programConfigurations.get(r.id);i.useProgram("heatmap",Y).draw(g,_.TRIANGLES,ee.disabled,w,E,be.disabled,Da(N.posMatrix,X,i.transform.zoom,r.paint.get("heatmap-intensity")),r.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,r.paint,i.transform.zoom,Y)}}}g.viewport.set([0,0,i.width,i.height])}else"translucent"===i.renderPass&&(i.context.setColorMode(i.colorModeForRenderPass()),function(le,o){var v=le.context,l=v.gl,d=o.heatmapFbo;if(d){v.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,d.colorAttachment.get()),v.activeTexture.set(l.TEXTURE1);var b=o.colorRampTexture;b||(b=o.colorRampTexture=new f.Texture(v,o.colorRamp,l.RGBA)),b.bind(l.LINEAR,l.CLAMP_TO_EDGE),le.useProgram("heatmapTexture").draw(v,l.TRIANGLES,ee.disabled,ie.disabled,le.colorModeForRenderPass(),be.disabled,function(C,M,O,z){var R=f.create();f.ortho(R,0,C.width,C.height,0,0,1);var D=C.context.gl;return{u_matrix:R,u_world:[D.drawingBufferWidth,D.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:M.paint.get("heatmap-opacity")}}(le,o),o.id,le.viewportBuffer,le.quadTriangleIndexBuffer,le.viewportSegments,o.paint,le.transform.zoom)}}(i,r))},line:function(i,a,r,c){if("translucent"===i.renderPass){var g=r.paint.get("line-opacity"),_=r.paint.get("line-width");if(0!==g.constantOr(1)&&0!==_.constantOr(1))for(var w=i.depthModeForSublayer(0,ee.ReadOnly),E=i.colorModeForRenderPass(),k=r.paint.get("line-dasharray"),N=r.paint.get("line-pattern"),X=N.constantOr(1),Q=r.paint.get("line-gradient"),Y=r.getCrossfadeParameters(),le=X?"linePattern":k?"lineSDF":Q?"lineGradient":"line",o=i.context,v=o.gl,l=!0,d=0,b=c;d<b.length;d+=1){var C=b[d],M=a.getTile(C);if(!X||M.patternsLoaded()){var O=M.getBucket(r);if(O){var z=O.programConfigurations.get(r.id),R=i.context.program.get(),D=i.useProgram(le,z),P=l||D.program!==R,q=N.constantOr(null);if(q&&M.imageAtlas){var W=M.imageAtlas,K=W.patternPositions[q.to.toString()],ae=W.patternPositions[q.from.toString()];K&&ae&&z.setConstantPatternPositions(K,ae)}var re=X?yn(i,M,r,Y):k?Nl(i,M,r,k,Y):Q?Ks(i,M,r,O.lineClipsArray.length):gs(i,M,r);if(X)o.activeTexture.set(v.TEXTURE0),M.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),z.updatePaintBuffers(Y);else if(k&&(P||i.lineAtlas.dirty))o.activeTexture.set(v.TEXTURE0),i.lineAtlas.bind(o);else if(Q){var ue=O.gradients[r.id],_e=ue.texture;if(r.gradientVersion!==ue.version){var ve=256;if(r.stepInterpolant){var Ee=a.getSource().maxzoom,Me=C.canonical.z===Ee?Math.ceil(1<<i.transform.maxZoom-C.canonical.z):1;ve=f.clamp(f.nextPowerOfTwo(O.maxLineLength/f.EXTENT*1024*Me),256,o.maxTextureSize)}ue.gradient=f.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:ve,image:ue.gradient||void 0,clips:O.lineClipsArray}),ue.texture?ue.texture.update(ue.gradient):ue.texture=new f.Texture(o,ue.gradient,v.RGBA),ue.version=r.gradientVersion,_e=ue.texture}o.activeTexture.set(v.TEXTURE0),_e.bind(r.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}D.draw(o,v.TRIANGLES,w,i.stencilModeForClipping(C),E,be.disabled,re,r.id,O.layoutVertexBuffer,O.indexBuffer,O.segments,r.paint,i.transform.zoom,z,O.layoutVertexBuffer2),l=!1}}}}},fill:function(i,a,r,c){var g=r.paint.get("fill-color"),_=r.paint.get("fill-opacity");if(0!==_.constantOr(1)){var w=i.colorModeForRenderPass(),E=r.paint.get("fill-pattern"),k=i.opaquePassEnabledForLayer()&&!E.constantOr(1)&&1===g.constantOr(f.Color.transparent).a&&1===_.constantOr(0)?"opaque":"translucent";if(i.renderPass===k){var N=i.depthModeForSublayer(1,"opaque"===i.renderPass?ee.ReadWrite:ee.ReadOnly);V(i,a,r,c,N,w,!1)}if("translucent"===i.renderPass&&r.paint.get("fill-antialias")){var X=i.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,ee.ReadOnly);V(i,a,r,c,X,w,!0)}}},"fill-extrusion":function(i,a,r,c){var g=r.paint.get("fill-extrusion-opacity");if(0!==g&&"translucent"===i.renderPass){var _=new ee(i.context.gl.LEQUAL,ee.ReadWrite,i.depthRangeFor3D);if(1!==g||r.paint.get("fill-extrusion-pattern").constantOr(1))Zr(i,a,r,c,_,ie.disabled,ge.disabled),Zr(i,a,r,c,_,i.stencilModeFor3D(),i.colorModeForRenderPass());else{var w=i.colorModeForRenderPass();Zr(i,a,r,c,_,ie.disabled,w)}}},hillshade:function(i,a,r,c){if("offscreen"===i.renderPass||"translucent"===i.renderPass){for(var g=i.context,_=i.depthModeForSublayer(0,ee.ReadOnly),w=i.colorModeForRenderPass(),E="translucent"===i.renderPass?i.stencilConfigForOverlap(c):[{},c],k=E[0],N=0,X=E[1];N<X.length;N+=1){var Q=X[N],Y=a.getTile(Q);Y.needsHillshadePrepare&&"offscreen"===i.renderPass?il(i,Y,r,_,ie.disabled,w):"translucent"===i.renderPass&&nl(i,Y,r,_,k[Q.overscaledZ],w)}g.viewport.set([0,0,i.width,i.height])}},raster:function(i,a,r,c){if("translucent"===i.renderPass&&0!==r.paint.get("raster-opacity")&&c.length)for(var g=i.context,_=g.gl,w=a.getSource(),E=i.useProgram("raster"),k=i.colorModeForRenderPass(),N=w instanceof co?[{},c]:i.stencilConfigForOverlap(c),X=N[0],Q=N[1],Y=Q[Q.length-1].overscaledZ,le=!i.options.moving,o=0,v=Q;o<v.length;o+=1){var l=v[o],d=i.depthModeForSublayer(l.overscaledZ-Y,1===r.paint.get("raster-opacity")?ee.ReadWrite:ee.ReadOnly,_.LESS),b=a.getTile(l),C=i.transform.calculatePosMatrix(l.toUnwrapped(),le);b.registerFadeDuration(r.paint.get("raster-fade-duration"));var M=a.findLoadedParent(l,0),O=da(b,M,a,r,i.transform),z=void 0,R=void 0,D="nearest"===r.paint.get("raster-resampling")?_.NEAREST:_.LINEAR;g.activeTexture.set(_.TEXTURE0),b.texture.bind(D,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(_.TEXTURE1),M?(M.texture.bind(D,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST),z=Math.pow(2,M.tileID.overscaledZ-b.tileID.overscaledZ),R=[b.tileID.canonical.x*z%1,b.tileID.canonical.y*z%1]):b.texture.bind(D,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST);var P=Mc(C,R||[0,0],z||1,O,r);w instanceof co?E.draw(g,_.TRIANGLES,d,ie.disabled,k,be.disabled,P,r.id,w.boundsBuffer,i.quadTriangleIndexBuffer,w.boundsSegments):E.draw(g,_.TRIANGLES,d,X[l.overscaledZ],k,be.disabled,P,r.id,i.rasterBoundsBuffer,i.quadTriangleIndexBuffer,i.rasterBoundsSegments)}},background:function(i,a,r){var c=r.paint.get("background-color"),g=r.paint.get("background-opacity");if(0!==g){var _=i.context,w=_.gl,E=i.transform,k=E.tileSize,N=r.paint.get("background-pattern");if(!i.isPatternMissing(N)){var X=!N&&1===c.a&&1===g&&i.opaquePassEnabledForLayer()?"opaque":"translucent";if(i.renderPass===X){var Q=ie.disabled,Y=i.depthModeForSublayer(0,"opaque"===X?ee.ReadWrite:ee.ReadOnly),le=i.colorModeForRenderPass(),o=i.useProgram(N?"backgroundPattern":"background"),v=E.coveringTiles({tileSize:k});N&&(_.activeTexture.set(w.TEXTURE0),i.imageManager.bind(i.context));for(var l=r.getCrossfadeParameters(),d=0,b=v;d<b.length;d+=1){var C=b[d],M=i.transform.calculatePosMatrix(C.toUnwrapped()),O=N?el(M,g,i,N,{tileID:C,tileSize:k},l):Qs(M,g,c);o.draw(_,w.TRIANGLES,Y,Q,le,be.disabled,O,r.id,i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}}}},debug:function(i,a,r){for(var c=0;c<r.length;c++)xu(i,a,r[c])},custom:function(i,a,r){var c=i.context,g=r.implementation;if("offscreen"===i.renderPass){var _=g.prerender;_&&(i.setCustomLayerDefaults(),c.setColorMode(i.colorModeForRenderPass()),_.call(g,c.gl,i.transform.customLayerMatrix()),c.setDirty(),i.setBaseState())}else if("translucent"===i.renderPass){i.setCustomLayerDefaults(),c.setColorMode(i.colorModeForRenderPass()),c.setStencilMode(ie.disabled);var w="3d"===g.renderingMode?new ee(i.context.gl.LEQUAL,ee.ReadWrite,i.depthRangeFor3D):i.depthModeForSublayer(0,ee.ReadOnly);c.setDepthMode(w),g.render(c.gl,i.transform.customLayerMatrix()),c.setDirty(),i.setBaseState(),c.bindFramebuffer.set(null)}}},ye=function(i,a){this.context=new me(i),this.transform=a,this._tileTextures={},this.setup(),this.numSublayers=te.maxUnderzooming+te.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Pa,this.gpuTimers={}};ye.prototype.resize=function(i,a){if(this.width=i*f.browser.devicePixelRatio,this.height=a*f.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,c=this.style._order;r<c.length;r+=1)this.style._layers[c[r]].resize()},ye.prototype.setup=function(){var i=this.context,a=new f.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(f.EXTENT,0),a.emplaceBack(0,f.EXTENT),a.emplaceBack(f.EXTENT,f.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(a,no.members),this.tileExtentSegments=f.SegmentVector.simpleSegment(0,0,4,2);var r=new f.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(f.EXTENT,0),r.emplaceBack(0,f.EXTENT),r.emplaceBack(f.EXTENT,f.EXTENT),this.debugBuffer=i.createVertexBuffer(r,no.members),this.debugSegments=f.SegmentVector.simpleSegment(0,0,4,5);var c=new f.StructArrayLayout4i8;c.emplaceBack(0,0,0,0),c.emplaceBack(f.EXTENT,0,f.EXTENT,0),c.emplaceBack(0,f.EXTENT,0,f.EXTENT),c.emplaceBack(f.EXTENT,f.EXTENT,f.EXTENT,f.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(c,bi.members),this.rasterBoundsSegments=f.SegmentVector.simpleSegment(0,0,4,2);var g=new f.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(g,no.members),this.viewportSegments=f.SegmentVector.simpleSegment(0,0,4,2);var _=new f.StructArrayLayout1ui2;_.emplaceBack(0),_.emplaceBack(1),_.emplaceBack(3),_.emplaceBack(2),_.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(_);var w=new f.StructArrayLayout3ui6;w.emplaceBack(0,1,2),w.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(w),this.emptyTexture=new f.Texture(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);var E=this.context.gl;this.stencilClearMode=new ie({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)},ye.prototype.clearStencil=function(){var i=this.context,a=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=f.create();f.ortho(r,0,this.width,this.height,0,0,1),f.scale(r,r,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,a.TRIANGLES,ee.disabled,this.stencilClearMode,ge.disabled,be.disabled,qr(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ye.prototype._renderTileClippingMasks=function(i,a){if(this.currentStencilSource!==i.source&&i.isTileClipped()&&a&&a.length){this.currentStencilSource=i.source;var r=this.context,c=r.gl;this.nextStencilID+a.length>256&&this.clearStencil(),r.setColorMode(ge.disabled),r.setDepthMode(ee.disabled);var g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var _=0,w=a;_<w.length;_+=1){var E=w[_],k=this._tileClippingMaskIDs[E.key]=this.nextStencilID++;g.draw(r,c.TRIANGLES,ee.disabled,new ie({func:c.ALWAYS,mask:0},k,255,c.KEEP,c.KEEP,c.REPLACE),ge.disabled,be.disabled,qr(E.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ye.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var i=this.nextStencilID++,a=this.context.gl;return new ie({func:a.NOTEQUAL,mask:255},i,255,a.KEEP,a.KEEP,a.REPLACE)},ye.prototype.stencilModeForClipping=function(i){var a=this.context.gl;return new ie({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,a.KEEP,a.KEEP,a.REPLACE)},ye.prototype.stencilConfigForOverlap=function(i){var a,r=this.context.gl,c=i.sort(function(k,N){return N.overscaledZ-k.overscaledZ}),g=c[c.length-1].overscaledZ,_=c[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();for(var w={},E=0;E<_;E++)w[E+g]=new ie({func:r.GEQUAL,mask:255},E+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=_,[w,c]}return[(a={},a[g]=ie.disabled,a),c]},ye.prototype.colorModeForRenderPass=function(){var i=this.context.gl;return this._showOverdrawInspector?new ge([i.CONSTANT_COLOR,i.ONE],new f.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?ge.unblended:ge.alphaBlended},ye.prototype.depthModeForSublayer=function(i,a,r){if(!this.opaquePassEnabledForLayer())return ee.disabled;var c=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new ee(r||this.context.gl.LEQUAL,a,[c,c])},ye.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ye.prototype.render=function(i,a){var r=this;this.style=i,this.options=a,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(f.browser.now()),this.imageManager.beginFrame();var c=this.style._order,g=this.style.sourceCaches;for(var _ in g){var w=g[_];w.used&&w.prepare(this.context)}var E,k,N={},X={},Q={};for(var Y in g){var le=g[Y];N[Y]=le.getVisibleCoordinates(),X[Y]=N[Y].slice().reverse(),Q[Y]=le.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var o=0;o<c.length;o++)if(this.style._layers[c[o]].is3D()){this.opaquePassCutoff=o;break}this.renderPass="offscreen";for(var v=0,l=c;v<l.length;v+=1){var d=this.style._layers[l[v]];if(d.hasOffscreenPass()&&!d.isHidden(this.transform.zoom)){var b=X[d.source];("custom"===d.type||b.length)&&this.renderLayer(this,g[d.source],d,b)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?f.Color.black:f.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){var C=this.style._layers[c[this.currentLayer]],M=g[C.source],O=N[C.source];this._renderTileClippingMasks(C,O),this.renderLayer(this,M,C,O)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){var z=this.style._layers[c[this.currentLayer]],R=g[z.source],D=("symbol"===z.type?Q:X)[z.source];this._renderTileClippingMasks(z,N[z.source]),this.renderLayer(this,R,z,D)}this.options.showTileBoundaries&&(f.values(this.style._layers).forEach(function(P){P.source&&!P.isHidden(r.transform.zoom)&&(P.source!==(k&&k.id)&&(k=r.style.sourceCaches[P.source]),(!E||E.getSource().maxzoom<k.getSource().maxzoom)&&(E=k))}),E&&xs.debug(this,E,E.getVisibleCoordinates())),this.options.showPadding&&function(P){var q=P.transform.padding;ys(P,P.transform.height-(q.top||0),3,ns),ys(P,q.bottom||0,3,io),al(P,q.left||0,3,kr),al(P,P.transform.width-(q.right||0),3,rl);var K,ae,re,ue,W=P.transform.centerPoint;_s(K=P,(ae=W.x)-1,(re=P.transform.height-W.y)-10,2,20,ue=ol),_s(K,ae-10,re-1,20,2,ue)}(this),this.context.setDefault()},ye.prototype.renderLayer=function(i,a,r,c){r.isHidden(this.transform.zoom)||("background"===r.type||"custom"===r.type||c.length)&&(this.id=r.id,this.gpuTimingStart(r),xs[r.type](i,a,r,c,this.style.placement.variableOffsets),this.gpuTimingEnd())},ye.prototype.gpuTimingStart=function(i){if(this.options.gpuTiming){var a=this.context.extTimerQuery,r=this.gpuTimers[i.id];r||(r=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:a.createQueryEXT()}),r.calls++,a.beginQueryEXT(a.TIME_ELAPSED_EXT,r.query)}},ye.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}},ye.prototype.collectGpuTimers=function(){var i=this.gpuTimers;return this.gpuTimers={},i},ye.prototype.queryGpuTimers=function(i){var a={};for(var r in i){var c=i[r],g=this.context.extTimerQuery,_=g.getQueryObjectEXT(c.query,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(c.query),a[r]=_}return a},ye.prototype.translatePosMatrix=function(i,a,r,c,g){if(!r[0]&&!r[1])return i;var _=g?"map"===c?this.transform.angle:0:"viewport"===c?-this.transform.angle:0;if(_){var w=Math.sin(_),E=Math.cos(_);r=[r[0]*E-r[1]*w,r[0]*w+r[1]*E]}var k=[g?r[0]:Vi(a,r[0],this.transform.zoom),g?r[1]:Vi(a,r[1],this.transform.zoom),0],N=new Float32Array(16);return f.translate(N,i,k),N},ye.prototype.saveTileTexture=function(i){var a=this._tileTextures[i.size[0]];a?a.push(i):this._tileTextures[i.size[0]]=[i]},ye.prototype.getTileTexture=function(i){var a=this._tileTextures[i];return a&&a.length>0?a.pop():null},ye.prototype.isPatternMissing=function(i){if(!i)return!1;if(!i.from||!i.to)return!0;var a=this.imageManager.getPattern(i.from.toString()),r=this.imageManager.getPattern(i.to.toString());return!a||!r},ye.prototype.useProgram=function(i,a){this.cache=this.cache||{};var r=""+i+(a?a.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[r]||(this.cache[r]=new Fn(this.context,i,zr[i],a,vs[i],this._showOverdrawInspector)),this.cache[r]},ye.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ye.prototype.setBaseState=function(){var i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)},ye.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=f.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new f.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ye.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Ue=function(i,a){this.points=i,this.planes=a};Ue.fromInvProjectionMatrix=function(i,a,r){var c=Math.pow(2,r),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(w){return f.transformMat4([],w,i)}).map(function(w){return f.scale$1([],w,1/w[3]/a*c)}),_=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(w){var E=f.sub([],g[w[0]],g[w[1]]),k=f.sub([],g[w[2]],g[w[1]]),N=f.normalize([],f.cross([],E,k)),X=-f.dot(N,g[w[1]]);return N.concat(X)});return new Ue(g,_)};var Le=function(i,a){this.min=i,this.max=a,this.center=f.scale$2([],f.add([],this.min,this.max),.5)};Le.prototype.quadrant=function(i){for(var a=[i%2==0,i<2],r=f.clone$2(this.min),c=f.clone$2(this.max),g=0;g<a.length;g++)r[g]=a[g]?this.min[g]:this.center[g],c[g]=a[g]?this.center[g]:this.max[g];return c[2]=this.max[2],new Le(r,c)},Le.prototype.distanceX=function(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]},Le.prototype.distanceY=function(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]},Le.prototype.intersects=function(i){for(var a=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,c=0;c<i.planes.length;c++){for(var g=i.planes[c],_=0,w=0;w<a.length;w++)_+=f.dot$1(g,a[w])>=0;if(0===_)return 0;_!==a.length&&(r=!1)}if(r)return 2;for(var E=0;E<3;E++){for(var k=Number.MAX_VALUE,N=-Number.MAX_VALUE,X=0;X<i.points.length;X++){var Q=i.points[X][E]-this.min[E];k=Math.min(k,Q),N=Math.max(N,Q)}if(N<0||k>this.max[E]-this.min[E])return 0}return 1};var ht=function(i,a,r,c){if(void 0===i&&(i=0),void 0===a&&(a=0),void 0===r&&(r=0),void 0===c&&(c=0),isNaN(i)||i<0||isNaN(a)||a<0||isNaN(r)||r<0||isNaN(c)||c<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=a,this.left=r,this.right=c};ht.prototype.interpolate=function(i,a,r){return null!=a.top&&null!=i.top&&(this.top=f.number(i.top,a.top,r)),null!=a.bottom&&null!=i.bottom&&(this.bottom=f.number(i.bottom,a.bottom,r)),null!=a.left&&null!=i.left&&(this.left=f.number(i.left,a.left,r)),null!=a.right&&null!=i.right&&(this.right=f.number(i.right,a.right,r)),this},ht.prototype.getCenter=function(i,a){var r=f.clamp((this.left+i-this.right)/2,0,i),c=f.clamp((this.top+a-this.bottom)/2,0,a);return new f.Point(r,c)},ht.prototype.equals=function(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right},ht.prototype.clone=function(){return new ht(this.top,this.bottom,this.left,this.right)},ht.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var pt=function(i,a,r,c,g){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===g||g,this._minZoom=i||0,this._maxZoom=a||22,this._minPitch=null==r?0:r,this._maxPitch=null==c?60:c,this.setMaxBounds(),this.width=0,this.height=0,this._center=new f.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ht,this._posMatrixCache={},this._alignedPosMatrixCache={}},vt={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};pt.prototype.clone=function(){var i=new pt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i},vt.minZoom.get=function(){return this._minZoom},vt.minZoom.set=function(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))},vt.maxZoom.get=function(){return this._maxZoom},vt.maxZoom.set=function(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))},vt.minPitch.get=function(){return this._minPitch},vt.minPitch.set=function(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))},vt.maxPitch.get=function(){return this._maxPitch},vt.maxPitch.set=function(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))},vt.renderWorldCopies.get=function(){return this._renderWorldCopies},vt.renderWorldCopies.set=function(i){void 0===i?i=!0:null===i&&(i=!1),this._renderWorldCopies=i},vt.worldSize.get=function(){return this.tileSize*this.scale},vt.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},vt.size.get=function(){return new f.Point(this.width,this.height)},vt.bearing.get=function(){return-this.angle/Math.PI*180},vt.bearing.set=function(i){var a=-f.wrap(i,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=f.create$2(),f.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},vt.pitch.get=function(){return this._pitch/Math.PI*180},vt.pitch.set=function(i){var a=f.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())},vt.fov.get=function(){return this._fov/Math.PI*180},vt.fov.set=function(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())},vt.zoom.get=function(){return this._zoom},vt.zoom.set=function(i){var a=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom,this._constrain(),this._calcMatrices())},vt.center.get=function(){return this._center},vt.center.set=function(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())},vt.padding.get=function(){return this._edgeInsets.toJSON()},vt.padding.set=function(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())},vt.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},pt.prototype.isPaddingEqual=function(i){return this._edgeInsets.equals(i)},pt.prototype.interpolatePadding=function(i,a,r){this._unmodified=!1,this._edgeInsets.interpolate(i,a,r),this._constrain(),this._calcMatrices()},pt.prototype.coveringZoomLevel=function(i){var a=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,a)},pt.prototype.getVisibleUnwrappedCoordinates=function(i){var a=[new f.UnwrappedTileID(0,i)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new f.Point(0,0)),c=this.pointCoordinate(new f.Point(this.width,0)),g=this.pointCoordinate(new f.Point(this.width,this.height)),_=this.pointCoordinate(new f.Point(0,this.height)),w=Math.floor(Math.min(r.x,c.x,g.x,_.x)),E=Math.floor(Math.max(r.x,c.x,g.x,_.x)),k=w-1;k<=E+1;k++)0!==k&&a.push(new f.UnwrappedTileID(k,i));return a},pt.prototype.coveringTiles=function(i){var a=this.coveringZoomLevel(i),r=a;if(void 0!==i.minzoom&&a<i.minzoom)return[];void 0!==i.maxzoom&&a>i.maxzoom&&(a=i.maxzoom);var c=f.MercatorCoordinate.fromLngLat(this.center),g=Math.pow(2,a),_=[g*c.x,g*c.y,0],w=Ue.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,a),E=i.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(E=a);var k=function(P){return{aabb:new Le([P*g,0,0],[(P+1)*g,g,0]),zoom:0,x:0,y:0,wrap:P,fullyVisible:!1}},N=[],X=[],Q=a,Y=i.reparseOverscaled?r:a;if(this._renderWorldCopies)for(var le=1;le<=3;le++)N.push(k(-le)),N.push(k(le));for(N.push(k(0));N.length>0;){var o=N.pop(),v=o.x,l=o.y,d=o.fullyVisible;if(!d){var b=o.aabb.intersects(w);if(0===b)continue;d=2===b}var C=o.aabb.distanceX(_),M=o.aabb.distanceY(_),O=Math.max(Math.abs(C),Math.abs(M));if(o.zoom===Q||O>3+(1<<Q-o.zoom)-2&&o.zoom>=E)X.push({tileID:new f.OverscaledTileID(o.zoom===Q?Y:o.zoom,o.wrap,o.zoom,v,l),distanceSq:f.sqrLen([_[0]-.5-v,_[1]-.5-l])});else for(var z=0;z<4;z++){var R=(v<<1)+z%2,D=(l<<1)+(z>>1);N.push({aabb:o.aabb.quadrant(z),zoom:o.zoom+1,x:R,y:D,wrap:o.wrap,fullyVisible:d})}}return X.sort(function(P,q){return P.distanceSq-q.distanceSq}).map(function(P){return P.tileID})},pt.prototype.resize=function(i,a){this.width=i,this.height=a,this.pixelsToGLUnits=[2/i,-2/a],this._constrain(),this._calcMatrices()},vt.unmodified.get=function(){return this._unmodified},pt.prototype.zoomScale=function(i){return Math.pow(2,i)},pt.prototype.scaleZoom=function(i){return Math.log(i)/Math.LN2},pt.prototype.project=function(i){var a=f.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new f.Point(f.mercatorXfromLng(i.lng)*this.worldSize,f.mercatorYfromLat(a)*this.worldSize)},pt.prototype.unproject=function(i){return new f.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()},vt.point.get=function(){return this.project(this.center)},pt.prototype.setLocationAtPoint=function(i,a){var r=this.pointCoordinate(a),c=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(i),_=new f.MercatorCoordinate(g.x-(r.x-c.x),g.y-(r.y-c.y));this.center=this.coordinateLocation(_),this._renderWorldCopies&&(this.center=this.center.wrap())},pt.prototype.locationPoint=function(i){return this.coordinatePoint(this.locationCoordinate(i))},pt.prototype.pointLocation=function(i){return this.coordinateLocation(this.pointCoordinate(i))},pt.prototype.locationCoordinate=function(i){return f.MercatorCoordinate.fromLngLat(i)},pt.prototype.coordinateLocation=function(i){return i.toLngLat()},pt.prototype.pointCoordinate=function(i){var a=[i.x,i.y,0,1],r=[i.x,i.y,1,1];f.transformMat4(a,a,this.pixelMatrixInverse),f.transformMat4(r,r,this.pixelMatrixInverse);var c=a[3],g=r[3],_=a[1]/c,w=r[1]/g,E=a[2]/c,k=r[2]/g,N=E===k?0:(0-E)/(k-E);return new f.MercatorCoordinate(f.number(a[0]/c,r[0]/g,N)/this.worldSize,f.number(_,w,N)/this.worldSize)},pt.prototype.coordinatePoint=function(i){var a=[i.x*this.worldSize,i.y*this.worldSize,0,1];return f.transformMat4(a,a,this.pixelMatrix),new f.Point(a[0]/a[3],a[1]/a[3])},pt.prototype.getBounds=function(){return(new f.LngLatBounds).extend(this.pointLocation(new f.Point(0,0))).extend(this.pointLocation(new f.Point(this.width,0))).extend(this.pointLocation(new f.Point(this.width,this.height))).extend(this.pointLocation(new f.Point(0,this.height)))},pt.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new f.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},pt.prototype.setMaxBounds=function(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},pt.prototype.calculatePosMatrix=function(i,a){void 0===a&&(a=!1);var r=i.key,c=a?this._alignedPosMatrixCache:this._posMatrixCache;if(c[r])return c[r];var g=i.canonical,_=this.worldSize/this.zoomScale(g.z),w=g.x+Math.pow(2,g.z)*i.wrap,E=f.identity(new Float64Array(16));return f.translate(E,E,[w*_,g.y*_,0]),f.scale(E,E,[_/f.EXTENT,_/f.EXTENT,1]),f.multiply(E,a?this.alignedProjMatrix:this.projMatrix,E),c[r]=new Float32Array(E),c[r]},pt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},pt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var i,a,r,c,g=-90,_=90,w=-180,E=180,k=this.size,N=this._unmodified;if(this.latRange){var X=this.latRange;g=f.mercatorYfromLat(X[1])*this.worldSize,i=(_=f.mercatorYfromLat(X[0])*this.worldSize)-g<k.y?k.y/(_-g):0}if(this.lngRange){var Q=this.lngRange;w=f.mercatorXfromLng(Q[0])*this.worldSize,a=(E=f.mercatorXfromLng(Q[1])*this.worldSize)-w<k.x?k.x/(E-w):0}var Y=this.point,le=Math.max(a||0,i||0);if(le)return this.center=this.unproject(new f.Point(a?(E+w)/2:Y.x,i?(_+g)/2:Y.y)),this.zoom+=this.scaleZoom(le),this._unmodified=N,void(this._constraining=!1);if(this.latRange){var o=Y.y,v=k.y/2;o-v<g&&(c=g+v),o+v>_&&(c=_-v)}if(this.lngRange){var l=Y.x,d=k.x/2;l-d<w&&(r=w+d),l+d>E&&(r=E-d)}void 0===r&&void 0===c||(this.center=this.unproject(new f.Point(void 0!==r?r:Y.x,void 0!==c?c:Y.y))),this._unmodified=N,this._constraining=!1}},pt.prototype._calcMatrices=function(){if(this.height){var i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var a=Math.PI/2+this._pitch,r=this._fov*(.5+i.y/this.height),c=Math.sin(r)*this.cameraToCenterDistance/Math.sin(f.clamp(Math.PI-a-r,.01,Math.PI-.01)),g=this.point,_=g.x,w=g.y,E=1.01*(Math.cos(Math.PI/2-this._pitch)*c+this.cameraToCenterDistance),k=this.height/50,N=new Float64Array(16);f.perspective(N,this._fov,this.width/this.height,k,E),N[8]=2*-i.x/this.width,N[9]=2*i.y/this.height,f.scale(N,N,[1,-1,1]),f.translate(N,N,[0,0,-this.cameraToCenterDistance]),f.rotateX(N,N,this._pitch),f.rotateZ(N,N,this.angle),f.translate(N,N,[-_,-w,0]),this.mercatorMatrix=f.scale([],N,[this.worldSize,this.worldSize,this.worldSize]),f.scale(N,N,[1,1,f.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=N,this.invProjMatrix=f.invert([],this.projMatrix);var X=this.width%2/2,Q=this.height%2/2,Y=Math.cos(this.angle),le=Math.sin(this.angle),o=_-Math.round(_)+Y*X+le*Q,v=w-Math.round(w)+Y*Q+le*X,l=new Float64Array(N);if(f.translate(l,l,[o>.5?o-1:o,v>.5?v-1:v,0]),this.alignedProjMatrix=l,N=f.create(),f.scale(N,N,[this.width/2,-this.height/2,1]),f.translate(N,N,[1,-1,0]),this.labelPlaneMatrix=N,N=f.create(),f.scale(N,N,[1,-1,1]),f.translate(N,N,[-1,-1,0]),f.scale(N,N,[2/this.width,2/this.height,1]),this.glCoordMatrix=N,this.pixelMatrix=f.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(N=f.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=N,this._posMatrixCache={},this._alignedPosMatrixCache={}}},pt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var i=this.pointCoordinate(new f.Point(0,0)),a=[i.x*this.worldSize,i.y*this.worldSize,0,1];return f.transformMat4(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance},pt.prototype.getCameraPoint=function(){var i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new f.Point(0,i))},pt.prototype.getCameraQueryGeometry=function(i){var a=this.getCameraPoint();if(1===i.length)return[i[0],a];for(var r=a.x,c=a.y,g=a.x,_=a.y,w=0,E=i;w<E.length;w+=1){var k=E[w];r=Math.min(r,k.x),c=Math.min(c,k.y),g=Math.max(g,k.x),_=Math.max(_,k.y)}return[new f.Point(r,c),new f.Point(g,c),new f.Point(g,_),new f.Point(r,_),new f.Point(r,c)]},Object.defineProperties(pt.prototype,vt);var Nn=function(i){var a,r,c,g;this._hashName=i&&encodeURIComponent(i),f.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(a=this._updateHashUnthrottled.bind(this),r=!1,c=null,g=function(){c=null,r&&(a(),c=setTimeout(g,300),r=!1)},function(){return r=!0,c||g(),c})};Nn.prototype.addTo=function(i){return this._map=i,f.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Nn.prototype.remove=function(){return f.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Nn.prototype.getHashString=function(i){var a=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,c=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,c),_=Math.round(a.lng*g)/g,w=Math.round(a.lat*g)/g,E=this._map.getBearing(),k=this._map.getPitch(),N="";if(N+=i?"/"+_+"/"+w+"/"+r:r+"/"+w+"/"+_,(E||k)&&(N+="/"+Math.round(10*E)/10),k&&(N+="/"+Math.round(k)),this._hashName){var X=this._hashName,Q=!1,Y=f.window.location.hash.slice(1).split("&").map(function(le){var o=le.split("=")[0];return o===X?(Q=!0,o+"="+N):le}).filter(function(le){return le});return Q||Y.push(X+"="+N),"#"+Y.join("&")}return"#"+N},Nn.prototype._getCurrentHash=function(){var i,a=this,r=f.window.location.hash.replace("#","");return this._hashName?(r.split("&").map(function(c){return c.split("=")}).forEach(function(c){c[0]===a._hashName&&(i=c)}),(i&&i[1]||"").split("/")):r.split("/")},Nn.prototype._onHashChange=function(){var i=this._getCurrentHash();if(i.length>=3&&!i.some(function(r){return isNaN(r)})){var a=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:a,pitch:+(i[4]||0)}),!0}return!1},Nn.prototype._updateHashUnthrottled=function(){var i=f.window.location.href.replace(/(#.+)?$/,this.getHashString());try{f.window.history.replaceState(f.window.history.state,null,i)}catch(a){}};var Qt={linearity:.3,easing:f.bezier(0,0,.3,1)},sl=f.extend({deceleration:2500,maxSpeed:1400},Qt),is=f.extend({deceleration:20,maxSpeed:1400},Qt),nr=f.extend({deceleration:1e3,maxSpeed:360},Qt),$l=f.extend({deceleration:1e3,maxSpeed:90},Qt),bs=function(i){this._map=i,this.clear()};function Zo(i,a){(!i.duration||i.duration<a.duration)&&(i.duration=a.duration,i.easing=a.easing)}function Go(i,a,r){var c=r.maxSpeed,g=r.linearity,_=r.deceleration,w=f.clamp(i*g/(a/1e3),-c,c),E=Math.abs(w)/(_*g);return{easing:r.easing,duration:1e3*E,amount:w*(E/2)}}bs.prototype.clear=function(){this._inertiaBuffer=[]},bs.prototype.record=function(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:f.browser.now(),settings:i})},bs.prototype._drainInertiaBuffer=function(){for(var i=this._inertiaBuffer,a=f.browser.now();i.length>0&&a-i[0].time>160;)i.shift()},bs.prototype._onMoveEnd=function(i){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var a={zoom:0,bearing:0,pitch:0,pan:new f.Point(0,0),pinchAround:void 0,around:void 0},r=0,c=this._inertiaBuffer;r<c.length;r+=1){var g=c[r].settings;a.zoom+=g.zoomDelta||0,a.bearing+=g.bearingDelta||0,a.pitch+=g.pitchDelta||0,g.panDelta&&a.pan._add(g.panDelta),g.around&&(a.around=g.around),g.pinchAround&&(a.pinchAround=g.pinchAround)}var _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(a.pan.mag()){var E=Go(a.pan.mag(),_,f.extend({},sl,i||{}));w.offset=a.pan.mult(E.amount/a.pan.mag()),w.center=this._map.transform.center,Zo(w,E)}if(a.zoom){var k=Go(a.zoom,_,is);w.zoom=this._map.transform.zoom+k.amount,Zo(w,k)}if(a.bearing){var N=Go(a.bearing,_,nr);w.bearing=this._map.transform.bearing+f.clamp(N.amount,-179,179),Zo(w,N)}if(a.pitch){var X=Go(a.pitch,_,$l);w.pitch=this._map.transform.pitch+X.amount,Zo(w,X)}if(w.zoom||w.bearing){var Q=void 0===a.pinchAround?a.around:a.pinchAround;w.around=Q?this._map.unproject(Q):this._map.getCenter()}return this.clear(),f.extend(w,{noMoveStart:!0})}};var ai=function(i){function a(c,g,_,w){void 0===w&&(w={});var E=Ge.mousePos(g.getCanvasContainer(),_),k=g.unproject(E);i.call(this,c,f.extend({point:E,lngLat:k,originalEvent:_},w)),this._defaultPrevented=!1,this.target=g}i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a;var r={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(a.prototype,r),a}(f.Event),Zt=function(i){function a(c,g,_){var w="touchend"===c?_.changedTouches:_.touches,E=Ge.touchPos(g.getCanvasContainer(),w),k=E.map(function(Q){return g.unproject(Q)}),N=E.reduce(function(Q,Y,le,o){return Q.add(Y.div(o.length))},new f.Point(0,0)),X=g.unproject(N);i.call(this,c,{points:E,point:N,lngLats:k,lngLat:X,originalEvent:_}),this._defaultPrevented=!1}i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a;var r={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(a.prototype,r),a}(f.Event),bu=function(i){function a(c,g,_){i.call(this,c,{originalEvent:_}),this._defaultPrevented=!1}i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a;var r={defaultPrevented:{configurable:!0}};return a.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(a.prototype,r),a}(f.Event),di=function(i,a){this._map=i,this._clickTolerance=a.clickTolerance};di.prototype.reset=function(){delete this._mousedownPos},di.prototype.wheel=function(i){return this._firePreventable(new bu(i.type,this._map,i))},di.prototype.mousedown=function(i,a){return this._mousedownPos=a,this._firePreventable(new ai(i.type,this._map,i))},di.prototype.mouseup=function(i){this._map.fire(new ai(i.type,this._map,i))},di.prototype.click=function(i,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new ai(i.type,this._map,i))},di.prototype.dblclick=function(i){return this._firePreventable(new ai(i.type,this._map,i))},di.prototype.mouseover=function(i){this._map.fire(new ai(i.type,this._map,i))},di.prototype.mouseout=function(i){this._map.fire(new ai(i.type,this._map,i))},di.prototype.touchstart=function(i){return this._firePreventable(new Zt(i.type,this._map,i))},di.prototype.touchmove=function(i){this._map.fire(new Zt(i.type,this._map,i))},di.prototype.touchend=function(i){this._map.fire(new Zt(i.type,this._map,i))},di.prototype.touchcancel=function(i){this._map.fire(new Zt(i.type,this._map,i))},di.prototype._firePreventable=function(i){if(this._map.fire(i),i.defaultPrevented)return{}},di.prototype.isEnabled=function(){return!0},di.prototype.isActive=function(){return!1},di.prototype.enable=function(){},di.prototype.disable=function(){};var Zi=function(i){this._map=i};Zi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Zi.prototype.mousemove=function(i){this._map.fire(new ai(i.type,this._map,i))},Zi.prototype.mousedown=function(){this._delayContextMenu=!0},Zi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ai("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Zi.prototype.contextmenu=function(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new ai(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()},Zi.prototype.isEnabled=function(){return!0},Zi.prototype.isActive=function(){return!1},Zi.prototype.enable=function(){},Zi.prototype.disable=function(){};var rt=function(i,a){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=a.clickTolerance||1};function ll(i,a){for(var r={},c=0;c<i.length;c++)r[i[c].identifier]=a[c];return r}rt.prototype.isEnabled=function(){return!!this._enabled},rt.prototype.isActive=function(){return!!this._active},rt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},rt.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},rt.prototype.mousedown=function(i,a){this.isEnabled()&&i.shiftKey&&0===i.button&&(Ge.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)},rt.prototype.mousemoveWindow=function(i,a){if(this._active){var r=a;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var c=this._startPos;this._lastPos=r,this._box||(this._box=Ge.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));var g=Math.min(c.x,r.x),_=Math.max(c.x,r.x),w=Math.min(c.y,r.y),E=Math.max(c.y,r.y);Ge.setTransform(this._box,"translate("+g+"px,"+w+"px)"),this._box.style.width=_-g+"px",this._box.style.height=E-w+"px"}}},rt.prototype.mouseupWindow=function(i,a){var r=this;if(this._active&&0===i.button){var c=this._startPos,g=a;if(this.reset(),Ge.suppressClick(),c.x!==g.x||c.y!==g.y)return this._map.fire(new f.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:function(_){return _.fitScreenCoordinates(c,g,r._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",i)}},rt.prototype.keydown=function(i){this._active&&27===i.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",i))},rt.prototype.reset=function(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(Ge.remove(this._box),this._box=null),Ge.enableDrag(),delete this._startPos,delete this._lastPos},rt.prototype._fireEvent=function(i,a){return this._map.fire(new f.Event(i,{originalEvent:a}))};var ws=function(i){this.reset(),this.numTouches=i.numTouches};ws.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ws.prototype.touchstart=function(i,a,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=i.timeStamp),r.length===this.numTouches&&(this.centroid=function(c){for(var g=new f.Point(0,0),_=0,w=c;_<w.length;_+=1)g._add(w[_]);return g.div(c.length)}(a),this.touches=ll(r,a)))},ws.prototype.touchmove=function(i,a,r){if(!this.aborted&&this.centroid){var c=ll(r,a);for(var g in this.touches){var _=c[g];(!_||_.dist(this.touches[g])>30)&&(this.aborted=!0)}}},ws.prototype.touchend=function(i,a,r){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){var c=!this.aborted&&this.centroid;if(this.reset(),c)return c}};var xo=function(i){this.singleTap=new ws(i),this.numTaps=i.numTaps,this.reset()};xo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},xo.prototype.touchstart=function(i,a,r){this.singleTap.touchstart(i,a,r)},xo.prototype.touchmove=function(i,a,r){this.singleTap.touchmove(i,a,r)},xo.prototype.touchend=function(i,a,r){var c=this.singleTap.touchend(i,a,r);if(c){var g=i.timeStamp-this.lastTime<500,_=!this.lastTap||this.lastTap.dist(c)<30;if(g&&_||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=c,this.count===this.numTaps)return this.reset(),c}};var si=function(){this._zoomIn=new xo({numTouches:1,numTaps:2}),this._zoomOut=new xo({numTouches:2,numTaps:1}),this.reset()};si.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},si.prototype.touchstart=function(i,a,r){this._zoomIn.touchstart(i,a,r),this._zoomOut.touchstart(i,a,r)},si.prototype.touchmove=function(i,a,r){this._zoomIn.touchmove(i,a,r),this._zoomOut.touchmove(i,a,r)},si.prototype.touchend=function(i,a,r){var c=this,g=this._zoomIn.touchend(i,a,r),_=this._zoomOut.touchend(i,a,r);return g?(this._active=!0,i.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(w){return w.easeTo({duration:300,zoom:w.getZoom()+1,around:w.unproject(g)},{originalEvent:i})}}):_?(this._active=!0,i.preventDefault(),setTimeout(function(){return c.reset()},0),{cameraAnimation:function(w){return w.easeTo({duration:300,zoom:w.getZoom()-1,around:w.unproject(_)},{originalEvent:i})}}):void 0},si.prototype.touchcancel=function(){this.reset()},si.prototype.enable=function(){this._enabled=!0},si.prototype.disable=function(){this._enabled=!1,this.reset()},si.prototype.isEnabled=function(){return this._enabled},si.prototype.isActive=function(){return this._active};var Oa={0:1,2:2},ir=function(i){this.reset(),this._clickTolerance=i.clickTolerance||1};ir.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ir.prototype._correctButton=function(i,a){return!1},ir.prototype._move=function(i,a){return{}},ir.prototype.mousedown=function(i,a){if(!this._lastPoint){var r=Ge.mouseButton(i);this._correctButton(i,r)&&(this._lastPoint=a,this._eventButton=r)}},ir.prototype.mousemoveWindow=function(i,a){var c,_,r=this._lastPoint;if(r)if(i.preventDefault(),_=Oa[this._eventButton],void 0===(c=i).buttons||(c.buttons&_)!==_)this.reset();else if(this._moved||!(a.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=a,this._move(r,a)},ir.prototype.mouseupWindow=function(i){this._lastPoint&&Ge.mouseButton(i)===this._eventButton&&(this._moved&&Ge.suppressClick(),this.reset())},ir.prototype.enable=function(){this._enabled=!0},ir.prototype.disable=function(){this._enabled=!1,this.reset()},ir.prototype.isEnabled=function(){return this._enabled},ir.prototype.isActive=function(){return this._active};var ot=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.mousedown=function(r,c){i.prototype.mousedown.call(this,r,c),this._lastPoint&&(this._active=!0)},a.prototype._correctButton=function(r,c){return 0===c&&!r.ctrlKey},a.prototype._move=function(r,c){return{around:c,panDelta:c.sub(r)}},a}(ir),rs=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype._correctButton=function(r,c){return 0===c&&r.ctrlKey||2===c},a.prototype._move=function(r,c){var g=.8*(c.x-r.x);if(g)return this._active=!0,{bearingDelta:g}},a.prototype.contextmenu=function(r){r.preventDefault()},a}(ir),Ss=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype._correctButton=function(r,c){return 0===c&&r.ctrlKey||2===c},a.prototype._move=function(r,c){var g=-.5*(c.y-r.y);if(g)return this._active=!0,{pitchDelta:g}},a.prototype.contextmenu=function(r){r.preventDefault()},a}(ir),vr=function(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()};vr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new f.Point(0,0)},vr.prototype.touchstart=function(i,a,r){return this._calculateTransform(i,a,r)},vr.prototype.touchmove=function(i,a,r){if(this._active&&!(r.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,a,r)},vr.prototype.touchend=function(i,a,r){this._calculateTransform(i,a,r),this._active&&r.length<this._minTouches&&this.reset()},vr.prototype.touchcancel=function(){this.reset()},vr.prototype._calculateTransform=function(i,a,r){r.length>0&&(this._active=!0);var c=ll(r,a),g=new f.Point(0,0),_=new f.Point(0,0),w=0;for(var E in c){var k=c[E],N=this._touches[E];N&&(g._add(k),_._add(k.sub(N)),w++,c[E]=k)}if(this._touches=c,!(w<this._minTouches)&&_.mag()){var X=_.div(w);if(this._sum._add(X),!(this._sum.mag()<this._clickTolerance))return{around:g.div(w),panDelta:X}}},vr.prototype.enable=function(){this._enabled=!0},vr.prototype.disable=function(){this._enabled=!1,this.reset()},vr.prototype.isEnabled=function(){return this._enabled},vr.prototype.isActive=function(){return this._active};var rr=function(){this.reset()};function Ra(i,a,r){for(var c=0;c<i.length;c++)if(i[c].identifier===r)return a[c]}function ma(i,a){return Math.log(i/a)/Math.LN2}rr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},rr.prototype._start=function(i){},rr.prototype._move=function(i,a,r){return{}},rr.prototype.touchstart=function(i,a,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([a[0],a[1]]))},rr.prototype.touchmove=function(i,a,r){if(this._firstTwoTouches){i.preventDefault();var c=this._firstTwoTouches,g=c[1],_=Ra(r,a,c[0]),w=Ra(r,a,g);if(_&&w){var E=this._aroundCenter?null:_.add(w).div(2);return this._move([_,w],E,i)}}},rr.prototype.touchend=function(i,a,r){if(this._firstTwoTouches){var c=this._firstTwoTouches,g=c[1],_=Ra(r,a,c[0]),w=Ra(r,a,g);_&&w||(this._active&&Ge.suppressClick(),this.reset())}},rr.prototype.touchcancel=function(){this.reset()},rr.prototype.enable=function(i){this._enabled=!0,this._aroundCenter=!!i&&"center"===i.around},rr.prototype.disable=function(){this._enabled=!1,this.reset()},rr.prototype.isEnabled=function(){return this._enabled},rr.prototype.isActive=function(){return this._active};var os=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.reset=function(){i.prototype.reset.call(this),delete this._distance,delete this._startDistance},a.prototype._start=function(r){this._startDistance=this._distance=r[0].dist(r[1])},a.prototype._move=function(r,c){var g=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(ma(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ma(this._distance,g),pinchAround:c}},a}(rr);function yr(i,a){return 180*i.angleWith(a)/Math.PI}var Ba=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.reset=function(){i.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},a.prototype._start=function(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])},a.prototype._move=function(r,c){var g=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:yr(this._vector,g),pinchAround:c}},a.prototype._isBelowThreshold=function(r){this._minDiameter=Math.min(this._minDiameter,r.mag());var c=25/(Math.PI*this._minDiameter)*360,g=yr(r,this._startVector);return Math.abs(g)<c},a}(rr);function ql(i){return Math.abs(i.y)>Math.abs(i.x)}var Cs=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.reset=function(){i.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},a.prototype._start=function(r){this._lastPoints=r,ql(r[0].sub(r[1]))&&(this._valid=!1)},a.prototype._move=function(r,c,g){var _=r[0].sub(this._lastPoints[0]),w=r[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(_,w,g.timeStamp),this._valid)return this._lastPoints=r,this._active=!0,{pitchDelta:(_.y+w.y)/2*-.5}},a.prototype.gestureBeginsVertically=function(r,c,g){if(void 0!==this._valid)return this._valid;var _=r.mag()>=2,w=c.mag()>=2;if(_||w){if(!_||!w)return void 0===this._firstMove&&(this._firstMove=g),g-this._firstMove<100&&void 0;var E=r.y>0==c.y>0;return ql(r)&&ql(c)&&E}},a}(rr),Es={panStep:100,bearingStep:15,pitchStep:10},Gr=function(){var i=Es;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1};function Qu(i){return i*(2-i)}Gr.prototype.reset=function(){this._active=!1},Gr.prototype.keydown=function(i){var a=this;if(!(i.altKey||i.ctrlKey||i.metaKey)){var r=0,c=0,g=0,_=0,w=0;switch(i.keyCode){case 61:case 107:case 171:case 187:r=1;break;case 189:case 109:case 173:r=-1;break;case 37:i.shiftKey?c=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?c=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),w=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(c=0,g=0),{cameraAnimation:function(E){var k=E.getZoom();E.easeTo({duration:300,easeId:"keyboardHandler",easing:Qu,zoom:r?Math.round(k)+r*(i.shiftKey?2:1):k,bearing:E.getBearing()+c*a._bearingStep,pitch:E.getPitch()+g*a._pitchStep,offset:[-_*a._panStep,-w*a._panStep],center:E.getCenter()},{originalEvent:i})}}}},Gr.prototype.enable=function(){this._enabled=!0},Gr.prototype.disable=function(){this._enabled=!1,this.reset()},Gr.prototype.isEnabled=function(){return this._enabled},Gr.prototype.isActive=function(){return this._active},Gr.prototype.disableRotation=function(){this._rotationDisabled=!0},Gr.prototype.enableRotation=function(){this._rotationDisabled=!1};var zn=function(i,a){this._map=i,this._el=i.getCanvasContainer(),this._handler=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,f.bindAll(["_onTimeout"],this)};zn.prototype.setZoomRate=function(i){this._defaultZoomRate=i},zn.prototype.setWheelZoomRate=function(i){this._wheelZoomRate=i},zn.prototype.isEnabled=function(){return!!this._enabled},zn.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},zn.prototype.isZooming=function(){return!!this._zooming},zn.prototype.enable=function(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&"center"===i.around)},zn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},zn.prototype.wheel=function(i){if(this.isEnabled()){var a=i.deltaMode===f.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY,r=f.browser.now(),c=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==a&&a%4.000244140625==0?this._type="wheel":0!==a&&Math.abs(a)<4?this._type="trackpad":c>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(c*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),i.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=i,this._delta-=a,this._active||this._start(i)),i.preventDefault()}},zn.prototype._onTimeout=function(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)},zn.prototype._start=function(i){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var a=Ge.mousePos(this._el,i);this._around=f.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(a)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},zn.prototype.renderFrame=function(){var i=this;if(this._frameId&&(this._frameId=null,this.isActive())){var a=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,c=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==c&&(c=1/c);var g="number"==typeof this._targetZoom?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(g*c))),"wheel"===this._type&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var _,w="number"==typeof this._targetZoom?this._targetZoom:a.zoom,E=this._startZoom,k=this._easing,N=!1;if("wheel"===this._type&&E&&k){var X=Math.min((f.browser.now()-this._lastWheelEventTime)/200,1),Q=k(X);_=f.number(E,w,Q),X<1?this._frameId||(this._frameId=!0):N=!0}else _=w,N=!0;return this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout(function(){i._zooming=!1,i._handler._triggerRenderFrame(),delete i._targetZoom,delete i._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!N,zoomDelta:_-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},zn.prototype._smoothOutEasing=function(i){var a=f.ease;if(this._prevEase){var r=this._prevEase,c=(f.browser.now()-r.start)/r.duration,g=r.easing(c+.01)-r.easing(c),_=.27/Math.sqrt(g*g+1e-4)*.01,w=Math.sqrt(.0729-_*_);a=f.bezier(_,w,.25,1)}return this._prevEase={start:f.browser.now(),duration:i,easing:a},a},zn.prototype.reset=function(){this._active=!1};var an=function(i,a){this._clickZoom=i,this._tapZoom=a};an.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},an.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},an.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},an.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ro=function(){this.reset()};ro.prototype.reset=function(){this._active=!1},ro.prototype.dblclick=function(i,a){return i.preventDefault(),{cameraAnimation:function(r){r.easeTo({duration:300,zoom:r.getZoom()+(i.shiftKey?-1:1),around:r.unproject(a)},{originalEvent:i})}}},ro.prototype.enable=function(){this._enabled=!0},ro.prototype.disable=function(){this._enabled=!1,this.reset()},ro.prototype.isEnabled=function(){return this._enabled},ro.prototype.isActive=function(){return this._active};var ln=function(){this._tap=new xo({numTouches:1,numTaps:1}),this.reset()};ln.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ln.prototype.touchstart=function(i,a,r){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?r.length>0&&(this._swipePoint=a[0],this._swipeTouch=r[0].identifier):this._tap.touchstart(i,a,r))},ln.prototype.touchmove=function(i,a,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;var c=a[0],g=c.y-this._swipePoint.y;return this._swipePoint=c,i.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(i,a,r)},ln.prototype.touchend=function(i,a,r){this._tapTime?this._swipePoint&&0===r.length&&this.reset():this._tap.touchend(i,a,r)&&(this._tapTime=i.timeStamp)},ln.prototype.touchcancel=function(){this.reset()},ln.prototype.enable=function(){this._enabled=!0},ln.prototype.disable=function(){this._enabled=!1,this.reset()},ln.prototype.isEnabled=function(){return this._enabled},ln.prototype.isActive=function(){return this._active};var In=function(i,a,r){this._el=i,this._mousePan=a,this._touchPan=r};In.prototype.enable=function(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},In.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")},In.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},In.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Fa=function(i,a,r){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=a,this._mousePitch=r};Fa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Fa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Fa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Fa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var jr=function(i,a,r,c){this._el=i,this._touchZoom=a,this._touchRotate=r,this._tapDragZoom=c,this._rotationDisabled=!1,this._enabled=!0};jr.prototype.enable=function(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},jr.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")},jr.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},jr.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},jr.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},jr.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var jo=function(i){return i.zoom||i.drag||i.pitch||i.rotate},Dr=function(i){function a(){i.apply(this,arguments)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a}(f.Event);function Wo(i){return i.panDelta&&i.panDelta.mag()||i.zoomDelta||i.bearingDelta||i.pitchDelta}var et=function(i,a){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new bs(i),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a),f.bindAll(["handleEvent","handleWindowEvent"],this);var r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[f.window.document,"mousemove",{capture:!0}],[f.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[f.window,"blur",void 0]];for(var c=0,g=this._listeners;c<g.length;c+=1){var _=g[c],w=_[0];Ge.addEventListener(w,_[1],w===f.window.document?this.handleWindowEvent:this.handleEvent,_[2])}};et.prototype.destroy=function(){for(var i=0,a=this._listeners;i<a.length;i+=1){var r=a[i],c=r[0];Ge.removeEventListener(c,r[1],c===f.window.document?this.handleWindowEvent:this.handleEvent,r[2])}},et.prototype._addDefaultHandlers=function(i){var a=this._map,r=a.getCanvasContainer();this._add("mapEvent",new di(a,i));var c=a.boxZoom=new rt(a,i);this._add("boxZoom",c);var g=new si,_=new ro;a.doubleClickZoom=new an(_,g),this._add("tapZoom",g),this._add("clickZoom",_);var w=new ln;this._add("tapDragZoom",w);var E=a.touchPitch=new Cs;this._add("touchPitch",E);var k=new rs(i),N=new Ss(i);a.dragRotate=new Fa(i,k,N),this._add("mouseRotate",k,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]);var X=new ot(i),Q=new vr(i);a.dragPan=new In(r,X,Q),this._add("mousePan",X),this._add("touchPan",Q,["touchZoom","touchRotate"]);var Y=new Ba,le=new os;a.touchZoomRotate=new jr(r,le,Y,w),this._add("touchRotate",Y,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]);var o=a.scrollZoom=new zn(a,this);this._add("scrollZoom",o,["mousePan"]);var v=a.keyboard=new Gr;this._add("keyboard",v),this._add("blockableMapEvent",new Zi(a));for(var l=0,d=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];l<d.length;l+=1){var b=d[l];i.interactive&&i[b]&&a[b].enable(i[b])}},et.prototype._add=function(i,a,r){this._handlers.push({handlerName:i,handler:a,allowed:r}),this._handlersById[i]=a},et.prototype.stop=function(i){if(!this._updatingCamera){for(var a=0,r=this._handlers;a<r.length;a+=1)r[a].handler.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}},et.prototype.isActive=function(){for(var i=0,a=this._handlers;i<a.length;i+=1)if(a[i].handler.isActive())return!0;return!1},et.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},et.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},et.prototype.isMoving=function(){return Boolean(jo(this._eventsInProgress))||this.isZooming()},et.prototype._blockedByActive=function(i,a,r){for(var c in i)if(c!==r&&(!a||a.indexOf(c)<0))return!0;return!1},et.prototype.handleWindowEvent=function(i){this.handleEvent(i,i.type+"Window")},et.prototype._getMapTouches=function(i){for(var a=[],r=0,c=i;r<c.length;r+=1){var g=c[r];this._el.contains(g.target)&&a.push(g)}return a},et.prototype.handleEvent=function(i,a){if("blur"!==i.type){this._updatingCamera=!0;for(var r="renderFrame"===i.type?void 0:i,c={needsRenderFrame:!1},g={},_={},w=i.touches?this._getMapTouches(i.touches):void 0,E=w?Ge.touchPos(this._el,w):Ge.mousePos(this._el,i),k=0,N=this._handlers;k<N.length;k+=1){var X=N[k],Q=X.handlerName,Y=X.handler,le=X.allowed;if(Y.isEnabled()){var o=void 0;this._blockedByActive(_,le,Q)?Y.reset():Y[a||i.type]&&(o=Y[a||i.type](i,E,w),this.mergeHandlerResult(c,g,o,Q,r),o&&o.needsRenderFrame&&this._triggerRenderFrame()),(o||Y.isActive())&&(_[Q]=Y)}}var v={};for(var l in this._previousActiveHandlers)_[l]||(v[l]=r);this._previousActiveHandlers=_,(Object.keys(v).length||Wo(c))&&(this._changes.push([c,g,v]),this._triggerRenderFrame()),(Object.keys(_).length||Wo(c))&&this._map._stop(!0),this._updatingCamera=!1;var d=c.cameraAnimation;d&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],d(this._map))}else this.stop(!0)},et.prototype.mergeHandlerResult=function(i,a,r,c,g){if(r){f.extend(i,r);var _={handlerName:c,originalEvent:r.originalEvent||g};void 0!==r.zoomDelta&&(a.zoom=_),void 0!==r.panDelta&&(a.drag=_),void 0!==r.pitchDelta&&(a.pitch=_),void 0!==r.bearingDelta&&(a.rotate=_)}},et.prototype._applyChanges=function(){for(var i={},a={},r={},c=0,g=this._changes;c<g.length;c+=1){var _=g[c],w=_[0],E=_[1],k=_[2];w.panDelta&&(i.panDelta=(i.panDelta||new f.Point(0,0))._add(w.panDelta)),w.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+w.pitchDelta),void 0!==w.around&&(i.around=w.around),void 0!==w.pinchAround&&(i.pinchAround=w.pinchAround),w.noInertia&&(i.noInertia=w.noInertia),f.extend(a,E),f.extend(r,k)}this._updateMapTransform(i,a,r),this._changes=[]},et.prototype._updateMapTransform=function(i,a,r){var c=this._map,g=c.transform;if(!Wo(i))return this._fireEvents(a,r,!0);var _=i.panDelta,w=i.zoomDelta,E=i.bearingDelta,k=i.pitchDelta,N=i.around,X=i.pinchAround;void 0!==X&&(N=X),c._stop(!0),N=N||c.transform.centerPoint;var Q=g.pointLocation(_?N.sub(_):N);E&&(g.bearing+=E),k&&(g.pitch+=k),w&&(g.zoom+=w),g.setLocationAtPoint(Q,N),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(a,r,!0)},et.prototype._fireEvents=function(i,a,r){var c=this,g=jo(this._eventsInProgress),_=jo(i),w={};for(var E in i)this._eventsInProgress[E]||(w[E+"start"]=i[E].originalEvent),this._eventsInProgress[E]=i[E];for(var k in!g&&_&&this._fireEvent("movestart",_.originalEvent),w)this._fireEvent(k,w[k]);for(var N in _&&this._fireEvent("move",_.originalEvent),i)this._fireEvent(N,i[N].originalEvent);var X,Q={};for(var Y in this._eventsInProgress){var le=this._eventsInProgress[Y],o=le.handlerName,v=le.originalEvent;this._handlersById[o].isActive()||(delete this._eventsInProgress[Y],Q[Y+"end"]=X=a[o]||v)}for(var l in Q)this._fireEvent(l,Q[l]);var d=jo(this._eventsInProgress);if(r&&(g||_)&&!d){this._updatingCamera=!0;var b=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),C=function(M){return 0!==M&&-c._bearingSnap<M&&M<c._bearingSnap};b?(C(b.bearing||this._map.getBearing())&&(b.bearing=0),this._map.easeTo(b,{originalEvent:X})):(this._map.fire(new f.Event("moveend",{originalEvent:X})),C(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},et.prototype._fireEvent=function(i,a){this._map.fire(new f.Event(i,a?{originalEvent:a}:{}))},et.prototype._requestFrame=function(){var i=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(a){delete i._frameId,i.handleEvent(new Dr("renderFrame",{timeStamp:a})),i._applyChanges()})},et.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var Ct=function(i){function a(r,c){i.call(this),this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=c.bearingSnap,f.bindAll(["_renderFrameCallback"],this)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.getCenter=function(){return new f.LngLat(this.transform.center.lng,this.transform.center.lat)},a.prototype.setCenter=function(r,c){return this.jumpTo({center:r},c)},a.prototype.panBy=function(r,c,g){return r=f.Point.convert(r).mult(-1),this.panTo(this.transform.center,f.extend({offset:r},c),g)},a.prototype.panTo=function(r,c,g){return this.easeTo(f.extend({center:r},c),g)},a.prototype.getZoom=function(){return this.transform.zoom},a.prototype.setZoom=function(r,c){return this.jumpTo({zoom:r},c),this},a.prototype.zoomTo=function(r,c,g){return this.easeTo(f.extend({zoom:r},c),g)},a.prototype.zoomIn=function(r,c){return this.zoomTo(this.getZoom()+1,r,c),this},a.prototype.zoomOut=function(r,c){return this.zoomTo(this.getZoom()-1,r,c),this},a.prototype.getBearing=function(){return this.transform.bearing},a.prototype.setBearing=function(r,c){return this.jumpTo({bearing:r},c),this},a.prototype.getPadding=function(){return this.transform.padding},a.prototype.setPadding=function(r,c){return this.jumpTo({padding:r},c),this},a.prototype.rotateTo=function(r,c,g){return this.easeTo(f.extend({bearing:r},c),g)},a.prototype.resetNorth=function(r,c){return this.rotateTo(0,f.extend({duration:1e3},r),c),this},a.prototype.resetNorthPitch=function(r,c){return this.easeTo(f.extend({bearing:0,pitch:0,duration:1e3},r),c),this},a.prototype.snapToNorth=function(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this},a.prototype.getPitch=function(){return this.transform.pitch},a.prototype.setPitch=function(r,c){return this.jumpTo({pitch:r},c),this},a.prototype.cameraForBounds=function(r,c){r=f.LngLatBounds.convert(r);var g=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),g,c)},a.prototype._cameraForBoxAndBearing=function(r,c,g,_){var w={top:0,bottom:0,right:0,left:0};if("number"==typeof(_=f.extend({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding){var E=_.padding;_.padding={top:E,bottom:E,right:E,left:E}}_.padding=f.extend(w,_.padding);var k=this.transform,N=k.padding,X=k.project(f.LngLat.convert(r)),Q=k.project(f.LngLat.convert(c)),Y=X.rotate(-g*Math.PI/180),le=Q.rotate(-g*Math.PI/180),o=new f.Point(Math.max(Y.x,le.x),Math.max(Y.y,le.y)),v=new f.Point(Math.min(Y.x,le.x),Math.min(Y.y,le.y)),l=o.sub(v),d=(k.width-(N.left+N.right+_.padding.left+_.padding.right))/l.x,b=(k.height-(N.top+N.bottom+_.padding.top+_.padding.bottom))/l.y;if(!(b<0||d<0)){var C=Math.min(k.scaleZoom(k.scale*Math.min(d,b)),_.maxZoom),M="number"==typeof _.offset.x?new f.Point(_.offset.x,_.offset.y):f.Point.convert(_.offset),O=new f.Point((_.padding.left-_.padding.right)/2,(_.padding.top-_.padding.bottom)/2).rotate(g*Math.PI/180),z=M.add(O).mult(k.scale/k.zoomScale(C));return{center:k.unproject(X.add(Q).div(2).sub(z)),zoom:C,bearing:g}}f.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},a.prototype.fitBounds=function(r,c,g){return this._fitInternal(this.cameraForBounds(r,c),c,g)},a.prototype.fitScreenCoordinates=function(r,c,g,_,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(f.Point.convert(r)),this.transform.pointLocation(f.Point.convert(c)),g,_),_,w)},a.prototype._fitInternal=function(r,c,g){return r?(delete(c=f.extend(r,c)).padding,c.linear?this.easeTo(c,g):this.flyTo(c,g)):this},a.prototype.jumpTo=function(r,c){this.stop();var g=this.transform,_=!1,w=!1,E=!1;return"zoom"in r&&g.zoom!==+r.zoom&&(_=!0,g.zoom=+r.zoom),void 0!==r.center&&(g.center=f.LngLat.convert(r.center)),"bearing"in r&&g.bearing!==+r.bearing&&(w=!0,g.bearing=+r.bearing),"pitch"in r&&g.pitch!==+r.pitch&&(E=!0,g.pitch=+r.pitch),null==r.padding||g.isPaddingEqual(r.padding)||(g.padding=r.padding),this.fire(new f.Event("movestart",c)).fire(new f.Event("move",c)),_&&this.fire(new f.Event("zoomstart",c)).fire(new f.Event("zoom",c)).fire(new f.Event("zoomend",c)),w&&this.fire(new f.Event("rotatestart",c)).fire(new f.Event("rotate",c)).fire(new f.Event("rotateend",c)),E&&this.fire(new f.Event("pitchstart",c)).fire(new f.Event("pitch",c)).fire(new f.Event("pitchend",c)),this.fire(new f.Event("moveend",c))},a.prototype.easeTo=function(r,c){var g=this;this._stop(!1,r.easeId),(!1===(r=f.extend({offset:[0,0],duration:500,easing:f.ease},r)).animate||!r.essential&&f.browser.prefersReducedMotion)&&(r.duration=0);var _=this.transform,w=this.getZoom(),E=this.getBearing(),k=this.getPitch(),N=this.getPadding(),X="zoom"in r?+r.zoom:w,Q="bearing"in r?this._normalizeBearing(r.bearing,E):E,Y="pitch"in r?+r.pitch:k,le="padding"in r?r.padding:_.padding,o=f.Point.convert(r.offset),v=_.centerPoint.add(o),l=_.pointLocation(v),d=f.LngLat.convert(r.center||l);this._normalizeCenter(d);var b,C,M=_.project(l),O=_.project(d).sub(M),z=_.zoomScale(X-w);r.around&&(b=f.LngLat.convert(r.around),C=_.locationPoint(b));var R={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||X!==w,this._rotating=this._rotating||E!==Q,this._pitching=this._pitching||Y!==k,this._padding=!_.isPaddingEqual(le),this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,R),this._ease(function(D){if(g._zooming&&(_.zoom=f.number(w,X,D)),g._rotating&&(_.bearing=f.number(E,Q,D)),g._pitching&&(_.pitch=f.number(k,Y,D)),g._padding&&(_.interpolatePadding(N,le,D),v=_.centerPoint.add(o)),b)_.setLocationAtPoint(b,C);else{var P=_.zoomScale(_.zoom-w),q=X>w?Math.min(2,z):Math.max(.5,z),W=Math.pow(q,1-D),K=_.unproject(M.add(O.mult(D*W)).mult(P));_.setLocationAtPoint(_.renderWorldCopies?K.wrap():K,v)}g._fireMoveEvents(c)},function(D){g._afterEase(c,D)},r),this},a.prototype._prepareEase=function(r,c,g){void 0===g&&(g={}),this._moving=!0,c||g.moving||this.fire(new f.Event("movestart",r)),this._zooming&&!g.zooming&&this.fire(new f.Event("zoomstart",r)),this._rotating&&!g.rotating&&this.fire(new f.Event("rotatestart",r)),this._pitching&&!g.pitching&&this.fire(new f.Event("pitchstart",r))},a.prototype._fireMoveEvents=function(r){this.fire(new f.Event("move",r)),this._zooming&&this.fire(new f.Event("zoom",r)),this._rotating&&this.fire(new f.Event("rotate",r)),this._pitching&&this.fire(new f.Event("pitch",r))},a.prototype._afterEase=function(r,c){if(!this._easeId||!c||this._easeId!==c){delete this._easeId;var g=this._zooming,_=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new f.Event("zoomend",r)),_&&this.fire(new f.Event("rotateend",r)),w&&this.fire(new f.Event("pitchend",r)),this.fire(new f.Event("moveend",r))}},a.prototype.flyTo=function(r,c){var g=this;if(!r.essential&&f.browser.prefersReducedMotion){var _=f.pick(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(_,c)}this.stop(),r=f.extend({offset:[0,0],speed:1.2,curve:1.42,easing:f.ease},r);var w=this.transform,E=this.getZoom(),k=this.getBearing(),N=this.getPitch(),X=this.getPadding(),Q="zoom"in r?f.clamp(+r.zoom,w.minZoom,w.maxZoom):E,Y="bearing"in r?this._normalizeBearing(r.bearing,k):k,le="pitch"in r?+r.pitch:N,o="padding"in r?r.padding:w.padding,v=w.zoomScale(Q-E),l=f.Point.convert(r.offset),d=w.centerPoint.add(l),b=w.pointLocation(d),C=f.LngLat.convert(r.center||b);this._normalizeCenter(C);var M=w.project(b),O=w.project(C).sub(M),z=r.curve,R=Math.max(w.width,w.height),D=R/v,P=O.mag();if("minZoom"in r){var q=f.clamp(Math.min(r.minZoom,E,Q),w.minZoom,w.maxZoom),W=R/w.zoomScale(q-E);z=Math.sqrt(W/P*2)}var K=z*z;function ae(Oe){var xe=(D*D-R*R+(Oe?-1:1)*K*K*P*P)/(2*(Oe?D:R)*K*P);return Math.log(Math.sqrt(xe*xe+1)-xe)}function re(Oe){return(Math.exp(Oe)-Math.exp(-Oe))/2}function ue(Oe){return(Math.exp(Oe)+Math.exp(-Oe))/2}var _e=ae(0),ve=function(Oe){return ue(_e)/ue(_e+z*Oe)},Ee=function(Oe){return R*((ue(_e)*(re(xe=_e+z*Oe)/ue(xe))-re(_e))/K)/P;var xe},Me=(ae(1)-_e)/z;if(Math.abs(P)<1e-6||!isFinite(Me)){if(Math.abs(R-D)<1e-6)return this.easeTo(r,c);var De=D<R?-1:1;Me=Math.abs(Math.log(D/R))/z,Ee=function(){return 0},ve=function(Oe){return Math.exp(De*z*Oe)}}return r.duration="duration"in r?+r.duration:1e3*Me/("screenSpeed"in r?+r.screenSpeed/z:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=k!==Y,this._pitching=le!==N,this._padding=!w.isPaddingEqual(o),this._prepareEase(c,!1),this._ease(function(Oe){var xe=Oe*Me,Te=1/ve(xe);w.zoom=1===Oe?Q:E+w.scaleZoom(Te),g._rotating&&(w.bearing=f.number(k,Y,Oe)),g._pitching&&(w.pitch=f.number(N,le,Oe)),g._padding&&(w.interpolatePadding(X,o,Oe),d=w.centerPoint.add(l));var Re=1===Oe?C:w.unproject(M.add(O.mult(Ee(xe))).mult(Te));w.setLocationAtPoint(w.renderWorldCopies?Re.wrap():Re,d),g._fireMoveEvents(c)},function(){return g._afterEase(c)},r),this},a.prototype.isEasing=function(){return!!this._easeFrameId},a.prototype.stop=function(){return this._stop()},a.prototype._stop=function(r,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,c)}if(!r){var _=this.handlers;_&&_.stop(!1)}return this},a.prototype._ease=function(r,c,g){!1===g.animate||0===g.duration?(r(1),c()):(this._easeStart=f.browser.now(),this._easeOptions=g,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},a.prototype._renderFrameCallback=function(){var r=Math.min((f.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(r)),r<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},a.prototype._normalizeBearing=function(r,c){r=f.wrap(r,-180,180);var g=Math.abs(r-c);return Math.abs(r-360-c)<g&&(r-=360),Math.abs(r+360-c)<g&&(r+=360),r},a.prototype._normalizeCenter=function(r){var c=this.transform;if(c.renderWorldCopies&&!c.lngRange){var g=r.lng-c.center.lng;r.lng+=g>180?-360:g<-180?360:0}},a}(f.Evented),mi=function(i){void 0===i&&(i={}),this.options=i,f.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};mi.prototype.getDefaultPosition=function(){return"bottom-right"},mi.prototype.onAdd=function(i){var a=this.options&&this.options.compact;return this._map=i,this._container=Ge.create("div","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Ge.create("button","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.type="button",this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ge.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),a&&this._container.classList.add("maplibregl-compact","mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===a&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},mi.prototype.onRemove=function(){Ge.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},mi.prototype._setElementTitle=function(i,a){var r=this._map._getUIString("AttributionControl."+a);i.title=r,i.setAttribute("aria-label",r)},mi.prototype._toggleAttribution=function(){this._container.classList.contains("maplibregl-compact-show")||this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},mi.prototype._updateEditLink=function(){var i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));var a=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||f.config.ACCESS_TOKEN}];if(i){var r=a.reduce(function(c,g,_){return g.value&&(c+=g.key+"="+g.value+(_<a.length-1?"&":"")),c},"?");i.href=f.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}},mi.prototype._updateData=function(i){!i||"metadata"!==i.sourceDataType&&"visibility"!==i.sourceDataType&&"style"!==i.dataType||(this._updateAttributions(),this._updateEditLink())},mi.prototype._updateAttributions=function(){if(this._map.style){var i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(function(E){return"string"!=typeof E?"":E})):"string"==typeof this.options.customAttribution&&i.push(this.options.customAttribution)),this._map.style.stylesheet){var a=this._map.style.stylesheet;this.styleOwner=a.owner,this.styleId=a.id}var r=this._map.style.sourceCaches;for(var c in r){var g=r[c];if(g.used){var _=g.getSource();_.attribution&&i.indexOf(_.attribution)<0&&i.push(_.attribution)}}i.sort(function(E,k){return E.length-k.length});var w=(i=i.filter(function(E,k){for(var N=k+1;N<i.length;N++)if(i[N].indexOf(E)>=0)return!1;return!0})).join(" | ");w!==this._attribHTML&&(this._attribHTML=w,i.length?(this._innerContainer.innerHTML=w,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._editLink=null)}},mi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("maplibregl-compact","mapboxgl-compact"):this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show")};var Gi=function(){f.bindAll(["_updateLogo"],this),f.bindAll(["_updateCompact"],this)};Gi.prototype.onAdd=function(i){this._map=i,this._container=Ge.create("div","maplibregl-ctrl mapboxgl-ctrl");var a=Ge.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Gi.prototype.onRemove=function(){Ge.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Gi.prototype.getDefaultPosition=function(){return"bottom-left"},Gi.prototype._updateLogo=function(i){i&&"metadata"!==i.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Gi.prototype._logoRequired=function(){if(this._map.style){var i=this._map.style.sourceCaches;for(var a in i)if(i[a].getSource().mapbox_logo)return!0;return!1}},Gi.prototype._updateCompact=function(){var i=this._container.children;if(i.length){var a=i[0];this._map.getCanvasContainer().offsetWidth<250?a.classList.add("maplibregl-compact","mapboxgl-compact"):a.classList.remove("maplibregl-compact","mapboxgl-compact")}};var Lr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Lr.prototype.add=function(i){var a=++this._id;return this._queue.push({callback:i,id:a,cancelled:!1}),a},Lr.prototype.remove=function(i){for(var a=this._currentlyRunning,r=0,c=a?this._queue.concat(a):this._queue;r<c.length;r+=1){var g=c[r];if(g.id===i)return void(g.cancelled=!0)}},Lr.prototype.run=function(i){void 0===i&&(i=0);var a=this._currentlyRunning=this._queue;this._queue=[];for(var r=0,c=a;r<c.length;r+=1){var g=c[r];if(!g.cancelled&&(g.callback(i),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Lr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var zi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ki=f.window.HTMLImageElement,ec=f.window.HTMLElement,Ho=f.window.ImageBitmap,_n={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},gi=function(i){function a(c){var g=this;if(null!=(c=f.extend({},_n,c)).minZoom&&null!=c.maxZoom&&c.minZoom>c.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=c.minPitch&&null!=c.maxPitch&&c.minPitch>c.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=c.minPitch&&c.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=c.maxPitch&&c.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var _=new pt(c.minZoom,c.maxZoom,c.minPitch,c.maxPitch,c.renderWorldCopies);if(i.call(this,_,c),this._interactive=c.interactive,this._maxTileCacheSize=c.maxTileCacheSize,this._failIfMajorPerformanceCaveat=c.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=c.preserveDrawingBuffer,this._antialias=c.antialias,this._trackResize=c.trackResize,this._bearingSnap=c.bearingSnap,this._refreshExpiredTiles=c.refreshExpiredTiles,this._fadeDuration=c.fadeDuration,this._crossSourceCollisions=c.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=c.collectResourceTiming,this._renderTaskQueue=new Lr,this._controls=[],this._mapId=f.uniqueId(),this._locale=f.extend({},zi,c.locale),this._clickTolerance=c.clickTolerance,this._requestManager=new f.RequestManager(c.transformRequest,c.accessToken),"string"==typeof c.container){if(this._container=f.window.document.getElementById(c.container),!this._container)throw new Error("Container '"+c.container+"' not found.")}else{if(!(c.container instanceof ec))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=c.container}if(c.maxBounds&&this.setMaxBounds(c.maxBounds),f.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return g._update(!1)}),this.on("moveend",function(){return g._update(!1)}),this.on("zoom",function(){return g._update(!0)}),void 0!==f.window&&(f.window.addEventListener("online",this._onWindowOnline,!1),f.window.addEventListener("resize",this._onWindowResize,!1),f.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new et(this,c),this._hash=c.hash&&new Nn("string"==typeof c.hash&&c.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:c.center,zoom:c.zoom,bearing:c.bearing,pitch:c.pitch}),c.bounds&&(this.resize(),this.fitBounds(c.bounds,f.extend({},c.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=c.localIdeographFontFamily,c.style&&this.setStyle(c.style,{localIdeographFontFamily:c.localIdeographFontFamily}),c.attributionControl&&this.addControl(new mi({customAttribution:c.customAttribution})),this.addControl(new Gi,c.logoPosition),this.on("style.load",function(){g.transform.unmodified&&g.jumpTo(g.style.stylesheet)}),this.on("data",function(w){g._update("style"===w.dataType),g.fire(new f.Event(w.dataType+"data",w))}),this.on("dataloading",function(w){g.fire(new f.Event(w.dataType+"dataloading",w))})}i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a;var r={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return a.prototype._getMapId=function(){return this._mapId},a.prototype.addControl=function(c,g){if(void 0===g&&(g=c.getDefaultPosition?c.getDefaultPosition():"top-right"),!c||!c.onAdd)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var _=c.onAdd(this);this._controls.push(c);var w=this._controlPositions[g];return-1!==g.indexOf("bottom")?w.insertBefore(_,w.firstChild):w.appendChild(_),this},a.prototype.removeControl=function(c){if(!c||!c.onRemove)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var g=this._controls.indexOf(c);return g>-1&&this._controls.splice(g,1),c.onRemove(this),this},a.prototype.hasControl=function(c){return this._controls.indexOf(c)>-1},a.prototype.resize=function(c){var g=this._containerDimensions(),_=g[0],w=g[1];this._resizeCanvas(_,w),this.transform.resize(_,w),this.painter.resize(_,w);var E=!this._moving;return E&&(this.stop(),this.fire(new f.Event("movestart",c)).fire(new f.Event("move",c))),this.fire(new f.Event("resize",c)),E&&this.fire(new f.Event("moveend",c)),this},a.prototype.getBounds=function(){return this.transform.getBounds()},a.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},a.prototype.setMaxBounds=function(c){return this.transform.setMaxBounds(f.LngLatBounds.convert(c)),this._update()},a.prototype.setMinZoom=function(c){if((c=null==c?-2:c)>=-2&&c<=this.transform.maxZoom)return this.transform.minZoom=c,this._update(),this.getZoom()<c&&this.setZoom(c),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},a.prototype.getMinZoom=function(){return this.transform.minZoom},a.prototype.setMaxZoom=function(c){if((c=null==c?22:c)>=this.transform.minZoom)return this.transform.maxZoom=c,this._update(),this.getZoom()>c&&this.setZoom(c),this;throw new Error("maxZoom must be greater than the current minZoom")},a.prototype.getMaxZoom=function(){return this.transform.maxZoom},a.prototype.setMinPitch=function(c){if((c=null==c?0:c)<0)throw new Error("minPitch must be greater than or equal to 0");if(c>=0&&c<=this.transform.maxPitch)return this.transform.minPitch=c,this._update(),this.getPitch()<c&&this.setPitch(c),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},a.prototype.getMinPitch=function(){return this.transform.minPitch},a.prototype.setMaxPitch=function(c){if((c=null==c?60:c)>60)throw new Error("maxPitch must be less than or equal to 60");if(c>=this.transform.minPitch)return this.transform.maxPitch=c,this._update(),this.getPitch()>c&&this.setPitch(c),this;throw new Error("maxPitch must be greater than the current minPitch")},a.prototype.getMaxPitch=function(){return this.transform.maxPitch},a.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},a.prototype.setRenderWorldCopies=function(c){return this.transform.renderWorldCopies=c,this._update()},a.prototype.project=function(c){return this.transform.locationPoint(f.LngLat.convert(c))},a.prototype.unproject=function(c){return this.transform.pointLocation(f.Point.convert(c))},a.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},a.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},a.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},a.prototype._createDelegatedListener=function(c,g,_){var w,E=this;if("mouseenter"===c||"mouseover"===c){var k=!1;return{layer:g,listener:_,delegates:{mousemove:function(X){var Q=E.getLayer(g)?E.queryRenderedFeatures(X.point,{layers:[g]}):[];Q.length?k||(k=!0,_.call(E,new ai(c,E,X.originalEvent,{features:Q}))):k=!1},mouseout:function(){k=!1}}}}if("mouseleave"===c||"mouseout"===c){var N=!1;return{layer:g,listener:_,delegates:{mousemove:function(X){(E.getLayer(g)?E.queryRenderedFeatures(X.point,{layers:[g]}):[]).length?N=!0:N&&(N=!1,_.call(E,new ai(c,E,X.originalEvent)))},mouseout:function(X){N&&(N=!1,_.call(E,new ai(c,E,X.originalEvent)))}}}}return{layer:g,listener:_,delegates:(w={},w[c]=function(X){var Q=E.getLayer(g)?E.queryRenderedFeatures(X.point,{layers:[g]}):[];Q.length&&(X.features=Q,_.call(E,X),delete X.features)},w)}},a.prototype.on=function(c,g,_){if(void 0===_)return i.prototype.on.call(this,c,g);var w=this._createDelegatedListener(c,g,_);for(var E in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[c]=this._delegatedListeners[c]||[],this._delegatedListeners[c].push(w),w.delegates)this.on(E,w.delegates[E]);return this},a.prototype.once=function(c,g,_){if(void 0===_)return i.prototype.once.call(this,c,g);var w=this._createDelegatedListener(c,g,_);for(var E in w.delegates)this.once(E,w.delegates[E]);return this},a.prototype.off=function(c,g,_){var w=this;return void 0===_?i.prototype.off.call(this,c,g):(this._delegatedListeners&&this._delegatedListeners[c]&&function(E){for(var k=E[c],N=0;N<k.length;N++){var X=k[N];if(X.layer===g&&X.listener===_){for(var Q in X.delegates)w.off(Q,X.delegates[Q]);return k.splice(N,1),w}}}(this._delegatedListeners),this)},a.prototype.queryRenderedFeatures=function(c,g){if(!this.style)return[];var _;if(void 0!==g||void 0===c||c instanceof f.Point||Array.isArray(c)||(g=c,c=void 0),g=g||{},(c=c||[[0,0],[this.transform.width,this.transform.height]])instanceof f.Point||"number"==typeof c[0])_=[f.Point.convert(c)];else{var w=f.Point.convert(c[0]),E=f.Point.convert(c[1]);_=[w,new f.Point(E.x,w.y),E,new f.Point(w.x,E.y),w]}return this.style.queryRenderedFeatures(_,g,this.transform)},a.prototype.querySourceFeatures=function(c,g){return this.style.querySourceFeatures(c,g)},a.prototype.setStyle=function(c,g){return!1!==(g=f.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},g)).diff&&g.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&c?(this._diffStyle(c,g),this):(this._localIdeographFontFamily=g.localIdeographFontFamily,this._updateStyle(c,g))},a.prototype.setTransformRequest=function(c){return this._requestManager.setTransformRequest(c),this},a.prototype._getUIString=function(c){var g=this._locale[c];if(null==g)throw new Error("Missing UI string '"+c+"'");return g},a.prototype._updateStyle=function(c,g){return this.style&&(this.style.setEventedParent(null),this.style._remove()),c?(this.style=new Bo(this,g||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof c?this.style.loadURL(c):this.style.loadJSON(c),this):(delete this.style,this)},a.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Bo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},a.prototype._diffStyle=function(c,g){var _=this;if("string"==typeof c){var w=this._requestManager.normalizeStyleURL(c),E=this._requestManager.transformRequest(w,f.ResourceType.Style);f.getJSON(E,function(k,N){k?_.fire(new f.ErrorEvent(k)):N&&_._updateDiff(N,g)})}else"object"==typeof c&&this._updateDiff(c,g)},a.prototype._updateDiff=function(c,g){try{this.style.setState(c)&&this._update(!0)}catch(_){f.warnOnce("Unable to perform style diff: "+(_.message||_.error||_)+".  Rebuilding the style from scratch."),this._updateStyle(c,g)}},a.prototype.getStyle=function(){if(this.style)return this.style.serialize()},a.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():f.warnOnce("There is no style added to the map.")},a.prototype.addSource=function(c,g){return this._lazyInitEmptyStyle(),this.style.addSource(c,g),this._update(!0)},a.prototype.isSourceLoaded=function(c){var g=this.style&&this.style.sourceCaches[c];if(void 0!==g)return g.loaded();this.fire(new f.ErrorEvent(new Error("There is no source with ID '"+c+"'")))},a.prototype.areTilesLoaded=function(){var c=this.style&&this.style.sourceCaches;for(var g in c){var _=c[g]._tiles;for(var w in _){var E=_[w];if("loaded"!==E.state&&"errored"!==E.state)return!1}}return!0},a.prototype.addSourceType=function(c,g,_){return this._lazyInitEmptyStyle(),this.style.addSourceType(c,g,_)},a.prototype.removeSource=function(c){return this.style.removeSource(c),this._update(!0)},a.prototype.getSource=function(c){return this.style.getSource(c)},a.prototype.addImage=function(c,g,_){void 0===_&&(_={});var w=_.pixelRatio;void 0===w&&(w=1);var E=_.sdf;void 0===E&&(E=!1);var k=_.stretchX,N=_.stretchY,X=_.content;if(this._lazyInitEmptyStyle(),g instanceof ki||Ho&&g instanceof Ho){var Q=f.browser.getImageData(g);this.style.addImage(c,{data:new f.RGBAImage({width:Q.width,height:Q.height},Q.data),pixelRatio:w,stretchX:k,stretchY:N,content:X,sdf:E,version:0})}else{if(void 0===g.width||void 0===g.height)return this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Y=g;this.style.addImage(c,{data:new f.RGBAImage({width:g.width,height:g.height},new Uint8Array(g.data)),pixelRatio:w,stretchX:k,stretchY:N,content:X,sdf:E,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,c)}},a.prototype.updateImage=function(c,g){var _=this.style.getImage(c);if(!_)return this.fire(new f.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var w=g instanceof ki||Ho&&g instanceof Ho?f.browser.getImageData(g):g,E=w.width,k=w.height,N=w.data;return void 0===E||void 0===k?this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):E!==_.data.width||k!==_.data.height?this.fire(new f.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(_.data.replace(N,!(g instanceof ki||Ho&&g instanceof Ho)),void this.style.updateImage(c,_))},a.prototype.hasImage=function(c){return c?!!this.style.getImage(c):(this.fire(new f.ErrorEvent(new Error("Missing required image id"))),!1)},a.prototype.removeImage=function(c){this.style.removeImage(c)},a.prototype.loadImage=function(c,g){f.getImage(this._requestManager.transformRequest(c,f.ResourceType.Image),g)},a.prototype.listImages=function(){return this.style.listImages()},a.prototype.addLayer=function(c,g){return this._lazyInitEmptyStyle(),this.style.addLayer(c,g),this._update(!0)},a.prototype.moveLayer=function(c,g){return this.style.moveLayer(c,g),this._update(!0)},a.prototype.removeLayer=function(c){return this.style.removeLayer(c),this._update(!0)},a.prototype.getLayer=function(c){return this.style.getLayer(c)},a.prototype.setLayerZoomRange=function(c,g,_){return this.style.setLayerZoomRange(c,g,_),this._update(!0)},a.prototype.setFilter=function(c,g,_){return void 0===_&&(_={}),this.style.setFilter(c,g,_),this._update(!0)},a.prototype.getFilter=function(c){return this.style.getFilter(c)},a.prototype.setPaintProperty=function(c,g,_,w){return void 0===w&&(w={}),this.style.setPaintProperty(c,g,_,w),this._update(!0)},a.prototype.getPaintProperty=function(c,g){return this.style.getPaintProperty(c,g)},a.prototype.setLayoutProperty=function(c,g,_,w){return void 0===w&&(w={}),this.style.setLayoutProperty(c,g,_,w),this._update(!0)},a.prototype.getLayoutProperty=function(c,g){return this.style.getLayoutProperty(c,g)},a.prototype.setLight=function(c,g){return void 0===g&&(g={}),this._lazyInitEmptyStyle(),this.style.setLight(c,g),this._update(!0)},a.prototype.getLight=function(){return this.style.getLight()},a.prototype.setFeatureState=function(c,g){return this.style.setFeatureState(c,g),this._update()},a.prototype.removeFeatureState=function(c,g){return this.style.removeFeatureState(c,g),this._update()},a.prototype.getFeatureState=function(c){return this.style.getFeatureState(c)},a.prototype.getContainer=function(){return this._container},a.prototype.getCanvasContainer=function(){return this._canvasContainer},a.prototype.getCanvas=function(){return this._canvas},a.prototype._containerDimensions=function(){var c=0,g=0;return this._container&&(c=this._container.clientWidth||400,g=this._container.clientHeight||300),[c,g]},a.prototype._setupContainer=function(){var c=this._container;c.classList.add("maplibregl-map","mapboxgl-map");var g=this._canvasContainer=Ge.create("div","maplibregl-canvas-container mapboxgl-canvas-container",c);this._interactive&&g.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=Ge.create("canvas","maplibregl-canvas mapboxgl-canvas",g),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var _=this._containerDimensions();this._resizeCanvas(_[0],_[1]);var w=this._controlContainer=Ge.create("div","maplibregl-control-container mapboxgl-control-container",c),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(k){E[k]=Ge.create("div","maplibregl-ctrl-"+k+" mapboxgl-ctrl-"+k,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},a.prototype._resizeCanvas=function(c,g){var _=f.browser.devicePixelRatio||1;this._canvas.width=_*c,this._canvas.height=_*g,this._canvas.style.width=c+"px",this._canvas.style.height=g+"px"},a.prototype._setupPainter=function(){var c=f.extend({},Bi.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),g=this._canvas.getContext("webgl",c)||this._canvas.getContext("experimental-webgl",c);g?(this.painter=new ye(g,this.transform),f.webpSupported.testSupport(g)):this.fire(new f.ErrorEvent(new Error("Failed to initialize WebGL")))},a.prototype._contextLost=function(c){c.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new f.Event("webglcontextlost",{originalEvent:c}))},a.prototype._contextRestored=function(c){this._setupPainter(),this.resize(),this._update(),this.fire(new f.Event("webglcontextrestored",{originalEvent:c}))},a.prototype._onMapScroll=function(c){if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},a.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},a.prototype._update=function(c){return this.style?(this._styleDirty=this._styleDirty||c,this._sourcesDirty=!0,this.triggerRepaint(),this):this},a.prototype._requestRenderFrame=function(c){return this._update(),this._renderTaskQueue.add(c)},a.prototype._cancelRenderFrame=function(c){this._renderTaskQueue.remove(c)},a.prototype._render=function(c){var g,_=this,w=0,E=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(g=E.createQueryEXT(),E.beginQueryEXT(E.TIME_ELAPSED_EXT,g),w=f.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(c),!this._removed){var k=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var N=this.transform.zoom,X=f.browser.now();this.style.zoomHistory.update(N,X);var Q=new f.EvaluationParameters(N,{now:X,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Y=Q.crossFadingFactor();1===Y&&Y===this._crossFadingFactor||(k=!0,this._crossFadingFactor=Y),this.style.update(Q)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new f.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new f.Event("load"))),this.style&&(this.style.hasTransitions()||k)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var le=f.browser.now()-w;E.endQueryEXT(E.TIME_ELAPSED_EXT,g),setTimeout(function(){var l=E.getQueryObjectEXT(g,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(g),_.fire(new f.Event("gpu-timing-frame",{cpuTime:le,gpuTime:l}))},50)}if(this.listens("gpu-timing-layer")){var o=this.painter.collectGpuTimers();setTimeout(function(){var l=_.painter.queryGpuTimers(o);_.fire(new f.Event("gpu-timing-layer",{layerTimes:l}))},50)}var v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new f.Event("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0),this}},a.prototype.remove=function(){this._hash&&this._hash.remove();for(var c=0,g=this._controls;c<g.length;c+=1)g[c].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==f.window&&(f.window.removeEventListener("resize",this._onWindowResize,!1),f.window.removeEventListener("orientationchange",this._onWindowResize,!1),f.window.removeEventListener("online",this._onWindowOnline,!1));var _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),ul(this._canvasContainer),ul(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),this._removed=!0,this.fire(new f.Event("remove"))},a.prototype.triggerRepaint=function(){var c=this;this.style&&!this._frame&&(this._frame=f.browser.frame(function(g){c._frame=null,c._render(g)}))},a.prototype._onWindowOnline=function(){this._update()},a.prototype._onWindowResize=function(c){this._trackResize&&this.resize({originalEvent:c})._update()},r.showTileBoundaries.get=function(){return!!this._showTileBoundaries},r.showTileBoundaries.set=function(c){this._showTileBoundaries!==c&&(this._showTileBoundaries=c,this._update())},r.showPadding.get=function(){return!!this._showPadding},r.showPadding.set=function(c){this._showPadding!==c&&(this._showPadding=c,this._update())},r.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},r.showCollisionBoxes.set=function(c){this._showCollisionBoxes!==c&&(this._showCollisionBoxes=c,c?this.style._generateCollisionBoxes():this._update())},r.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},r.showOverdrawInspector.set=function(c){this._showOverdrawInspector!==c&&(this._showOverdrawInspector=c,this._update())},r.repaint.get=function(){return!!this._repaint},r.repaint.set=function(c){this._repaint!==c&&(this._repaint=c,this.triggerRepaint())},r.vertices.get=function(){return!!this._vertices},r.vertices.set=function(c){this._vertices=c,this._update()},a.prototype._setCacheLimits=function(c,g){f.setCacheLimits(c,g)},r.version.get=function(){return f.version},Object.defineProperties(a.prototype,r),a}(Ct);function ul(i){i.parentNode&&i.parentNode.removeChild(i)}var ga={showCompass:!0,showZoom:!0,visualizePitch:!1},Or=function(i){var a=this;this.options=f.extend({},ga,i),this._container=Ge.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(r){return r.preventDefault()}),this.options.showZoom&&(f.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",function(r){return a._map.zoomIn({},{originalEvent:r})}),Ge.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",function(r){return a._map.zoomOut({},{originalEvent:r})}),Ge.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(f.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",function(r){a.options.visualizePitch?a._map.resetNorthPitch({},{originalEvent:r}):a._map.resetNorth({},{originalEvent:r})}),this._compassIcon=Ge.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Or.prototype._updateZoomButtons=function(){var i=this._map.getZoom(),a=i===this._map.getMaxZoom(),r=i===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())},Or.prototype._rotateCompassArrow=function(){var i=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=i},Or.prototype.onAdd=function(i){return this._map=i,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new or(this._map,this._compass,this.options.visualizePitch)),this._container},Or.prototype.onRemove=function(){Ge.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Or.prototype._createButton=function(i,a){var r=Ge.create("button",i,this._container);return r.type="button",r.addEventListener("click",a),r},Or.prototype._setButtonTitle=function(i,a){var r=this._map._getUIString("NavigationControl."+a);i.title=r,i.setAttribute("aria-label",r)};var or=function(i,a,r){void 0===r&&(r=!1),this._clickTolerance=10,this.element=a,this.mouseRotate=new rs({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,r&&(this.mousePitch=new Ss({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),f.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),Ge.addEventListener(a,"mousedown",this.mousedown),Ge.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),Ge.addEventListener(a,"touchmove",this.touchmove),Ge.addEventListener(a,"touchend",this.touchend),Ge.addEventListener(a,"touchcancel",this.reset)};function J(i,a,r){if(i=new f.LngLat(i.lng,i.lat),a){var c=new f.LngLat(i.lng-360,i.lat),g=new f.LngLat(i.lng+360,i.lat),_=r.locationPoint(i).distSqr(a);r.locationPoint(c).distSqr(a)<_?i=c:r.locationPoint(g).distSqr(a)<_&&(i=g)}for(;Math.abs(i.lng-r.center.lng)>180;){var w=r.locationPoint(i);if(w.x>=0&&w.y>=0&&w.x<=r.width&&w.y<=r.height)break;i.lng>r.center.lng?i.lng-=360:i.lng+=360}return i}or.prototype.down=function(i,a){this.mouseRotate.mousedown(i,a),this.mousePitch&&this.mousePitch.mousedown(i,a),Ge.disableDrag()},or.prototype.move=function(i,a){var r=this.map,c=this.mouseRotate.mousemoveWindow(i,a);if(c&&c.bearingDelta&&r.setBearing(r.getBearing()+c.bearingDelta),this.mousePitch){var g=this.mousePitch.mousemoveWindow(i,a);g&&g.pitchDelta&&r.setPitch(r.getPitch()+g.pitchDelta)}},or.prototype.off=function(){var i=this.element;Ge.removeEventListener(i,"mousedown",this.mousedown),Ge.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),Ge.removeEventListener(i,"touchmove",this.touchmove),Ge.removeEventListener(i,"touchend",this.touchend),Ge.removeEventListener(i,"touchcancel",this.reset),this.offTemp()},or.prototype.offTemp=function(){Ge.enableDrag(),Ge.removeEventListener(f.window,"mousemove",this.mousemove),Ge.removeEventListener(f.window,"mouseup",this.mouseup)},or.prototype.mousedown=function(i){this.down(f.extend({},i,{ctrlKey:!0,preventDefault:function(){return i.preventDefault()}}),Ge.mousePos(this.element,i)),Ge.addEventListener(f.window,"mousemove",this.mousemove),Ge.addEventListener(f.window,"mouseup",this.mouseup)},or.prototype.mousemove=function(i){this.move(i,Ge.mousePos(this.element,i))},or.prototype.mouseup=function(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()},or.prototype.touchstart=function(i){1!==i.targetTouches.length?this.reset():(this._startPos=this._lastPos=Ge.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return i.preventDefault()}},this._startPos))},or.prototype.touchmove=function(i){1!==i.targetTouches.length?this.reset():(this._lastPos=Ge.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:function(){return i.preventDefault()}},this._lastPos))},or.prototype.touchend=function(i){0===i.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},or.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Wr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hr(i,a,r){var c=i.classList;for(var g in Wr)c.remove("maplibregl-"+r+"-anchor-"+g,"mapboxgl-"+r+"-anchor-"+g);c.add("maplibregl-"+r+"-anchor-"+a,"mapboxgl-"+r+"-anchor-"+a)}var Di,Ht=function(i){function a(r,c){if(i.call(this),(r instanceof f.window.HTMLElement||c)&&(r=f.extend({element:r},c)),f.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&"auto"!==r.pitchAlignment?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=f.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ge.create("div"),this._element.setAttribute("aria-label","Map marker");var g=Ge.createNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height","41px"),g.setAttributeNS(null,"width","27px"),g.setAttributeNS(null,"viewBox","0 0 27 41");var _=Ge.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");var w=Ge.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");var E=Ge.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");for(var k=0,N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];k<N.length;k+=1){var X=N[k],Q=Ge.createNS("http://www.w3.org/2000/svg","ellipse");Q.setAttributeNS(null,"opacity","0.04"),Q.setAttributeNS(null,"cx","10.5"),Q.setAttributeNS(null,"cy","5.80029008"),Q.setAttributeNS(null,"rx",X.rx),Q.setAttributeNS(null,"ry",X.ry),E.appendChild(Q)}var Y=Ge.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"fill",this._color);var le=Ge.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Y.appendChild(le);var o=Ge.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"opacity","0.25"),o.setAttributeNS(null,"fill","#000000");var v=Ge.createNS("http://www.w3.org/2000/svg","path");v.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),o.appendChild(v);var l=Ge.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(6.0, 7.0)"),l.setAttributeNS(null,"fill","#FFFFFF");var d=Ge.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=Ge.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var C=Ge.createNS("http://www.w3.org/2000/svg","circle");C.setAttributeNS(null,"fill","#FFFFFF"),C.setAttributeNS(null,"cx","5.5"),C.setAttributeNS(null,"cy","5.5"),C.setAttributeNS(null,"r","5.4999962"),d.appendChild(b),d.appendChild(C),w.appendChild(E),w.appendChild(Y),w.appendChild(o),w.appendChild(l),w.appendChild(d),g.appendChild(w),g.setAttributeNS(null,"height",41*this._scale+"px"),g.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(g),this._offset=f.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",function(M){M.preventDefault()}),this._element.addEventListener("mousedown",function(M){M.preventDefault()}),Hr(this._element,this._anchor,"marker"),this._popup=null}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.addTo=function(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},a.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Ge.remove(this._element),this._popup&&this._popup.remove(),this},a.prototype.getLngLat=function(){return this._lngLat},a.prototype.setLngLat=function(r){return this._lngLat=f.LngLat.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},a.prototype.getElement=function(){return this._element},a.prototype.setPopup=function(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){var c=Math.sqrt(Math.pow(13.5,2)/2);r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[c,-1*(24.6+c)],"bottom-right":[-c,-1*(24.6+c)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=r,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},a.prototype._onKeyPress=function(r){var c=r.code,g=r.charCode||r.keyCode;"Space"!==c&&"Enter"!==c&&32!==g&&13!==g||this.togglePopup()},a.prototype._onMapClick=function(r){var c=r.originalEvent.target,g=this._element;this._popup&&(c===g||g.contains(c))&&this.togglePopup()},a.prototype.getPopup=function(){return this._popup},a.prototype.togglePopup=function(){var r=this._popup;return r?(r.isOpen()?r.remove():r.addTo(this._map),this):this},a.prototype._update=function(r){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=J(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var c="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?c="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(c="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var g="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?g="rotateX(0deg)":"map"===this._pitchAlignment&&(g="rotateX("+this._map.getPitch()+"deg)"),r&&"moveend"!==r.type||(this._pos=this._pos.round()),Ge.setTransform(this._element,Wr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+g+" "+c)}},a.prototype.getOffset=function(){return this._offset},a.prototype.setOffset=function(r){return this._offset=f.Point.convert(r),this._update(),this},a.prototype._onMove=function(r){if(!this._isDragging){var c=this._clickTolerance||this._map._clickTolerance;this._isDragging=r.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new f.Event("dragstart"))),this.fire(new f.Event("drag")))},a.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new f.Event("dragend")),this._state="inactive"},a.prototype._addDragHandler=function(r){this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},a.prototype.setDraggable=function(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},a.prototype.isDraggable=function(){return this._draggable},a.prototype.setRotation=function(r){return this._rotation=r||0,this._update(),this},a.prototype.getRotation=function(){return this._rotation},a.prototype.setRotationAlignment=function(r){return this._rotationAlignment=r||"auto",this._update(),this},a.prototype.getRotationAlignment=function(){return this._rotationAlignment},a.prototype.setPitchAlignment=function(r){return this._pitchAlignment=r&&"auto"!==r?r:this._rotationAlignment,this._update(),this},a.prototype.getPitchAlignment=function(){return this._pitchAlignment},a}(f.Evented),Zl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ts=0,Rr=!1,bo=function(i){function a(r){i.call(this),this.options=f.extend({},Zl,r),f.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.onAdd=function(r){var c;return this._map=r,this._container=Ge.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),c=this._setupUI,void 0!==Di?c(Di):void 0!==f.window.navigator.permissions?f.window.navigator.permissions.query({name:"geolocation"}).then(function(g){c(Di="denied"!==g.state)}):c(Di=!!f.window.navigator.geolocation),this._container},a.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(f.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Ge.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ts=0,Rr=!1},a.prototype._isOutOfMapMaxBounds=function(r){var c=this._map.getMaxBounds(),g=r.coords;return c&&(g.longitude<c.getWest()||g.longitude>c.getEast()||g.latitude<c.getSouth()||g.latitude>c.getNorth())},a.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}},a.prototype._onSuccess=function(r){if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new f.Event("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(r),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new f.Event("geolocate",r)),this._finish()}},a.prototype._updateCamera=function(r){var c=new f.LngLat(r.coords.longitude,r.coords.latitude),g=r.coords.accuracy,_=this._map.getBearing(),w=f.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(g),w,{geolocateSource:!0})},a.prototype._updateMarker=function(r){if(r){var c=new f.LngLat(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},a.prototype._updateCircleRadius=function(){var r=this._map._container.clientHeight/2,c=this._map.unproject([0,r]),g=this._map.unproject([1,r]),_=c.distanceTo(g),w=Math.ceil(2*this._accuracy/_);this._circleElement.style.width=w+"px",this._circleElement.style.height=w+"px"},a.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},a.prototype._onError=function(r){if(this._map){if(this.options.trackUserLocation)if(1===r.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===r.code&&Rr)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new f.Event("error",r)),this._finish()}},a.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},a.prototype._setupUI=function(r){var c=this;if(this._container.addEventListener("contextmenu",function(w){return w.preventDefault()}),this._geolocateButton=Ge.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),Ge.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===r){f.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}else{var _=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=_,this._geolocateButton.setAttribute("aria-label",_)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ge.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ht(this._dotElement),this._circleElement=Ge.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ht({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(w){w.geolocateSource||"ACTIVE_LOCK"!==c._watchState||w.originalEvent&&"resize"===w.originalEvent.type||(c._watchState="BACKGROUND",c._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),c._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),c.fire(new f.Event("trackuserlocationend")))})},a.prototype.trigger=function(){if(!this._setup)return f.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new f.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ts--,Rr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new f.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new f.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var r;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ts>1?(r={maximumAge:6e5,timeout:0},Rr=!0):(r=this.options.positionOptions,Rr=!1),this._geolocationWatchID=f.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,r)}}else f.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},a.prototype._clearWatch=function(){f.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},a}(f.Evented),wo={maxWidth:100,unit:"metric"},ji=function(i){this.options=f.extend({},wo,i),f.bindAll(["_onMove","setUnit"],this)};function cl(i,a,r){var c=r&&r.maxWidth||100,g=i._container.clientHeight/2,_=i.unproject([0,g]),w=i.unproject([c,g]),E=_.distanceTo(w);if(r&&"imperial"===r.unit){var k=3.2808*E;k>5280?So(a,c,k/5280,i._getUIString("ScaleControl.Miles")):So(a,c,k,i._getUIString("ScaleControl.Feet"))}else r&&"nautical"===r.unit?So(a,c,E/1852,i._getUIString("ScaleControl.NauticalMiles")):E>=1e3?So(a,c,E/1e3,i._getUIString("ScaleControl.Kilometers")):So(a,c,E,i._getUIString("ScaleControl.Meters"))}function So(i,a,r,c){var g,_,w,k,N,E=(g=r,(_=Math.pow(10,(""+Math.floor(g)).length-1))*(w=(w=g/_)>=10?10:w>=5?5:w>=3?3:w>=2?2:w>=1?1:(k=w,N=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10)),Math.round(k*N)/N)));i.style.width=a*(E/r)+"px",i.innerHTML=E+"&nbsp;"+c}ji.prototype.getDefaultPosition=function(){return"bottom-left"},ji.prototype._onMove=function(){cl(this._map,this._container,this.options)},ji.prototype.onAdd=function(i){return this._map=i,this._container=Ge.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",i.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ji.prototype.onRemove=function(){Ge.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ji.prototype.setUnit=function(i){this.options.unit=i,cl(this._map,this._container,this.options)};var _r=function(i){this._fullscreen=!1,i&&i.container&&(i.container instanceof f.window.HTMLElement?this._container=i.container:f.warnOnce("Full screen control 'container' must be a DOM element.")),f.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in f.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in f.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in f.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in f.window.document&&(this._fullscreenchange="MSFullscreenChange")};_r.prototype.onAdd=function(i){return this._map=i,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ge.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",f.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},_r.prototype.onRemove=function(){Ge.remove(this._controlContainer),this._map=null,f.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},_r.prototype._checkFullscreenSupport=function(){return!!(f.window.document.fullscreenEnabled||f.window.document.mozFullScreenEnabled||f.window.document.msFullscreenEnabled||f.window.document.webkitFullscreenEnabled)},_r.prototype._setupUI=function(){var i=this._fullscreenButton=Ge.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);Ge.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",i).setAttribute("aria-hidden",!0),i.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),f.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},_r.prototype._updateTitle=function(){var i=this._getTitle();this._fullscreenButton.setAttribute("aria-label",i),this._fullscreenButton.title=i},_r.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},_r.prototype._isFullscreen=function(){return this._fullscreen},_r.prototype._changeIcon=function(){(f.window.document.fullscreenElement||f.window.document.mozFullScreenElement||f.window.document.webkitFullscreenElement||f.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},_r.prototype._onClickFullscreen=function(){this._isFullscreen()?f.window.document.exitFullscreen?f.window.document.exitFullscreen():f.window.document.mozCancelFullScreen?f.window.document.mozCancelFullScreen():f.window.document.msExitFullscreen?f.window.document.msExitFullscreen():f.window.document.webkitCancelFullScreen&&f.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Co={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Is=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),as=function(i){function a(r){i.call(this),this.options=f.extend(Object.create(Co),r),f.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return i&&(a.__proto__=i),(a.prototype=Object.create(i&&i.prototype)).constructor=a,a.prototype.addTo=function(r){return this._map&&this.remove(),this._map=r,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new f.Event("open")),this},a.prototype.isOpen=function(){return!!this._map},a.prototype.remove=function(){return this._content&&Ge.remove(this._content),this._container&&(Ge.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new f.Event("close")),this},a.prototype.getLngLat=function(){return this._lngLat},a.prototype.setLngLat=function(r){return this._lngLat=f.LngLat.convert(r),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this},a.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this},a.prototype.getElement=function(){return this._container},a.prototype.setText=function(r){return this.setDOMContent(f.window.document.createTextNode(r))},a.prototype.setHTML=function(r){var c,g=f.window.document.createDocumentFragment(),_=f.window.document.createElement("body");for(_.innerHTML=r;c=_.firstChild;)g.appendChild(c);return this.setDOMContent(g)},a.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},a.prototype.setMaxWidth=function(r){return this.options.maxWidth=r,this._update(),this},a.prototype.setDOMContent=function(r){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Ge.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(r),this._createCloseButton(),this._update(),this._focusFirstElement(),this},a.prototype.addClassName=function(r){this._container&&this._container.classList.add(r)},a.prototype.removeClassName=function(r){this._container&&this._container.classList.remove(r)},a.prototype.setOffset=function(r){return this.options.offset=r,this._update(),this},a.prototype.toggleClassName=function(r){if(this._container)return this._container.classList.toggle(r)},a.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=Ge.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},a.prototype._onMouseUp=function(r){this._update(r.point)},a.prototype._onMouseMove=function(r){this._update(r.point)},a.prototype._onDrag=function(r){this._update(r.point)},a.prototype._update=function(r){var c=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=Ge.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=Ge.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Q){return c._container.classList.add(Q)}),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=J(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||r)){var g=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat),_=this.options.anchor,w=function Q(Y){if(Y){if("number"==typeof Y){var le=Math.round(Math.sqrt(.5*Math.pow(Y,2)));return{center:new f.Point(0,0),top:new f.Point(0,Y),"top-left":new f.Point(le,le),"top-right":new f.Point(-le,le),bottom:new f.Point(0,-Y),"bottom-left":new f.Point(le,-le),"bottom-right":new f.Point(-le,-le),left:new f.Point(Y,0),right:new f.Point(-Y,0)}}if(Y instanceof f.Point||Array.isArray(Y)){var o=f.Point.convert(Y);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:f.Point.convert(Y.center||[0,0]),top:f.Point.convert(Y.top||[0,0]),"top-left":f.Point.convert(Y["top-left"]||[0,0]),"top-right":f.Point.convert(Y["top-right"]||[0,0]),bottom:f.Point.convert(Y.bottom||[0,0]),"bottom-left":f.Point.convert(Y["bottom-left"]||[0,0]),"bottom-right":f.Point.convert(Y["bottom-right"]||[0,0]),left:f.Point.convert(Y.left||[0,0]),right:f.Point.convert(Y.right||[0,0])}}return Q(new f.Point(0,0))}(this.options.offset);if(!_){var E,k=this._container.offsetWidth,N=this._container.offsetHeight;E=g.y+w.bottom.y<N?["top"]:g.y>this._map.transform.height-N?["bottom"]:[],g.x<k/2?E.push("left"):g.x>this._map.transform.width-k/2&&E.push("right"),_=0===E.length?"bottom":E.join("-")}var X=g.add(w[_]).round();Ge.setTransform(this._container,Wr[_]+" translate("+X.x+"px,"+X.y+"px)"),Hr(this._container,_,"popup")}},a.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var r=this._container.querySelector(Is);r&&r.focus()}},a.prototype._onClose=function(){this.remove()},a}(f.Evented),pl={version:f.version,supported:Bi,setRTLTextPlugin:f.setRTLTextPlugin,getRTLTextPluginStatus:f.getRTLTextPluginStatus,Map:gi,NavigationControl:Or,GeolocateControl:bo,AttributionControl:mi,ScaleControl:ji,FullscreenControl:_r,Popup:as,Marker:Ht,Style:Bo,LngLat:f.LngLat,LngLatBounds:f.LngLatBounds,Point:f.Point,MercatorCoordinate:f.MercatorCoordinate,Evented:f.Evented,config:f.config,prewarm:function(){gt().acquire(Ae)},clearPrewarmedResources:function(){var i=at;i&&(i.isPreloaded()&&1===i.numActive()?(i.release(Ae),at=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return f.config.ACCESS_TOKEN},set accessToken(i){f.config.ACCESS_TOKEN=i},get baseApiUrl(){return f.config.API_URL},set baseApiUrl(i){f.config.API_URL=i},get workerCount(){return qe.workerCount},set workerCount(i){qe.workerCount=i},get maxParallelImageRequests(){return f.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(i){f.config.MAX_PARALLEL_IMAGE_REQUESTS=i},clearStorage:function(i){f.clearTileCache(i)},workerUrl:"",addProtocol:function(i,a){f.config.REGISTERED_PROTOCOLS[i]=a},removeProtocol:function(i){delete f.config.REGISTERED_PROTOCOLS[i]}};return pl}),Ri}()},6920:(Fs,ta,Pn)=>{"use strict";Pn.r(ta),Pn.d(ta,{HomePageModule:()=>le});var Ri=Pn(6019),he=Pn(5793),f=Pn(9133),Bi=Pn(3989),Ge=Pn(5320),Jt=Pn(3132);function Tt(o){return null!==o&&"object"==typeof o&&"constructor"in o&&o.constructor===Object}function hr(o={},v={}){Object.keys(v).forEach(l=>{void 0===o[l]?o[l]=v[l]:Tt(v[l])&&Tt(o[l])&&Object.keys(v[l]).length>0&&hr(o[l],v[l])})}const ut={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function xi(){const o="undefined"!=typeof document?document:{};return hr(o,ut),o}const ui={document:ut,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:o=>"undefined"==typeof setTimeout?(o(),null):setTimeout(o,0),cancelAnimationFrame(o){"undefined"!=typeof setTimeout&&clearTimeout(o)}};function On(){const o="undefined"!=typeof window?window:{};return hr(o,ui),o}class Mi extends Array{constructor(v){super(...v||[]),function(o){const v=o.__proto__;Object.defineProperty(o,"__proto__",{get:()=>v,set(l){v.__proto__=l}})}(this)}}function Rn(o=[]){const v=[];return o.forEach(l=>{Array.isArray(l)?v.push(...Rn(l)):v.push(l)}),v}function Fi(o,v){return Array.prototype.filter.call(o,v)}function It(o,v){const l=On(),d=xi();let b=[];if(!v&&o instanceof Mi)return o;if(!o)return new Mi(b);if("string"==typeof o){const C=o.trim();if(C.indexOf("<")>=0&&C.indexOf(">")>=0){let M="div";0===C.indexOf("<li")&&(M="ul"),0===C.indexOf("<tr")&&(M="tbody"),(0===C.indexOf("<td")||0===C.indexOf("<th"))&&(M="tr"),0===C.indexOf("<tbody")&&(M="table"),0===C.indexOf("<option")&&(M="select");const O=d.createElement(M);O.innerHTML=C;for(let z=0;z<O.childNodes.length;z+=1)b.push(O.childNodes[z])}else b=function(o,v){if("string"!=typeof o)return[o];const l=[],d=v.querySelectorAll(o);for(let b=0;b<d.length;b+=1)l.push(d[b]);return l}(o.trim(),v||d)}else if(o.nodeType||o===l||o===d)b.push(o);else if(Array.isArray(o)){if(o instanceof Mi)return o;b=o}return new Mi(function(o){const v=[];for(let l=0;l<o.length;l+=1)-1===v.indexOf(o[l])&&v.push(o[l]);return v}(b))}It.fn=Mi.prototype;const ee="resize scroll".split(" ");function ie(o){return function(...l){if(void 0===l[0]){for(let d=0;d<this.length;d+=1)ee.indexOf(o)<0&&(o in this[d]?this[d][o]():It(this[d]).trigger(o));return this}return this.on(o,...l)}}ie("click"),ie("blur"),ie("focus"),ie("focusin"),ie("focusout"),ie("keyup"),ie("keydown"),ie("keypress"),ie("submit"),ie("change"),ie("mousedown"),ie("mousemove"),ie("mouseup"),ie("mouseenter"),ie("mouseleave"),ie("mouseout"),ie("mouseover"),ie("touchstart"),ie("touchend"),ie("touchmove"),ie("resize"),ie("scroll");const rn={addClass:function(...o){const v=Rn(o.map(l=>l.split(" ")));return this.forEach(l=>{l.classList.add(...v)}),this},removeClass:function(...o){const v=Rn(o.map(l=>l.split(" ")));return this.forEach(l=>{l.classList.remove(...v)}),this},hasClass:function(...o){const v=Rn(o.map(l=>l.split(" ")));return Fi(this,l=>v.filter(d=>l.classList.contains(d)).length>0).length>0},toggleClass:function(...o){const v=Rn(o.map(l=>l.split(" ")));this.forEach(l=>{v.forEach(d=>{l.classList.toggle(d)})})},attr:function(o,v){if(1===arguments.length&&"string"==typeof o)return this[0]?this[0].getAttribute(o):void 0;for(let l=0;l<this.length;l+=1)if(2===arguments.length)this[l].setAttribute(o,v);else for(const d in o)this[l][d]=o[d],this[l].setAttribute(d,o[d]);return this},removeAttr:function(o){for(let v=0;v<this.length;v+=1)this[v].removeAttribute(o);return this},transform:function(o){for(let v=0;v<this.length;v+=1)this[v].style.transform=o;return this},transition:function(o){for(let v=0;v<this.length;v+=1)this[v].style.transitionDuration="string"!=typeof o?`${o}ms`:o;return this},on:function(...o){let[v,l,d,b]=o;function C(R){const D=R.target;if(!D)return;const P=R.target.dom7EventData||[];if(P.indexOf(R)<0&&P.unshift(R),It(D).is(l))d.apply(D,P);else{const q=It(D).parents();for(let W=0;W<q.length;W+=1)It(q[W]).is(l)&&d.apply(q[W],P)}}function M(R){const D=R&&R.target&&R.target.dom7EventData||[];D.indexOf(R)<0&&D.unshift(R),d.apply(this,D)}"function"==typeof o[1]&&([v,d,b]=o,l=void 0),b||(b=!1);const O=v.split(" ");let z;for(let R=0;R<this.length;R+=1){const D=this[R];if(l)for(z=0;z<O.length;z+=1){const P=O[z];D.dom7LiveListeners||(D.dom7LiveListeners={}),D.dom7LiveListeners[P]||(D.dom7LiveListeners[P]=[]),D.dom7LiveListeners[P].push({listener:d,proxyListener:C}),D.addEventListener(P,C,b)}else for(z=0;z<O.length;z+=1){const P=O[z];D.dom7Listeners||(D.dom7Listeners={}),D.dom7Listeners[P]||(D.dom7Listeners[P]=[]),D.dom7Listeners[P].push({listener:d,proxyListener:M}),D.addEventListener(P,M,b)}}return this},off:function(...o){let[v,l,d,b]=o;"function"==typeof o[1]&&([v,d,b]=o,l=void 0),b||(b=!1);const C=v.split(" ");for(let M=0;M<C.length;M+=1){const O=C[M];for(let z=0;z<this.length;z+=1){const R=this[z];let D;if(!l&&R.dom7Listeners?D=R.dom7Listeners[O]:l&&R.dom7LiveListeners&&(D=R.dom7LiveListeners[O]),D&&D.length)for(let P=D.length-1;P>=0;P-=1){const q=D[P];d&&q.listener===d||d&&q.listener&&q.listener.dom7proxy&&q.listener.dom7proxy===d?(R.removeEventListener(O,q.proxyListener,b),D.splice(P,1)):d||(R.removeEventListener(O,q.proxyListener,b),D.splice(P,1))}}}return this},trigger:function(...o){const v=On(),l=o[0].split(" "),d=o[1];for(let b=0;b<l.length;b+=1){const C=l[b];for(let M=0;M<this.length;M+=1){const O=this[M];if(v.CustomEvent){const z=new v.CustomEvent(C,{detail:d,bubbles:!0,cancelable:!0});O.dom7EventData=o.filter((R,D)=>D>0),O.dispatchEvent(z),O.dom7EventData=[],delete O.dom7EventData}}}return this},transitionEnd:function(o){const v=this;return o&&v.on("transitionend",function l(d){d.target===this&&(o.call(this,d),v.off("transitionend",l))}),this},outerWidth:function(o){if(this.length>0){if(o){const v=this.styles();return this[0].offsetWidth+parseFloat(v.getPropertyValue("margin-right"))+parseFloat(v.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(o){if(this.length>0){if(o){const v=this.styles();return this[0].offsetHeight+parseFloat(v.getPropertyValue("margin-top"))+parseFloat(v.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){const o=On();return this[0]?o.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){const o=On(),v=xi(),l=this[0],d=l.getBoundingClientRect(),b=v.body;return{top:d.top+(l===o?o.scrollY:l.scrollTop)-(l.clientTop||b.clientTop||0),left:d.left+(l===o?o.scrollX:l.scrollLeft)-(l.clientLeft||b.clientLeft||0)}}return null},css:function(o,v){const l=On();let d;if(1===arguments.length){if("string"!=typeof o){for(d=0;d<this.length;d+=1)for(const b in o)this[d].style[b]=o[b];return this}if(this[0])return l.getComputedStyle(this[0],null).getPropertyValue(o)}if(2===arguments.length&&"string"==typeof o){for(d=0;d<this.length;d+=1)this[d].style[o]=v;return this}return this},each:function(o){return o?(this.forEach((v,l)=>{o.apply(v,[v,l])}),this):this},html:function(o){if(void 0===o)return this[0]?this[0].innerHTML:null;for(let v=0;v<this.length;v+=1)this[v].innerHTML=o;return this},text:function(o){if(void 0===o)return this[0]?this[0].textContent.trim():null;for(let v=0;v<this.length;v+=1)this[v].textContent=o;return this},is:function(o){const v=On(),l=xi(),d=this[0];let b,C;if(!d||void 0===o)return!1;if("string"==typeof o){if(d.matches)return d.matches(o);if(d.webkitMatchesSelector)return d.webkitMatchesSelector(o);if(d.msMatchesSelector)return d.msMatchesSelector(o);for(b=It(o),C=0;C<b.length;C+=1)if(b[C]===d)return!0;return!1}if(o===l)return d===l;if(o===v)return d===v;if(o.nodeType||o instanceof Mi){for(b=o.nodeType?[o]:o,C=0;C<b.length;C+=1)if(b[C]===d)return!0;return!1}return!1},index:function(){let v,o=this[0];if(o){for(v=0;null!==(o=o.previousSibling);)1===o.nodeType&&(v+=1);return v}},eq:function(o){if(void 0===o)return this;const v=this.length;if(o>v-1)return It([]);if(o<0){const l=v+o;return It(l<0?[]:[this[l]])}return It([this[o]])},append:function(...o){let v;const l=xi();for(let d=0;d<o.length;d+=1){v=o[d];for(let b=0;b<this.length;b+=1)if("string"==typeof v){const C=l.createElement("div");for(C.innerHTML=v;C.firstChild;)this[b].appendChild(C.firstChild)}else if(v instanceof Mi)for(let C=0;C<v.length;C+=1)this[b].appendChild(v[C]);else this[b].appendChild(v)}return this},prepend:function(o){const v=xi();let l,d;for(l=0;l<this.length;l+=1)if("string"==typeof o){const b=v.createElement("div");for(b.innerHTML=o,d=b.childNodes.length-1;d>=0;d-=1)this[l].insertBefore(b.childNodes[d],this[l].childNodes[0])}else if(o instanceof Mi)for(d=0;d<o.length;d+=1)this[l].insertBefore(o[d],this[l].childNodes[0]);else this[l].insertBefore(o,this[l].childNodes[0]);return this},next:function(o){return this.length>0?o?this[0].nextElementSibling&&It(this[0].nextElementSibling).is(o)?It([this[0].nextElementSibling]):It([]):It(this[0].nextElementSibling?[this[0].nextElementSibling]:[]):It([])},nextAll:function(o){const v=[];let l=this[0];if(!l)return It([]);for(;l.nextElementSibling;){const d=l.nextElementSibling;o?It(d).is(o)&&v.push(d):v.push(d),l=d}return It(v)},prev:function(o){if(this.length>0){const v=this[0];return o?v.previousElementSibling&&It(v.previousElementSibling).is(o)?It([v.previousElementSibling]):It([]):It(v.previousElementSibling?[v.previousElementSibling]:[])}return It([])},prevAll:function(o){const v=[];let l=this[0];if(!l)return It([]);for(;l.previousElementSibling;){const d=l.previousElementSibling;o?It(d).is(o)&&v.push(d):v.push(d),l=d}return It(v)},parent:function(o){const v=[];for(let l=0;l<this.length;l+=1)null!==this[l].parentNode&&(o?It(this[l].parentNode).is(o)&&v.push(this[l].parentNode):v.push(this[l].parentNode));return It(v)},parents:function(o){const v=[];for(let l=0;l<this.length;l+=1){let d=this[l].parentNode;for(;d;)o?It(d).is(o)&&v.push(d):v.push(d),d=d.parentNode}return It(v)},closest:function(o){let v=this;return void 0===o?It([]):(v.is(o)||(v=v.parents(o).eq(0)),v)},find:function(o){const v=[];for(let l=0;l<this.length;l+=1){const d=this[l].querySelectorAll(o);for(let b=0;b<d.length;b+=1)v.push(d[b])}return It(v)},children:function(o){const v=[];for(let l=0;l<this.length;l+=1){const d=this[l].children;for(let b=0;b<d.length;b+=1)(!o||It(d[b]).is(o))&&v.push(d[b])}return It(v)},filter:function(o){return It(Fi(this,o))},remove:function(){for(let o=0;o<this.length;o+=1)this[o].parentNode&&this[o].parentNode.removeChild(this[o]);return this}};Object.keys(rn).forEach(o=>{Object.defineProperty(It.fn,o,{value:rn[o],writable:!0})});const Dt=It;function Lt(o,v=0){return setTimeout(o,v)}function eo(){return Date.now()}function Ma(o){return"object"==typeof o&&null!==o&&o.constructor&&"Object"===Object.prototype.toString.call(o).slice(8,-1)}function hi(o){return"undefined"!=typeof window&&void 0!==window.HTMLElement?o instanceof HTMLElement:o&&(1===o.nodeType||11===o.nodeType)}function Tn(...o){const v=Object(o[0]),l=["__proto__","constructor","prototype"];for(let d=1;d<o.length;d+=1){const b=o[d];if(null!=b&&!hi(b)){const C=Object.keys(Object(b)).filter(M=>l.indexOf(M)<0);for(let M=0,O=C.length;M<O;M+=1){const z=C[M],R=Object.getOwnPropertyDescriptor(b,z);void 0!==R&&R.enumerable&&(Ma(v[z])&&Ma(b[z])?b[z].__swiper__?v[z]=b[z]:Tn(v[z],b[z]):!Ma(v[z])&&Ma(b[z])?(v[z]={},b[z].__swiper__?v[z]=b[z]:Tn(v[z],b[z])):v[z]=b[z])}}}return v}function Aa(o,v,l){o.style.setProperty(v,l)}function Do({swiper:o,targetPosition:v,side:l}){const d=On(),b=-o.translate;let M,C=null;const O=o.params.speed;o.wrapperEl.style.scrollSnapType="none",d.cancelAnimationFrame(o.cssModeFrameID);const z=v>b?"next":"prev",R=(P,q)=>"next"===z&&P>=q||"prev"===z&&P<=q,D=()=>{M=(new Date).getTime(),null===C&&(C=M);const P=Math.max(Math.min((M-C)/O,1),0),q=.5-Math.cos(P*Math.PI)/2;let W=b+q*(v-b);if(R(W,v)&&(W=v),o.wrapperEl.scrollTo({[l]:W}),R(W,v))return o.wrapperEl.style.overflow="hidden",o.wrapperEl.style.scrollSnapType="",setTimeout(()=>{o.wrapperEl.style.overflow="",o.wrapperEl.scrollTo({[l]:W})}),void d.cancelAnimationFrame(o.cssModeFrameID);o.cssModeFrameID=d.requestAnimationFrame(D)};D()}let Zn,gn,Pi;function tr(){return Zn||(Zn=function(){const o=On(),v=xi();return{smoothScroll:v.documentElement&&"scrollBehavior"in v.documentElement.style,touch:!!("ontouchstart"in o||o.DocumentTouch&&v instanceof o.DocumentTouch),passiveListener:function(){let d=!1;try{const b=Object.defineProperty({},"passive",{get(){d=!0}});o.addEventListener("testPassiveListener",null,b)}catch(b){}return d}(),gestures:"ongesturestart"in o}}()),Zn}function $i({swiper:o,runCallbacks:v,direction:l,step:d}){const{activeIndex:b,previousIndex:C}=o;let M=l;if(M||(M=b>C?"next":b<C?"prev":"reset"),o.emit(`transition${d}`),v&&b!==C){if("reset"===M)return void o.emit(`slideResetTransition${d}`);o.emit(`slideChangeTransition${d}`),o.emit("next"===M?`slideNextTransition${d}`:`slidePrevTransition${d}`)}}function Fo(o){const v=this,l=xi(),d=On(),b=v.touchEventsData,{params:C,touches:M,enabled:O}=v;if(!O||v.animating&&C.preventInteractionOnTransition)return;!v.animating&&C.cssMode&&C.loop&&v.loopFix();let z=o;z.originalEvent&&(z=z.originalEvent);let R=Dt(z.target);if("wrapper"===C.touchEventsTarget&&!R.closest(v.wrapperEl).length||(b.isTouchEvent="touchstart"===z.type,!b.isTouchEvent&&"which"in z&&3===z.which)||!b.isTouchEvent&&"button"in z&&z.button>0||b.isTouched&&b.isMoved)return;C.noSwipingClass&&""!==C.noSwipingClass&&z.target&&z.target.shadowRoot&&o.path&&o.path[0]&&(R=Dt(o.path[0]));const P=C.noSwipingSelector?C.noSwipingSelector:`.${C.noSwipingClass}`;if(C.noSwiping&&(z.target&&z.target.shadowRoot?function(o,v=this){return function l(d){return d&&d!==xi()&&d!==On()?(d.assignedSlot&&(d=d.assignedSlot),d.closest(o)||l(d.getRootNode().host)):null}(v)}(P,z.target):R.closest(P)[0]))return void(v.allowClick=!0);if(C.swipeHandler&&!R.closest(C.swipeHandler)[0])return;M.currentX="touchstart"===z.type?z.targetTouches[0].pageX:z.pageX,M.currentY="touchstart"===z.type?z.targetTouches[0].pageY:z.pageY;const W=M.currentX,K=M.currentY,ae=C.edgeSwipeDetection||C.iOSEdgeSwipeDetection,re=C.edgeSwipeThreshold||C.iOSEdgeSwipeThreshold;if(ae&&(W<=re||W>=d.innerWidth-re)){if("prevent"!==ae)return;o.preventDefault()}if(Object.assign(b,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),M.startX=W,M.startY=K,b.touchStartTime=eo(),v.allowClick=!0,v.updateSize(),v.swipeDirection=void 0,C.threshold>0&&(b.allowThresholdMove=!1),"touchstart"!==z.type){let ue=!0;R.is(b.focusableElements)&&(ue=!1),l.activeElement&&Dt(l.activeElement).is(b.focusableElements)&&l.activeElement!==R[0]&&l.activeElement.blur();const _e=ue&&v.allowTouchMove&&C.touchStartPreventDefault;(C.touchStartForcePreventDefault||_e)&&!R[0].isContentEditable&&z.preventDefault()}v.emit("touchStart",z)}function Qa(o){const v=xi(),l=this,d=l.touchEventsData,{params:b,touches:C,rtlTranslate:M,enabled:O}=l;if(!O)return;let z=o;if(z.originalEvent&&(z=z.originalEvent),!d.isTouched)return void(d.startMoving&&d.isScrolling&&l.emit("touchMoveOpposite",z));if(d.isTouchEvent&&"touchmove"!==z.type)return;const R="touchmove"===z.type&&z.targetTouches&&(z.targetTouches[0]||z.changedTouches[0]),D="touchmove"===z.type?R.pageX:z.pageX,P="touchmove"===z.type?R.pageY:z.pageY;if(z.preventedByNestedSwiper)return C.startX=D,void(C.startY=P);if(!l.allowTouchMove)return l.allowClick=!1,void(d.isTouched&&(Object.assign(C,{startX:D,startY:P,currentX:D,currentY:P}),d.touchStartTime=eo()));if(d.isTouchEvent&&b.touchReleaseOnEdges&&!b.loop)if(l.isVertical()){if(P<C.startY&&l.translate<=l.maxTranslate()||P>C.startY&&l.translate>=l.minTranslate())return d.isTouched=!1,void(d.isMoved=!1)}else if(D<C.startX&&l.translate<=l.maxTranslate()||D>C.startX&&l.translate>=l.minTranslate())return;if(d.isTouchEvent&&v.activeElement&&z.target===v.activeElement&&Dt(z.target).is(d.focusableElements))return d.isMoved=!0,void(l.allowClick=!1);if(d.allowTouchCallbacks&&l.emit("touchMove",z),z.targetTouches&&z.targetTouches.length>1)return;C.currentX=D,C.currentY=P;const q=C.currentX-C.startX,W=C.currentY-C.startY;if(l.params.threshold&&Math.sqrt(Sa(q,2)+Sa(W,2))<l.params.threshold)return;if(void 0===d.isScrolling){let ue;l.isHorizontal()&&C.currentY===C.startY||l.isVertical()&&C.currentX===C.startX?d.isScrolling=!1:q*q+W*W>=25&&(ue=180*Math.atan2(Math.abs(W),Math.abs(q))/Math.PI,d.isScrolling=l.isHorizontal()?ue>b.touchAngle:90-ue>b.touchAngle)}if(d.isScrolling&&l.emit("touchMoveOpposite",z),void 0===d.startMoving&&(C.currentX!==C.startX||C.currentY!==C.startY)&&(d.startMoving=!0),d.isScrolling)return void(d.isTouched=!1);if(!d.startMoving)return;l.allowClick=!1,!b.cssMode&&z.cancelable&&z.preventDefault(),b.touchMoveStopPropagation&&!b.nested&&z.stopPropagation(),d.isMoved||(b.loop&&!b.cssMode&&l.loopFix(),d.startTranslate=l.getTranslate(),l.setTransition(0),l.animating&&l.$wrapperEl.trigger("webkitTransitionEnd transitionend"),d.allowMomentumBounce=!1,b.grabCursor&&(!0===l.allowSlideNext||!0===l.allowSlidePrev)&&l.setGrabCursor(!0),l.emit("sliderFirstMove",z)),l.emit("sliderMove",z),d.isMoved=!0;let K=l.isHorizontal()?q:W;C.diff=K,K*=b.touchRatio,M&&(K=-K),l.swipeDirection=K>0?"prev":"next",d.currentTranslate=K+d.startTranslate;let ae=!0,re=b.resistanceRatio;if(b.touchReleaseOnEdges&&(re=0),K>0&&d.currentTranslate>l.minTranslate()?(ae=!1,b.resistance&&(d.currentTranslate=l.minTranslate()-1+Sa(-l.minTranslate()+d.startTranslate+K,re))):K<0&&d.currentTranslate<l.maxTranslate()&&(ae=!1,b.resistance&&(d.currentTranslate=l.maxTranslate()+1-Sa(l.maxTranslate()-d.startTranslate-K,re))),ae&&(z.preventedByNestedSwiper=!0),!l.allowSlideNext&&"next"===l.swipeDirection&&d.currentTranslate<d.startTranslate&&(d.currentTranslate=d.startTranslate),!l.allowSlidePrev&&"prev"===l.swipeDirection&&d.currentTranslate>d.startTranslate&&(d.currentTranslate=d.startTranslate),!l.allowSlidePrev&&!l.allowSlideNext&&(d.currentTranslate=d.startTranslate),b.threshold>0){if(!(Math.abs(K)>b.threshold||d.allowThresholdMove))return void(d.currentTranslate=d.startTranslate);if(!d.allowThresholdMove)return d.allowThresholdMove=!0,C.startX=C.currentX,C.startY=C.currentY,d.currentTranslate=d.startTranslate,void(C.diff=l.isHorizontal()?C.currentX-C.startX:C.currentY-C.startY)}!b.followFinger||b.cssMode||((b.freeMode&&b.freeMode.enabled&&l.freeMode||b.watchSlidesProgress)&&(l.updateActiveIndex(),l.updateSlidesClasses()),l.params.freeMode&&b.freeMode.enabled&&l.freeMode&&l.freeMode.onTouchMove(),l.updateProgress(d.currentTranslate),l.setTranslate(d.currentTranslate))}function Ws(o){const v=this,l=v.touchEventsData,{params:d,touches:b,rtlTranslate:C,slidesGrid:M,enabled:O}=v;if(!O)return;let z=o;if(z.originalEvent&&(z=z.originalEvent),l.allowTouchCallbacks&&v.emit("touchEnd",z),l.allowTouchCallbacks=!1,!l.isTouched)return l.isMoved&&d.grabCursor&&v.setGrabCursor(!1),l.isMoved=!1,void(l.startMoving=!1);d.grabCursor&&l.isMoved&&l.isTouched&&(!0===v.allowSlideNext||!0===v.allowSlidePrev)&&v.setGrabCursor(!1);const R=eo(),D=R-l.touchStartTime;if(v.allowClick){const re=z.path||z.composedPath&&z.composedPath();v.updateClickedSlide(re&&re[0]||z.target),v.emit("tap click",z),D<300&&R-l.lastClickTime<300&&v.emit("doubleTap doubleClick",z)}if(l.lastClickTime=eo(),Lt(()=>{v.destroyed||(v.allowClick=!0)}),!l.isTouched||!l.isMoved||!v.swipeDirection||0===b.diff||l.currentTranslate===l.startTranslate)return l.isTouched=!1,l.isMoved=!1,void(l.startMoving=!1);let P;if(l.isTouched=!1,l.isMoved=!1,l.startMoving=!1,P=d.followFinger?C?v.translate:-v.translate:-l.currentTranslate,d.cssMode)return;if(v.params.freeMode&&d.freeMode.enabled)return void v.freeMode.onTouchEnd({currentPos:P});let q=0,W=v.slidesSizesGrid[0];for(let re=0;re<M.length;re+=re<d.slidesPerGroupSkip?1:d.slidesPerGroup){const ue=re<d.slidesPerGroupSkip-1?1:d.slidesPerGroup;void 0!==M[re+ue]?P>=M[re]&&P<M[re+ue]&&(q=re,W=M[re+ue]-M[re]):P>=M[re]&&(q=re,W=M[M.length-1]-M[M.length-2])}const K=(P-M[q])/W,ae=q<d.slidesPerGroupSkip-1?1:d.slidesPerGroup;if(D>d.longSwipesMs){if(!d.longSwipes)return void v.slideTo(v.activeIndex);"next"===v.swipeDirection&&v.slideTo(K>=d.longSwipesRatio?q+ae:q),"prev"===v.swipeDirection&&v.slideTo(K>1-d.longSwipesRatio?q+ae:q)}else{if(!d.shortSwipes)return void v.slideTo(v.activeIndex);!v.navigation||z.target!==v.navigation.nextEl&&z.target!==v.navigation.prevEl?("next"===v.swipeDirection&&v.slideTo(q+ae),"prev"===v.swipeDirection&&v.slideTo(q)):v.slideTo(z.target===v.navigation.nextEl?q+ae:q)}}function dn(){const o=this,{params:v,el:l}=o;if(l&&0===l.offsetWidth)return;v.breakpoints&&o.setBreakpoint();const{allowSlideNext:d,allowSlidePrev:b,snapGrid:C}=o;o.allowSlideNext=!0,o.allowSlidePrev=!0,o.updateSize(),o.updateSlides(),o.updateSlidesClasses(),o.slideTo(("auto"===v.slidesPerView||v.slidesPerView>1)&&o.isEnd&&!o.isBeginning&&!o.params.centeredSlides?o.slides.length-1:o.activeIndex,0,!1,!0),o.autoplay&&o.autoplay.running&&o.autoplay.paused&&o.autoplay.run(),o.allowSlidePrev=b,o.allowSlideNext=d,o.params.watchOverflow&&C!==o.snapGrid&&o.checkOverflow()}function Hs(o){const v=this;!v.enabled||v.allowClick||(v.params.preventClicks&&o.preventDefault(),v.params.preventClicksPropagation&&v.animating&&(o.stopPropagation(),o.stopImmediatePropagation()))}function No(){const o=this,{wrapperEl:v,rtlTranslate:l,enabled:d}=o;if(!d)return;let b;o.previousTranslate=o.translate,o.translate=o.isHorizontal()?-v.scrollLeft:-v.scrollTop,-0===o.translate&&(o.translate=0),o.updateActiveIndex(),o.updateSlidesClasses();const C=o.maxTranslate()-o.minTranslate();b=0===C?0:(o.translate-o.minTranslate())/C,b!==o.progress&&o.updateProgress(l?-o.translate:o.translate),o.emit("setTranslate",o.translate,!1)}let vo=!1;function ca(){}const Uo=(o,v)=>{const l=xi(),{params:d,touchEvents:b,el:C,wrapperEl:M,device:O,support:z}=o,R=!!d.nested,D="on"===v?"addEventListener":"removeEventListener",P=v;if(z.touch){const q=!("touchstart"!==b.start||!z.passiveListener||!d.passiveListeners)&&{passive:!0,capture:!1};C[D](b.start,o.onTouchStart,q),C[D](b.move,o.onTouchMove,z.passiveListener?{passive:!1,capture:R}:R),C[D](b.end,o.onTouchEnd,q),b.cancel&&C[D](b.cancel,o.onTouchEnd,q)}else C[D](b.start,o.onTouchStart,!1),l[D](b.move,o.onTouchMove,R),l[D](b.end,o.onTouchEnd,!1);(d.preventClicks||d.preventClicksPropagation)&&C[D]("click",o.onClick,!0),d.cssMode&&M[D]("scroll",o.onScroll),o[P](d.updateOnWindowResize?O.ios||O.android?"resize orientationchange observerUpdate":"resize observerUpdate":"observerUpdate",dn,!0)},oi=(o,v)=>o.grid&&v.grid&&v.grid.rows>1,Bl={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Fl(o,v){return function(d={}){const b=Object.keys(d)[0],C=d[b];"object"==typeof C&&null!==C?(["navigation","pagination","scrollbar"].indexOf(b)>=0&&!0===o[b]&&(o[b]={auto:!0}),b in o&&"enabled"in C?(!0===o[b]&&(o[b]={enabled:!0}),"object"==typeof o[b]&&!("enabled"in o[b])&&(o[b].enabled=!0),o[b]||(o[b]={enabled:!1}),Tn(v,d)):Tn(v,d)):Tn(v,d)}}const ha={eventsEmitter:{on(o,v,l){const d=this;if("function"!=typeof v)return d;const b=l?"unshift":"push";return o.split(" ").forEach(C=>{d.eventsListeners[C]||(d.eventsListeners[C]=[]),d.eventsListeners[C][b](v)}),d},once(o,v,l){const d=this;if("function"!=typeof v)return d;function b(...C){d.off(o,b),b.__emitterProxy&&delete b.__emitterProxy,v.apply(d,C)}return b.__emitterProxy=v,d.on(o,b,l)},onAny(o,v){const l=this;if("function"!=typeof o)return l;const d=v?"unshift":"push";return l.eventsAnyListeners.indexOf(o)<0&&l.eventsAnyListeners[d](o),l},offAny(o){const v=this;if(!v.eventsAnyListeners)return v;const l=v.eventsAnyListeners.indexOf(o);return l>=0&&v.eventsAnyListeners.splice(l,1),v},off(o,v){const l=this;return l.eventsListeners&&o.split(" ").forEach(d=>{void 0===v?l.eventsListeners[d]=[]:l.eventsListeners[d]&&l.eventsListeners[d].forEach((b,C)=>{(b===v||b.__emitterProxy&&b.__emitterProxy===v)&&l.eventsListeners[d].splice(C,1)})}),l},emit(...o){const v=this;if(!v.eventsListeners)return v;let l,d,b;return"string"==typeof o[0]||Array.isArray(o[0])?(l=o[0],d=o.slice(1,o.length),b=v):(l=o[0].events,d=o[0].data,b=o[0].context||v),d.unshift(b),(Array.isArray(l)?l:l.split(" ")).forEach(M=>{v.eventsAnyListeners&&v.eventsAnyListeners.length&&v.eventsAnyListeners.forEach(O=>{O.apply(b,[M,...d])}),v.eventsListeners&&v.eventsListeners[M]&&v.eventsListeners[M].forEach(O=>{O.apply(b,d)})}),v}},update:{updateSize:function(){const o=this;let v,l;const d=o.$el;v=null!=o.params.width?o.params.width:d[0].clientWidth,l=null!=o.params.height?o.params.height:d[0].clientHeight,!(0===v&&o.isHorizontal()||0===l&&o.isVertical())&&(v=v-parseInt(d.css("padding-left")||0,10)-parseInt(d.css("padding-right")||0,10),l=l-parseInt(d.css("padding-top")||0,10)-parseInt(d.css("padding-bottom")||0,10),Number.isNaN(v)&&(v=0),Number.isNaN(l)&&(l=0),Object.assign(o,{width:v,height:l,size:o.isHorizontal()?v:l}))},updateSlides:function(){const o=this;function v(Re){return o.isHorizontal()?Re:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Re]}function l(Re,ke){return parseFloat(Re.getPropertyValue(v(ke))||0)}const d=o.params,{$wrapperEl:b,size:C,rtlTranslate:M,wrongRTL:O}=o,z=o.virtual&&d.virtual.enabled,R=z?o.virtual.slides.length:o.slides.length,D=b.children(`.${o.params.slideClass}`),P=z?o.virtual.slides.length:D.length;let q=[];const W=[],K=[];let ae=d.slidesOffsetBefore;"function"==typeof ae&&(ae=d.slidesOffsetBefore.call(o));let re=d.slidesOffsetAfter;"function"==typeof re&&(re=d.slidesOffsetAfter.call(o));const ue=o.snapGrid.length,_e=o.slidesGrid.length;let ve=d.spaceBetween,Ee=-ae,Me=0,De=0;if(void 0===C)return;"string"==typeof ve&&ve.indexOf("%")>=0&&(ve=parseFloat(ve.replace("%",""))/100*C),o.virtualSize=-ve,D.css(M?{marginLeft:"",marginBottom:"",marginTop:""}:{marginRight:"",marginBottom:"",marginTop:""}),d.centeredSlides&&d.cssMode&&(Aa(o.wrapperEl,"--swiper-centered-offset-before",""),Aa(o.wrapperEl,"--swiper-centered-offset-after",""));const Oe=d.grid&&d.grid.rows>1&&o.grid;let xe;Oe&&o.grid.initSlides(P);const Te="auto"===d.slidesPerView&&d.breakpoints&&Object.keys(d.breakpoints).filter(Re=>void 0!==d.breakpoints[Re].slidesPerView).length>0;for(let Re=0;Re<P;Re+=1){xe=0;const ke=D.eq(Re);if(Oe&&o.grid.updateSlide(Re,ke,P,v),"none"!==ke.css("display")){if("auto"===d.slidesPerView){Te&&(D[Re].style[v("width")]="");const We=getComputedStyle(ke[0]),Ke=ke[0].style.transform,mt=ke[0].style.webkitTransform;if(Ke&&(ke[0].style.transform="none"),mt&&(ke[0].style.webkitTransform="none"),d.roundLengths)xe=o.isHorizontal()?ke.outerWidth(!0):ke.outerHeight(!0);else{const _t=l(We,"width"),Be=l(We,"padding-left"),it=l(We,"padding-right"),ft=l(We,"margin-left"),wt=l(We,"margin-right"),qt=We.getPropertyValue("box-sizing");if(qt&&"border-box"===qt)xe=_t+ft+wt;else{const{clientWidth:Xo,offsetWidth:xr}=ke[0];xe=_t+Be+it+ft+wt+(xr-Xo)}}Ke&&(ke[0].style.transform=Ke),mt&&(ke[0].style.webkitTransform=mt),d.roundLengths&&(xe=Math.floor(xe))}else xe=(C-(d.slidesPerView-1)*ve)/d.slidesPerView,d.roundLengths&&(xe=Math.floor(xe)),D[Re]&&(D[Re].style[v("width")]=`${xe}px`);D[Re]&&(D[Re].swiperSlideSize=xe),K.push(xe),d.centeredSlides?(Ee=Ee+xe/2+Me/2+ve,0===Me&&0!==Re&&(Ee=Ee-C/2-ve),0===Re&&(Ee=Ee-C/2-ve),Math.abs(Ee)<.001&&(Ee=0),d.roundLengths&&(Ee=Math.floor(Ee)),De%d.slidesPerGroup==0&&q.push(Ee),W.push(Ee)):(d.roundLengths&&(Ee=Math.floor(Ee)),(De-Math.min(o.params.slidesPerGroupSkip,De))%o.params.slidesPerGroup==0&&q.push(Ee),W.push(Ee),Ee=Ee+xe+ve),o.virtualSize+=xe+ve,Me=xe,De+=1}}if(o.virtualSize=Math.max(o.virtualSize,C)+re,M&&O&&("slide"===d.effect||"coverflow"===d.effect)&&b.css({width:`${o.virtualSize+d.spaceBetween}px`}),d.setWrapperSize&&b.css({[v("width")]:`${o.virtualSize+d.spaceBetween}px`}),Oe&&o.grid.updateWrapperSize(xe,q,v),!d.centeredSlides){const Re=[];for(let ke=0;ke<q.length;ke+=1){let We=q[ke];d.roundLengths&&(We=Math.floor(We)),q[ke]<=o.virtualSize-C&&Re.push(We)}q=Re,Math.floor(o.virtualSize-C)-Math.floor(q[q.length-1])>1&&q.push(o.virtualSize-C)}if(0===q.length&&(q=[0]),0!==d.spaceBetween){const Re=o.isHorizontal()&&M?"marginLeft":v("marginRight");D.filter((ke,We)=>!d.cssMode||We!==D.length-1).css({[Re]:`${ve}px`})}if(d.centeredSlides&&d.centeredSlidesBounds){let Re=0;K.forEach(We=>{Re+=We+(d.spaceBetween?d.spaceBetween:0)}),Re-=d.spaceBetween;const ke=Re-C;q=q.map(We=>We<0?-ae:We>ke?ke+re:We)}if(d.centerInsufficientSlides){let Re=0;if(K.forEach(ke=>{Re+=ke+(d.spaceBetween?d.spaceBetween:0)}),Re-=d.spaceBetween,Re<C){const ke=(C-Re)/2;q.forEach((We,Ke)=>{q[Ke]=We-ke}),W.forEach((We,Ke)=>{W[Ke]=We+ke})}}if(Object.assign(o,{slides:D,snapGrid:q,slidesGrid:W,slidesSizesGrid:K}),d.centeredSlides&&d.cssMode&&!d.centeredSlidesBounds){Aa(o.wrapperEl,"--swiper-centered-offset-before",-q[0]+"px"),Aa(o.wrapperEl,"--swiper-centered-offset-after",o.size/2-K[K.length-1]/2+"px");const Re=-o.snapGrid[0],ke=-o.slidesGrid[0];o.snapGrid=o.snapGrid.map(We=>We+Re),o.slidesGrid=o.slidesGrid.map(We=>We+ke)}P!==R&&o.emit("slidesLengthChange"),q.length!==ue&&(o.params.watchOverflow&&o.checkOverflow(),o.emit("snapGridLengthChange")),W.length!==_e&&o.emit("slidesGridLengthChange"),d.watchSlidesProgress&&o.updateSlidesOffset()},updateAutoHeight:function(o){const v=this,l=[],d=v.virtual&&v.params.virtual.enabled;let C,b=0;"number"==typeof o?v.setTransition(o):!0===o&&v.setTransition(v.params.speed);const M=O=>d?v.slides.filter(z=>parseInt(z.getAttribute("data-swiper-slide-index"),10)===O)[0]:v.slides.eq(O)[0];if("auto"!==v.params.slidesPerView&&v.params.slidesPerView>1)if(v.params.centeredSlides)v.visibleSlides.each(O=>{l.push(O)});else for(C=0;C<Math.ceil(v.params.slidesPerView);C+=1){const O=v.activeIndex+C;if(O>v.slides.length&&!d)break;l.push(M(O))}else l.push(M(v.activeIndex));for(C=0;C<l.length;C+=1)if(void 0!==l[C]){const O=l[C].offsetHeight;b=O>b?O:b}(b||0===b)&&v.$wrapperEl.css("height",`${b}px`)},updateSlidesOffset:function(){const o=this,v=o.slides;for(let l=0;l<v.length;l+=1)v[l].swiperSlideOffset=o.isHorizontal()?v[l].offsetLeft:v[l].offsetTop},updateSlidesProgress:function(o=this&&this.translate||0){const v=this,l=v.params,{slides:d,rtlTranslate:b,snapGrid:C}=v;if(0===d.length)return;void 0===d[0].swiperSlideOffset&&v.updateSlidesOffset();let M=-o;b&&(M=o),d.removeClass(l.slideVisibleClass),v.visibleSlidesIndexes=[],v.visibleSlides=[];for(let O=0;O<d.length;O+=1){const z=d[O];let R=z.swiperSlideOffset;l.cssMode&&l.centeredSlides&&(R-=d[0].swiperSlideOffset);const D=(M+(l.centeredSlides?v.minTranslate():0)-R)/(z.swiperSlideSize+l.spaceBetween),P=(M-C[0]+(l.centeredSlides?v.minTranslate():0)-R)/(z.swiperSlideSize+l.spaceBetween),q=-(M-R),W=q+v.slidesSizesGrid[O];(q>=0&&q<v.size-1||W>1&&W<=v.size||q<=0&&W>=v.size)&&(v.visibleSlides.push(z),v.visibleSlidesIndexes.push(O),d.eq(O).addClass(l.slideVisibleClass)),z.progress=b?-D:D,z.originalProgress=b?-P:P}v.visibleSlides=Dt(v.visibleSlides)},updateProgress:function(o){const v=this;if(void 0===o){const R=v.rtlTranslate?-1:1;o=v&&v.translate&&v.translate*R||0}const l=v.params,d=v.maxTranslate()-v.minTranslate();let{progress:b,isBeginning:C,isEnd:M}=v;const O=C,z=M;0===d?(b=0,C=!0,M=!0):(b=(o-v.minTranslate())/d,C=b<=0,M=b>=1),Object.assign(v,{progress:b,isBeginning:C,isEnd:M}),(l.watchSlidesProgress||l.centeredSlides&&l.autoHeight)&&v.updateSlidesProgress(o),C&&!O&&v.emit("reachBeginning toEdge"),M&&!z&&v.emit("reachEnd toEdge"),(O&&!C||z&&!M)&&v.emit("fromEdge"),v.emit("progress",b)},updateSlidesClasses:function(){const o=this,{slides:v,params:l,$wrapperEl:d,activeIndex:b,realIndex:C}=o,M=o.virtual&&l.virtual.enabled;let O;v.removeClass(`${l.slideActiveClass} ${l.slideNextClass} ${l.slidePrevClass} ${l.slideDuplicateActiveClass} ${l.slideDuplicateNextClass} ${l.slideDuplicatePrevClass}`),O=M?o.$wrapperEl.find(`.${l.slideClass}[data-swiper-slide-index="${b}"]`):v.eq(b),O.addClass(l.slideActiveClass),l.loop&&(O.hasClass(l.slideDuplicateClass)?d.children(`.${l.slideClass}:not(.${l.slideDuplicateClass})[data-swiper-slide-index="${C}"]`).addClass(l.slideDuplicateActiveClass):d.children(`.${l.slideClass}.${l.slideDuplicateClass}[data-swiper-slide-index="${C}"]`).addClass(l.slideDuplicateActiveClass));let z=O.nextAll(`.${l.slideClass}`).eq(0).addClass(l.slideNextClass);l.loop&&0===z.length&&(z=v.eq(0),z.addClass(l.slideNextClass));let R=O.prevAll(`.${l.slideClass}`).eq(0).addClass(l.slidePrevClass);l.loop&&0===R.length&&(R=v.eq(-1),R.addClass(l.slidePrevClass)),l.loop&&(z.hasClass(l.slideDuplicateClass)?d.children(`.${l.slideClass}:not(.${l.slideDuplicateClass})[data-swiper-slide-index="${z.attr("data-swiper-slide-index")}"]`).addClass(l.slideDuplicateNextClass):d.children(`.${l.slideClass}.${l.slideDuplicateClass}[data-swiper-slide-index="${z.attr("data-swiper-slide-index")}"]`).addClass(l.slideDuplicateNextClass),R.hasClass(l.slideDuplicateClass)?d.children(`.${l.slideClass}:not(.${l.slideDuplicateClass})[data-swiper-slide-index="${R.attr("data-swiper-slide-index")}"]`).addClass(l.slideDuplicatePrevClass):d.children(`.${l.slideClass}.${l.slideDuplicateClass}[data-swiper-slide-index="${R.attr("data-swiper-slide-index")}"]`).addClass(l.slideDuplicatePrevClass)),o.emitSlidesClasses()},updateActiveIndex:function(o){const v=this,l=v.rtlTranslate?v.translate:-v.translate,{slidesGrid:d,snapGrid:b,params:C,activeIndex:M,realIndex:O,snapIndex:z}=v;let D,R=o;if(void 0===R){for(let q=0;q<d.length;q+=1)void 0!==d[q+1]?l>=d[q]&&l<d[q+1]-(d[q+1]-d[q])/2?R=q:l>=d[q]&&l<d[q+1]&&(R=q+1):l>=d[q]&&(R=q);C.normalizeSlideIndex&&(R<0||void 0===R)&&(R=0)}if(b.indexOf(l)>=0)D=b.indexOf(l);else{const q=Math.min(C.slidesPerGroupSkip,R);D=q+Math.floor((R-q)/C.slidesPerGroup)}if(D>=b.length&&(D=b.length-1),R===M)return void(D!==z&&(v.snapIndex=D,v.emit("snapIndexChange")));const P=parseInt(v.slides.eq(R).attr("data-swiper-slide-index")||R,10);Object.assign(v,{snapIndex:D,realIndex:P,previousIndex:M,activeIndex:R}),v.emit("activeIndexChange"),v.emit("snapIndexChange"),O!==P&&v.emit("realIndexChange"),(v.initialized||v.params.runCallbacksOnInit)&&v.emit("slideChange")},updateClickedSlide:function(o){const v=this,l=v.params,d=Dt(o).closest(`.${l.slideClass}`)[0];let C,b=!1;if(d)for(let M=0;M<v.slides.length;M+=1)if(v.slides[M]===d){b=!0,C=M;break}if(!d||!b)return v.clickedSlide=void 0,void(v.clickedIndex=void 0);v.clickedSlide=d,v.clickedIndex=v.virtual&&v.params.virtual.enabled?parseInt(Dt(d).attr("data-swiper-slide-index"),10):C,l.slideToClickedSlide&&void 0!==v.clickedIndex&&v.clickedIndex!==v.activeIndex&&v.slideToClickedSlide()}},translate:{getTranslate:function(o=(this.isHorizontal()?"x":"y")){const{params:l,rtlTranslate:d,translate:b,$wrapperEl:C}=this;if(l.virtualTranslate)return d?-b:b;if(l.cssMode)return b;let M=function(o,v="x"){const l=On();let d,b,C;const M=function(o){const v=On();let l;return v.getComputedStyle&&(l=v.getComputedStyle(o,null)),!l&&o.currentStyle&&(l=o.currentStyle),l||(l=o.style),l}(o);return l.WebKitCSSMatrix?(b=M.transform||M.webkitTransform,b.split(",").length>6&&(b=b.split(", ").map(O=>O.replace(",",".")).join(", ")),C=new l.WebKitCSSMatrix("none"===b?"":b)):(C=M.MozTransform||M.OTransform||M.MsTransform||M.msTransform||M.transform||M.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),d=C.toString().split(",")),"x"===v&&(b=l.WebKitCSSMatrix?C.m41:16===d.length?parseFloat(d[12]):parseFloat(d[4])),"y"===v&&(b=l.WebKitCSSMatrix?C.m42:16===d.length?parseFloat(d[13]):parseFloat(d[5])),b||0}(C[0],o);return d&&(M=-M),M||0},setTranslate:function(o,v){const l=this,{rtlTranslate:d,params:b,$wrapperEl:C,wrapperEl:M,progress:O}=l;let P,z=0,R=0;l.isHorizontal()?z=d?-o:o:R=o,b.roundLengths&&(z=Math.floor(z),R=Math.floor(R)),b.cssMode?M[l.isHorizontal()?"scrollLeft":"scrollTop"]=l.isHorizontal()?-z:-R:b.virtualTranslate||C.transform(`translate3d(${z}px, ${R}px, 0px)`),l.previousTranslate=l.translate,l.translate=l.isHorizontal()?z:R;const q=l.maxTranslate()-l.minTranslate();P=0===q?0:(o-l.minTranslate())/q,P!==O&&l.updateProgress(o),l.emit("setTranslate",l.translate,v)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(o=0,v=this.params.speed,l=!0,d=!0,b){const C=this,{params:M,wrapperEl:O}=C;if(C.animating&&M.preventInteractionOnTransition)return!1;const z=C.minTranslate(),R=C.maxTranslate();let D;if(D=d&&o>z?z:d&&o<R?R:o,C.updateProgress(D),M.cssMode){const P=C.isHorizontal();if(0===v)O[P?"scrollLeft":"scrollTop"]=-D;else{if(!C.support.smoothScroll)return Do({swiper:C,targetPosition:-D,side:P?"left":"top"}),!0;O.scrollTo({[P?"left":"top"]:-D,behavior:"smooth"})}return!0}return 0===v?(C.setTransition(0),C.setTranslate(D),l&&(C.emit("beforeTransitionStart",v,b),C.emit("transitionEnd"))):(C.setTransition(v),C.setTranslate(D),l&&(C.emit("beforeTransitionStart",v,b),C.emit("transitionStart")),C.animating||(C.animating=!0,C.onTranslateToWrapperTransitionEnd||(C.onTranslateToWrapperTransitionEnd=function(q){!C||C.destroyed||q.target===this&&(C.$wrapperEl[0].removeEventListener("transitionend",C.onTranslateToWrapperTransitionEnd),C.$wrapperEl[0].removeEventListener("webkitTransitionEnd",C.onTranslateToWrapperTransitionEnd),C.onTranslateToWrapperTransitionEnd=null,delete C.onTranslateToWrapperTransitionEnd,l&&C.emit("transitionEnd"))}),C.$wrapperEl[0].addEventListener("transitionend",C.onTranslateToWrapperTransitionEnd),C.$wrapperEl[0].addEventListener("webkitTransitionEnd",C.onTranslateToWrapperTransitionEnd))),!0}},transition:{setTransition:function(o,v){const l=this;l.params.cssMode||l.$wrapperEl.transition(o),l.emit("setTransition",o,v)},transitionStart:function(o=!0,v){const l=this,{params:d}=l;d.cssMode||(d.autoHeight&&l.updateAutoHeight(),$i({swiper:l,runCallbacks:o,direction:v,step:"Start"}))},transitionEnd:function(o=!0,v){const l=this,{params:d}=l;l.animating=!1,!d.cssMode&&(l.setTransition(0),$i({swiper:l,runCallbacks:o,direction:v,step:"End"}))}},slide:{slideTo:function(o=0,v=this.params.speed,l=!0,d,b){if("number"!=typeof o&&"string"!=typeof o)throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof o}] given.`);if("string"==typeof o){const ve=parseInt(o,10);if(!isFinite(ve))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${o}] given.`);o=ve}const C=this;let M=o;M<0&&(M=0);const{params:O,snapGrid:z,slidesGrid:R,previousIndex:D,activeIndex:P,rtlTranslate:q,wrapperEl:W,enabled:K}=C;if(C.animating&&O.preventInteractionOnTransition||!K&&!d&&!b)return!1;const ae=Math.min(C.params.slidesPerGroupSkip,M);let re=ae+Math.floor((M-ae)/C.params.slidesPerGroup);re>=z.length&&(re=z.length-1),(P||O.initialSlide||0)===(D||0)&&l&&C.emit("beforeSlideChangeStart");const ue=-z[re];if(C.updateProgress(ue),O.normalizeSlideIndex)for(let ve=0;ve<R.length;ve+=1){const Ee=-Math.floor(100*ue),Me=Math.floor(100*R[ve]),De=Math.floor(100*R[ve+1]);void 0!==R[ve+1]?Ee>=Me&&Ee<De-(De-Me)/2?M=ve:Ee>=Me&&Ee<De&&(M=ve+1):Ee>=Me&&(M=ve)}if(C.initialized&&M!==P&&(!C.allowSlideNext&&ue<C.translate&&ue<C.minTranslate()||!C.allowSlidePrev&&ue>C.translate&&ue>C.maxTranslate()&&(P||0)!==M))return!1;let _e;if(_e=M>P?"next":M<P?"prev":"reset",q&&-ue===C.translate||!q&&ue===C.translate)return C.updateActiveIndex(M),O.autoHeight&&C.updateAutoHeight(),C.updateSlidesClasses(),"slide"!==O.effect&&C.setTranslate(ue),"reset"!==_e&&(C.transitionStart(l,_e),C.transitionEnd(l,_e)),!1;if(O.cssMode){const ve=C.isHorizontal(),Ee=q?ue:-ue;if(0===v){const Me=C.virtual&&C.params.virtual.enabled;Me&&(C.wrapperEl.style.scrollSnapType="none",C._immediateVirtual=!0),W[ve?"scrollLeft":"scrollTop"]=Ee,Me&&requestAnimationFrame(()=>{C.wrapperEl.style.scrollSnapType="",C._swiperImmediateVirtual=!1})}else{if(!C.support.smoothScroll)return Do({swiper:C,targetPosition:Ee,side:ve?"left":"top"}),!0;W.scrollTo({[ve?"left":"top"]:Ee,behavior:"smooth"})}return!0}return C.setTransition(v),C.setTranslate(ue),C.updateActiveIndex(M),C.updateSlidesClasses(),C.emit("beforeTransitionStart",v,d),C.transitionStart(l,_e),0===v?C.transitionEnd(l,_e):C.animating||(C.animating=!0,C.onSlideToWrapperTransitionEnd||(C.onSlideToWrapperTransitionEnd=function(Ee){!C||C.destroyed||Ee.target===this&&(C.$wrapperEl[0].removeEventListener("transitionend",C.onSlideToWrapperTransitionEnd),C.$wrapperEl[0].removeEventListener("webkitTransitionEnd",C.onSlideToWrapperTransitionEnd),C.onSlideToWrapperTransitionEnd=null,delete C.onSlideToWrapperTransitionEnd,C.transitionEnd(l,_e))}),C.$wrapperEl[0].addEventListener("transitionend",C.onSlideToWrapperTransitionEnd),C.$wrapperEl[0].addEventListener("webkitTransitionEnd",C.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(o=0,v=this.params.speed,l=!0,d){const b=this;let C=o;return b.params.loop&&(C+=b.loopedSlides),b.slideTo(C,v,l,d)},slideNext:function(o=this.params.speed,v=!0,l){const d=this,{animating:b,enabled:C,params:M}=d;if(!C)return d;let O=M.slidesPerGroup;"auto"===M.slidesPerView&&1===M.slidesPerGroup&&M.slidesPerGroupAuto&&(O=Math.max(d.slidesPerViewDynamic("current",!0),1));const z=d.activeIndex<M.slidesPerGroupSkip?1:O;if(M.loop){if(b&&M.loopPreventsSlide)return!1;d.loopFix(),d._clientLeft=d.$wrapperEl[0].clientLeft}return d.slideTo(M.rewind&&d.isEnd?0:d.activeIndex+z,o,v,l)},slidePrev:function(o=this.params.speed,v=!0,l){const d=this,{params:b,animating:C,snapGrid:M,slidesGrid:O,rtlTranslate:z,enabled:R}=d;if(!R)return d;if(b.loop){if(C&&b.loopPreventsSlide)return!1;d.loopFix(),d._clientLeft=d.$wrapperEl[0].clientLeft}function P(re){return re<0?-Math.floor(Math.abs(re)):Math.floor(re)}const q=P(z?d.translate:-d.translate),W=M.map(re=>P(re));let K=M[W.indexOf(q)-1];if(void 0===K&&b.cssMode){let re;M.forEach((ue,_e)=>{q>=ue&&(re=_e)}),void 0!==re&&(K=M[re>0?re-1:re])}let ae=0;return void 0!==K&&(ae=O.indexOf(K),ae<0&&(ae=d.activeIndex-1),"auto"===b.slidesPerView&&1===b.slidesPerGroup&&b.slidesPerGroupAuto&&(ae=ae-d.slidesPerViewDynamic("previous",!0)+1,ae=Math.max(ae,0))),d.slideTo(b.rewind&&d.isBeginning?d.slides.length-1:ae,o,v,l)},slideReset:function(o=this.params.speed,v=!0,l){return this.slideTo(this.activeIndex,o,v,l)},slideToClosest:function(o=this.params.speed,v=!0,l,d=.5){const b=this;let C=b.activeIndex;const M=Math.min(b.params.slidesPerGroupSkip,C),O=M+Math.floor((C-M)/b.params.slidesPerGroup),z=b.rtlTranslate?b.translate:-b.translate;if(z>=b.snapGrid[O]){const R=b.snapGrid[O];z-R>(b.snapGrid[O+1]-R)*d&&(C+=b.params.slidesPerGroup)}else{const R=b.snapGrid[O-1];z-R<=(b.snapGrid[O]-R)*d&&(C-=b.params.slidesPerGroup)}return C=Math.max(C,0),C=Math.min(C,b.slidesGrid.length-1),b.slideTo(C,o,v,l)},slideToClickedSlide:function(){const o=this,{params:v,$wrapperEl:l}=o,d="auto"===v.slidesPerView?o.slidesPerViewDynamic():v.slidesPerView;let C,b=o.clickedIndex;if(v.loop){if(o.animating)return;C=parseInt(Dt(o.clickedSlide).attr("data-swiper-slide-index"),10),v.centeredSlides?b<o.loopedSlides-d/2||b>o.slides.length-o.loopedSlides+d/2?(o.loopFix(),b=l.children(`.${v.slideClass}[data-swiper-slide-index="${C}"]:not(.${v.slideDuplicateClass})`).eq(0).index(),Lt(()=>{o.slideTo(b)})):o.slideTo(b):b>o.slides.length-d?(o.loopFix(),b=l.children(`.${v.slideClass}[data-swiper-slide-index="${C}"]:not(.${v.slideDuplicateClass})`).eq(0).index(),Lt(()=>{o.slideTo(b)})):o.slideTo(b)}else o.slideTo(b)}},loop:{loopCreate:function(){const o=this,v=xi(),{params:l,$wrapperEl:d}=o,b=d.children().length>0?Dt(d.children()[0].parentNode):d;b.children(`.${l.slideClass}.${l.slideDuplicateClass}`).remove();let C=b.children(`.${l.slideClass}`);if(l.loopFillGroupWithBlank){const z=l.slidesPerGroup-C.length%l.slidesPerGroup;if(z!==l.slidesPerGroup){for(let R=0;R<z;R+=1){const D=Dt(v.createElement("div")).addClass(`${l.slideClass} ${l.slideBlankClass}`);b.append(D)}C=b.children(`.${l.slideClass}`)}}"auto"===l.slidesPerView&&!l.loopedSlides&&(l.loopedSlides=C.length),o.loopedSlides=Math.ceil(parseFloat(l.loopedSlides||l.slidesPerView,10)),o.loopedSlides+=l.loopAdditionalSlides,o.loopedSlides>C.length&&(o.loopedSlides=C.length);const M=[],O=[];C.each((z,R)=>{const D=Dt(z);R<o.loopedSlides&&O.push(z),R<C.length&&R>=C.length-o.loopedSlides&&M.push(z),D.attr("data-swiper-slide-index",R)});for(let z=0;z<O.length;z+=1)b.append(Dt(O[z].cloneNode(!0)).addClass(l.slideDuplicateClass));for(let z=M.length-1;z>=0;z-=1)b.prepend(Dt(M[z].cloneNode(!0)).addClass(l.slideDuplicateClass))},loopFix:function(){const o=this;o.emit("beforeLoopFix");const{activeIndex:v,slides:l,loopedSlides:d,allowSlidePrev:b,allowSlideNext:C,snapGrid:M,rtlTranslate:O}=o;let z;o.allowSlidePrev=!0,o.allowSlideNext=!0;const D=-M[v]-o.getTranslate();v<d?(z=l.length-3*d+v,z+=d,o.slideTo(z,0,!1,!0)&&0!==D&&o.setTranslate((O?-o.translate:o.translate)-D)):v>=l.length-d&&(z=-l.length+v+d,z+=d,o.slideTo(z,0,!1,!0)&&0!==D&&o.setTranslate((O?-o.translate:o.translate)-D)),o.allowSlidePrev=b,o.allowSlideNext=C,o.emit("loopFix")},loopDestroy:function(){const{$wrapperEl:v,params:l,slides:d}=this;v.children(`.${l.slideClass}.${l.slideDuplicateClass},.${l.slideClass}.${l.slideBlankClass}`).remove(),d.removeAttr("data-swiper-slide-index")}},grabCursor:{setGrabCursor:function(o){const v=this;if(v.support.touch||!v.params.simulateTouch||v.params.watchOverflow&&v.isLocked||v.params.cssMode)return;const l="container"===v.params.touchEventsTarget?v.el:v.wrapperEl;l.style.cursor="move",l.style.cursor=o?"-webkit-grabbing":"-webkit-grab",l.style.cursor=o?"-moz-grabbin":"-moz-grab",l.style.cursor=o?"grabbing":"grab"},unsetGrabCursor:function(){const o=this;o.support.touch||o.params.watchOverflow&&o.isLocked||o.params.cssMode||(o["container"===o.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:{attachEvents:function(){const o=this,v=xi(),{params:l,support:d}=o;o.onTouchStart=Fo.bind(o),o.onTouchMove=Qa.bind(o),o.onTouchEnd=Ws.bind(o),l.cssMode&&(o.onScroll=No.bind(o)),o.onClick=Hs.bind(o),d.touch&&!vo&&(v.addEventListener("touchstart",ca),vo=!0),Uo(o,"on")},detachEvents:function(){Uo(this,"off")}},breakpoints:{setBreakpoint:function(){const o=this,{activeIndex:v,initialized:l,loopedSlides:d=0,params:b,$el:C}=o,M=b.breakpoints;if(!M||M&&0===Object.keys(M).length)return;const O=o.getBreakpoint(M,o.params.breakpointsBase,o.el);if(!O||o.currentBreakpoint===O)return;const R=(O in M?M[O]:void 0)||o.originalParams,D=oi(o,b),P=oi(o,R),q=b.enabled;D&&!P?(C.removeClass(`${b.containerModifierClass}grid ${b.containerModifierClass}grid-column`),o.emitContainerClasses()):!D&&P&&(C.addClass(`${b.containerModifierClass}grid`),(R.grid.fill&&"column"===R.grid.fill||!R.grid.fill&&"column"===b.grid.fill)&&C.addClass(`${b.containerModifierClass}grid-column`),o.emitContainerClasses());const W=R.direction&&R.direction!==b.direction,K=b.loop&&(R.slidesPerView!==b.slidesPerView||W);W&&l&&o.changeDirection(),Tn(o.params,R);const ae=o.params.enabled;Object.assign(o,{allowTouchMove:o.params.allowTouchMove,allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev}),q&&!ae?o.disable():!q&&ae&&o.enable(),o.currentBreakpoint=O,o.emit("_beforeBreakpoint",R),K&&l&&(o.loopDestroy(),o.loopCreate(),o.updateSlides(),o.slideTo(v-d+o.loopedSlides,0,!1)),o.emit("breakpoint",R)},getBreakpoint:function(o,v="window",l){if(!o||"container"===v&&!l)return;let d=!1;const b=On(),C="window"===v?b.innerHeight:l.clientHeight,M=Object.keys(o).map(O=>{if("string"==typeof O&&0===O.indexOf("@")){const z=parseFloat(O.substr(1));return{value:C*z,point:O}}return{value:O,point:O}});M.sort((O,z)=>parseInt(O.value,10)-parseInt(z.value,10));for(let O=0;O<M.length;O+=1){const{point:z,value:R}=M[O];"window"===v?b.matchMedia(`(min-width: ${R}px)`).matches&&(d=z):R<=l.clientWidth&&(d=z)}return d||"max"}},checkOverflow:{checkOverflow:function(){const o=this,{isLocked:v,params:l}=o,{slidesOffsetBefore:d}=l;if(d){const b=o.slides.length-1;o.isLocked=o.size>o.slidesGrid[b]+o.slidesSizesGrid[b]+2*d}else o.isLocked=1===o.snapGrid.length;!0===l.allowSlideNext&&(o.allowSlideNext=!o.isLocked),!0===l.allowSlidePrev&&(o.allowSlidePrev=!o.isLocked),v&&v!==o.isLocked&&(o.isEnd=!1),v!==o.isLocked&&o.emit(o.isLocked?"lock":"unlock")}},classes:{addClasses:function(){const o=this,{classNames:v,params:l,rtl:d,$el:b,device:C,support:M}=o,O=function(o,v){const l=[];return o.forEach(d=>{"object"==typeof d?Object.keys(d).forEach(b=>{d[b]&&l.push(v+b)}):"string"==typeof d&&l.push(v+d)}),l}(["initialized",l.direction,{"pointer-events":!M.touch},{"free-mode":o.params.freeMode&&l.freeMode.enabled},{autoheight:l.autoHeight},{rtl:d},{grid:l.grid&&l.grid.rows>1},{"grid-column":l.grid&&l.grid.rows>1&&"column"===l.grid.fill},{android:C.android},{ios:C.ios},{"css-mode":l.cssMode},{centered:l.cssMode&&l.centeredSlides}],l.containerModifierClass);v.push(...O),b.addClass([...v].join(" ")),o.emitContainerClasses()},removeClasses:function(){const{$el:v,classNames:l}=this;v.removeClass(l.join(" ")),this.emitContainerClasses()}},images:{loadImage:function(o,v,l,d,b,C){const M=On();let O;function z(){C&&C()}Dt(o).parent("picture")[0]||o.complete&&b||!v?z():(O=new M.Image,O.onload=z,O.onerror=z,d&&(O.sizes=d),l&&(O.srcset=l),v&&(O.src=v))},preloadImages:function(){const o=this;function v(){null==o||!o||o.destroyed||(void 0!==o.imagesLoaded&&(o.imagesLoaded+=1),o.imagesLoaded===o.imagesToLoad.length&&(o.params.updateOnImagesReady&&o.update(),o.emit("imagesReady")))}o.imagesToLoad=o.$el.find("img");for(let l=0;l<o.imagesToLoad.length;l+=1){const d=o.imagesToLoad[l];o.loadImage(d,d.currentSrc||d.getAttribute("src"),d.srcset||d.getAttribute("srcset"),d.sizes||d.getAttribute("sizes"),!0,v)}}}},mr={};class gr{constructor(...v){let l,d;if(1===v.length&&v[0].constructor&&"Object"===Object.prototype.toString.call(v[0]).slice(8,-1)?d=v[0]:[l,d]=v,d||(d={}),d=Tn({},d),l&&!d.el&&(d.el=l),d.el&&Dt(d.el).length>1){const O=[];return Dt(d.el).each(z=>{const R=Tn({},d,{el:z});O.push(new gr(R))}),O}const b=this;b.__swiper__=!0,b.support=tr(),b.device=function(o={}){return gn||(gn=function({userAgent:o}={}){const v=tr(),l=On(),d=l.navigator.platform,b=o||l.navigator.userAgent,C={ios:!1,android:!1},M=l.screen.width,O=l.screen.height,z=b.match(/(Android);?[\s\/]+([\d.]+)?/);let R=b.match(/(iPad).*OS\s([\d_]+)/);const D=b.match(/(iPod)(.*OS\s([\d_]+))?/),P=!R&&b.match(/(iPhone\sOS|iOS)\s([\d_]+)/),q="Win32"===d;let W="MacIntel"===d;return!R&&W&&v.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${M}x${O}`)>=0&&(R=b.match(/(Version)\/([\d.]+)/),R||(R=[0,1,"13_0_0"]),W=!1),z&&!q&&(C.os="android",C.android=!0),(R||P||D)&&(C.os="ios",C.ios=!0),C}(o)),gn}({userAgent:d.userAgent}),b.browser=(Pi||(Pi=function(){const o=On();return{isSafari:function(){const l=o.navigator.userAgent.toLowerCase();return l.indexOf("safari")>=0&&l.indexOf("chrome")<0&&l.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(o.navigator.userAgent)}}()),Pi),b.eventsListeners={},b.eventsAnyListeners=[],b.modules=[...b.__modules__],d.modules&&Array.isArray(d.modules)&&b.modules.push(...d.modules);const C={};b.modules.forEach(O=>{O({swiper:b,extendParams:Fl(d,C),on:b.on.bind(b),once:b.once.bind(b),off:b.off.bind(b),emit:b.emit.bind(b)})});const M=Tn({},Bl,C);return b.params=Tn({},M,mr,d),b.originalParams=Tn({},b.params),b.passedParams=Tn({},d),b.params&&b.params.on&&Object.keys(b.params.on).forEach(O=>{b.on(O,b.params.on[O])}),b.params&&b.params.onAny&&b.onAny(b.params.onAny),b.$=Dt,Object.assign(b,{enabled:b.params.enabled,el:l,classNames:[],slides:Dt(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===b.params.direction,isVertical:()=>"vertical"===b.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:b.params.allowSlideNext,allowSlidePrev:b.params.allowSlidePrev,touchEvents:function(){const z=["touchstart","touchmove","touchend","touchcancel"],R=["pointerdown","pointermove","pointerup"];return b.touchEventsTouch={start:z[0],move:z[1],end:z[2],cancel:z[3]},b.touchEventsDesktop={start:R[0],move:R[1],end:R[2]},b.support.touch||!b.params.simulateTouch?b.touchEventsTouch:b.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:b.params.focusableElements,lastClickTime:eo(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:b.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),b.emit("_swiper"),b.params.init&&b.init(),b}enable(){const v=this;v.enabled||(v.enabled=!0,v.params.grabCursor&&v.setGrabCursor(),v.emit("enable"))}disable(){const v=this;!v.enabled||(v.enabled=!1,v.params.grabCursor&&v.unsetGrabCursor(),v.emit("disable"))}setProgress(v,l){const d=this;v=Math.min(Math.max(v,0),1);const b=d.minTranslate(),M=(d.maxTranslate()-b)*v+b;d.translateTo(M,void 0===l?0:l),d.updateActiveIndex(),d.updateSlidesClasses()}emitContainerClasses(){const v=this;if(!v.params._emitClasses||!v.el)return;const l=v.el.className.split(" ").filter(d=>0===d.indexOf("swiper")||0===d.indexOf(v.params.containerModifierClass));v.emit("_containerClasses",l.join(" "))}getSlideClasses(v){const l=this;return v.className.split(" ").filter(d=>0===d.indexOf("swiper-slide")||0===d.indexOf(l.params.slideClass)).join(" ")}emitSlidesClasses(){const v=this;if(!v.params._emitClasses||!v.el)return;const l=[];v.slides.each(d=>{const b=v.getSlideClasses(d);l.push({slideEl:d,classNames:b}),v.emit("_slideClass",d,b)}),v.emit("_slideClasses",l)}slidesPerViewDynamic(v="current",l=!1){const{params:b,slides:C,slidesGrid:M,slidesSizesGrid:O,size:z,activeIndex:R}=this;let D=1;if(b.centeredSlides){let q,P=C[R].swiperSlideSize;for(let W=R+1;W<C.length;W+=1)C[W]&&!q&&(P+=C[W].swiperSlideSize,D+=1,P>z&&(q=!0));for(let W=R-1;W>=0;W-=1)C[W]&&!q&&(P+=C[W].swiperSlideSize,D+=1,P>z&&(q=!0))}else if("current"===v)for(let P=R+1;P<C.length;P+=1)(l?M[P]+O[P]-M[R]<z:M[P]-M[R]<z)&&(D+=1);else for(let P=R-1;P>=0;P-=1)M[R]-M[P]<z&&(D+=1);return D}update(){const v=this;if(!v||v.destroyed)return;const{snapGrid:l,params:d}=v;function b(){const O=Math.min(Math.max(v.rtlTranslate?-1*v.translate:v.translate,v.maxTranslate()),v.minTranslate());v.setTranslate(O),v.updateActiveIndex(),v.updateSlidesClasses()}let C;d.breakpoints&&v.setBreakpoint(),v.updateSize(),v.updateSlides(),v.updateProgress(),v.updateSlidesClasses(),v.params.freeMode&&v.params.freeMode.enabled?(b(),v.params.autoHeight&&v.updateAutoHeight()):(C=v.slideTo(("auto"===v.params.slidesPerView||v.params.slidesPerView>1)&&v.isEnd&&!v.params.centeredSlides?v.slides.length-1:v.activeIndex,0,!1,!0),C||b()),d.watchOverflow&&l!==v.snapGrid&&v.checkOverflow(),v.emit("update")}changeDirection(v,l=!0){const d=this,b=d.params.direction;return v||(v="horizontal"===b?"vertical":"horizontal"),v===b||"horizontal"!==v&&"vertical"!==v||(d.$el.removeClass(`${d.params.containerModifierClass}${b}`).addClass(`${d.params.containerModifierClass}${v}`),d.emitContainerClasses(),d.params.direction=v,d.slides.each(C=>{"vertical"===v?C.style.width="":C.style.height=""}),d.emit("changeDirection"),l&&d.update()),d}mount(v){const l=this;if(l.mounted)return!0;const d=Dt(v||l.params.el);if(!(v=d[0]))return!1;v.swiper=l;const b=()=>`.${(l.params.wrapperClass||"").trim().split(" ").join(".")}`;let M=(()=>{if(v&&v.shadowRoot&&v.shadowRoot.querySelector){const O=Dt(v.shadowRoot.querySelector(b()));return O.children=z=>d.children(z),O}return d.children(b())})();if(0===M.length&&l.params.createElements){const z=xi().createElement("div");M=Dt(z),z.className=l.params.wrapperClass,d.append(z),d.children(`.${l.params.slideClass}`).each(R=>{M.append(R)})}return Object.assign(l,{$el:d,el:v,$wrapperEl:M,wrapperEl:M[0],mounted:!0,rtl:"rtl"===v.dir.toLowerCase()||"rtl"===d.css("direction"),rtlTranslate:"horizontal"===l.params.direction&&("rtl"===v.dir.toLowerCase()||"rtl"===d.css("direction")),wrongRTL:"-webkit-box"===M.css("display")}),!0}init(v){const l=this;return l.initialized||!1===l.mount(v)||(l.emit("beforeInit"),l.params.breakpoints&&l.setBreakpoint(),l.addClasses(),l.params.loop&&l.loopCreate(),l.updateSize(),l.updateSlides(),l.params.watchOverflow&&l.checkOverflow(),l.params.grabCursor&&l.enabled&&l.setGrabCursor(),l.params.preloadImages&&l.preloadImages(),l.slideTo(l.params.loop?l.params.initialSlide+l.loopedSlides:l.params.initialSlide,0,l.params.runCallbacksOnInit,!1,!0),l.attachEvents(),l.initialized=!0,l.emit("init"),l.emit("afterInit")),l}destroy(v=!0,l=!0){const d=this,{params:b,$el:C,$wrapperEl:M,slides:O}=d;return void 0===d.params||d.destroyed||(d.emit("beforeDestroy"),d.initialized=!1,d.detachEvents(),b.loop&&d.loopDestroy(),l&&(d.removeClasses(),C.removeAttr("style"),M.removeAttr("style"),O&&O.length&&O.removeClass([b.slideVisibleClass,b.slideActiveClass,b.slideNextClass,b.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),d.emit("destroy"),Object.keys(d.eventsListeners).forEach(z=>{d.off(z)}),!1!==v&&(d.$el[0].swiper=null,function(o){const v=o;Object.keys(v).forEach(l=>{try{v[l]=null}catch(d){}try{delete v[l]}catch(d){}})}(d)),d.destroyed=!0),null}static extendDefaults(v){Tn(mr,v)}static get extendedDefaults(){return mr}static get defaults(){return Bl}static installModule(v){gr.prototype.__modules__||(gr.prototype.__modules__=[]);const l=gr.prototype.__modules__;"function"==typeof v&&l.indexOf(v)<0&&l.push(v)}static use(v){return Array.isArray(v)?(v.forEach(l=>gr.installModule(l)),gr):(gr.installModule(v),gr)}}Object.keys(ha).forEach(o=>{Object.keys(ha[o]).forEach(v=>{gr.prototype[v]=ha[o][v]})}),gr.use([function({swiper:o,on:v,emit:l}){const d=On();let b=null;const C=()=>{!o||o.destroyed||!o.initialized||(l("beforeResize"),l("resize"))},z=()=>{!o||o.destroyed||!o.initialized||l("orientationchange")};v("init",()=>{o.params.resizeObserver&&void 0!==d.ResizeObserver?!o||o.destroyed||!o.initialized||(b=new ResizeObserver(R=>{const{width:D,height:P}=o;let q=D,W=P;R.forEach(({contentBoxSize:K,contentRect:ae,target:re})=>{re&&re!==o.el||(q=ae?ae.width:(K[0]||K).inlineSize,W=ae?ae.height:(K[0]||K).blockSize)}),(q!==D||W!==P)&&C()}),b.observe(o.el)):(d.addEventListener("resize",C),d.addEventListener("orientationchange",z))}),v("destroy",()=>{b&&b.unobserve&&o.el&&(b.unobserve(o.el),b=null),d.removeEventListener("resize",C),d.removeEventListener("orientationchange",z)})},function({swiper:o,extendParams:v,on:l,emit:d}){const b=[],C=On(),M=(R,D={})=>{const q=new(C.MutationObserver||C.WebkitMutationObserver)(W=>{if(1===W.length)return void d("observerUpdate",W[0]);const K=function(){d("observerUpdate",W[0])};C.requestAnimationFrame?C.requestAnimationFrame(K):C.setTimeout(K,0)});q.observe(R,{attributes:void 0===D.attributes||D.attributes,childList:void 0===D.childList||D.childList,characterData:void 0===D.characterData||D.characterData}),b.push(q)};v({observer:!1,observeParents:!1,observeSlideChildren:!1}),l("init",()=>{if(o.params.observer){if(o.params.observeParents){const R=o.$el.parents();for(let D=0;D<R.length;D+=1)M(R[D])}M(o.$el[0],{childList:o.params.observeSlideChildren}),M(o.$wrapperEl[0],{attributes:!1})}}),l("destroy",()=>{b.forEach(R=>{R.disconnect()}),b.splice(0,b.length)})}]);const qr=gr;var V=Pn(865),Zr=Pn(9027);class nl{}let il=(()=>{class o{constructor(){this.mappings=Zr.N.fieldMappings}featureToStruttura(l){let d=new nl;return this.mappings.map(b=>{d[b.field]=Array.isArray(b.properties)?(0,Jt.pick)(l.properties,b.properties):(0,Jt.get)(l.properties,b.properties)}),d}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=V.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var da=Pn(4762),ns=Pn(3405),io=Pn(1346);class kr extends ns.xQ{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(v){return this.hasError?(v.error(this.thrownError),io.w.EMPTY):this.hasCompleted&&this.hasNext?(v.next(this.value),v.complete(),io.w.EMPTY):super._subscribe(v)}next(v){this.hasCompleted||(this.value=v,this.hasNext=!0)}error(v){this.hasCompleted||super.error(v)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}var rl=Pn(6087),ol=Pn(739),ys=Pn(8735),al=Pn(4168),_s=Pn(6339);const ye=new(Pn(5192).v)(_s.o);class Le{constructor(v,l){this.dueTime=v,this.scheduler=l}call(v,l){return l.subscribe(new ht(v,this.dueTime,this.scheduler))}}class ht extends al.L{constructor(v,l,d){super(v),this.dueTime=l,this.scheduler=d,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(v){this.clearDebounce(),this.lastValue=v,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(pt,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:v}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(v)}}clearDebounce(){const v=this.debouncedSubscription;null!==v&&(this.remove(v),v.unsubscribe(),this.debouncedSubscription=null)}}function pt(o){o.debouncedNext()}var vt=Pn(9204);class Qt{constructor(v){this.value=v}call(v,l){return l.subscribe(new sl(v,this.value))}}class sl extends al.L{constructor(v,l){super(v),this.value=l}_next(v){this.destination.next(this.value)}}var is=Pn(1125);const bs=["container"];let rt=(()=>{class o{constructor(l){this.zone=l,this.mapCreated=new kr,this.mapLoaded=new kr,this.markersToRemove=[],this.popupsToRemove=[],this.imageIdsToRemove=[],this.subscription=new io.w,this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(l){this.zone.onStable.pipe((0,ol.P)()).subscribe(()=>{l.customMapboxApiUrl&&this.assign(Ge,"config.API_URL",l.customMapboxApiUrl),this.createMap(l.mapOptions),this.hookEvents(l.mapEvents),this.mapEvents=l.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete()})}destroyMap(){this.mapInstance&&(this.subscription.unsubscribe(),this.mapInstance.remove())}updateMinZoom(l){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(l)})}updateMaxZoom(l){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(l)})}updateMinPitch(l){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(l)})}updateMaxPitch(l){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(l)})}updateRenderWorldCopies(l){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(l)})}updateScrollZoom(l){return this.zone.runOutsideAngular(()=>{l?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(l){return this.zone.runOutsideAngular(()=>{l?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(l){return this.zone.runOutsideAngular(()=>{l?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(l){return this.zone.runOutsideAngular(()=>{l?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(l){return this.zone.runOutsideAngular(()=>{l?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(l){return this.zone.runOutsideAngular(()=>{l?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(l){return this.zone.runOutsideAngular(()=>{l?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(l){return this.zone.runOutsideAngular(()=>{l?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(l){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(l)})}updateMaxBounds(l){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(l)})}changeCanvasCursor(l){this.mapInstance.getCanvasContainer().style.cursor=l}queryRenderedFeatures(l,d){return this.mapInstance.queryRenderedFeatures(l,d)}panTo(l,d){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(l,d)})}move(l,d,b,C,M,O){return this.zone.runOutsideAngular(()=>{this.mapInstance[l](Object.assign(Object.assign({},d),{zoom:b||this.mapInstance.getZoom(),center:C||this.mapInstance.getCenter(),bearing:M||this.mapInstance.getBearing(),pitch:O||this.mapInstance.getPitch()}))})}addLayer(l,d,b){this.zone.runOutsideAngular(()=>{Object.keys(l.layerOptions).forEach(C=>{void 0===l.layerOptions[C]&&delete l.layerOptions[C]}),this.mapInstance.addLayer(l.layerOptions,b),d&&((l.layerEvents.layerClick.observers.length||l.layerEvents.click.observers.length)&&this.mapInstance.on("click",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerClick.emit(C),l.layerEvents.click.emit(C)})}),(l.layerEvents.layerDblClick.observers.length||l.layerEvents.dblClick.observers.length)&&this.mapInstance.on("dblclick",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerDblClick.emit(C),l.layerEvents.dblClick.emit(C)})}),(l.layerEvents.layerMouseDown.observers.length||l.layerEvents.mouseDown.observers.length)&&this.mapInstance.on("mousedown",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerMouseDown.emit(C),l.layerEvents.mouseDown.emit(C)})}),(l.layerEvents.layerMouseUp.observers.length||l.layerEvents.mouseUp.observers.length)&&this.mapInstance.on("mouseup",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerMouseUp.emit(C),l.layerEvents.mouseUp.emit(C)})}),(l.layerEvents.layerMouseEnter.observers.length||l.layerEvents.mouseEnter.observers.length)&&this.mapInstance.on("mouseenter",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerMouseEnter.emit(C),l.layerEvents.mouseEnter.emit(C)})}),(l.layerEvents.layerMouseLeave.observers.length||l.layerEvents.mouseLeave.observers.length)&&this.mapInstance.on("mouseleave",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerMouseLeave.emit(C),l.layerEvents.mouseLeave.emit(C)})}),(l.layerEvents.layerMouseMove.observers.length||l.layerEvents.mouseMove.observers.length)&&this.mapInstance.on("mousemove",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerMouseMove.emit(C),l.layerEvents.mouseMove.emit(C)})}),(l.layerEvents.layerMouseOver.observers.length||l.layerEvents.mouseOver.observers.length)&&this.mapInstance.on("mouseover",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerMouseOver.emit(C),l.layerEvents.mouseOver.emit(C)})}),(l.layerEvents.layerMouseOut.observers.length||l.layerEvents.mouseOut.observers.length)&&this.mapInstance.on("mouseout",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerMouseOut.emit(C),l.layerEvents.mouseOut.emit(C)})}),(l.layerEvents.layerContextMenu.observers.length||l.layerEvents.contextMenu.observers.length)&&this.mapInstance.on("contextmenu",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerContextMenu.emit(C),l.layerEvents.contextMenu.emit(C)})}),(l.layerEvents.layerTouchStart.observers.length||l.layerEvents.touchStart.observers.length)&&this.mapInstance.on("touchstart",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerTouchStart.emit(C),l.layerEvents.touchStart.emit(C)})}),(l.layerEvents.layerTouchEnd.observers.length||l.layerEvents.touchEnd.observers.length)&&this.mapInstance.on("touchend",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerTouchEnd.emit(C),l.layerEvents.touchEnd.emit(C)})}),(l.layerEvents.layerTouchCancel.observers.length||l.layerEvents.touchCancel.observers.length)&&this.mapInstance.on("touchcancel",l.layerOptions.id,C=>{this.zone.run(()=>{l.layerEvents.layerTouchCancel.emit(C),l.layerEvents.touchCancel.emit(C)})}))})}removeLayer(l){this.zone.runOutsideAngular(()=>{null!=this.mapInstance.getLayer(l)&&this.mapInstance.removeLayer(l)})}addMarker(l){const d={offset:l.markersOptions.offset,anchor:l.markersOptions.anchor,draggable:!!l.markersOptions.draggable,rotationAlignment:l.markersOptions.rotationAlignment,pitchAlignment:l.markersOptions.pitchAlignment,clickTolerance:l.markersOptions.clickTolerance};l.markersOptions.element.childNodes.length>0&&(d.element=l.markersOptions.element);const b=new Ge.Marker(d);return(l.markersEvents.markerDragStart.observers.length||l.markersEvents.dragStart.observers.length)&&b.on("dragstart",M=>{if(M){const{target:O}=M;this.zone.run(()=>{l.markersEvents.markerDragStart.emit(O),l.markersEvents.dragStart.emit(O)})}}),(l.markersEvents.markerDrag.observers.length||l.markersEvents.drag.observers.length)&&b.on("drag",M=>{if(M){const{target:O}=M;this.zone.run(()=>{l.markersEvents.markerDrag.emit(O),l.markersEvents.drag.emit(O)})}}),(l.markersEvents.markerDragEnd.observers.length||l.markersEvents.dragEnd.observers.length)&&b.on("dragend",M=>{if(M){const{target:O}=M;this.zone.run(()=>{l.markersEvents.markerDragEnd.emit(O),l.markersEvents.dragEnd.emit(O)})}}),b.setLngLat(l.markersOptions.feature?l.markersOptions.feature.geometry.coordinates:l.markersOptions.lngLat),this.zone.runOutsideAngular(()=>(b.addTo(this.mapInstance),b))}removeMarker(l){this.markersToRemove.push(l)}createPopup(l,d){return this.zone.runOutsideAngular(()=>{Object.keys(l.popupOptions).forEach(C=>void 0===l.popupOptions[C]&&delete l.popupOptions[C]);const b=new Ge.Popup(l.popupOptions);return b.setDOMContent(d),(l.popupEvents.popupClose.observers.length||l.popupEvents.close.observers.length)&&b.on("close",()=>{this.zone.run(()=>{l.popupEvents.popupClose.emit(),l.popupEvents.close.emit()})}),(l.popupEvents.popupOpen.observers.length||l.popupEvents.open.observers.length)&&b.on("open",()=>{this.zone.run(()=>{l.popupEvents.popupOpen.emit(),l.popupEvents.open.emit()})}),b})}addPopupToMap(l,d,b=!1){return this.zone.runOutsideAngular(()=>{b&&l._listeners&&delete l._listeners.open,l.setLngLat(d),l.addTo(this.mapInstance)})}addPopupToMarker(l,d){return this.zone.runOutsideAngular(()=>{l.setPopup(d)})}removePopupFromMap(l,d=!1){d&&l._listeners&&delete l._listeners.close,this.popupsToRemove.push(l)}removePopupFromMarker(l){return this.zone.runOutsideAngular(()=>{l.setPopup(void 0)})}addControl(l,d){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(l,d)})}removeControl(l){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(l)})}loadAndAddImage(l,d,b){return(0,da.mG)(this,void 0,void 0,function*(){return this.zone.runOutsideAngular(()=>new Promise((C,M)=>{this.mapInstance.loadImage(d,(O,z)=>{O?M(O):(this.addImage(l,z,b),C())})}))})}addImage(l,d,b){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(l,d,b)})}removeImage(l){this.imageIdsToRemove.push(l)}addSource(l,d){return this.zone.runOutsideAngular(()=>{Object.keys(d).forEach(b=>void 0===d[b]&&delete d[b]),this.mapInstance.addSource(l,d)})}getSource(l){return this.mapInstance.getSource(l)}removeSource(l){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(l).forEach(d=>this.mapInstance.removeLayer(d.id)),this.mapInstance.removeSource(l)})}setAllLayerPaintProperty(l,d){return this.zone.runOutsideAngular(()=>{Object.keys(d).forEach(b=>{this.mapInstance.setPaintProperty(l,b,d[b])})})}setAllLayerLayoutProperty(l,d){return this.zone.runOutsideAngular(()=>{Object.keys(d).forEach(b=>{this.mapInstance.setLayoutProperty(l,b,d[b])})})}setLayerFilter(l,d){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(l,d)})}setLayerBefore(l,d){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(l,d)})}setLayerZoomRange(l,d,b){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(l,d||0,b||20)})}fitBounds(l,d){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(l,d)})}fitScreenCoordinates(l,d,b){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(l[0],l[1],d,b)})}applyChanges(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(l){V.R0b.assertNotInAngularZone(),Object.keys(l).forEach(b=>{void 0===l[b]&&delete l[b]}),this.mapInstance=new Ge.Map(l),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(l.style),this.subscription.add(this.zone.onMicrotaskEmpty.subscribe(()=>this.applyChanges()))}removeMarkers(){for(const l of this.markersToRemove)l.remove();this.markersToRemove=[]}removePopups(){for(const l of this.popupsToRemove)l.remove();this.popupsToRemove=[]}removeImages(){for(const l of this.imageIdsToRemove)this.mapInstance.removeImage(l);this.imageIdsToRemove=[]}findLayersBySourceId(l){const d=this.mapInstance.getStyle().layers;return null==d?[]:d.filter(b=>"source"in b&&b.source===l)}hookEvents(l){this.mapInstance.on("load",d=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{l.mapLoad.emit(d.target),l.load.emit(d.target)})}),(l.mapResize.observers.length||l.resize.observers.length)&&this.mapInstance.on("resize",d=>this.zone.run(()=>{l.mapResize.emit(d),l.resize.emit(d)})),(l.mapRemove.observers.length||l.remove.observers.length)&&this.mapInstance.on("remove",d=>this.zone.run(()=>{l.mapRemove.emit(d),l.remove.emit(d)})),(l.mapMouseDown.observers.length||l.mouseDown.observers.length)&&this.mapInstance.on("mousedown",d=>this.zone.run(()=>{l.mapMouseDown.emit(d),l.mouseDown.emit(d)})),(l.mapMouseUp.observers.length||l.mouseUp.observers.length)&&this.mapInstance.on("mouseup",d=>this.zone.run(()=>{l.mapMouseUp.emit(d),l.mouseUp.emit(d)})),(l.mapMouseMove.observers.length||l.mouseMove.observers.length)&&this.mapInstance.on("mousemove",d=>this.zone.run(()=>{l.mapMouseMove.emit(d),l.mouseMove.emit(d)})),(l.mapClick.observers.length||l.click.observers.length)&&this.mapInstance.on("click",d=>this.zone.run(()=>{l.mapClick.emit(d),l.click.emit(d)})),(l.mapDblClick.observers.length||l.dblClick.observers.length)&&this.mapInstance.on("dblclick",d=>this.zone.run(()=>{l.mapDblClick.emit(d),l.dblClick.emit(d)})),(l.mapMouseOver.observers.length||l.mouseOver.observers.length)&&this.mapInstance.on("mouseover",d=>this.zone.run(()=>{l.mapMouseOver.emit(d),l.mouseOver.emit(d)})),(l.mapMouseOut.observers.length||l.mouseOut.observers.length)&&this.mapInstance.on("mouseout",d=>this.zone.run(()=>{l.mapMouseOut.emit(d),l.mouseOut.emit(d)})),(l.mapContextMenu.observers.length||l.contextMenu.observers.length)&&this.mapInstance.on("contextmenu",d=>this.zone.run(()=>{l.mapContextMenu.emit(d),l.contextMenu.emit(d)})),(l.mapTouchStart.observers.length||l.touchStart.observers.length)&&this.mapInstance.on("touchstart",d=>this.zone.run(()=>{l.mapTouchStart.emit(d),l.touchStart.emit(d)})),(l.mapTouchEnd.observers.length||l.touchEnd.observers.length)&&this.mapInstance.on("touchend",d=>this.zone.run(()=>{l.mapTouchEnd.emit(d),l.touchEnd.emit(d)})),(l.mapTouchMove.observers.length||l.touchMove.observers.length)&&this.mapInstance.on("touchmove",d=>this.zone.run(()=>{l.mapTouchMove.emit(d),l.touchMove.emit(d)})),(l.mapTouchCancel.observers.length||l.touchCancel.observers.length)&&this.mapInstance.on("touchcancel",d=>this.zone.run(()=>{l.mapTouchCancel.emit(d),l.touchCancel.emit(d)})),(l.mapWheel.observers.length||l.wheel.observers.length)&&this.mapInstance.on("wheel",d=>this.zone.run(()=>{l.mapWheel.emit(d),l.wheel.emit(d)})),l.moveStart.observers.length&&this.mapInstance.on("movestart",d=>this.zone.run(()=>l.moveStart.emit(d))),l.move.observers.length&&this.mapInstance.on("move",d=>this.zone.run(()=>l.move.emit(d))),l.moveEnd.observers.length&&this.mapInstance.on("moveend",d=>this.zone.run(()=>l.moveEnd.emit(d))),(l.mapDragStart.observers.length||l.dragStart.observers.length)&&this.mapInstance.on("dragstart",d=>this.zone.run(()=>{l.mapDragStart.emit(d),l.dragStart.emit(d)})),(l.mapDrag.observers.length||l.drag.observers.length)&&this.mapInstance.on("drag",d=>this.zone.run(()=>{l.mapDrag.emit(d),l.drag.emit(d)})),(l.mapDragEnd.observers.length||l.dragEnd.observers.length)&&this.mapInstance.on("dragend",d=>this.zone.run(()=>{l.mapDragEnd.emit(d),l.dragEnd.emit(d)})),l.zoomStart.observers.length&&this.mapInstance.on("zoomstart",d=>this.zone.run(()=>l.zoomStart.emit(d))),l.zoomEvt.observers.length&&this.mapInstance.on("zoom",d=>this.zone.run(()=>l.zoomEvt.emit(d))),l.zoomEnd.observers.length&&this.mapInstance.on("zoomend",d=>this.zone.run(()=>l.zoomEnd.emit(d))),l.rotateStart.observers.length&&this.mapInstance.on("rotatestart",d=>this.zone.run(()=>l.rotateStart.emit(d))),l.rotate.observers.length&&this.mapInstance.on("rotate",d=>this.zone.run(()=>l.rotate.emit(d))),l.rotateEnd.observers.length&&this.mapInstance.on("rotateend",d=>this.zone.run(()=>l.rotateEnd.emit(d))),l.pitchStart.observers.length&&this.mapInstance.on("pitchstart",d=>this.zone.run(()=>l.pitchStart.emit(d))),l.pitchEvt.observers.length&&this.mapInstance.on("pitch",d=>this.zone.run(()=>l.pitchEvt.emit(d))),l.pitchEnd.observers.length&&this.mapInstance.on("pitchend",d=>this.zone.run(()=>l.pitchEnd.emit(d))),l.boxZoomStart.observers.length&&this.mapInstance.on("boxzoomstart",d=>this.zone.run(()=>l.boxZoomStart.emit(d))),l.boxZoomEnd.observers.length&&this.mapInstance.on("boxzoomend",d=>this.zone.run(()=>l.boxZoomEnd.emit(d))),l.boxZoomCancel.observers.length&&this.mapInstance.on("boxzoomcancel",d=>this.zone.run(()=>l.boxZoomCancel.emit(d))),l.webGlContextLost.observers.length&&this.mapInstance.on("webglcontextlost",d=>this.zone.run(()=>l.webGlContextLost.emit(d))),l.webGlContextRestored.observers.length&&this.mapInstance.on("webglcontextrestored",d=>this.zone.run(()=>l.webGlContextRestored.emit(d))),l.render.observers.length&&this.mapInstance.on("render",d=>this.zone.run(()=>l.render.emit(d))),(l.mapError.observers.length||l.error.observers.length)&&this.mapInstance.on("error",d=>this.zone.run(()=>{l.mapError.emit(d),l.error.emit(d)})),l.data.observers.length&&this.mapInstance.on("data",d=>this.zone.run(()=>l.data.emit(d))),l.styleData.observers.length&&this.mapInstance.on("styledata",d=>this.zone.run(()=>l.styleData.emit(d))),l.sourceData.observers.length&&this.mapInstance.on("sourcedata",d=>this.zone.run(()=>l.sourceData.emit(d))),l.dataLoading.observers.length&&this.mapInstance.on("dataloading",d=>this.zone.run(()=>l.dataLoading.emit(d))),l.styleDataLoading.observers.length&&this.mapInstance.on("styledataloading",d=>this.zone.run(()=>l.styleDataLoading.emit(d))),l.sourceDataLoading.observers.length&&this.mapInstance.on("sourcedataloading",d=>this.zone.run(()=>l.sourceDataLoading.emit(d))),l.styleImageMissing.observers.length&&this.mapInstance.on("styleimagemissing",d=>this.zone.run(()=>l.styleImageMissing.emit(d))),l.idle.observers.length&&this.mapInstance.on("idle",d=>this.zone.run(()=>l.idle.emit(d)))}assign(l,d,b){if("string"==typeof d&&(d=d.split(".")),d.length>1){const C=d.shift();this.assign(l[C]="[object Object]"===Object.prototype.toString.call(l[C])?l[C]:{},d,b)}else l[d[0]]=b}}return o.\u0275fac=function(l){return new(l||o)(V.LFG(V.R0b))},o.\u0275prov=V.Yz7({token:o,factory:o.\u0275fac}),o})();function rs(o,v,l){console.warn(`[ngx-maplibre-gl]: ${o}: ${v} is deprecated, please use ${l} instead.`)}let Ss=(()=>{class o{constructor(l,d){this.MapService=l,this.zone=d,this.updateFeatureData=new ns.xQ,this.sub=new io.w,this.sourceAdded=!1,this.featureIdCounter=0}ngOnInit(){this.data||(this.data={type:"FeatureCollection",features:[]});const l=this.MapService.mapLoaded$.subscribe(()=>{this.init();const d=(0,rl.R)(this.MapService.mapInstance,"styledata").pipe((0,ys.h)(()=>!this.MapService.mapInstance.getSource(this.id))).subscribe(()=>{this.init()});this.sub.add(d)});this.sub.add(l)}ngOnChanges(l){!this.sourceAdded||((l.maxzoom&&!l.maxzoom.isFirstChange()||l.attribution&&!l.attribution.isFirstChange()||l.buffer&&!l.buffer.isFirstChange()||l.tolerance&&!l.tolerance.isFirstChange()||l.cluster&&!l.cluster.isFirstChange()||l.clusterRadius&&!l.clusterRadius.isFirstChange()||l.clusterMaxZoom&&!l.clusterMaxZoom.isFirstChange()||l.clusterMinPoints&&!l.clusterMinPoints.isFirstChange()||l.clusterProperties&&!l.clusterProperties.isFirstChange()||l.lineMetrics&&!l.lineMetrics.isFirstChange()||l.generateId&&!l.generateId.isFirstChange()||l.promoteId&&!l.promoteId.isFirstChange()||l.filter&&!l.filter.isFirstChange())&&(this.ngOnDestroy(),this.ngOnInit()),l.data&&!l.data.isFirstChange()&&setTimeout(()=>{this.MapService.getSource(this.id).setData(this.data)},0))}ngOnDestroy(){this.sub.unsubscribe(),this.sourceAdded&&(this.MapService.removeSource(this.id),this.sourceAdded=!1)}getClusterExpansionZoom(l){return(0,da.mG)(this,void 0,void 0,function*(){const d=this.MapService.getSource(this.id);return this.zone.run(()=>(0,da.mG)(this,void 0,void 0,function*(){return new Promise((b,C)=>{d.getClusterExpansionZoom(l,(M,O)=>{M?C(M):b(O)})})}))})}getClusterChildren(l){return(0,da.mG)(this,void 0,void 0,function*(){const d=this.MapService.getSource(this.id);return this.zone.run(()=>(0,da.mG)(this,void 0,void 0,function*(){return new Promise((b,C)=>{d.getClusterChildren(l,(M,O)=>{M?C(M):b(O)})})}))})}getClusterLeaves(l,d,b){return(0,da.mG)(this,void 0,void 0,function*(){const C=this.MapService.getSource(this.id);return this.zone.run(()=>(0,da.mG)(this,void 0,void 0,function*(){return new Promise((M,O)=>{C.getClusterLeaves(l,d,b,(z,R)=>{z?O(z):M(R)})})}))})}_addFeature(l){this.data.features.push(l),this.updateFeatureData.next()}_removeFeature(l){const d=this.data,b=d.features.indexOf(l);b>-1&&d.features.splice(b,1),this.updateFeatureData.next()}_getNewFeatureId(){return++this.featureIdCounter}init(){this.MapService.addSource(this.id,{type:"geojson",data:this.data,maxzoom:this.maxzoom,attribution:this.attribution,buffer:this.buffer,tolerance:this.tolerance,cluster:this.cluster,clusterRadius:this.clusterRadius,clusterMaxZoom:this.clusterMaxZoom,clusterMinPoints:this.clusterMinPoints,clusterProperties:this.clusterProperties,lineMetrics:this.lineMetrics,generateId:this.generateId,promoteId:this.promoteId,filter:this.filter});const d=this.updateFeatureData.pipe(function(o,v=ye){return l=>l.lift(new Le(o,v))}(0)).subscribe(()=>{this.MapService.getSource(this.id).setData(this.data)});this.sub.add(d),this.sourceAdded=!0}}return o.\u0275fac=function(l){return new(l||o)(V.Y36(rt),V.Y36(V.R0b))},o.\u0275cmp=V.Xpm({type:o,selectors:[["mgl-geojson-source"]],inputs:{id:"id",data:"data",maxzoom:"maxzoom",attribution:"attribution",buffer:"buffer",tolerance:"tolerance",cluster:"cluster",clusterRadius:"clusterRadius",clusterMaxZoom:"clusterMaxZoom",clusterMinPoints:"clusterMinPoints",clusterProperties:"clusterProperties",lineMetrics:"lineMetrics",generateId:"generateId",promoteId:"promoteId",filter:"filter"},features:[V.TTD],decls:0,vars:0,template:function(l,d){},encapsulation:2,changeDetection:0}),o})(),ma=(()=>{class o{constructor(l){this.MapService=l,this.layerClick=new V.vpe,this.layerDblClick=new V.vpe,this.layerMouseDown=new V.vpe,this.layerMouseUp=new V.vpe,this.layerMouseEnter=new V.vpe,this.layerMouseLeave=new V.vpe,this.layerMouseMove=new V.vpe,this.layerMouseOver=new V.vpe,this.layerMouseOut=new V.vpe,this.layerContextMenu=new V.vpe,this.layerTouchStart=new V.vpe,this.layerTouchEnd=new V.vpe,this.layerTouchCancel=new V.vpe,this.click=new V.vpe,this.dblClick=new V.vpe,this.mouseDown=new V.vpe,this.mouseUp=new V.vpe,this.mouseEnter=new V.vpe,this.mouseLeave=new V.vpe,this.mouseMove=new V.vpe,this.mouseOver=new V.vpe,this.mouseOut=new V.vpe,this.contextMenu=new V.vpe,this.touchStart=new V.vpe,this.touchEnd=new V.vpe,this.touchCancel=new V.vpe,this.layerAdded=!1}ngOnInit(){this.warnDeprecatedOutputs(),this.sub=this.MapService.mapLoaded$.pipe((0,vt.w)(()=>(0,rl.R)(this.MapService.mapInstance,"styledata").pipe(v=>v.lift(new Qt(!1)),(0,ys.h)(()=>!this.MapService.mapInstance.getLayer(this.id)),(0,is.O)(!0)))).subscribe(l=>this.init(l))}ngOnChanges(l){!this.layerAdded||(l.paint&&!l.paint.isFirstChange()&&this.MapService.setAllLayerPaintProperty(this.id,l.paint.currentValue),l.layout&&!l.layout.isFirstChange()&&this.MapService.setAllLayerLayoutProperty(this.id,l.layout.currentValue),l.filter&&!l.filter.isFirstChange()&&this.MapService.setLayerFilter(this.id,l.filter.currentValue),l.before&&!l.before.isFirstChange()&&this.MapService.setLayerBefore(this.id,l.before.currentValue),(l.minzoom&&!l.minzoom.isFirstChange()||l.maxzoom&&!l.maxzoom.isFirstChange())&&this.MapService.setLayerZoomRange(this.id,this.minzoom,this.maxzoom))}ngOnDestroy(){this.layerAdded&&this.MapService.removeLayer(this.id),this.sub&&this.sub.unsubscribe()}init(l){this.MapService.addLayer({layerOptions:{id:this.id,type:this.type,source:this.source,metadata:this.metadata,"source-layer":this.sourceLayer,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this.layout,paint:this.paint},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel,click:this.click,dblClick:this.dblClick,mouseDown:this.mouseDown,mouseUp:this.mouseUp,mouseEnter:this.mouseEnter,mouseLeave:this.mouseLeave,mouseMove:this.mouseMove,mouseOver:this.mouseOver,mouseOut:this.mouseOut,contextMenu:this.contextMenu,touchStart:this.touchStart,touchEnd:this.touchEnd,touchCancel:this.touchCancel}},l,this.before),this.layerAdded=!0}warnDeprecatedOutputs(){const l=rs.bind(void 0,o.name);this.click.observers.length&&l("click","layerClick"),this.dblClick.observers.length&&l("dblClick","layerDblClick"),this.mouseDown.observers.length&&l("mouseDown","layerMouseDown"),this.mouseUp.observers.length&&l("mouseUp","layerMouseUp"),this.mouseEnter.observers.length&&l("mouseEnter","layerMouseEnter"),this.mouseLeave.observers.length&&l("mouseLeave","layerMouseLeave"),this.mouseMove.observers.length&&l("mouseMove","layerMouseMove"),this.mouseOver.observers.length&&l("mouseOver","layerMouseOver"),this.mouseOut.observers.length&&l("mouseOut","layerMouseOut"),this.contextMenu.observers.length&&l("contextMenu","layerContextMenu"),this.touchStart.observers.length&&l("touchStart","layerTouchStart"),this.touchEnd.observers.length&&l("touchEnd","layerTouchEnd"),this.touchCancel.observers.length&&l("touchCancel","layerTouchCancel")}}return o.\u0275fac=function(l){return new(l||o)(V.Y36(rt))},o.\u0275cmp=V.Xpm({type:o,selectors:[["mgl-layer"]],inputs:{id:"id",source:"source",type:"type",metadata:"metadata",sourceLayer:"sourceLayer",filter:"filter",layout:"layout",paint:"paint",before:"before",minzoom:"minzoom",maxzoom:"maxzoom"},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel",click:"click",dblClick:"dblClick",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseEnter:"mouseEnter",mouseLeave:"mouseLeave",mouseMove:"mouseMove",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchCancel:"touchCancel"},features:[V.TTD],decls:0,vars:0,template:function(l,d){},encapsulation:2}),o})(),os=(()=>{class o{constructor(l){this.MapService=l,this.movingMethod="flyTo",this.mapResize=new V.vpe,this.mapRemove=new V.vpe,this.mapMouseDown=new V.vpe,this.mapMouseUp=new V.vpe,this.mapMouseMove=new V.vpe,this.mapClick=new V.vpe,this.mapDblClick=new V.vpe,this.mapMouseOver=new V.vpe,this.mapMouseOut=new V.vpe,this.mapContextMenu=new V.vpe,this.mapTouchStart=new V.vpe,this.mapTouchEnd=new V.vpe,this.mapTouchMove=new V.vpe,this.mapTouchCancel=new V.vpe,this.mapWheel=new V.vpe,this.moveStart=new V.vpe,this.move=new V.vpe,this.moveEnd=new V.vpe,this.mapDragStart=new V.vpe,this.mapDrag=new V.vpe,this.mapDragEnd=new V.vpe,this.zoomStart=new V.vpe,this.zoomEvt=new V.vpe,this.zoomEnd=new V.vpe,this.rotateStart=new V.vpe,this.rotate=new V.vpe,this.rotateEnd=new V.vpe,this.pitchStart=new V.vpe,this.pitchEvt=new V.vpe,this.pitchEnd=new V.vpe,this.boxZoomStart=new V.vpe,this.boxZoomEnd=new V.vpe,this.boxZoomCancel=new V.vpe,this.webGlContextLost=new V.vpe,this.webGlContextRestored=new V.vpe,this.mapLoad=new V.vpe,this.idle=new V.vpe,this.render=new V.vpe,this.mapError=new V.vpe,this.data=new V.vpe,this.styleData=new V.vpe,this.sourceData=new V.vpe,this.dataLoading=new V.vpe,this.styleDataLoading=new V.vpe,this.sourceDataLoading=new V.vpe,this.styleImageMissing=new V.vpe,this.resize=new V.vpe,this.remove=new V.vpe,this.mouseDown=new V.vpe,this.mouseUp=new V.vpe,this.mouseMove=new V.vpe,this.click=new V.vpe,this.dblClick=new V.vpe,this.mouseOver=new V.vpe,this.mouseOut=new V.vpe,this.contextMenu=new V.vpe,this.touchStart=new V.vpe,this.touchEnd=new V.vpe,this.touchMove=new V.vpe,this.touchCancel=new V.vpe,this.wheel=new V.vpe,this.dragStart=new V.vpe,this.drag=new V.vpe,this.dragEnd=new V.vpe,this.load=new V.vpe,this.error=new V.vpe}get mapInstance(){return this.MapService.mapInstance}ngAfterViewInit(){this.warnDeprecatedOutputs(),this.MapService.setup({customMapboxApiUrl:this.customMapboxApiUrl,mapOptions:{collectResourceTiming:this.collectResourceTiming,container:this.mapContainer.nativeElement,crossSourceCollisions:this.crossSourceCollisions,fadeDuration:this.fadeDuration,minZoom:this.minZoom,maxZoom:this.maxZoom,minPitch:this.minPitch,maxPitch:this.maxPitch,style:this.style,hash:this.hash,interactive:this.interactive,bearingSnap:this.bearingSnap,pitchWithRotate:this.pitchWithRotate,clickTolerance:this.clickTolerance,attributionControl:this.attributionControl,logoPosition:this.logoPosition,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,refreshExpiredTiles:this.refreshExpiredTiles,maxBounds:this.maxBounds,scrollZoom:this.scrollZoom,boxZoom:this.boxZoom,dragRotate:this.dragRotate,dragPan:this.dragPan,keyboard:this.keyboard,doubleClickZoom:this.doubleClickZoom,touchPitch:this.touchPitch,touchZoomRotate:this.touchZoomRotate,trackResize:this.trackResize,center:this.center,zoom:this.zoom,bearing:this.bearing,pitch:this.pitch,renderWorldCopies:this.renderWorldCopies,maxTileCacheSize:this.maxTileCacheSize,localIdeographFontFamily:this.localIdeographFontFamily,transformRequest:this.transformRequest,bounds:this.bounds?this.bounds:this.fitBounds,fitBoundsOptions:this.fitBoundsOptions,antialias:this.antialias,locale:this.locale},mapEvents:this}),this.cursorStyle&&this.MapService.changeCanvasCursor(this.cursorStyle)}ngOnDestroy(){this.MapService.destroyMap()}ngOnChanges(l){return(0,da.mG)(this,void 0,void 0,function*(){yield this.MapService.mapCreated$.toPromise(),l.cursorStyle&&!l.cursorStyle.isFirstChange()&&this.MapService.changeCanvasCursor(l.cursorStyle.currentValue),l.minZoom&&!l.minZoom.isFirstChange()&&this.MapService.updateMinZoom(l.minZoom.currentValue),l.maxZoom&&!l.maxZoom.isFirstChange()&&this.MapService.updateMaxZoom(l.maxZoom.currentValue),l.minPitch&&!l.minPitch.isFirstChange()&&this.MapService.updateMinPitch(l.minPitch.currentValue),l.maxPitch&&!l.maxPitch.isFirstChange()&&this.MapService.updateMaxPitch(l.maxPitch.currentValue),l.renderWorldCopies&&!l.renderWorldCopies.isFirstChange()&&this.MapService.updateRenderWorldCopies(l.renderWorldCopies.currentValue),l.scrollZoom&&!l.scrollZoom.isFirstChange()&&this.MapService.updateScrollZoom(l.scrollZoom.currentValue),l.dragRotate&&!l.dragRotate.isFirstChange()&&this.MapService.updateDragRotate(l.dragRotate.currentValue),l.touchPitch&&!l.touchPitch.isFirstChange()&&this.MapService.updateTouchPitch(l.touchPitch.currentValue),l.touchZoomRotate&&!l.touchZoomRotate.isFirstChange()&&this.MapService.updateTouchZoomRotate(l.touchZoomRotate.currentValue),l.doubleClickZoom&&!l.doubleClickZoom.isFirstChange()&&this.MapService.updateDoubleClickZoom(l.doubleClickZoom.currentValue),l.keyboard&&!l.keyboard.isFirstChange()&&this.MapService.updateKeyboard(l.keyboard.currentValue),l.dragPan&&!l.dragPan.isFirstChange()&&this.MapService.updateDragPan(l.dragPan.currentValue),l.boxZoom&&!l.boxZoom.isFirstChange()&&this.MapService.updateBoxZoom(l.boxZoom.currentValue),l.style&&!l.style.isFirstChange()&&this.MapService.updateStyle(l.style.currentValue),l.maxBounds&&!l.maxBounds.isFirstChange()&&this.MapService.updateMaxBounds(l.maxBounds.currentValue),l.fitBounds&&l.fitBounds.currentValue&&!l.fitBounds.isFirstChange()&&this.MapService.fitBounds(l.fitBounds.currentValue,this.fitBoundsOptions),l.fitScreenCoordinates&&l.fitScreenCoordinates.currentValue&&((this.center||this.zoom||this.pitch||this.fitBounds)&&l.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-mapbox-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),this.MapService.fitScreenCoordinates(l.fitScreenCoordinates.currentValue,this.bearing?this.bearing[0]:0,this.movingOptions)),!this.centerWithPanTo||!l.center||l.center.isFirstChange()||l.zoom||l.bearing||l.pitch?(l.center&&!l.center.isFirstChange()||l.zoom&&!l.zoom.isFirstChange()||l.bearing&&!l.bearing.isFirstChange()&&!l.fitScreenCoordinates||l.pitch&&!l.pitch.isFirstChange())&&this.MapService.move(this.movingMethod,this.movingOptions,l.zoom&&this.zoom?this.zoom[0]:void 0,l.center?this.center:void 0,l.bearing&&this.bearing?this.bearing[0]:void 0,l.pitch&&this.pitch?this.pitch[0]:void 0):this.MapService.panTo(this.center,this.panToOptions)})}warnDeprecatedOutputs(){const l=rs.bind(void 0,o.name);this.resize.observers.length&&l("resize","mapResize"),this.remove.observers.length&&l("remove","mapRemove"),this.mouseDown.observers.length&&l("mouseDown","mapMouseDown"),this.mouseUp.observers.length&&l("mouseUp","mapMouseUp"),this.mouseMove.observers.length&&l("mouseMove","mapMouseMove"),this.click.observers.length&&l("click","mapClick"),this.dblClick.observers.length&&l("dblClick","mapDblClick"),this.mouseOver.observers.length&&l("mouseOver","mapMouseOver"),this.mouseOut.observers.length&&l("mouseOut","mapMouseOut"),this.contextMenu.observers.length&&l("contextMenu","mapContextMenu"),this.touchStart.observers.length&&l("touchStart","mapTouchStart"),this.touchEnd.observers.length&&l("touchEnd","mapTouchEnd"),this.touchMove.observers.length&&l("touchMove","mapTouchMove"),this.touchCancel.observers.length&&l("touchCancel","mapTouchCancel"),this.wheel.observers.length&&l("wheel","mapWheel"),this.dragStart.observers.length&&l("dragStart","mapDragStart"),this.drag.observers.length&&l("drag","mapDrag"),this.dragEnd.observers.length&&l("dragEnd","mapDragEnd"),this.load.observers.length&&l("load","mapLoad"),this.error.observers.length&&l("error","mapError")}}return o.\u0275fac=function(l){return new(l||o)(V.Y36(rt))},o.\u0275cmp=V.Xpm({type:o,selectors:[["mgl-map"]],viewQuery:function(l,d){if(1&l&&V.Gf(bs,7),2&l){let b;V.iGM(b=V.CRH())&&(d.mapContainer=b.first)}},inputs:{collectResourceTiming:"collectResourceTiming",crossSourceCollisions:"crossSourceCollisions",customMapboxApiUrl:"customMapboxApiUrl",fadeDuration:"fadeDuration",hash:"hash",refreshExpiredTiles:"refreshExpiredTiles",failIfMajorPerformanceCaveat:"failIfMajorPerformanceCaveat",bearingSnap:"bearingSnap",interactive:"interactive",pitchWithRotate:"pitchWithRotate",clickTolerance:"clickTolerance",attributionControl:"attributionControl",logoPosition:"logoPosition",maxTileCacheSize:"maxTileCacheSize",localIdeographFontFamily:"localIdeographFontFamily",preserveDrawingBuffer:"preserveDrawingBuffer",trackResize:"trackResize",transformRequest:"transformRequest",bounds:"bounds",antialias:"antialias",locale:"locale",minZoom:"minZoom",maxZoom:"maxZoom",minPitch:"minPitch",maxPitch:"maxPitch",scrollZoom:"scrollZoom",dragRotate:"dragRotate",touchPitch:"touchPitch",touchZoomRotate:"touchZoomRotate",doubleClickZoom:"doubleClickZoom",keyboard:"keyboard",dragPan:"dragPan",boxZoom:"boxZoom",style:"style",center:"center",maxBounds:"maxBounds",zoom:"zoom",bearing:"bearing",pitch:"pitch",fitBoundsOptions:"fitBoundsOptions",renderWorldCopies:"renderWorldCopies",movingMethod:"movingMethod",movingOptions:"movingOptions",fitBounds:"fitBounds",fitScreenCoordinates:"fitScreenCoordinates",centerWithPanTo:"centerWithPanTo",panToOptions:"panToOptions",cursorStyle:"cursorStyle"},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing",resize:"resize",remove:"remove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseMove:"mouseMove",click:"click",dblClick:"dblClick",mouseOver:"mouseOver",mouseOut:"mouseOut",contextMenu:"contextMenu",touchStart:"touchStart",touchEnd:"touchEnd",touchMove:"touchMove",touchCancel:"touchCancel",wheel:"wheel",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",load:"load",error:"error"},features:[V._Bn([rt]),V.TTD],decls:2,vars:0,consts:[["container",""]],template:function(l,d){1&l&&V._UZ(0,"div",null,0)},styles:["[_nghost-%COMP%] {\n        display: block;\n      }\n      div[_ngcontent-%COMP%] {\n        height: 100%;\n        width: 100%;\n      }"],changeDetection:0}),o})(),Fa=(()=>{class o{}return o.\u0275fac=function(l){return new(l||o)},o.\u0275mod=V.oAB({type:o}),o.\u0275inj=V.cJS({imports:[[Ri.ez]]}),o})();var jr=Pn(2411);const jo=["prevElRef"],Dr=["nextElRef"],Wo=["scrollbarElRef"],et=["paginationElRef"];function Ct(o,v){1&o&&(V.ynx(0),V._UZ(1,"div",6,7),V._UZ(3,"div",8,9),V.BQk())}function mi(o,v){1&o&&V._UZ(0,"div",10,11)}function Gi(o,v){1&o&&V._UZ(0,"div",12,13)}function Lr(o,v){}function zi(o,v){1&o&&V.YNc(0,Lr,0,0,"ng-template")}function ki(o,v){}function ec(o,v){1&o&&V.YNc(0,ki,0,0,"ng-template")}function Ho(o,v){}function _n(o,v){1&o&&V.YNc(0,Ho,0,0,"ng-template")}function gi(o,v){}const ul=function(o){return{$implicit:o}};function ga(o,v){if(1&o&&(V.TgZ(0,"div",3),V.YNc(1,gi,0,0,"ng-template",18),V.qZA()),2&o){const l=V.oxw().$implicit,d=V.oxw(2);V.Q6J("ngClass",d.zoomContainerClass),V.xp6(1),V.Q6J("ngTemplateOutlet",l.template)("ngTemplateOutletContext",V.VKq(3,ul,l.slideData))}}function Or(o,v){}function or(o,v){if(1&o&&(V.ynx(0),V.YNc(1,Or,0,0,"ng-template",18),V.BQk()),2&o){const l=V.oxw().$implicit;V.xp6(1),V.Q6J("ngTemplateOutlet",l.template)("ngTemplateOutletContext",V.VKq(2,ul,l.slideData))}}function J(o,v){if(1&o&&(V.TgZ(0,"div",15),V.YNc(1,ga,2,5,"div",16),V.YNc(2,or,2,4,"ng-container",17),V.qZA()),2&o){const l=v.$implicit,d=V.oxw().key,b=V.oxw();V.Akn(b.style),V.Q6J("ngClass",(l.class?l.class+" ":"")+b.slideClass+(""!==d?" "+b.slideDuplicateClass:""))("ngSwitch",l.zoom),V.uIk("data-swiper-slide-index",l.virtualIndex?l.virtualIndex:l.slideIndex)("data-swiper-autoplay",l.autoplayDelay),V.xp6(1),V.Q6J("ngSwitchCase",!0)}}function Wr(o,v){1&o&&(V.YNc(0,J,3,7,"div",14),V.ALo(1,"async")),2&o&&V.Q6J("ngForOf",V.lcZ(1,1,v.loopSlides))}const Hr=[[["","slot","container-start"]],[["","slot","wrapper-start"]],[["","slot","wrapper-end"]],[["","slot","container-end"]]],Di=function(o){return{loopSlides:o,key:"prepend"}},Ht=function(o){return{loopSlides:o,key:""}},Zl=function(o){return{loopSlides:o,key:"append"}},Ts=["[slot=container-start]","[slot=wrapper-start]","[slot=wrapper-end]","[slot=container-end]"];function Rr(o){return"object"==typeof o&&null!==o&&o.constructor&&"Object"===Object.prototype.toString.call(o).slice(8,-1)}function bo(o,v,l){return!0===ji(o)&&v&&!v.el||!("boolean"!=typeof v&&v.el!==(null==l?void 0:l.nativeElement)&&("string"==typeof v.el||"object"==typeof v.el))}function wo(o,v){const l=["__proto__","constructor","prototype"];Object.keys(v).filter(d=>l.indexOf(d)<0).forEach(d=>{void 0!==o[d]?o[d]&&!v[d]||(Rr(v[d])&&Rr(o[d])&&Object.keys(v[d]).length>0?v[d].__swiper__?o[d]=v[d]:wo(o[d],v[d]):o[d]=v[d]):o[d]=v[d]})}function ji(o){return null!=o&&"false"!=`${o}`}const cl=["pagination","navigation","scrollbar","virtual"];function So(o,v={}){return Rr(o)?o:!0===ji(o)&&v}const _r=["init","enabled","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","_grid","_slidesPerGroup","_slidesPerGroupSkip","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","on"];function Is(o={}){const v={on:{}},d={};wo(v,qr.defaults),wo(v,qr.extendedDefaults),v._emitClasses=!0,v.init=!1;const b={},C=_r.map(M=>M.replace(/_/,""));return Object.keys(o).forEach(M=>{const O=M.replace(/^_/,"");C.indexOf(O)>=0?Rr(o[M])?(v[O]={},d[O]={},wo(v[O],o[M]),wo(d[O],o[M])):(v[O]=o[M],d[O]=o[M]):b[O]=o[M]}),["navigation","pagination","scrollbar"].forEach(M=>{!0===v[M]&&(v[M]={}),!1===v[M]&&delete v[M]}),{params:v,passedParams:d,rest:b}}_r.map(o=>o.replace(/_/,""));let as=(()=>{class o{constructor(l){this.template=l,this.class="",this.autoplayDelay=null,this.slideData={isActive:!1,isPrev:!1,isNext:!1,isVisible:!1,isDuplicate:!1}}set zoom(l){this._zoom=ji(l)}get zoom(){return this._zoom}get classNames(){return this._classNames}set classNames(l){this._classNames!==l&&(this._classNames=l,this.slideData={isActive:this._hasClass(["swiper-slide-active","swiper-slide-duplicate-active"]),isVisible:this._hasClass(["swiper-slide-visible"]),isDuplicate:this._hasClass(["swiper-slide-duplicate"]),isPrev:this._hasClass(["swiper-slide-prev","swiper-slide-duplicate-prev"]),isNext:this._hasClass(["swiper-slide-next","swiper-slide-duplicate-next"])})}_hasClass(l){return l.some(d=>this._classNames.indexOf(d)>=0)}}return o.\u0275fac=function(l){return new(l||o)(V.Y36(V.Rgc))},o.\u0275dir=V.lG2({type:o,selectors:[["ng-template","swiperSlide",""]],inputs:{virtualIndex:"virtualIndex",class:"class",autoplayDelay:["data-swiper-autoplay","autoplayDelay"],zoom:"zoom"}}),o})(),pl=(()=>{class o{constructor(l,d,b,C){this._ngZone=l,this.elementRef=d,this._changeDetectorRef=b,this._platformId=C,this.slideClass="swiper-slide",this.wrapperClass="swiper-wrapper",this.showNavigation=!0,this.showPagination=!0,this.showScrollbar=!0,this.s__beforeBreakpoint=new V.vpe,this.s__containerClasses=new V.vpe,this.s__slideClass=new V.vpe,this.s__swiper=new V.vpe,this.s_activeIndexChange=new V.vpe,this.s_afterInit=new V.vpe,this.s_autoplay=new V.vpe,this.s_autoplayStart=new V.vpe,this.s_autoplayStop=new V.vpe,this.s_beforeDestroy=new V.vpe,this.s_beforeInit=new V.vpe,this.s_beforeLoopFix=new V.vpe,this.s_beforeResize=new V.vpe,this.s_beforeSlideChangeStart=new V.vpe,this.s_beforeTransitionStart=new V.vpe,this.s_breakpoint=new V.vpe,this.s_changeDirection=new V.vpe,this.s_click=new V.vpe,this.s_doubleTap=new V.vpe,this.s_doubleClick=new V.vpe,this.s_destroy=new V.vpe,this.s_fromEdge=new V.vpe,this.s_hashChange=new V.vpe,this.s_hashSet=new V.vpe,this.s_imagesReady=new V.vpe,this.s_init=new V.vpe,this.s_keyPress=new V.vpe,this.s_lazyImageLoad=new V.vpe,this.s_lazyImageReady=new V.vpe,this.s_loopFix=new V.vpe,this.s_momentumBounce=new V.vpe,this.s_navigationHide=new V.vpe,this.s_navigationShow=new V.vpe,this.s_observerUpdate=new V.vpe,this.s_orientationchange=new V.vpe,this.s_paginationHide=new V.vpe,this.s_paginationRender=new V.vpe,this.s_paginationShow=new V.vpe,this.s_paginationUpdate=new V.vpe,this.s_progress=new V.vpe,this.s_reachBeginning=new V.vpe,this.s_reachEnd=new V.vpe,this.s_realIndexChange=new V.vpe,this.s_resize=new V.vpe,this.s_scroll=new V.vpe,this.s_scrollbarDragEnd=new V.vpe,this.s_scrollbarDragMove=new V.vpe,this.s_scrollbarDragStart=new V.vpe,this.s_setTransition=new V.vpe,this.s_setTranslate=new V.vpe,this.s_slideChange=new V.vpe,this.s_slideChangeTransitionEnd=new V.vpe,this.s_slideChangeTransitionStart=new V.vpe,this.s_slideNextTransitionEnd=new V.vpe,this.s_slideNextTransitionStart=new V.vpe,this.s_slidePrevTransitionEnd=new V.vpe,this.s_slidePrevTransitionStart=new V.vpe,this.s_slideResetTransitionStart=new V.vpe,this.s_slideResetTransitionEnd=new V.vpe,this.s_sliderMove=new V.vpe,this.s_sliderFirstMove=new V.vpe,this.s_slidesLengthChange=new V.vpe,this.s_slidesGridLengthChange=new V.vpe,this.s_snapGridLengthChange=new V.vpe,this.s_snapIndexChange=new V.vpe,this.s_tap=new V.vpe,this.s_toEdge=new V.vpe,this.s_touchEnd=new V.vpe,this.s_touchMove=new V.vpe,this.s_touchMoveOpposite=new V.vpe,this.s_touchStart=new V.vpe,this.s_transitionEnd=new V.vpe,this.s_transitionStart=new V.vpe,this.s_update=new V.vpe,this.s_zoomChange=new V.vpe,this.s_lock=new V.vpe,this.s_unlock=new V.vpe,this.s_swiper=new V.vpe,this.indexChange=new V.vpe,this._activeSlides=new ns.xQ,this.containerClasses="swiper",this.slidesChanges=M=>{this.slides=M.map((O,z)=>(O.slideIndex=z,O.classNames=this.slideClass||"",O)),this.loop&&!this.loopedSlides&&this.calcLoopedSlides(),this.virtual?this.swiperRef&&this.swiperRef.virtual&&this._ngZone.runOutsideAngular(()=>{this.swiperRef.virtual.slides=this.slides,this.swiperRef.virtual.update(!0)}):this.loopedSlides&&(this.prependSlides=(0,jr.of)(this.slides.slice(this.slides.length-this.loopedSlides)),this.appendSlides=(0,jr.of)(this.slides.slice(0,this.loopedSlides))),this._changeDetectorRef.detectChanges()},this.style=null,this.updateVirtualSlides=M=>{!this.swiperRef||this.currentVirtualData&&this.currentVirtualData.from===M.from&&this.currentVirtualData.to===M.to&&this.currentVirtualData.offset===M.offset||(this.style=this.swiperRef.isHorizontal()?{[this.swiperRef.rtlTranslate?"right":"left"]:`${M.offset}px`}:{top:`${M.offset}px`},this.currentVirtualData=M,this._activeSlides.next(M.slides),this._ngZone.run(()=>{this._changeDetectorRef.detectChanges()}),this._ngZone.runOutsideAngular(()=>{this.swiperRef.updateSlides(),this.swiperRef.updateProgress(),this.swiperRef.updateSlidesClasses(),this.swiperRef.lazy&&this.swiperRef.params.lazy.enabled&&this.swiperRef.lazy.load(),this.swiperRef.virtual.update(!0)}))}}set navigation(l){var d,b,C;const M="boolean"!=typeof this._navigation&&""!==this._navigation?null===(d=this._navigation)||void 0===d?void 0:d.nextEl:null,O="boolean"!=typeof this._navigation&&""!==this._navigation?null===(b=this._navigation)||void 0===b?void 0:b.prevEl:null;this._navigation=So(l,{nextEl:M||null,prevEl:O||null}),this.showNavigation=!(!0!==ji(l)||this._navigation&&"boolean"!=typeof this._navigation&&this._navigation.prevEl!==(null===(C=this._prevElRef)||void 0===C?void 0:C.nativeElement)&&(null!==this._navigation.prevEl||null!==this._navigation.nextEl)&&("string"==typeof this._navigation.nextEl||"string"==typeof this._navigation.prevEl||"object"==typeof this._navigation.nextEl||"object"==typeof this._navigation.prevEl))}get navigation(){return this._navigation}set pagination(l){var d;const b="boolean"!=typeof this._pagination&&""!==this._pagination?null===(d=this._pagination)||void 0===d?void 0:d.el:null;this._pagination=So(l,{el:b||null}),this.showPagination=bo(l,this._pagination,this._paginationElRef)}get pagination(){return this._pagination}set scrollbar(l){var d;const b="boolean"!=typeof this._scrollbar&&""!==this._scrollbar?null===(d=this._scrollbar)||void 0===d?void 0:d.el:null;this._scrollbar=So(l,{el:b||null}),this.showScrollbar=bo(l,this._scrollbar,this._scrollbarElRef)}get scrollbar(){return this._scrollbar}set virtual(l){this._virtual=So(l)}get virtual(){return this._virtual}set index(l){console.warn("`[(index)]` prop is deprecated and will be removed in upcoming versions"),this.setIndex(l)}set config(l){this.updateSwiper(l);const{params:d}=Is(l);Object.assign(this,d)}set prevElRef(l){this._prevElRef=l,this._setElement(l,this.navigation,"navigation","prevEl")}set nextElRef(l){this._nextElRef=l,this._setElement(l,this.navigation,"navigation","nextEl")}set scrollbarElRef(l){this._scrollbarElRef=l,this._setElement(l,this.scrollbar,"scrollbar")}set paginationElRef(l){this._paginationElRef=l,this._setElement(l,this.pagination,"pagination")}get activeSlides(){return this.virtual?this._activeSlides:(0,jr.of)(this.slides)}get zoomContainerClass(){return this.zoom&&"boolean"!=typeof this.zoom?this.zoom.containerClass:"swiper-zoom-container"}_setElement(l,d,b,C="el"){if(!d||!l)return;if(l.nativeElement){if(d[C]===l.nativeElement)return;d[C]=l.nativeElement}const M={};M[b]=!0,this.updateInitSwiper(M)}ngOnInit(){const{params:l}=Is(this);Object.assign(this,l)}ngAfterViewInit(){this.childrenSlidesInit(),this.initSwiper(),this._changeDetectorRef.detectChanges(),setTimeout(()=>{this.s_swiper.emit(this.swiperRef)})}childrenSlidesInit(){this.slidesChanges(this.slidesEl),this.slidesEl.changes.subscribe(this.slidesChanges)}get isSwiperActive(){return this.swiperRef&&!this.swiperRef.destroyed}initSwiper(){const{params:l}=Is(this);Object.assign(this,l),this._ngZone.runOutsideAngular(()=>{l.init=!1,l.virtual||(l.observer=!0),l.onAny=(z,...R)=>{const D=this["s_"+z];D&&D.emit(...R)},Object.assign(l.on,{_containerClasses:(z,R)=>{setTimeout(()=>{this.containerClasses=R})},_slideClasses:(z,R)=>{R.forEach(({slideEl:D,classNames:P},q)=>{const W=D.getAttribute("data-swiper-slide-index"),K=W?parseInt(W):q;if(this.virtual){const ae=this.slides.find(re=>re.virtualIndex&&re.virtualIndex===K);if(ae)return void(ae.classNames=P)}this.slides[K]&&(this.slides[K].classNames=P)}),this._changeDetectorRef.detectChanges()}});const M=new qr(l);if(M.loopCreate=()=>{},M.loopDestroy=()=>{},l.loop&&(M.loopedSlides=this.loopedSlides),M.virtual&&void 0!==M.params.virtual&&"boolean"!=typeof M.params.virtual&&M.params.virtual.enabled){M.virtual.slides=this.slides;const z={cache:!1,slides:this.slides,renderExternal:this.updateVirtualSlides,renderExternalUpdate:!1};wo(M.params.virtual,z),wo(M.originalParams.virtual,z)}if((0,Ri.NF)(this._platformId)){this.swiperRef=M.init(this.elementRef.nativeElement);const z=void 0!==this.swiperRef.params.virtual&&"boolean"!=typeof this.swiperRef.params.virtual&&this.swiperRef.params.virtual.enabled;this.swiperRef.virtual&&z&&this.swiperRef.virtual.update(!0),this._changeDetectorRef.detectChanges(),M.on("slideChange",()=>{this.indexChange.emit(this.swiperRef.realIndex)})}})}ngOnChanges(l){this.updateSwiper(l),this._changeDetectorRef.detectChanges()}updateInitSwiper(l){!l||!this.swiperRef||this.swiperRef.destroyed||this._ngZone.runOutsideAngular(()=>{const{pagination:b,navigation:C,scrollbar:M,thumbs:z}=this.swiperRef;l.pagination&&(this.pagination&&"boolean"!=typeof this.pagination&&this.pagination.el&&b&&!b.el?(this.updateParameter("pagination",this.pagination),b.init(),b.render(),b.update()):(b.destroy(),b.el=null)),l.scrollbar&&(this.scrollbar&&"boolean"!=typeof this.scrollbar&&this.scrollbar.el&&M&&!M.el?(this.updateParameter("scrollbar",this.scrollbar),M.init(),M.updateSize(),M.setTranslate()):(M.destroy(),M.el=null)),l.navigation&&(this.navigation&&"boolean"!=typeof this.navigation&&this.navigation.prevEl&&this.navigation.nextEl&&C&&!C.prevEl&&!C.nextEl?(this.updateParameter("navigation",this.navigation),C.init(),C.update()):C.prevEl&&C.nextEl&&(C.destroy(),C.nextEl=null,C.prevEl=null)),l.thumbs&&this.thumbs&&this.thumbs.swiper&&(this.updateParameter("thumbs",this.thumbs),z.init()&&z.update(!0)),l.controller&&this.controller&&this.controller.control&&(this.swiperRef.controller.control=this.controller.control),this.swiperRef.update()})}updateSwiper(l){this._ngZone.runOutsideAngular(()=>{var d,b;if(!l.config&&l&&this.swiperRef&&!this.swiperRef.destroyed){for(const C in l){if(cl.indexOf(C)>=0)continue;const M=null!==(b=null===(d=l[C])||void 0===d?void 0:d.currentValue)&&void 0!==b?b:l[C];this.updateParameter(C,M)}l.allowSlideNext&&(this.swiperRef.allowSlideNext=this.allowSlideNext),l.allowSlidePrev&&(this.swiperRef.allowSlidePrev=this.allowSlidePrev),l.direction&&this.swiperRef.changeDirection(this.direction,!1),l.breakpoints&&(this.loop&&!this.loopedSlides&&this.calcLoopedSlides(),this.swiperRef.currentBreakpoint=null,this.swiperRef.setBreakpoint()),(l.thumbs||l.controller)&&this.updateInitSwiper(l),this.swiperRef.update()}})}calcLoopedSlides(){if(!this.loop)return;let l=this.slidesPerView;if(this.breakpoints){const b=qr.prototype.getBreakpoint(this.breakpoints),C=b in this.breakpoints?this.breakpoints[b]:void 0;C&&C.slidesPerView&&(l=C.slidesPerView)}if("auto"===l)return this.loopedSlides=this.slides.length,this.slides.length;let d=this.loopedSlides||l;return d?(this.loopAdditionalSlides&&(d+=this.loopAdditionalSlides),d>this.slides.length&&(d=this.slides.length),this.loopedSlides=d,d):void 0}updateParameter(l,d){if(!this.swiperRef||this.swiperRef.destroyed)return;const b=l.replace(/^_/,""),C=Rr(this.swiperRef.params[b]);"enabled"!==b?C&&Rr(d)?wo(this.swiperRef.params[b],d):this.swiperRef.params[b]=d:!0===d?this.swiperRef.enable():!1===d&&this.swiperRef.disable()}setIndex(l,d,b){this.isSwiperActive?l!==this.swiperRef.activeIndex&&this._ngZone.runOutsideAngular(()=>{this.loop?this.swiperRef.slideToLoop(l,d,!b):this.swiperRef.slideTo(l,d,!b)}):this.initialSlide=l}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{var l;null===(l=this.swiperRef)||void 0===l||l.destroy(!0,!1)})}}return o.\u0275fac=function(l){return new(l||o)(V.Y36(V.R0b),V.Y36(V.SBq),V.Y36(V.sBO),V.Y36(V.Lbi))},o.\u0275cmp=V.Xpm({type:o,selectors:[["swiper"],["","swiper",""]],contentQueries:function(l,d,b){if(1&l&&V.Suo(b,as,4),2&l){let C;V.iGM(C=V.CRH())&&(d.slidesEl=C)}},viewQuery:function(l,d){if(1&l&&(V.Gf(jo,5),V.Gf(Dr,5),V.Gf(Wo,5),V.Gf(et,5)),2&l){let b;V.iGM(b=V.CRH())&&(d.prevElRef=b.first),V.iGM(b=V.CRH())&&(d.nextElRef=b.first),V.iGM(b=V.CRH())&&(d.scrollbarElRef=b.first),V.iGM(b=V.CRH())&&(d.paginationElRef=b.first)}},hostVars:2,hostBindings:function(l,d){2&l&&V.Tol(d.containerClasses)},inputs:{enabled:"enabled",on:"on",direction:"direction",touchEventsTarget:"touchEventsTarget",initialSlide:"initialSlide",speed:"speed",cssMode:"cssMode",updateOnWindowResize:"updateOnWindowResize",resizeObserver:"resizeObserver",nested:"nested",focusableElements:"focusableElements",width:"width",height:"height",preventInteractionOnTransition:"preventInteractionOnTransition",userAgent:"userAgent",url:"url",edgeSwipeDetection:"edgeSwipeDetection",edgeSwipeThreshold:"edgeSwipeThreshold",freeMode:"freeMode",autoHeight:"autoHeight",setWrapperSize:"setWrapperSize",virtualTranslate:"virtualTranslate",effect:"effect",breakpoints:"breakpoints",spaceBetween:"spaceBetween",slidesPerView:"slidesPerView",grid:"grid",slidesPerGroup:"slidesPerGroup",slidesPerGroupSkip:"slidesPerGroupSkip",centeredSlides:"centeredSlides",centeredSlidesBounds:"centeredSlidesBounds",slidesOffsetBefore:"slidesOffsetBefore",slidesOffsetAfter:"slidesOffsetAfter",normalizeSlideIndex:"normalizeSlideIndex",centerInsufficientSlides:"centerInsufficientSlides",watchOverflow:"watchOverflow",roundLengths:"roundLengths",touchRatio:"touchRatio",touchAngle:"touchAngle",simulateTouch:"simulateTouch",shortSwipes:"shortSwipes",longSwipes:"longSwipes",longSwipesRatio:"longSwipesRatio",longSwipesMs:"longSwipesMs",followFinger:"followFinger",allowTouchMove:"allowTouchMove",threshold:"threshold",touchMoveStopPropagation:"touchMoveStopPropagation",touchStartPreventDefault:"touchStartPreventDefault",touchStartForcePreventDefault:"touchStartForcePreventDefault",touchReleaseOnEdges:"touchReleaseOnEdges",uniqueNavElements:"uniqueNavElements",resistance:"resistance",resistanceRatio:"resistanceRatio",watchSlidesProgress:"watchSlidesProgress",grabCursor:"grabCursor",preventClicks:"preventClicks",preventClicksPropagation:"preventClicksPropagation",slideToClickedSlide:"slideToClickedSlide",preloadImages:"preloadImages",updateOnImagesReady:"updateOnImagesReady",loop:"loop",loopAdditionalSlides:"loopAdditionalSlides",loopedSlides:"loopedSlides",loopFillGroupWithBlank:"loopFillGroupWithBlank",loopPreventsSlide:"loopPreventsSlide",rewind:"rewind",allowSlidePrev:"allowSlidePrev",allowSlideNext:"allowSlideNext",swipeHandler:"swipeHandler",noSwiping:"noSwiping",noSwipingClass:"noSwipingClass",noSwipingSelector:"noSwipingSelector",passiveListeners:"passiveListeners",containerModifierClass:"containerModifierClass",slideClass:"slideClass",slideBlankClass:"slideBlankClass",slideActiveClass:"slideActiveClass",slideDuplicateActiveClass:"slideDuplicateActiveClass",slideVisibleClass:"slideVisibleClass",slideDuplicateClass:"slideDuplicateClass",slideNextClass:"slideNextClass",slideDuplicateNextClass:"slideDuplicateNextClass",slidePrevClass:"slidePrevClass",slideDuplicatePrevClass:"slideDuplicatePrevClass",wrapperClass:"wrapperClass",runCallbacksOnInit:"runCallbacksOnInit",observeParents:"observeParents",observeSlideChildren:"observeSlideChildren",a11y:"a11y",autoplay:"autoplay",controller:"controller",coverflowEffect:"coverflowEffect",cubeEffect:"cubeEffect",fadeEffect:"fadeEffect",flipEffect:"flipEffect",creativeEffect:"creativeEffect",cardsEffect:"cardsEffect",hashNavigation:"hashNavigation",history:"history",keyboard:"keyboard",lazy:"lazy",mousewheel:"mousewheel",parallax:"parallax",thumbs:"thumbs",zoom:"zoom",class:"class",id:"id",navigation:"navigation",pagination:"pagination",scrollbar:"scrollbar",virtual:"virtual",index:"index",config:"config"},outputs:{s__beforeBreakpoint:"_beforeBreakpoint",s__containerClasses:"_containerClasses",s__slideClass:"_slideClass",s__swiper:"_swiper",s_activeIndexChange:"activeIndexChange",s_afterInit:"afterInit",s_autoplay:"autoplay",s_autoplayStart:"autoplayStart",s_autoplayStop:"autoplayStop",s_beforeDestroy:"beforeDestroy",s_beforeInit:"beforeInit",s_beforeLoopFix:"beforeLoopFix",s_beforeResize:"beforeResize",s_beforeSlideChangeStart:"beforeSlideChangeStart",s_beforeTransitionStart:"beforeTransitionStart",s_breakpoint:"breakpoint",s_changeDirection:"changeDirection",s_click:"click",s_doubleTap:"doubleTap",s_doubleClick:"doubleClick",s_destroy:"destroy",s_fromEdge:"fromEdge",s_hashChange:"hashChange",s_hashSet:"hashSet",s_imagesReady:"imagesReady",s_init:"init",s_keyPress:"keyPress",s_lazyImageLoad:"lazyImageLoad",s_lazyImageReady:"lazyImageReady",s_loopFix:"loopFix",s_momentumBounce:"momentumBounce",s_navigationHide:"navigationHide",s_navigationShow:"navigationShow",s_observerUpdate:"observerUpdate",s_orientationchange:"orientationchange",s_paginationHide:"paginationHide",s_paginationRender:"paginationRender",s_paginationShow:"paginationShow",s_paginationUpdate:"paginationUpdate",s_progress:"progress",s_reachBeginning:"reachBeginning",s_reachEnd:"reachEnd",s_realIndexChange:"realIndexChange",s_resize:"resize",s_scroll:"scroll",s_scrollbarDragEnd:"scrollbarDragEnd",s_scrollbarDragMove:"scrollbarDragMove",s_scrollbarDragStart:"scrollbarDragStart",s_setTransition:"setTransition",s_setTranslate:"setTranslate",s_slideChange:"slideChange",s_slideChangeTransitionEnd:"slideChangeTransitionEnd",s_slideChangeTransitionStart:"slideChangeTransitionStart",s_slideNextTransitionEnd:"slideNextTransitionEnd",s_slideNextTransitionStart:"slideNextTransitionStart",s_slidePrevTransitionEnd:"slidePrevTransitionEnd",s_slidePrevTransitionStart:"slidePrevTransitionStart",s_slideResetTransitionStart:"slideResetTransitionStart",s_slideResetTransitionEnd:"slideResetTransitionEnd",s_sliderMove:"sliderMove",s_sliderFirstMove:"sliderFirstMove",s_slidesLengthChange:"slidesLengthChange",s_slidesGridLengthChange:"slidesGridLengthChange",s_snapGridLengthChange:"snapGridLengthChange",s_snapIndexChange:"snapIndexChange",s_tap:"tap",s_toEdge:"toEdge",s_touchEnd:"touchEnd",s_touchMove:"touchMove",s_touchMoveOpposite:"touchMoveOpposite",s_touchStart:"touchStart",s_transitionEnd:"transitionEnd",s_transitionStart:"transitionStart",s_update:"update",s_zoomChange:"zoomChange",s_lock:"lock",s_unlock:"unlock",s_swiper:"swiper",indexChange:"indexChange"},features:[V.TTD],ngContentSelectors:Ts,decls:13,vars:17,consts:[[4,"ngIf"],["class","swiper-scrollbar",4,"ngIf"],["class","swiper-pagination",4,"ngIf"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["slidesTemplate",""],[1,"swiper-button-prev"],["prevElRef",""],[1,"swiper-button-next"],["nextElRef",""],[1,"swiper-scrollbar"],["scrollbarElRef",""],[1,"swiper-pagination"],["paginationElRef",""],[3,"ngClass","style","ngSwitch",4,"ngFor","ngForOf"],[3,"ngClass","ngSwitch"],[3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(l,d){if(1&l&&(V.F$t(Hr),V.Hsn(0),V.YNc(1,Ct,5,0,"ng-container",0),V.YNc(2,mi,2,0,"div",1),V.YNc(3,Gi,2,0,"div",2),V.TgZ(4,"div",3),V.Hsn(5,1),V.YNc(6,zi,1,0,void 0,4),V.YNc(7,ec,1,0,void 0,4),V.YNc(8,_n,1,0,void 0,4),V.Hsn(9,2),V.qZA(),V.Hsn(10,3),V.YNc(11,Wr,2,3,"ng-template",null,5,V.W1O)),2&l){const b=V.MAs(12);V.xp6(1),V.Q6J("ngIf",d.navigation&&d.showNavigation),V.xp6(1),V.Q6J("ngIf",d.scrollbar&&d.showScrollbar),V.xp6(1),V.Q6J("ngIf",d.pagination&&d.showPagination),V.xp6(1),V.Q6J("ngClass",d.wrapperClass),V.uIk("id",d.id),V.xp6(2),V.Q6J("ngTemplateOutlet",b)("ngTemplateOutletContext",V.VKq(11,Di,d.prependSlides)),V.xp6(1),V.Q6J("ngTemplateOutlet",b)("ngTemplateOutletContext",V.VKq(13,Ht,d.activeSlides)),V.xp6(1),V.Q6J("ngTemplateOutlet",b)("ngTemplateOutletContext",V.VKq(15,Zl,d.appendSlides))}},directives:[Ri.O5,Ri.mk,Ri.tP,Ri.sg,Ri.RF,Ri.n9,Ri.ED],pipes:[Ri.Ov],styles:["\n      swiper {\n        display: block;\n      }\n    "],encapsulation:2,changeDetection:0}),o})(),i=(()=>{class o{}return o.\u0275fac=function(l){return new(l||o)},o.\u0275mod=V.oAB({type:o}),o.\u0275inj=V.cJS({imports:[[Ri.ez]]}),o})();var a=Pn(5924);const r=["swiperStrutture"];function c(o,v){if(1&o&&(V.TgZ(0,"ion-item"),V._uU(1),V.qZA()),2&o){const l=v.$implicit;V.xp6(1),V.Oqu(l)}}function g(o,v){if(1&o&&(V.TgZ(0,"ion-list"),V.YNc(1,c,2,1,"ion-item",13),V.qZA()),2&o){const l=V.oxw();V.xp6(1),V.Q6J("ngForOf",l.comuniCandidati)}}function _(o,v){if(1&o&&(V.TgZ(0,"ion-grid",16),V.TgZ(1,"ion-row",16),V.TgZ(2,"ion-col",17),V.TgZ(3,"h5",18),V._uU(4),V.qZA(),V.qZA(),V.TgZ(5,"ion-col",19),V._UZ(6,"ion-icon",20),V.qZA(),V.qZA(),V.TgZ(7,"ion-row",16),V.TgZ(8,"ion-col",16),V.TgZ(9,"div",21),V._uU(10),V.qZA(),V.qZA(),V.qZA(),V.TgZ(11,"ion-row",16),V.TgZ(12,"ion-col",16),V.TgZ(13,"span",22),V._uU(14),V.qZA(),V.qZA(),V.qZA(),V.TgZ(15,"ion-row",16),V.TgZ(16,"ion-col",16),V.TgZ(17,"span",23),V._uU(18),V.qZA(),V.qZA(),V.qZA(),V.qZA()),2&o){const l=V.oxw(2).$implicit;V.xp6(4),V.Oqu(l.denominazione),V.xp6(6),V.Oqu(l.tipologia),V.xp6(4),V.AsE("",l.indirizzo,", ",l.comune,""),V.xp6(4),V.Oqu(l.nuovaClassificazioneLR11)}}function w(o,v){1&o&&V.YNc(0,_,19,5,"ng-template",15)}function E(o,v){1&o&&(V.ynx(0),V.YNc(1,w,1,0,void 0,14),V.BQk())}const k=function(){return[9]},N=function(){return[12.5510662,45.6331619]};qr.use([function({swiper:o,extendParams:v,on:l}){let d;function b(D,P){const q=o.params.virtual;if(q.cache&&o.virtual.cache[P])return o.virtual.cache[P];const W=Dt(q.renderSlide?q.renderSlide.call(o,D,P):`<div class="${o.params.slideClass}" data-swiper-slide-index="${P}">${D}</div>`);return W.attr("data-swiper-slide-index")||W.attr("data-swiper-slide-index",P),q.cache&&(o.virtual.cache[P]=W),W}function C(D){const{slidesPerView:P,slidesPerGroup:q,centeredSlides:W}=o.params,{addSlidesBefore:K,addSlidesAfter:ae}=o.params.virtual,{from:re,to:ue,slides:_e,slidesGrid:ve,offset:Ee}=o.virtual;o.params.cssMode||o.updateActiveIndex();const Me=o.activeIndex||0;let De,Oe,xe;De=o.rtlTranslate?"right":o.isHorizontal()?"left":"top",W?(Oe=Math.floor(P/2)+q+ae,xe=Math.floor(P/2)+q+K):(Oe=P+(q-1)+ae,xe=q+K);const Te=Math.max((Me||0)-xe,0),Re=Math.min((Me||0)+Oe,_e.length-1),ke=(o.slidesGrid[Te]||0)-(o.slidesGrid[0]||0);function We(){o.updateSlides(),o.updateProgress(),o.updateSlidesClasses(),o.lazy&&o.params.lazy.enabled&&o.lazy.load()}if(Object.assign(o.virtual,{from:Te,to:Re,offset:ke,slidesGrid:o.slidesGrid}),re===Te&&ue===Re&&!D)return o.slidesGrid!==ve&&ke!==Ee&&o.slides.css(De,`${ke}px`),void o.updateProgress();if(o.params.virtual.renderExternal)return o.params.virtual.renderExternal.call(o,{offset:ke,from:Te,to:Re,slides:function(){const Be=[];for(let it=Te;it<=Re;it+=1)Be.push(_e[it]);return Be}()}),void(o.params.virtual.renderExternalUpdate&&We());const Ke=[],mt=[];if(D)o.$wrapperEl.find(`.${o.params.slideClass}`).remove();else for(let _t=re;_t<=ue;_t+=1)(_t<Te||_t>Re)&&o.$wrapperEl.find(`.${o.params.slideClass}[data-swiper-slide-index="${_t}"]`).remove();for(let _t=0;_t<_e.length;_t+=1)_t>=Te&&_t<=Re&&(void 0===ue||D?mt.push(_t):(_t>ue&&mt.push(_t),_t<re&&Ke.push(_t)));mt.forEach(_t=>{o.$wrapperEl.append(b(_e[_t],_t))}),Ke.sort((_t,Be)=>Be-_t).forEach(_t=>{o.$wrapperEl.prepend(b(_e[_t],_t))}),o.$wrapperEl.children(".swiper-slide").css(De,`${ke}px`),We()}v({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}}),o.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]},l("beforeInit",()=>{!o.params.virtual.enabled||(o.virtual.slides=o.params.virtual.slides,o.classNames.push(`${o.params.containerModifierClass}virtual`),o.params.watchSlidesProgress=!0,o.originalParams.watchSlidesProgress=!0,o.params.initialSlide||C())}),l("setTranslate",()=>{!o.params.virtual.enabled||(o.params.cssMode&&!o._immediateVirtual?(clearTimeout(d),d=setTimeout(()=>{C()},100)):C())}),l("init update resize",()=>{!o.params.virtual.enabled||o.params.cssMode&&Aa(o.wrapperEl,"--swiper-virtual-size",`${o.virtualSize}px`)}),Object.assign(o.virtual,{appendSlide:function(D){if("object"==typeof D&&"length"in D)for(let P=0;P<D.length;P+=1)D[P]&&o.virtual.slides.push(D[P]);else o.virtual.slides.push(D);C(!0)},prependSlide:function(D){const P=o.activeIndex;let q=P+1,W=1;if(Array.isArray(D)){for(let K=0;K<D.length;K+=1)D[K]&&o.virtual.slides.unshift(D[K]);q=P+D.length,W=D.length}else o.virtual.slides.unshift(D);if(o.params.virtual.cache){const K=o.virtual.cache,ae={};Object.keys(K).forEach(re=>{const ue=K[re],_e=ue.attr("data-swiper-slide-index");_e&&ue.attr("data-swiper-slide-index",parseInt(_e,10)+W),ae[parseInt(re,10)+W]=ue}),o.virtual.cache=ae}C(!0),o.slideTo(q,0)},removeSlide:function(D){if(null==D)return;let P=o.activeIndex;if(Array.isArray(D))for(let q=D.length-1;q>=0;q-=1)o.virtual.slides.splice(D[q],1),o.params.virtual.cache&&delete o.virtual.cache[D[q]],D[q]<P&&(P-=1),P=Math.max(P,0);else o.virtual.slides.splice(D,1),o.params.virtual.cache&&delete o.virtual.cache[D],D<P&&(P-=1),P=Math.max(P,0);C(!0),o.slideTo(P,0)},removeAllSlides:function(){o.virtual.slides=[],o.params.virtual.cache&&(o.virtual.cache={}),C(!0),o.slideTo(0,0)},update:C})}]);const Q=[{path:"",component:(()=>{class o{constructor(l){this.selectedFeature={lngLat:[0,0]},this.get=Jt.get,this.struttureLabelLayout={visibility:"visible","text-field":["get","denominazione"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,1.25],"text-anchor":"top"},this.strutture=[],this.comuni=[],this.comuniCandidati=[],this.slidesVisible=!1,this.featureTransformer=l}ngOnInit(){}mapLoaded(l){this.homeMap=l,this.homeMap.on("sourcedata",d=>this.sectionSourceAddedCallback(d)),this.homeMap.on("click","strutture-layer",d=>{let b=this.get(d,"features[0]",null);(0,Jt.isNil)(b)||this.handleLayerClick(b)}),this.homeMap.on("click","strutture-label-layer",d=>{let b=this.get(d,"features[0]",null);(0,Jt.isNil)(b)||this.handleLayerClick(b)}),l.resize()}sectionSourceAddedCallback(l){if(this.homeMap.getSource("strutture")&&this.homeMap.isSourceLoaded("strutture")&&l.isSourceLoaded){let d=this.homeMap.queryRenderedFeatures(null,{layers:["strutture-layer"]}).map(b=>this.featureTransformer.featureToStruttura(b));this.comuni=(0,Jt.uniq)(d.map(b=>b.comune)),this.homeMap.off("sourcedata",this.sectionSourceAddedCallback)}}mapZoomEnd(){this.homeMap.getZoom()>10?(this.strutture=this.homeMap.queryRenderedFeatures(null,{layers:["strutture-layer"]}).map(l=>this.featureTransformer.featureToStruttura(l)),this.swiperStrutture.swiperRef.virtual.removeAllSlides(),this.swiperStrutture.swiperRef.updateSlides(),this.swiperStrutture.swiperRef.virtual.update(!0),this.strutture.length&&this.swiperStrutture.swiperRef.slideTo(0)):this.strutture=[]}handleLayerClick(l){this.featureTransformer.featureToStruttura(l);const b=this.get(l,"geometry.coordinates",[]).slice(),M=`<h4 class="tooltip_title">${this.get(l,"properties.denominazione")}</h4>`;(new Ge.Popup).setLngLat(b).setHTML(M).addTo(this.homeMap)}onSearchItemChange(l){let d=(0,Jt.get)(l,"detail.value","");this.comuniCandidati=d?this.comuni.filter(b=>b.toLowerCase().indexOf(d.toLowerCase())>-1):[]}}return o.\u0275fac=function(l){return new(l||o)(V.Y36(il))},o.\u0275cmp=V.Xpm({type:o,selectors:[["app-home"]],viewQuery:function(l,d){if(1&l&&V.Gf(r,5),2&l){let b;V.iGM(b=V.CRH())&&(d.swiperStrutture=b.first)}},decls:14,vars:16,consts:[[3,"fullscreen"],["id","container"],[1,"search_container"],["debounce","500","type","text",3,"ionChange"],[4,"ngIf"],["id","mapContainer"],[3,"attributionControl","zoom","center","mapLoad","zoomEnd"],["homeMap",""],["id","strutture",3,"data"],["id","strutture-label-layer","type","symbol","source","strutture",3,"layout"],["id","strutture-layer","type","circle","source","strutture"],[3,"slidesPerView","centeredSlides","spaceBetween","virtual"],["swiperStrutture",""],[4,"ngFor","ngForOf"],[4,"transloco"],["class","struttura_slide","swiperSlide",""],[1,"ion-no-margin"],["size","11",1,"ion-no-margin"],[1,"struttura_slide_titolo"],["size","1",1,"ion-no-margin"],["name","information-circle-outline"],[1,"struttura_slide_tipologia"],[1,"struttura_slide_indirizzo"],[1,"struttura_slide_classificazione"]],template:function(l,d){1&l&&(V.TgZ(0,"ion-content",0),V.TgZ(1,"div",1),V.TgZ(2,"div",2),V.TgZ(3,"ion-searchbar",3),V.NdJ("ionChange",function(C){return d.onSearchItemChange(C)}),V.qZA(),V.YNc(4,g,2,1,"ion-list",4),V.qZA(),V.TgZ(5,"div",5),V.TgZ(6,"mgl-map",6,7),V.NdJ("mapLoad",function(C){return d.mapLoaded(C)})("zoomEnd",function(){return d.mapZoomEnd()}),V._UZ(8,"mgl-geojson-source",8),V._UZ(9,"mgl-layer",9),V._UZ(10,"mgl-layer",10),V.qZA(),V.qZA(),V.TgZ(11,"swiper",11,12),V.YNc(13,E,2,0,"ng-container",13),V.qZA(),V.qZA(),V.qZA()),2&l&&(V.Q6J("fullscreen",!0),V.xp6(4),V.Q6J("ngIf",d.comuniCandidati.length),V.xp6(2),V.Akn("./assets/map-styles/style-dark.json"),V.Q6J("attributionControl",!1)("zoom",V.DdM(14,k))("center",V.DdM(15,N)),V.xp6(2),V.Q6J("data","./assets/data/strutture.json"),V.xp6(1),V.Q6J("layout",d.struttureLabelLayout),V.xp6(2),V.Q6J("slidesPerView",1.5)("centeredSlides",!0)("spaceBetween",10)("virtual",!0),V.xp6(2),V.Q6J("ngForOf",d.strutture))},directives:[he.W2,he.VI,he.j9,Ri.O5,os,Ss,ma,pl,Ri.sg,he.q_,he.Ie,a.KI,as,he.jY,he.Nd,he.wI,he.gu],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0}#mapContainer[_ngcontent-%COMP%]{width:100vw;height:100vh;position:absolute;top:0;margin:0;padding:0}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}mgl-map[_ngcontent-%COMP%], .maplibregl-canvas[_ngcontent-%COMP%]{height:100%;width:100%}.maplibregl-canvas-container[_ngcontent-%COMP%]{height:100%}.swiper[_ngcontent-%COMP%]{height:25vh;top:75vh}.swiper[_ngcontent-%COMP%]     .swiper-slide{background-color:#fff;border-radius:14px;color:var(--ionic-primary, black)}.search_container[_ngcontent-%COMP%]{z-index:100;position:absolute;margin:auto;width:100%}"]}),o})()}];let Y=(()=>{class o{}return o.\u0275fac=function(l){return new(l||o)},o.\u0275mod=V.oAB({type:o}),o.\u0275inj=V.cJS({imports:[[Bi.Bz.forChild(Q)],Bi.Bz]}),o})(),le=(()=>{class o{}return o.\u0275fac=function(l){return new(l||o)},o.\u0275mod=V.oAB({type:o}),o.\u0275inj=V.cJS({imports:[[Ri.ez,f.u5,he.Pc,Y,Fa,i,a.y4]]}),o})()}}]);